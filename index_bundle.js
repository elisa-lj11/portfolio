/*! For license information please see index_bundle.js.LICENSE.txt */
(()=>{"use strict";var e,t,n={56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},o=[],s=0;s<e.length;s++){var l=e[s],c=r.base?l[0]+r.base:l[0],u=a[c]||0,d="".concat(c," ").concat(u);a[c]=u+1;var h=n(d),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(p);else{var f=i(p,r);r.byIndex=s,t.splice(s,0,{identifier:d,updater:f,references:1})}o.push(d)}return o}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var a=r(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<a.length;o++){var s=n(a[o]);t[s].references--}for(var l=r(e,i),c=0;c<a.length;c++){var u=n(a[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}a=l}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},157:(e,t,n)=>{n.d(t,{A:()=>h});var r=n(601),i=n.n(r),a=n(314),o=n.n(a),s=n(417),l=n.n(s),c=new URL(n(448),n.b),u=o()(i()),d=l()(c);u.push([e.id,`/* fonts.css */\n\n@font-face {\n  font-family: 'Inter';\n  src: url(${d});\n}\n\nbody {\n  font-family: 'Inter', sans-serif;\n  font-weight: 300;\n}`,""]);const h=u},159:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},162:(e,t,n)=>{var r=n(540),i=n(888),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=i.useSyncExternalStore,s=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var d=s(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=c(function(){function e(e){if(!l){if(l=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return s=t}return s=e}if(t=s,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?(o=e,t):(o=e,s=n)}var o,s,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,i]);var p=o(e,d[0],d[1]);return l(function(){h.hasValue=!0,h.value=p},[p]),u(p),p}},194:(e,t,n)=>{e.exports=n(225)},212:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(601),i=n.n(r),a=n(314),o=n.n(a)()(i());o.push([e.id,"/* PageTemplate.css */\n\nbody {\n  margin: 0;\n  background: linear-gradient(black, #16122b); /* Dark blackish-purple background */\n  color: white; /* White text color */\n  height: 100vh; /* Full viewport height */\n  display: flex;\n  flex-direction: column; /* Ensure body content flows vertically */\n  overflow-y: auto; /* Prevent body scrolling */\n  --vh: 100vh;\n}\n\n.page-template {\n  display: flex;\n  flex-direction: column;\n  height: 100vh; /* Full viewport height for the entire page */\n  overflow: hidden;\n  position: relative;\n}\n\nheader {\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 50px;\n  width: 100%; /* Make header span the full width */\n  padding: 5px 20px;\n  background: black;\n  color: white;\n  z-index: 200; /* Ensure the header stays above content and node labels that don't clear quickly enough */\n  border-bottom: 2px solid #db13bd;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.dropdown {\n  position: absolute;\n  left: 50%; /* Start dropdown at the horizontal center */\n  transform: translateX(-50%); /* Offset by 50% of its width to fully center */\n  text-align: center;\n  max-width: auto;\n  padding: 5px;\n  border-radius: 5px; /* Rounded corners */\n}\n\n.dropdown select {\n  padding: 5px;\n  font-size: 16px;\n  color: white; /* Text color */\n  background-color: #2d2d2d; /* Background color of the dropdown */\n  border: 1px solid rgba(0, 0, 0, 0.1); /* Border for the dropdown */\n  border-radius: 5px; /* Rounded corners */\n  cursor: pointer; /* Change cursor on hover */\n}\n\n/* Custom styles for the selected option */\n.dropdown select option {\n  background-color: #2d2d2d; /* Background color for options */\n  color: white; /* Text color for options */\n}\n\n/* Optional: custom styles for the dropdown when focused */\n.dropdown select:focus {\n  outline: none; /* Remove default focus outline */\n  border: 1px solid #db13bd; /* Optional: change border color on focus */\n}\n\n/* Style for selected option (no direct CSS for this in standard select) */\n.dropdown select option:checked {\n  background-color: #db13bd; /* Background color for selected option */\n  color: white; /* Text color for selected option */\n}\n\nmain {\n  flex: 1; /* Let the main content take up remaining space */\n  overflow-y: auto; /* Allow the main content to scroll */\n  overflow-x: hidden; /* Don't allow horizontal scrolling */\n  margin-top: 60px; /* Push content down so it's not hidden by the header */\n  position: relative; /* To ensure scrollbar stays visible */\n}\n\n.content {\n  margin: 0 auto; /* Center the article */\n  padding-top: 5%;\n  padding-left: 20%; /* Padding around the content */\n  padding-right: 20%; /* Padding around the content */\n  padding-bottom: 50px;\n  box-sizing: border-box; /* Include padding in height calculation */\n}\n\nfigcaption {\n  font-style: italic;\n}\n\n.interaction-instructions {\n  display: flex;\n  justify-content: center;\n  font-weight: bold;\n  font-size: 20px;\n  color: #706EF5;\n}\n\n.video {\n  position: relative;\n  overflow: hidden;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n}\n\n.video-youtube {\n  position: relative;\n  overflow: hidden;\n  align-items: center;\n  width: 100%;\n  padding-top: 56.25%; /* 16:9 Aspect Ratio (divide 9 by 16 = 0.5625) */\n}\n\n.video-vertical {\n  height: 100vh;\n  max-height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.responsive-video {\n  width: 100%;\n  height: auto;\n  max-height: 60vh; /* Maintain the maximum height */\n  object-fit: contain; /* Ensure the video scales correctly */\n}\n\n.responsive-iframe {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n}\n\n/* Custom scrollbar styling */\nmain::-webkit-scrollbar {\n  width: 12px;\n}\n\nmain::-webkit-scrollbar-thumb {\n  background: #444; /* Dark scrollbar thumb */\n  border-radius: 6px; /* Rounded edges for scrollbar thumb */\n}\n\nmain::-webkit-scrollbar-track {\n  background: #2d2a40; /* Background for the scrollbar track */\n}\n\nh1, h2, h3 {\n  color: #ffffff; /* White color for headings */\n  margin-top: 0; /* Remove top margin from headings */\n}\n\n.grid-container {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr); /* 3 buttons per row */\n  gap: 30px; /* Space between buttons */\n  padding: 20px; /* Padding around the grid */\n}\n\n.button-accessible {\n  user-select: none;\n  text-decoration: none; /* Remove underline from links */\n  color: inherit; /* Use the inherited color */\n}\n\n.button-title {\n  display: flex;\n  text-align: center;\n  justify-content: center; /* Center the text horizontally */\n  align-items: center; /* Center the text vertically */\n  width: 100%; /* Full width of the parent */\n  height: 100px; /* Fixed height for square buttons */\n  background-size: cover; /* Cover the button with the background image */\n  background-position: center; /* Center the image */\n  border: 2px solid transparent; /* Default border */\n  border-radius: 8px; /* Rounded corners */\n  transition: border 0.3s ease; /* Smooth transition for border */\n  position: relative; /* Positioning context for the overlay */\n  color: white; /* Change text color */\n  font-weight: normal; /* Make text bold */\n}\n\n.button-title::after {\n  content: \"\"; /* Empty content for the overlay */\n  position: absolute; /* Position it absolutely within the button */\n  top: 0; /* Cover the top */\n  left: 0; /* Cover the left */\n  right: 0; /* Cover the right */\n  bottom: 0; /* Cover the bottom */\n  background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black overlay */\n  border-radius: 8px; /* Match button border radius */\n  z-index: 1; /* Layer above the background but below the text */\n}\n\n.button-title span {\n  z-index: 2; /* Bring text above the overlay */\n  position: relative; /* Positioning context for text */\n}\n\n.button-accessible:hover .button-title {\n  border: 2px solid #db13bd; /* Change border color on hover */\n  font-weight: bold; /* Make text bold */\n}\n\np, ol, ul {\n  line-height: 1.6; /* Increase line height for better readability */\n}\n\na {\n  color: #db13bd;\n}\n\n.social-media-container {\n  display: flex;\n  justify-content: space-around; /* Evenly space out items */\n  align-items: center; /* Center items vertically */\n  flex-wrap: wrap; /* Wrap items if they overflow */\n  padding: 20px; /* Add padding around the container */\n  width: 100%; /* Full width container */\n  box-sizing: border-box; /* Ensure padding doesn't affect width */\n}\n\na.social-media {\n  width: auto;\n  display: inline-flex;\n  align-items: center;  /* Vertically aligns the image and text */\n  justify-content: flex-start;\n  padding-top: 5px;\n  padding-bottom: 5px;\n}\n\nimg {\n  max-width: 100%;  /* Ensure the image scales down */\n  height: auto;     /* Maintain aspect ratio */\n  display: block;   /* Remove potential extra space */\n  margin: 0 auto;   /* Center the image horizontally */\n  border-radius: 5px; /* Add some rounded corners */\n}\n\nimg.social-media {\n  margin: 0; /* Override the parent img setting */\n  width: 20px;\n  height: auto;\n  display: inline-block;\n  margin-right: 5px;\n}\n\nbutton.home {\n  display: flex;\n  align-items: center; /* Vertically center the image and text */\n  margin-right: auto; /* Push button to the left */\n  background: none;\n  color: white;\n  padding: 5px 10px;\n  font-size: 16px;\n  cursor: pointer;\n  border: none;\n}\n\nbutton.home:hover {\n  font-weight: bold;\n}\n\nhr.solid {\n  border-top: 1px solid #bbb;\n  margin-top: 40px;\n  margin-bottom: 40px;\n}\n\n.footer {\n  padding: 20px;\n  background: #111;\n  color: #b0b0b0;\n  text-align: center;\n}\n\n/* Media query for small screens */\n@media (pointer:none), (pointer:coarse) {\n  body {\n    --vh: calc(var(--vh, 1vh) * 100); /* Recalculate */\n  }\n\n  header {\n    flex-direction: row; /* Stack elements horizontally */\n    align-items: flex-start; /* Align to the left */\n  }\n\n  .content {\n    margin: 0 auto; /* Center the article */\n    padding-top: 5%;\n    padding-left: 5%; /* Padding around the content */\n    padding-right: 5%; /* Padding around the content */\n    padding-bottom: 80px;\n    box-sizing: border-box; /* Include padding in height calculation */\n  }\n\n  .dropdown {\n    position: static; /* Allow dropdown to follow normal flow */\n    transform: none;\n    width: 100%; /* Make the dropdown take the full width */\n    max-width: 100%; /* Ensure it doesnâ€™t overflow the container */\n    margin-left: 10px; /* Add space between button and dropdown */\n    margin-right: 10px;\n  }\n\n  button.home {\n    margin-right: 10px; /* Add space between button and dropdown */\n  }\n\n  button.home span {\n    display: none; /* Hides the next sibling span */\n  }\n\n  img {\n    width: 100%; /* Make all images fit the full width of their container */\n    height: auto; /* Maintain aspect ratio */\n  }\n\n  /* Create exception for header \"Go back to space\" image */\n  img.galaxy-image {\n    width: 40px;\n  }\n\n  /* Hide scrollbar for webkit browsers */\n  main::-webkit-scrollbar {\n    display: none; /* Hide scrollbar */\n  }\n}",""]);const s=o},221:(e,t,n)=>{var r=n(540);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var o={d:{f:a,r:function(){throw Error(i(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},s=Symbol.for("react.portal"),l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"==typeof e&&(t=t?"string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"==typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"==typeof t.integrity?t.integrity:void 0,a="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:a}):"script"===n&&o.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:a,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,r=c(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:r,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"==typeof e)if(t){var n=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.0"},225:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>a(l,n))c<i&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v=!1,y="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,x="undefined"!=typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,S||(S=!0,E());else{var t=r(u);null!==t&&I(_,t.startTime-e)}}var E,S=!1,M=-1,T=5,A=-1;function C(){return!(!v&&t.unstable_now()-A<T)}function R(){if(v=!1,S){var e=t.unstable_now();A=e;var n=!0;try{e:{m=!1,g&&(g=!1,b(M),M=-1),f=!0;var a=p;try{t:{for(w(e),h=r(c);null!==h&&!(h.expirationTime>e&&C());){var o=h.callback;if("function"==typeof o){h.callback=null,p=h.priorityLevel;var s=o(h.expirationTime<=e);if(e=t.unstable_now(),"function"==typeof s){h.callback=s,w(e),n=!0;break t}h===r(c)&&i(c),w(e)}else i(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&I(_,l.startTime-e),n=!1}}break e}finally{h=null,p=a,f=!1}n=void 0}}finally{n?E():S=!1}}}if("function"==typeof x)E=function(){x(R)};else if("undefined"!=typeof MessageChannel){var P=new MessageChannel,k=P.port2;P.port1.onmessage=R,E=function(){k.postMessage(null)}}else E=function(){y(R,0)};function I(e,n){M=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?o+a:o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(b(M),M=-1):g=!0,I(_,a-o))):(e.sortIndex=s,n(c,e),m||f||(m=!0,S||(S=!0,E()))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},242:(e,t,n)=>{e.exports=n(162)},247:(e,t,n)=>{var r=n(194),i=n(540),a=n(961);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function l(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function c(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function u(e){if(s(e)!==e)throw Error(o(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),x=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope");var T=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var A=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var C=Symbol.iterator;function R(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=C&&e[C]||e["@@iterator"])?e:null}var P=Symbol.for("react.client.reference");function k(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===P?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case g:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case _:return"Suspense";case E:return"SuspenseList";case T:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case m:return"Portal";case x:return e.displayName||"Context";case b:return(e._context.displayName||"Context")+".Consumer";case w:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case S:return null!==(t=e.displayName||null)?t:k(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return k(e(t))}catch(e){}}return null}var I=Array.isArray,L=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,N=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D={pending:!1,data:null,method:null,action:null},U=[],O=-1;function F(e){return{current:e}}function z(e){0>O||(e.current=U[O],U[O]=null,O--)}function B(e,t){O++,U[O]=e.current,e.current=t}var H,V,j=F(null),W=F(null),G=F(null),X=F(null);function q(e,t){switch(B(G,t),B(W,e),B(j,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?gd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=vd(t=gd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(j),B(j,e)}function Y(){z(j),z(W),z(G)}function $(e){null!==e.memoizedState&&B(X,e);var t=j.current,n=vd(t,e.type);t!==n&&(B(W,e),B(j,n))}function K(e){W.current===e&&(z(j),z(W)),X.current===e&&(z(X),ch._currentValue=D)}function Z(e){if(void 0===H)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);H=t&&t[1]||"",V=-1<e.stack.indexOf("\n    at")?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+H+e+V}var J=!1;function Q(e,t){if(!e||J)return"";J=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(e){if(e&&r&&"string"==typeof e.stack)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var l=o.split("\n"),c=s.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{J=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Z(n):""}function ee(e,t){switch(e.tag){case 26:case 27:case 5:return Z(e.type);case 16:return Z("Lazy");case 13:return e.child!==t&&null!==t?Z("Suspense Fallback"):Z("Suspense");case 19:return Z("SuspenseList");case 0:case 15:return Q(e.type,!1);case 11:return Q(e.type.render,!1);case 1:return Q(e.type,!0);case 31:return Z("Activity");default:return""}}function te(e){try{var t="",n=null;do{t+=ee(e,n),n=e,e=e.return}while(e);return t}catch(e){return"\nError generating stack: "+e.message+"\n"+e.stack}}var ne=Object.prototype.hasOwnProperty,re=r.unstable_scheduleCallback,ie=r.unstable_cancelCallback,ae=r.unstable_shouldYield,oe=r.unstable_requestPaint,se=r.unstable_now,le=r.unstable_getCurrentPriorityLevel,ce=r.unstable_ImmediatePriority,ue=r.unstable_UserBlockingPriority,de=r.unstable_NormalPriority,he=r.unstable_LowPriority,pe=r.unstable_IdlePriority,fe=r.log,me=r.unstable_setDisableYieldValue,ge=null,ve=null;function ye(e){if("function"==typeof fe&&me(e),ve&&"function"==typeof ve.setStrictMode)try{ve.setStrictMode(ge,e)}catch(e){}}var be=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(xe(e)/we|0)|0},xe=Math.log,we=Math.LN2,_e=256,Ee=262144,Se=4194304;function Me(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Te(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,a=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=134217727&r;return 0!==s?0!==(r=s&~a)?i=Me(r):0!==(o&=s)?i=Me(o):n||0!==(n=s&~e)&&(i=Me(n)):0!==(s=r&~a)?i=Me(s):0!==o?i=Me(o):n||0!==(n=r&~e)&&(i=Me(n)),0===i?0:0!==t&&t!==i&&0===(t&a)&&((a=i&-i)>=(n=t&-t)||32===a&&4194048&n)?t:i}function Ae(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ce(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Re(){var e=Se;return!(62914560&(Se<<=1))&&(Se=4194304),e}function Pe(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ke(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ie(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-be(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function Le(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-be(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Ne(e,t){var n=t&-t;return 0!==((n=42&n?1:De(n))&(e.suspendedLanes|t))?0:n}function De(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ue(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Oe(){var e=N.p;return 0!==e?e:void 0===(e=window.event)?32:Eh(e.type)}function Fe(e,t){var n=N.p;try{return N.p=e,t()}finally{N.p=n}}var ze=Math.random().toString(36).slice(2),Be="__reactFiber$"+ze,He="__reactProps$"+ze,Ve="__reactContainer$"+ze,je="__reactEvents$"+ze,We="__reactListeners$"+ze,Ge="__reactHandles$"+ze,Xe="__reactResources$"+ze,qe="__reactMarker$"+ze;function Ye(e){delete e[Be],delete e[He],delete e[je],delete e[We],delete e[Ge]}function $e(e){var t=e[Be];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ve]||n[Be]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Dd(e);null!==e;){if(n=e[Be])return n;e=Dd(e)}return t}n=(e=n).parentNode}return null}function Ke(e){if(e=e[Be]||e[Ve]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Ze(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function Je(e){var t=e[Xe];return t||(t=e[Xe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Qe(e){e[qe]=!0}var et=new Set,tt={};function nt(e,t){rt(e,t),rt(e+"Capture",t)}function rt(e,t){for(tt[e]=t,e=0;e<t.length;e++)et.add(t[e])}var it=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),at={},ot={};function st(e,t,n){if(i=t,ne.call(ot,i)||!ne.call(at,i)&&(it.test(i)?ot[i]=!0:(at[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function lt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ct(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function ut(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function dt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ht(e){if(!e._valueTracker){var t=dt(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=dt(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var mt=/[\n"\\]/g;function gt(e){return e.replace(mt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function vt(e,t,n,r,i,a,o,s){e.name="",null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ut(t)):e.value!==""+ut(t)&&(e.value=""+ut(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?bt(e,o,ut(t)):null!=n?bt(e,o,ut(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=a&&(e.defaultChecked=!!a),null!=i&&(e.checked=i&&"function"!=typeof i&&"symbol"!=typeof i),null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s?e.name=""+ut(s):e.removeAttribute("name")}function yt(e,t,n,r,i,a,o,s){if(null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a&&(e.type=a),null!=t||null!=n){if(("submit"===a||"reset"===a)&&null==t)return void ht(e);n=null!=n?""+ut(n):"",t=null!=t?""+ut(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=null!=r?r:i)&&"symbol"!=typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o&&(e.name=o),ht(e)}function bt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function xt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ut(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ut(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ut(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function _t(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(o(92));if(I(r)){if(1<r.length)throw Error(o(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ut(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),ht(e)}function Et(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Mt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||St.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Tt(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&Mt(e,i,r)}else for(var a in t)t.hasOwnProperty(a)&&Mt(e,a,t[a])}function At(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pt(e){return Rt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function kt(){}var It=null;function Lt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Nt=null,Dt=null;function Ut(e){var t=Ke(e);if(t&&(e=t.stateNode)){var n=e[He]||null;e:switch(e=t.stateNode,t.type){case"input":if(vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+gt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[He]||null;if(!i)throw Error(o(90));vt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&pt(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&xt(e,!!n.multiple,t,!1)}}}var Ot=!1;function Ft(e,t,n){if(Ot)return e(t,n);Ot=!0;try{return e(t)}finally{if(Ot=!1,(null!==Nt||null!==Dt)&&(Jc(),Nt&&(t=Nt,e=Dt,Dt=Nt=null,Ut(t),e)))for(t=0;t<e.length;t++)Ut(e[t])}}function zt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[He]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(o(231,t,typeof n));return n}var Bt=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Ht=!1;if(Bt)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Ht=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch(e){Ht=!1}var jt=null,Wt=null,Gt=null;function Xt(){if(Gt)return Gt;var e,t,n=Wt,r=n.length,i="value"in jt?jt.value:jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Gt=i.slice(e,1<t?1-t:void 0)}function qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Yt(){return!0}function $t(){return!1}function Kt(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Yt:$t,this.isPropagationStopped=$t,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Yt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Yt)},persist:function(){},isPersistent:Yt}),t}var Zt,Jt,Qt,en={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tn=Kt(en),nn=h({},en,{view:0,detail:0}),rn=Kt(nn),an=h({},nn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qt&&(Qt&&"mousemove"===e.type?(Zt=e.screenX-Qt.screenX,Jt=e.screenY-Qt.screenY):Jt=Zt=0,Qt=e),Zt)},movementY:function(e){return"movementY"in e?e.movementY:Jt}}),on=Kt(an),sn=Kt(h({},an,{dataTransfer:0})),ln=Kt(h({},nn,{relatedTarget:0})),cn=Kt(h({},en,{animationName:0,elapsedTime:0,pseudoElement:0})),un=Kt(h({},en,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),dn=Kt(h({},en,{data:0})),hn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=fn[e])&&!!t[e]}function gn(){return mn}var vn=Kt(h({},nn,{key:function(e){if(e.key){var t=hn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?pn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gn,charCode:function(e){return"keypress"===e.type?qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),yn=Kt(h({},an,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),bn=Kt(h({},nn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gn})),xn=Kt(h({},en,{propertyName:0,elapsedTime:0,pseudoElement:0})),wn=Kt(h({},an,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),_n=Kt(h({},en,{newState:0,oldState:0})),En=[9,13,27,32],Sn=Bt&&"CompositionEvent"in window,Mn=null;Bt&&"documentMode"in document&&(Mn=document.documentMode);var Tn=Bt&&"TextEvent"in window&&!Mn,An=Bt&&(!Sn||Mn&&8<Mn&&11>=Mn),Cn=String.fromCharCode(32),Rn=!1;function Pn(e,t){switch(e){case"keyup":return-1!==En.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var In=!1,Ln={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ln[e.type]:"textarea"===t}function Dn(e,t,n,r){Nt?Dt?Dt.push(r):Dt=[r]:Nt=r,0<(t=nd(t,"onChange")).length&&(n=new tn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Un=null,On=null;function Fn(e){Yu(e,0)}function zn(e){if(pt(Ze(e)))return e}function Bn(e,t){if("change"===e)return t}var Hn=!1;if(Bt){var Vn;if(Bt){var jn="oninput"in document;if(!jn){var Wn=document.createElement("div");Wn.setAttribute("oninput","return;"),jn="function"==typeof Wn.oninput}Vn=jn}else Vn=!1;Hn=Vn&&(!document.documentMode||9<document.documentMode)}function Gn(){Un&&(Un.detachEvent("onpropertychange",Xn),On=Un=null)}function Xn(e){if("value"===e.propertyName&&zn(On)){var t=[];Dn(t,On,e,Lt(e)),Ft(Fn,t)}}function qn(e,t,n){"focusin"===e?(Gn(),On=n,(Un=t).attachEvent("onpropertychange",Xn)):"focusout"===e&&Gn()}function Yn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return zn(On)}function $n(e,t){if("click"===e)return zn(t)}function Kn(e,t){if("input"===e||"change"===e)return zn(t)}var Zn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Jn(e,t){if(Zn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ne.call(t,i)||!Zn(e[i],t[i]))return!1}return!0}function Qn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function er(e,t){var n,r=Qn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Qn(r)}}function tr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?tr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function nr(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function rr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ir=Bt&&"documentMode"in document&&11>=document.documentMode,ar=null,or=null,sr=null,lr=!1;function cr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;lr||null==ar||ar!==ft(r)||(r="selectionStart"in(r=ar)&&rr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},sr&&Jn(sr,r)||(sr=r,0<(r=nd(or,"onSelect")).length&&(t=new tn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ar)))}function ur(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var dr={animationend:ur("Animation","AnimationEnd"),animationiteration:ur("Animation","AnimationIteration"),animationstart:ur("Animation","AnimationStart"),transitionrun:ur("Transition","TransitionRun"),transitionstart:ur("Transition","TransitionStart"),transitioncancel:ur("Transition","TransitionCancel"),transitionend:ur("Transition","TransitionEnd")},hr={},pr={};function fr(e){if(hr[e])return hr[e];if(!dr[e])return e;var t,n=dr[e];for(t in n)if(n.hasOwnProperty(t)&&t in pr)return hr[e]=n[t];return e}Bt&&(pr=document.createElement("div").style,"AnimationEvent"in window||(delete dr.animationend.animation,delete dr.animationiteration.animation,delete dr.animationstart.animation),"TransitionEvent"in window||delete dr.transitionend.transition);var mr=fr("animationend"),gr=fr("animationiteration"),vr=fr("animationstart"),yr=fr("transitionrun"),br=fr("transitionstart"),xr=fr("transitioncancel"),wr=fr("transitionend"),_r=new Map,Er="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(e,t){_r.set(e,t),nt(t,[e])}Er.push("scrollEnd");var Mr="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Tr=[],Ar=0,Cr=0;function Rr(){for(var e=Ar,t=Cr=Ar=0;t<e;){var n=Tr[t];Tr[t++]=null;var r=Tr[t];Tr[t++]=null;var i=Tr[t];Tr[t++]=null;var a=Tr[t];if(Tr[t++]=null,null!==r&&null!==i){var o=r.pending;null===o?i.next=i:(i.next=o.next,o.next=i),r.pending=i}0!==a&&Lr(n,i,a)}}function Pr(e,t,n,r){Tr[Ar++]=e,Tr[Ar++]=t,Tr[Ar++]=n,Tr[Ar++]=r,Cr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function kr(e,t,n,r){return Pr(e,t,n,r),Nr(e)}function Ir(e,t){return Pr(e,null,null,t),Nr(e)}function Lr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,a=e.return;null!==a;)a.childLanes|=n,null!==(r=a.alternate)&&(r.childLanes|=n),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(i=!0)),e=a,a=a.return;return 3===e.tag?(a=e.stateNode,i&&null!==t&&(i=31-be(n),null===(r=(e=a.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),a):null}function Nr(e){if(50<jc)throw jc=0,Wc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Dr={};function Ur(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(e,t,n,r){return new Ur(e,t,n,r)}function Fr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zr(e,t){var n=e.alternate;return null===n?((n=Or(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Br(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Hr(e,t,n,r,i,a){var s=0;if(r=e,"function"==typeof e)Fr(e)&&(s=1);else if("string"==typeof e)s=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,j.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case T:return(e=Or(31,n,t,i)).elementType=T,e.lanes=a,e;case g:return Vr(n.children,i,a,t);case v:s=8,i|=24;break;case y:return(e=Or(12,n,t,2|i)).elementType=y,e.lanes=a,e;case _:return(e=Or(13,n,t,i)).elementType=_,e.lanes=a,e;case E:return(e=Or(19,n,t,i)).elementType=E,e.lanes=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case x:s=10;break e;case b:s=9;break e;case w:s=11;break e;case S:s=14;break e;case M:s=16,r=null;break e}s=29,n=Error(o(130,null===e?"null":typeof e,"")),r=null}return(t=Or(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Vr(e,t,n,r){return(e=Or(7,e,r,t)).lanes=n,e}function jr(e,t,n){return(e=Or(6,e,null,t)).lanes=n,e}function Wr(e){var t=Or(18,null,null,0);return t.stateNode=e,t}function Gr(e,t,n){return(t=Or(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Xr=new WeakMap;function qr(e,t){if("object"==typeof e&&null!==e){var n=Xr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:te(t)},Xr.set(e,t),t)}return{value:e,source:t,stack:te(t)}}var Yr=[],$r=0,Kr=null,Zr=0,Jr=[],Qr=0,ei=null,ti=1,ni="";function ri(e,t){Yr[$r++]=Zr,Yr[$r++]=Kr,Kr=e,Zr=t}function ii(e,t,n){Jr[Qr++]=ti,Jr[Qr++]=ni,Jr[Qr++]=ei,ei=e;var r=ti;e=ni;var i=32-be(r)-1;r&=~(1<<i),n+=1;var a=32-be(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ti=1<<32-be(t)+i|n<<i|r,ni=a+e}else ti=1<<a|n<<i|r,ni=e}function ai(e){null!==e.return&&(ri(e,1),ii(e,1,0))}function oi(e){for(;e===Kr;)Kr=Yr[--$r],Yr[$r]=null,Zr=Yr[--$r],Yr[$r]=null;for(;e===ei;)ei=Jr[--Qr],Jr[Qr]=null,ni=Jr[--Qr],Jr[Qr]=null,ti=Jr[--Qr],Jr[Qr]=null}function si(e,t){Jr[Qr++]=ti,Jr[Qr++]=ni,Jr[Qr++]=ei,ti=t.id,ni=t.overflow,ei=e}var li=null,ci=null,ui=!1,di=null,hi=!1,pi=Error(o(519));function fi(e){throw xi(qr(Error(o(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),pi}function mi(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Be]=e,t[He]=r,n){case"dialog":$u("cancel",t),$u("close",t);break;case"iframe":case"object":case"embed":$u("load",t);break;case"video":case"audio":for(n=0;n<Xu.length;n++)$u(Xu[n],t);break;case"source":$u("error",t);break;case"img":case"image":case"link":$u("error",t),$u("load",t);break;case"details":$u("toggle",t);break;case"input":$u("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":$u("invalid",t);break;case"textarea":$u("invalid",t),_t(t,r.value,r.defaultValue,r.children)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||ld(t.textContent,n)?(null!=r.popover&&($u("beforetoggle",t),$u("toggle",t)),null!=r.onScroll&&$u("scroll",t),null!=r.onScrollEnd&&$u("scrollend",t),null!=r.onClick&&(t.onclick=kt),t=!0):t=!1,t||fi(e,!0)}function gi(e){for(li=e.return;li;)switch(li.tag){case 5:case 31:case 13:return void(hi=!1);case 27:case 3:return void(hi=!0);default:li=li.return}}function vi(e){if(e!==li)return!1;if(!ui)return gi(e),ui=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||yd(e.type,e.memoizedProps)),t=!t),t&&ci&&fi(e),gi(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));ci=Nd(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));ci=Nd(e)}else 27===n?(n=ci,Md(e.type)?(e=Ld,Ld=null,ci=e):ci=n):ci=li?Id(e.stateNode.nextSibling):null;return!0}function yi(){ci=li=null,ui=!1}function bi(){var e=di;return null!==e&&(null===Rc?Rc=e:Rc.push.apply(Rc,e),di=null),e}function xi(e){null===di?di=[e]:di.push(e)}var wi=F(null),_i=null,Ei=null;function Si(e,t,n){B(wi,t._currentValue),t._currentValue=n}function Mi(e){e._currentValue=wi.current,z(wi)}function Ti(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ai(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var a=i.dependencies;if(null!==a){var s=i.child;a=a.firstContext;e:for(;null!==a;){var l=a;a=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ti(a.return,n,e),r||(s=null);break e}a=l.next}}else if(18===i.tag){if(null===(s=i.return))throw Error(o(341));s.lanes|=n,null!==(a=s.alternate)&&(a.lanes|=n),Ti(s,n,e),s=null}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===e){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}}function Ci(e,t,n,r){e=null;for(var i=t,a=!1;null!==i;){if(!a)if(524288&i.flags)a=!0;else if(262144&i.flags)break;if(10===i.tag){var s=i.alternate;if(null===s)throw Error(o(387));if(null!==(s=s.memoizedProps)){var l=i.type;Zn(i.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(i===X.current){if(null===(s=i.alternate))throw Error(o(387));s.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(ch):e=[ch])}i=i.return}null!==e&&Ai(t,e,n,r),t.flags|=262144}function Ri(e){for(e=e.firstContext;null!==e;){if(!Zn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Pi(e){_i=e,Ei=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function ki(e){return Li(_i,e)}function Ii(e,t){return null===_i&&Pi(e),Li(e,t)}function Li(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Ei){if(null===e)throw Error(o(308));Ei=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ei=Ei.next=t;return n}var Ni="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Di=r.unstable_scheduleCallback,Ui=r.unstable_NormalPriority,Oi={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fi(){return{controller:new Ni,data:new Map,refCount:0}}function zi(e){e.refCount--,0===e.refCount&&Di(Ui,function(){e.controller.abort()})}var Bi=null,Hi=0,Vi=0,ji=null;function Wi(){if(0===--Hi&&null!==Bi){null!==ji&&(ji.status="fulfilled");var e=Bi;Bi=null,Vi=0,ji=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Gi=L.S;L.S=function(e,t){Ic=se(),"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Bi){var n=Bi=[];Hi=0,Vi=Hu(),ji={status:"pending",value:void 0,then:function(e){n.push(e)}}}Hi++,t.then(Wi,Wi)}(0,t),null!==Gi&&Gi(e,t)};var Xi=F(null);function qi(){var e=Xi.current;return null!==e?e:pc.pooledCache}function Yi(e,t){B(Xi,null===t?Xi.current:t.pool)}function $i(){var e=qi();return null===e?null:{parent:Oi._currentValue,pool:e}}var Ki=Error(o(460)),Zi=Error(o(474)),Ji=Error(o(542)),Qi={then:function(){}};function ea(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ta(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(kt,kt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw aa(e=t.reason),e;default:if("string"==typeof t.status)t.then(kt,kt);else{if(null!==(e=pc)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw aa(e=t.reason),e}throw ra=t,Ki}}function na(e){try{return(0,e._init)(e._payload)}catch(e){if(null!==e&&"object"==typeof e&&"function"==typeof e.then)throw ra=e,Ki;throw e}}var ra=null;function ia(){if(null===ra)throw Error(o(459));var e=ra;return ra=null,e}function aa(e){if(e===Ki||e===Ji)throw Error(o(483))}var oa=null,sa=0;function la(e){var t=sa;return sa+=1,null===oa&&(oa=[]),ta(oa,e,t)}function ca(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ua(e,t){if(t.$$typeof===p)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function da(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=zr(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=jr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===g?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===M&&na(a)===t.type)?(ca(t=i(t,n.props),n),t.return=e,t):(ca(t=Hr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Gr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Vr(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=jr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case f:return ca(n=Hr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=Gr(t,e.mode,n)).return=e,t;case M:return h(e,t=na(t),n)}if(I(t)||R(t))return(t=Vr(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return h(e,la(t),n);if(t.$$typeof===x)return h(e,Ii(e,t),n);ua(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case f:return n.key===i?c(e,t,n,r):null;case m:return n.key===i?u(e,t,n,r):null;case M:return p(e,t,n=na(n),r)}if(I(n)||R(n))return null!==i?null:d(e,t,n,r,null);if("function"==typeof n.then)return p(e,t,la(n),r);if(n.$$typeof===x)return p(e,t,Ii(e,n),r);ua(e,n)}return null}function v(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case f:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case m:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case M:return v(e,t,n,r=na(r),i)}if(I(r)||R(r))return d(t,e=e.get(n)||null,r,i,null);if("function"==typeof r.then)return v(e,t,n,la(r),i);if(r.$$typeof===x)return v(e,t,n,Ii(t,r),i);ua(t,r)}return null}function y(l,c,u,d){if("object"==typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case f:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===g){if(7===c.tag){n(l,c.sibling),(d=i(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"==typeof b&&null!==b&&b.$$typeof===M&&na(b)===c.type){n(l,c.sibling),ca(d=i(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((d=Vr(u.props.children,l.mode,d,u.key)).return=l,l=d):(ca(d=Hr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return s(l);case m:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=i(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Gr(u,l.mode,d)).return=l,l=d}return s(l);case M:return y(l,c,u=na(u),d)}if(I(u))return function(i,o,s,l){for(var c=null,u=null,d=o,f=o=0,m=null;null!==d&&f<s.length;f++){d.index>f?(m=d,d=null):m=d.sibling;var g=p(i,d,s[f],l);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(i,d),o=a(g,o,f),null===u?c=g:u.sibling=g,u=g,d=m}if(f===s.length)return n(i,d),ui&&ri(i,f),c;if(null===d){for(;f<s.length;f++)null!==(d=h(i,s[f],l))&&(o=a(d,o,f),null===u?c=d:u.sibling=d,u=d);return ui&&ri(i,f),c}for(d=r(d);f<s.length;f++)null!==(m=v(d,i,f,s[f],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?f:m.key),o=a(m,o,f),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(i,e)}),ui&&ri(i,f),c}(l,c,u,d);if(R(u)){if("function"!=typeof(b=R(u)))throw Error(o(150));return function(i,s,l,c){if(null==l)throw Error(o(151));for(var u=null,d=null,f=s,m=s=0,g=null,y=l.next();null!==f&&!y.done;m++,y=l.next()){f.index>m?(g=f,f=null):g=f.sibling;var b=p(i,f,y.value,c);if(null===b){null===f&&(f=g);break}e&&f&&null===b.alternate&&t(i,f),s=a(b,s,m),null===d?u=b:d.sibling=b,d=b,f=g}if(y.done)return n(i,f),ui&&ri(i,m),u;if(null===f){for(;!y.done;m++,y=l.next())null!==(y=h(i,y.value,c))&&(s=a(y,s,m),null===d?u=y:d.sibling=y,d=y);return ui&&ri(i,m),u}for(f=r(f);!y.done;m++,y=l.next())null!==(y=v(f,i,m,y.value,c))&&(e&&null!==y.alternate&&f.delete(null===y.key?m:y.key),s=a(y,s,m),null===d?u=y:d.sibling=y,d=y);return e&&f.forEach(function(e){return t(i,e)}),ui&&ri(i,m),u}(l,c,u=b.call(u),d)}if("function"==typeof u.then)return y(l,c,la(u),d);if(u.$$typeof===x)return y(l,c,Ii(l,u),d);ua(l,u)}return"string"==typeof u&&""!==u||"number"==typeof u||"bigint"==typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=i(c,u)).return=l,l=d):(n(l,c),(d=jr(u,l.mode,d)).return=l,l=d),s(l)):n(l,c)}return function(e,t,n,r){try{sa=0;var i=y(e,t,n,r);return oa=null,i}catch(t){if(t===Ki||t===Ji)throw t;var a=Or(29,t,null,e.mode);return a.lanes=r,a.return=e,a}}}var ha=da(!0),pa=da(!1),fa=!1;function ma(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ga(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function va(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ya(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&hc){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Nr(e),Lr(e,null,n),t}return Pr(e,r,t,n),Nr(e)}function ba(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Le(e,n)}}function xa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var wa=!1;function _a(){if(wa&&null!==ji)throw ji}function Ea(e,t,n,r){wa=!1;var i=e.updateQueue;fa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?a=c:o.next=c,o=l;var u=e.alternate;null!==u&&(s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l)}if(null!==a){var d=i.baseState;for(o=0,u=c=l=null,s=a;;){var p=-536870913&s.lane,f=p!==s.lane;if(f?(mc&p)===p:(r&p)===p){0!==p&&p===Vi&&(wa=!0),null!==u&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var m=e,g=s;p=t;var v=n;switch(g.tag){case 1:if("function"==typeof(m=g.payload)){d=m.call(v,d,p);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(p="function"==typeof(m=g.payload)?m.call(v,d,p):m))break e;d=h({},d,p);break e;case 2:fa=!0}}null!==(p=s.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=i.callbacks)?i.callbacks=[p]:f.push(p))}else f={lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,o|=p;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===a&&(i.shared.lanes=0),Ec|=o,e.lanes=o,e.memoizedState=d}}function Sa(e,t){if("function"!=typeof e)throw Error(o(191,e));e.call(t)}function Ma(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Sa(n[e],t)}var Ta=F(null),Aa=F(0);function Ca(e,t){B(Aa,e=wc),B(Ta,t),wc=e|t.baseLanes}function Ra(){B(Aa,wc),B(Ta,Ta.current)}function Pa(){wc=Aa.current,z(Ta),z(Aa)}var ka=F(null),Ia=null;function La(e){var t=e.alternate;B(Fa,1&Fa.current),B(ka,e),null===Ia&&(null===t||null!==Ta.current||null!==t.memoizedState)&&(Ia=e)}function Na(e){B(Fa,Fa.current),B(ka,e),null===Ia&&(Ia=e)}function Da(e){22===e.tag?(B(Fa,Fa.current),B(ka,e),null===Ia&&(Ia=e)):Ua()}function Ua(){B(Fa,Fa.current),B(ka,ka.current)}function Oa(e){z(ka),Ia===e&&(Ia=null),z(Fa)}var Fa=F(0);function za(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Pd(n)||kd(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(128&t.flags)return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ba=0,Ha=null,Va=null,ja=null,Wa=!1,Ga=!1,Xa=!1,qa=0,Ya=0,$a=null,Ka=0;function Za(){throw Error(o(321))}function Ja(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Zn(e[n],t[n]))return!1;return!0}function Qa(e,t,n,r,i,a){return Ba=a,Ha=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,L.H=null===e||null===e.memoizedState?ms:gs,Xa=!1,a=n(r,i),Xa=!1,Ga&&(a=to(t,n,r,i)),eo(e),a}function eo(e){L.H=fs;var t=null!==Va&&null!==Va.next;if(Ba=0,ja=Va=Ha=null,Wa=!1,Ya=0,$a=null,t)throw Error(o(300));null===e||Is||null!==(e=e.dependencies)&&Ri(e)&&(Is=!0)}function to(e,t,n,r){Ha=e;var i=0;do{if(Ga&&($a=null),Ya=0,Ga=!1,25<=i)throw Error(o(301));if(i+=1,ja=Va=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}L.H=vs,a=t(n,r)}while(Ga);return a}function no(){var e=L.H,t=e.useState()[0];return t="function"==typeof t.then?lo(t):t,e=e.useState()[0],(null!==Va?Va.memoizedState:null)!==e&&(Ha.flags|=1024),t}function ro(){var e=0!==qa;return qa=0,e}function io(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ao(e){if(Wa){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Wa=!1}Ba=0,ja=Va=Ha=null,Ga=!1,Ya=qa=0,$a=null}function oo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ja?Ha.memoizedState=ja=e:ja=ja.next=e,ja}function so(){if(null===Va){var e=Ha.alternate;e=null!==e?e.memoizedState:null}else e=Va.next;var t=null===ja?Ha.memoizedState:ja.next;if(null!==t)ja=t,Va=e;else{if(null===e){if(null===Ha.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(Va=e).memoizedState,baseState:Va.baseState,baseQueue:Va.baseQueue,queue:Va.queue,next:null},null===ja?Ha.memoizedState=ja=e:ja=ja.next=e}return ja}function lo(e){var t=Ya;return Ya+=1,null===$a&&($a=[]),e=ta($a,e,t),t=Ha,null===(null===ja?t.memoizedState:ja.next)&&(t=t.alternate,L.H=null===t||null===t.memoizedState?ms:gs),e}function co(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return lo(e);if(e.$$typeof===x)return ki(e)}throw Error(o(438,String(e)))}function uo(e){var t=null,n=Ha.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Ha.alternate;null!==r&&null!==(r=r.updateQueue)&&null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Ha.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=A;return t.index++,n}function ho(e,t){return"function"==typeof t?t(e):t}function po(e){return fo(so(),Va,e)}function fo(e,t,n){var r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=n;var i=e.baseQueue,a=r.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}t.baseQueue=i=a,r.pending=null}if(a=e.baseState,null===i)e.memoizedState=a;else{var l=s=null,c=null,u=t=i.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(mc&h)===h:(Ba&h)===h){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Vi&&(d=!0);else{if((Ba&p)===p){u=u.next,p===Vi&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,s=a):c=c.next=h,Ha.lanes|=p,Ec|=p}h=u.action,Xa&&n(a,h),a=u.hasEagerState?u.eagerState:n(a,h)}else p={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=p,s=a):c=c.next=p,Ha.lanes|=h,Ec|=h;u=u.next}while(null!==u&&u!==t);if(null===c?s=a:c.next=l,!Zn(a,e.memoizedState)&&(Is=!0,d&&null!==(n=ji)))throw n;e.memoizedState=a,e.baseState=s,e.baseQueue=c,r.lastRenderedState=a}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function mo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);Zn(a,t.memoizedState)||(Is=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function go(e,t,n){var r=Ha,i=so(),a=ui;if(a){if(void 0===n)throw Error(o(407));n=n()}else n=t();var s=!Zn((Va||i).memoizedState,n);if(s&&(i.memoizedState=n,Is=!0),i=i.queue,Ho(bo.bind(null,r,i,e),[e]),i.getSnapshot!==t||s||null!==ja&&1&ja.memoizedState.tag){if(r.flags|=2048,Uo(9,{destroy:void 0},yo.bind(null,r,i,n,t),null),null===pc)throw Error(o(349));a||127&Ba||vo(r,t,n)}return n}function vo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Ha.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Ha.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function yo(e,t,n,r){t.value=n,t.getSnapshot=r,xo(t)&&wo(e)}function bo(e,t,n){return n(function(){xo(t)&&wo(e)})}function xo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Zn(e,n)}catch(e){return!0}}function wo(e){var t=Ir(e,2);null!==t&&qc(t,0,2)}function _o(e){var t=oo();if("function"==typeof e){var n=e;if(e=n(),Xa){ye(!0);try{n()}finally{ye(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:e},t}function Eo(e,t,n,r){return e.baseState=n,fo(e,Va,"function"==typeof r?r:ho)}function So(e,t,n,r,i){if(ds(e))throw Error(o(485));if(null!==(e=t.action)){var a={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==L.T?n(!0):a.isTransition=!1,r(a),null===(n=t.pending)?(a.next=t.pending=a,Mo(t,a)):(a.next=n.next,t.pending=n.next=a)}}function Mo(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=L.T,o={};L.T=o;try{var s=n(i,r),l=L.S;null!==l&&l(o,s),To(e,t,s)}catch(n){Co(e,t,n)}finally{null!==a&&null!==o.types&&(a.types=o.types),L.T=a}}else try{To(e,t,a=n(i,r))}catch(n){Co(e,t,n)}}function To(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){Ao(e,t,n)},function(n){return Co(e,t,n)}):Ao(e,t,n)}function Ao(e,t,n){t.status="fulfilled",t.value=n,Ro(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Mo(e,n)))}function Co(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Ro(t),t=t.next}while(t!==r)}e.action=null}function Ro(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Po(e,t){return t}function ko(e,t){if(ui){var n=pc.formState;if(null!==n){e:{var r=Ha;if(ui){if(ci){t:{for(var i=ci,a=hi;8!==i.nodeType;){if(!a){i=null;break t}if(null===(i=Id(i.nextSibling))){i=null;break t}}i="F!"===(a=i.data)||"F"===a?i:null}if(i){ci=Id(i.nextSibling),r="F!"===i.data;break e}}fi(r)}r=!1}r&&(t=n[0])}}return(n=oo()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Po,lastRenderedState:t},n.queue=r,n=ls.bind(null,Ha,r),r.dispatch=n,r=_o(!1),a=us.bind(null,Ha,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=oo()).queue=i,n=So.bind(null,Ha,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function Io(e){return Lo(so(),Va,e)}function Lo(e,t,n){if(t=fo(e,t,Po)[0],e=po(ho)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var r=lo(t)}catch(e){if(e===Ki)throw Ji;throw e}else r=t;var i=(t=so()).queue,a=i.dispatch;return n!==t.memoizedState&&(Ha.flags|=2048,Uo(9,{destroy:void 0},No.bind(null,i,n),null)),[r,a,e]}function No(e,t){e.action=t}function Do(e){var t=so(),n=Va;if(null!==n)return Lo(t,n,e);so(),t=t.memoizedState;var r=(n=so()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Uo(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Ha.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Ha.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Oo(){return so().memoizedState}function Fo(e,t,n,r){var i=oo();Ha.flags|=e,i.memoizedState=Uo(1|t,{destroy:void 0},n,void 0===r?null:r)}function zo(e,t,n,r){var i=so();r=void 0===r?null:r;var a=i.memoizedState.inst;null!==Va&&null!==r&&Ja(r,Va.memoizedState.deps)?i.memoizedState=Uo(t,a,n,r):(Ha.flags|=e,i.memoizedState=Uo(1|t,a,n,r))}function Bo(e,t){Fo(8390656,8,e,t)}function Ho(e,t){zo(2048,8,e,t)}function Vo(e){var t=so().memoizedState;return function(e){Ha.flags|=4;var t=Ha.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Ha.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(2&hc)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function jo(e,t){return zo(4,2,e,t)}function Wo(e,t){return zo(4,4,e,t)}function Go(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Xo(e,t,n){n=null!=n?n.concat([e]):null,zo(4,4,Go.bind(null,t,e),n)}function qo(){}function Yo(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Ja(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Ja(t,r[1]))return r[0];if(r=e(),Xa){ye(!0);try{e()}finally{ye(!1)}}return n.memoizedState=[r,t],r}function Ko(e,t,n){return void 0===n||1073741824&Ba&&!(261930&mc)?e.memoizedState=t:(e.memoizedState=n,e=Xc(),Ha.lanes|=e,Ec|=e,n)}function Zo(e,t,n,r){return Zn(n,t)?n:null!==Ta.current?(e=Ko(e,n,r),Zn(e,t)||(Is=!0),e):42&Ba&&(!(1073741824&Ba)||261930&mc)?(e=Xc(),Ha.lanes|=e,Ec|=e,t):(Is=!0,e.memoizedState=n)}function Jo(e,t,n,r,i){var a=N.p;N.p=0!==a&&8>a?a:8;var o,s,l,c=L.T,u={};L.T=u,us(e,!1,t,n);try{var d=i(),h=L.S;if(null!==h&&h(u,d),null!==d&&"object"==typeof d&&"function"==typeof d.then){var p=(o=r,s=[],l={status:"pending",value:null,reason:null,then:function(e){s.push(e)}},d.then(function(){l.status="fulfilled",l.value=o;for(var e=0;e<s.length;e++)(0,s[e])(o)},function(e){for(l.status="rejected",l.reason=e,e=0;e<s.length;e++)(0,s[e])(void 0)}),l);cs(e,t,p,Gc())}else cs(e,t,r,Gc())}catch(n){cs(e,t,{then:function(){},status:"rejected",reason:n},Gc())}finally{N.p=a,null!==c&&null!==u.types&&(c.types=u.types),L.T=c}}function Qo(){}function es(e,t,n,r){if(5!==e.tag)throw Error(o(476));var i=ts(e).queue;Jo(e,i,t,D,null===n?Qo:function(){return ns(e),n(r)})}function ts(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:D,baseState:D,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:D},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ns(e){var t=ts(e);null===t.next&&(t=e.alternate.memoizedState),cs(e,t.next.queue,{},Gc())}function rs(){return ki(ch)}function is(){return so().memoizedState}function as(){return so().memoizedState}function os(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Gc(),r=ya(t,e=va(n),n);return null!==r&&(qc(r,0,n),ba(r,t,n)),t={cache:Fi()},void(e.payload=t)}t=t.return}}function ss(e,t,n){var r=Gc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ds(e)?hs(t,n):null!==(n=kr(e,t,n,r))&&(qc(n,0,r),ps(n,t,r))}function ls(e,t,n){cs(e,t,n,Gc())}function cs(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ds(e))hs(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,Zn(s,o))return Pr(e,t,i,0),null===pc&&Rr(),!1}catch(e){}if(null!==(n=kr(e,t,i,r)))return qc(n,0,r),ps(n,t,r),!0}return!1}function us(e,t,n,r){if(r={lane:2,revertLane:Hu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ds(e)){if(t)throw Error(o(479))}else null!==(t=kr(e,n,r,2))&&qc(t,0,2)}function ds(e){var t=e.alternate;return e===Ha||null!==t&&t===Ha}function hs(e,t){Ga=Wa=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ps(e,t,n){if(4194048&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Le(e,n)}}var fs={readContext:ki,use:co,useCallback:Za,useContext:Za,useEffect:Za,useImperativeHandle:Za,useLayoutEffect:Za,useInsertionEffect:Za,useMemo:Za,useReducer:Za,useRef:Za,useState:Za,useDebugValue:Za,useDeferredValue:Za,useTransition:Za,useSyncExternalStore:Za,useId:Za,useHostTransitionStatus:Za,useFormState:Za,useActionState:Za,useOptimistic:Za,useMemoCache:Za,useCacheRefresh:Za};fs.useEffectEvent=Za;var ms={readContext:ki,use:co,useCallback:function(e,t){return oo().memoizedState=[e,void 0===t?null:t],e},useContext:ki,useEffect:Bo,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,Fo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fo(4194308,4,e,t)},useInsertionEffect:function(e,t){Fo(4,2,e,t)},useMemo:function(e,t){var n=oo();t=void 0===t?null:t;var r=e();if(Xa){ye(!0);try{e()}finally{ye(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=oo();if(void 0!==n){var i=n(t);if(Xa){ye(!0);try{n(t)}finally{ye(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=ss.bind(null,Ha,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},oo().memoizedState=e},useState:function(e){var t=(e=_o(e)).queue,n=ls.bind(null,Ha,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:qo,useDeferredValue:function(e,t){return Ko(oo(),e,t)},useTransition:function(){var e=_o(!1);return e=Jo.bind(null,Ha,e.queue,!0,!1),oo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Ha,i=oo();if(ui){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===pc)throw Error(o(349));127&mc||vo(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Bo(bo.bind(null,r,a,e),[e]),r.flags|=2048,Uo(9,{destroy:void 0},yo.bind(null,r,a,n,t),null),n},useId:function(){var e=oo(),t=pc.identifierPrefix;if(ui){var n=ni;t="_"+t+"R_"+(n=(ti&~(1<<32-be(ti)-1)).toString(32)+n),0<(n=qa++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Ka++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:rs,useFormState:ko,useActionState:ko,useOptimistic:function(e){var t=oo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=us.bind(null,Ha,!0,n),n.dispatch=t,[e,t]},useMemoCache:uo,useCacheRefresh:function(){return oo().memoizedState=os.bind(null,Ha)},useEffectEvent:function(e){var t=oo(),n={impl:e};return t.memoizedState=n,function(){if(2&hc)throw Error(o(440));return n.impl.apply(void 0,arguments)}}},gs={readContext:ki,use:co,useCallback:Yo,useContext:ki,useEffect:Ho,useImperativeHandle:Xo,useInsertionEffect:jo,useLayoutEffect:Wo,useMemo:$o,useReducer:po,useRef:Oo,useState:function(){return po(ho)},useDebugValue:qo,useDeferredValue:function(e,t){return Zo(so(),Va.memoizedState,e,t)},useTransition:function(){var e=po(ho)[0],t=so().memoizedState;return["boolean"==typeof e?e:lo(e),t]},useSyncExternalStore:go,useId:is,useHostTransitionStatus:rs,useFormState:Io,useActionState:Io,useOptimistic:function(e,t){return Eo(so(),0,e,t)},useMemoCache:uo,useCacheRefresh:as};gs.useEffectEvent=Vo;var vs={readContext:ki,use:co,useCallback:Yo,useContext:ki,useEffect:Ho,useImperativeHandle:Xo,useInsertionEffect:jo,useLayoutEffect:Wo,useMemo:$o,useReducer:mo,useRef:Oo,useState:function(){return mo(ho)},useDebugValue:qo,useDeferredValue:function(e,t){var n=so();return null===Va?Ko(n,e,t):Zo(n,Va.memoizedState,e,t)},useTransition:function(){var e=mo(ho)[0],t=so().memoizedState;return["boolean"==typeof e?e:lo(e),t]},useSyncExternalStore:go,useId:is,useHostTransitionStatus:rs,useFormState:Do,useActionState:Do,useOptimistic:function(e,t){var n=so();return null!==Va?Eo(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:uo,useCacheRefresh:as};function ys(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}vs.useEffectEvent=Vo;var bs={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Gc(),i=va(r);i.payload=t,null!=n&&(i.callback=n),null!==(t=ya(e,i,r))&&(qc(t,0,r),ba(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Gc(),i=va(r);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=ya(e,i,r))&&(qc(t,0,r),ba(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Gc(),r=va(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=ya(e,r,n))&&(qc(t,0,n),ba(t,e,n))}};function xs(e,t,n,r,i,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!(t.prototype&&t.prototype.isPureReactComponent&&Jn(n,r)&&Jn(i,a))}function ws(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&bs.enqueueReplaceState(t,t.state,null)}function _s(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}function Es(e){Mr(e)}function Ss(e){console.error(e)}function Ms(e){Mr(e)}function Ts(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function As(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function Cs(e,t,n){return(n=va(n)).tag=3,n.payload={element:null},n.callback=function(){Ts(e,t)},n}function Rs(e){return(e=va(e)).tag=3,e}function Ps(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"==typeof i){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){As(t,n,r)}}var o=n.stateNode;null!==o&&"function"==typeof o.componentDidCatch&&(e.callback=function(){As(t,n,r),"function"!=typeof i&&(null===Dc?Dc=new Set([this]):Dc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var ks=Error(o(461)),Is=!1;function Ls(e,t,n,r){t.child=null===e?pa(t,null,n,r):ha(t,e.child,n,r)}function Ns(e,t,n,r,i){n=n.render;var a=t.ref;if("ref"in r){var o={};for(var s in r)"ref"!==s&&(o[s]=r[s])}else o=r;return Pi(t),r=Qa(e,t,n,o,a,i),s=ro(),null===e||Is?(ui&&s&&ai(t),t.flags|=1,Ls(e,t,r,i),t.child):(io(e,t,i),rl(e,t,i))}function Ds(e,t,n,r,i){if(null===e){var a=n.type;return"function"!=typeof a||Fr(a)||void 0!==a.defaultProps||null!==n.compare?((e=Hr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Us(e,t,a,r,i))}if(a=e.child,!il(e,i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:Jn)(o,r)&&e.ref===t.ref)return rl(e,t,i)}return t.flags|=1,(e=zr(a,r)).ref=t.ref,e.return=t,t.child=e}function Us(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(Jn(a,r)&&e.ref===t.ref){if(Is=!1,t.pendingProps=r=a,!il(e,i))return t.lanes=e.lanes,rl(e,t,i);131072&e.flags&&(Is=!0)}}return js(e,t,n,r,i)}function Os(e,t,n,r){var i=r.children,a=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(128&t.flags){if(a=null!==a?a.baseLanes|n:n,null!==e){for(r=t.child=e.child,i=0;null!==r;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~a}else r=0,t.child=null;return zs(e,t,a,n,r)}if(!(536870912&n))return r=t.lanes=536870912,zs(e,t,null!==a?a.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Yi(0,null!==a?a.cachePool:null),null!==a?Ca(t,a):Ra(),Da(t)}else null!==a?(Yi(0,a.cachePool),Ca(t,a),Ua(),t.memoizedState=null):(null!==e&&Yi(0,null),Ra(),Ua());return Ls(e,t,i,n),t.child}function Fs(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function zs(e,t,n,r,i){var a=qi();return a=null===a?null:{parent:Oi._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},null!==e&&Yi(0,null),Ra(),Da(t),null!==e&&Ci(e,t,r,!0),t.childLanes=i,null}function Bs(e,t){return(t=Js({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Hs(e,t,n){return ha(t,e.child,null,n),(e=Bs(t,t.pendingProps)).flags|=2,Oa(t),t.memoizedState=null,e}function Vs(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function js(e,t,n,r,i){return Pi(t),n=Qa(e,t,n,r,void 0,i),r=ro(),null===e||Is?(ui&&r&&ai(t),t.flags|=1,Ls(e,t,n,i),t.child):(io(e,t,i),rl(e,t,i))}function Ws(e,t,n,r,i,a){return Pi(t),t.updateQueue=null,n=to(t,r,n,i),eo(e),r=ro(),null===e||Is?(ui&&r&&ai(t),t.flags|=1,Ls(e,t,n,a),t.child):(io(e,t,a),rl(e,t,a))}function Gs(e,t,n,r,i){if(Pi(t),null===t.stateNode){var a=Dr,o=n.contextType;"object"==typeof o&&null!==o&&(a=ki(o)),a=new n(r,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=bs,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=r,a.state=t.memoizedState,a.refs={},ma(t),o=n.contextType,a.context="object"==typeof o&&null!==o?ki(o):Dr,a.state=t.memoizedState,"function"==typeof(o=n.getDerivedStateFromProps)&&(ys(t,n,o,r),a.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(o=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),o!==a.state&&bs.enqueueReplaceState(a,a.state,null),Ea(t,r,a,i),_a(),a.state=t.memoizedState),"function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){a=t.stateNode;var s=t.memoizedProps,l=_s(n,s);a.props=l;var c=a.context,u=n.contextType;o=Dr,"object"==typeof u&&null!==u&&(o=ki(u));var d=n.getDerivedStateFromProps;u="function"==typeof d||"function"==typeof a.getSnapshotBeforeUpdate,s=t.pendingProps!==s,u||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s||c!==o)&&ws(t,a,r,o),fa=!1;var h=t.memoizedState;a.state=h,Ea(t,r,a,i),_a(),c=t.memoizedState,s||h!==c||fa?("function"==typeof d&&(ys(t,n,d,r),c=t.memoizedState),(l=fa||xs(t,n,l,r,h,c,o))?(u||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=o,r=l):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,ga(e,t),u=_s(n,o=t.memoizedProps),a.props=u,d=t.pendingProps,h=a.context,c=n.contextType,l=Dr,"object"==typeof c&&null!==c&&(l=ki(c)),(c="function"==typeof(s=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==d||h!==l)&&ws(t,a,r,l),fa=!1,h=t.memoizedState,a.state=h,Ea(t,r,a,i),_a();var p=t.memoizedState;o!==d||h!==p||fa||null!==e&&null!==e.dependencies&&Ri(e.dependencies)?("function"==typeof s&&(ys(t,n,s,r),p=t.memoizedState),(u=fa||xs(t,n,u,r,h,p,l)||null!==e&&null!==e.dependencies&&Ri(e.dependencies))?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=u):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,Vs(e,t),r=!!(128&t.flags),a||r?(a=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&r?(t.child=ha(t,e.child,null,i),t.child=ha(t,null,n,i)):Ls(e,t,n,i),t.memoizedState=a.state,e=t.child):e=rl(e,t,i),e}function Xs(e,t,n,r){return yi(),t.flags|=256,Ls(e,t,n,r),t.child}var qs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ys(e){return{baseLanes:e,cachePool:$i()}}function $s(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Tc),e}function Ks(e,t,n){var r,i=t.pendingProps,a=!1,s=!!(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&!!(2&Fa.current)),r&&(a=!0,t.flags&=-129),r=!!(32&t.flags),t.flags&=-33,null===e){if(ui){if(a?La(t):Ua(),(e=ci)?null!==(e=null!==(e=Rd(e,hi))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ei?{id:ti,overflow:ni}:null,retryLane:536870912,hydrationErrors:null},(n=Wr(e)).return=t,t.child=n,li=t,ci=null):e=null,null===e)throw fi(t);return kd(e)?t.lanes=32:t.lanes=536870912,null}var l=i.children;return i=i.fallback,a?(Ua(),l=Js({mode:"hidden",children:l},a=t.mode),i=Vr(i,a,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,(i=t.child).memoizedState=Ys(n),i.childLanes=$s(e,r,n),t.memoizedState=qs,Fs(null,i)):(La(t),Zs(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(s)256&t.flags?(La(t),t.flags&=-257,t=Qs(e,t,n)):null!==t.memoizedState?(Ua(),t.child=e.child,t.flags|=128,t=null):(Ua(),l=i.fallback,a=t.mode,i=Js({mode:"visible",children:i.children},a),(l=Vr(l,a,n,null)).flags|=2,i.return=t,l.return=t,i.sibling=l,t.child=i,ha(t,e.child,null,n),(i=t.child).memoizedState=Ys(n),i.childLanes=$s(e,r,n),t.memoizedState=qs,t=Fs(null,i));else if(La(t),kd(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(o(419))).stack="",i.digest=r,xi({value:i,source:null,stack:null}),t=Qs(e,t,n)}else if(Is||Ci(e,t,n,!1),r=0!==(n&e.childLanes),Is||r){if(null!==(r=pc)&&0!==(i=Ne(r,n))&&i!==c.retryLane)throw c.retryLane=i,Ir(e,i),qc(r,0,i),ks;Pd(l)||au(),t=Qs(e,t,n)}else Pd(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ci=Id(l.nextSibling),li=t,ui=!0,di=null,hi=!1,null!==e&&si(t,e),(t=Zs(t,i.children)).flags|=4096);return t}return a?(Ua(),l=i.fallback,a=t.mode,u=(c=e.child).sibling,(i=zr(c,{mode:"hidden",children:i.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=zr(u,l):(l=Vr(l,a,n,null)).flags|=2,l.return=t,i.return=t,i.sibling=l,t.child=i,Fs(null,i),i=t.child,null===(l=e.child.memoizedState)?l=Ys(n):(null!==(a=l.cachePool)?(c=Oi._currentValue,a=a.parent!==c?{parent:c,pool:c}:a):a=$i(),l={baseLanes:l.baseLanes|n,cachePool:a}),i.memoizedState=l,i.childLanes=$s(e,r,n),t.memoizedState=qs,Fs(e.child,i)):(La(t),e=(n=e.child).sibling,(n=zr(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Zs(e,t){return(t=Js({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Js(e,t){return(e=Or(22,e,null,t)).lanes=0,e}function Qs(e,t,n){return ha(t,e.child,null,n),(e=Zs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function el(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ti(e.return,t,n)}function tl(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.treeForkCount=a)}function nl(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;r=r.children;var o=Fa.current,s=!!(2&o);if(s?(o=1&o|2,t.flags|=128):o&=1,B(Fa,o),Ls(e,t,r,n),r=ui?Zr:0,!s&&null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&el(e,n,t);else if(19===e.tag)el(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===za(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),tl(t,!1,i,n,a,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===za(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}tl(t,!0,n,null,a,r);break;case"together":tl(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function rl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ec|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ci(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=zr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function il(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ri(e))}function al(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Is=!0;else{if(!(il(e,n)||128&t.flags))return Is=!1,function(e,t,n){switch(t.tag){case 3:q(t,t.stateNode.containerInfo),Si(0,Oi,e.memoizedState.cache),yi();break;case 27:case 5:$(t);break;case 4:q(t,t.stateNode.containerInfo);break;case 10:Si(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Na(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(La(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Ks(e,t,n):(La(t),null!==(e=rl(e,t,n))?e.sibling:null);La(t);break;case 19:var i=!!(128&e.flags);if((r=0!==(n&t.childLanes))||(Ci(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return nl(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),B(Fa,Fa.current),r)break;return null;case 22:return t.lanes=0,Os(e,t,n,t.pendingProps);case 24:Si(0,Oi,e.memoizedState.cache)}return rl(e,t,n)}(e,t,n);Is=!!(131072&e.flags)}else Is=!1,ui&&1048576&t.flags&&ii(t,Zr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=na(t.elementType),t.type=e,"function"!=typeof e){if(null!=e){var i=e.$$typeof;if(i===w){t.tag=11,t=Ns(null,t,e,r,n);break e}if(i===S){t.tag=14,t=Ds(null,t,e,r,n);break e}}throw t=k(e)||e,Error(o(306,t,""))}Fr(e)?(r=_s(e,r),t.tag=1,t=Gs(null,t,e,r,n)):(t.tag=0,t=js(null,t,e,r,n))}return t;case 0:return js(e,t,t.type,t.pendingProps,n);case 1:return Gs(e,t,r=t.type,i=_s(r,t.pendingProps),n);case 3:e:{if(q(t,t.stateNode.containerInfo),null===e)throw Error(o(387));r=t.pendingProps;var a=t.memoizedState;i=a.element,ga(e,t),Ea(t,r,null,n);var s=t.memoizedState;if(r=s.cache,Si(0,Oi,r),r!==a.cache&&Ai(t,[Oi],n,!0),_a(),r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Xs(e,t,r,n);break e}if(r!==i){xi(i=qr(Error(o(424)),t)),t=Xs(e,t,r,n);break e}for(e=9===(e=t.stateNode.containerInfo).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,ci=Id(e.firstChild),li=t,ui=!0,di=null,hi=!0,n=pa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(yi(),r===i){t=rl(e,t,n);break e}Ls(e,t,r,n)}t=t.child}return t;case 26:return Vs(e,t),null===e?(n=Wd(t.type,null,t.pendingProps,null))?t.memoizedState=n:ui||(n=t.type,e=t.pendingProps,(r=md(G.current).createElement(n))[Be]=t,r[He]=e,dd(r,n,e),Qe(r),t.stateNode=r):t.memoizedState=Wd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return $(t),null===e&&ui&&(r=t.stateNode=Ud(t.type,t.pendingProps,G.current),li=t,hi=!0,i=ci,Md(t.type)?(Ld=i,ci=Id(r.firstChild)):ci=i),Ls(e,t,t.pendingProps.children,n),Vs(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ui&&((i=r=ci)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[qe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(a=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(a!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((a=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var a=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===a)return e}if(null===(e=Id(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,hi))?(t.stateNode=r,li=t,ci=Id(r.firstChild),hi=!1,i=!0):i=!1),i||fi(t)),$(t),i=t.type,a=t.pendingProps,s=null!==e?e.memoizedProps:null,r=a.children,yd(i,a)?r=null:null!==s&&yd(i,s)&&(t.flags|=32),null!==t.memoizedState&&(i=Qa(e,t,no,null,null,n),ch._currentValue=i),Vs(e,t),Ls(e,t,r,n),t.child;case 6:return null===e&&ui&&((e=n=ci)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Id(e.nextSibling)))return null}return e}(n,t.pendingProps,hi))?(t.stateNode=n,li=t,ci=null,e=!0):e=!1),e||fi(t)),null;case 13:return Ks(e,t,n);case 4:return q(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ha(t,null,r,n):Ls(e,t,r,n),t.child;case 11:return Ns(e,t,t.type,t.pendingProps,n);case 7:return Ls(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ls(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Si(0,t.type,r.value),Ls(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Pi(t),r=r(i=ki(i)),t.flags|=1,Ls(e,t,r,n),t.child;case 14:return Ds(e,t,t.type,t.pendingProps,n);case 15:return Us(e,t,t.type,t.pendingProps,n);case 19:return nl(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,i=!!(128&t.flags);if(t.flags&=-129,null===e){if(ui){if("hidden"===r.mode)return e=Bs(t,r),t.lanes=536870912,Fs(null,e);if(Na(t),(e=ci)?null!==(e=null!==(e=Rd(e,hi))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ei?{id:ti,overflow:ni}:null,retryLane:536870912,hydrationErrors:null},(n=Wr(e)).return=t,t.child=n,li=t,ci=null):e=null,null===e)throw fi(t);return t.lanes=536870912,null}return Bs(t,r)}var a=e.memoizedState;if(null!==a){var s=a.dehydrated;if(Na(t),i)if(256&t.flags)t.flags&=-257,t=Hs(e,t,n);else{if(null===t.memoizedState)throw Error(o(558));t.child=e.child,t.flags|=128,t=null}else if(Is||Ci(e,t,n,!1),i=0!==(n&e.childLanes),Is||i){if(null!==(r=pc)&&0!==(s=Ne(r,n))&&s!==a.retryLane)throw a.retryLane=s,Ir(e,s),qc(r,0,s),ks;au(),t=Hs(e,t,n)}else e=a.treeContext,ci=Id(s.nextSibling),li=t,ui=!0,di=null,hi=!1,null!==e&&si(t,e),(t=Bs(t,r)).flags|=4096;return t}return(e=zr(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Os(e,t,n,t.pendingProps);case 24:return Pi(t),r=ki(Oi),null===e?(null===(i=qi())&&(i=pc,a=Fi(),i.pooledCache=a,a.refCount++,null!==a&&(i.pooledCacheLanes|=n),i=a),t.memoizedState={parent:r,cache:i},ma(t),Si(0,Oi,i)):(0!==(e.lanes&n)&&(ga(e,t),Ea(t,null,null,n),_a()),i=e.memoizedState,a=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),Si(0,Oi,r)):(r=a.cache,Si(0,Oi,r),r!==i.cache&&Ai(t,[Oi],n,!0))),Ls(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function ol(e){e.flags|=4}function sl(e,t,n,r,i){if((t=!!(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&i)===i)if(e.stateNode.complete)e.flags|=8192;else{if(!nu())throw ra=Qi,Zi;e.flags|=8192}}else e.flags&=-16777217}function ll(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!rh(t)){if(!nu())throw ra=Qi,Zi;e.flags|=8192}}function cl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Re():536870912,e.lanes|=t,Ac|=t)}function ul(e,t){if(!ui)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function dl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function hl(e,t,n){var r=t.pendingProps;switch(oi(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return dl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Mi(Oi),Y(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(vi(t)?ol(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,bi())),dl(t),null;case 26:var i=t.type,a=t.memoizedState;return null===e?(ol(t),null!==a?(dl(t),ll(t,a)):(dl(t),sl(t,i,0,0,n))):a?a!==e.memoizedState?(ol(t),dl(t),ll(t,a)):(dl(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&ol(t),dl(t),sl(t,i,0,0,n)),null;case 27:if(K(t),n=G.current,i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return dl(t),null}e=j.current,vi(t)?mi(t):(e=Ud(i,r,n),t.stateNode=e,ol(t))}return dl(t),null;case 5:if(K(t),i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return dl(t),null}if(a=j.current,vi(t))mi(t);else{var s=md(G.current);switch(a){case 1:a=s.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:a=s.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":a=s.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":a=s.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":(a=s.createElement("div")).innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a="string"==typeof r.is?s.createElement("select",{is:r.is}):s.createElement("select"),r.multiple?a.multiple=!0:r.size&&(a.size=r.size);break;default:a="string"==typeof r.is?s.createElement(i,{is:r.is}):s.createElement(i)}}a[Be]=t,a[He]=r;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)a.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=a;e:switch(dd(a,i,r),i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ol(t)}}return dl(t),sl(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if("string"!=typeof r&&null===t.stateNode)throw Error(o(166));if(e=G.current,vi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=li))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Be]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||ld(e.nodeValue,n)))||fi(t,!0)}else(e=md(e).createTextNode(r))[Be]=t,t.stateNode=e}return dl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=vi(t),null!==n){if(null===e){if(!r)throw Error(o(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(o(557));e[Be]=t}else yi(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;dl(t),e=!1}else n=bi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Oa(t),t):(Oa(t),null);if(128&t.flags)throw Error(o(558))}return dl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=vi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[Be]=t}else yi(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;dl(t),i=!1}else i=bi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(Oa(t),t):(Oa(t),null)}return Oa(t),128&t.flags?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool),a=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(a=r.memoizedState.cachePool.pool),a!==i&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),cl(t,t.updateQueue),dl(t),null);case 4:return Y(),null===e&&Ju(t.stateNode.containerInfo),dl(t),null;case 10:return Mi(t.type),dl(t),null;case 19:if(z(Fa),null===(r=t.memoizedState))return dl(t),null;if(i=!!(128&t.flags),null===(a=r.rendering))if(i)ul(r,!1);else{if(0!==_c||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(a=za(e))){for(t.flags|=128,ul(r,!1),e=a.updateQueue,t.updateQueue=e,cl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Br(n,e),n=n.sibling;return B(Fa,1&Fa.current|2),ui&&ri(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&se()>Lc&&(t.flags|=128,i=!0,ul(r,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=za(a))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,cl(t,e),ul(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate&&!ui)return dl(t),null}else 2*se()-r.renderingStartTime>Lc&&536870912!==n&&(t.flags|=128,i=!0,ul(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=r.last)?e.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=se(),e.sibling=null,n=Fa.current,B(Fa,i?1&n|2:1&n),ui&&ri(t,r.treeForkCount),e):(dl(t),null);case 22:case 23:return Oa(t),Pa(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?!!(536870912&n)&&!(128&t.flags)&&(dl(t),6&t.subtreeFlags&&(t.flags|=8192)):dl(t),null!==(n=t.updateQueue)&&cl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&z(Xi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Mi(Oi),dl(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function pl(e,t){switch(oi(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Mi(Oi),Y(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return K(t),null;case 31:if(null!==t.memoizedState){if(Oa(t),null===t.alternate)throw Error(o(340));yi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Oa(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));yi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return z(Fa),null;case 4:return Y(),null;case 10:return Mi(t.type),null;case 22:case 23:return Oa(t),Pa(),null!==e&&z(Xi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Mi(Oi),null;default:return null}}function fl(e,t){switch(oi(t),t.tag){case 3:Mi(Oi),Y();break;case 26:case 27:case 5:K(t);break;case 4:Y();break;case 31:null!==t.memoizedState&&Oa(t);break;case 13:Oa(t);break;case 19:z(Fa);break;case 10:Mi(t.type);break;case 22:case 23:Oa(t),Pa(),null!==e&&z(Xi);break;case 24:Mi(Oi)}}function ml(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){_u(t,t.return,e)}}function gl(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(void 0!==s){o.destroy=void 0,i=t;var l=n,c=s;try{c()}catch(e){_u(i,l,e)}}}r=r.next}while(r!==a)}}catch(e){_u(t,t.return,e)}}function vl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Ma(t,n)}catch(t){_u(e,e.return,t)}}}function yl(e,t,n){n.props=_s(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){_u(e,t,n)}}function bl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"==typeof n?e.refCleanup=n(r):n.current=r}}catch(n){_u(e,t,n)}}function xl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"==typeof r)try{r()}catch(n){_u(e,t,n)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(n){_u(e,t,n)}else n.current=null}function wl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){_u(e,e.return,t)}}function _l(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,a=null,s=null,l=null,c=null,u=null,d=null;for(f in n){var h=n[f];if(n.hasOwnProperty(f)&&null!=h)switch(f){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(f)||cd(e,t,f,null,r,h)}}for(var p in r){var f=r[p];if(h=n[p],r.hasOwnProperty(p)&&(null!=f||null!=h))switch(p){case"type":a=f;break;case"name":i=f;break;case"checked":u=f;break;case"defaultChecked":d=f;break;case"value":s=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:f!==h&&cd(e,t,p,f,r,h)}}return void vt(e,s,l,c,u,d,a,i);case"select":for(a in f=s=l=p=null,n)if(c=n[a],n.hasOwnProperty(a)&&null!=c)switch(a){case"value":break;case"multiple":f=c;default:r.hasOwnProperty(a)||cd(e,t,a,null,r,c)}for(i in r)if(a=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=a||null!=c))switch(i){case"value":p=a;break;case"defaultValue":l=a;break;case"multiple":s=a;default:a!==c&&cd(e,t,i,a,r,c)}return t=l,n=s,r=f,void(null!=p?xt(e,!!n,p,!1):!!r!=!!n&&(null!=t?xt(e,!!n,t,!0):xt(e,!!n,n?[]:"",!1)));case"textarea":for(l in f=p=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:cd(e,t,l,null,r,i)}for(s in r)if(i=r[s],a=n[s],r.hasOwnProperty(s)&&(null!=i||null!=a))switch(s){case"value":p=i;break;case"defaultValue":f=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(o(91));break;default:i!==a&&cd(e,t,s,i,r,a)}return void wt(e,p,f);case"option":for(var m in n)p=n[m],n.hasOwnProperty(m)&&null!=p&&!r.hasOwnProperty(m)&&("selected"===m?e.selected=!1:cd(e,t,m,null,r,p));for(c in r)p=r[c],f=n[c],!r.hasOwnProperty(c)||p===f||null==p&&null==f||("selected"===c?e.selected=p&&"function"!=typeof p&&"symbol"!=typeof p:cd(e,t,c,p,r,f));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&null!=p&&!r.hasOwnProperty(g)&&cd(e,t,g,null,r,p);for(u in r)if(p=r[u],f=n[u],r.hasOwnProperty(u)&&p!==f&&(null!=p||null!=f))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:cd(e,t,u,p,r,f)}return;default:if(At(t)){for(var v in n)p=n[v],n.hasOwnProperty(v)&&void 0!==p&&!r.hasOwnProperty(v)&&ud(e,t,v,void 0,r,p);for(d in r)p=r[d],f=n[d],!r.hasOwnProperty(d)||p===f||void 0===p&&void 0===f||ud(e,t,d,p,r,f);return}}for(var y in n)p=n[y],n.hasOwnProperty(y)&&null!=p&&!r.hasOwnProperty(y)&&cd(e,t,y,null,r,p);for(h in r)p=r[h],f=n[h],!r.hasOwnProperty(h)||p===f||null==p&&null==f||cd(e,t,h,p,r,f)}(r,e.type,n,t),r[He]=t}catch(t){_u(e,e.return,t)}}function El(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Md(e.type)||4===e.tag}function Sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||El(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Md(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Ml(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=kt));else if(4!==r&&(27===r&&Md(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Ml(e,t,n),e=e.sibling;null!==e;)Ml(e,t,n),e=e.sibling}function Tl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Md(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Tl(e,t,n),e=e.sibling;null!==e;)Tl(e,t,n),e=e.sibling}function Al(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);dd(t,r,n),t[Be]=e,t[He]=n}catch(t){_u(e,e.return,t)}}var Cl=!1,Rl=!1,Pl=!1,kl="function"==typeof WeakSet?WeakSet:Set,Il=null;function Ll(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:ql(e,n),4&r&&ml(5,n);break;case 1:if(ql(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(e){_u(n,n.return,e)}else{var i=_s(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){_u(n,n.return,e)}}64&r&&vl(n),512&r&&bl(n,n.return);break;case 3:if(ql(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Ma(e,t)}catch(e){_u(n,n.return,e)}}break;case 27:null===t&&4&r&&Al(n);case 26:case 5:ql(e,n),null===t&&4&r&&wl(n),512&r&&bl(n,n.return);break;case 12:ql(e,n);break;case 31:ql(e,n),4&r&&zl(e,n);break;case 13:ql(e,n),4&r&&Bl(e,n),64&r&&null!==(e=n.memoizedState)&&null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Tu.bind(null,n));break;case 22:if(!(r=null!==n.memoizedState||Cl)){t=null!==t&&null!==t.memoizedState||Rl,i=Cl;var a=Rl;Cl=r,(Rl=t)&&!a?$l(e,n,!!(8772&n.subtreeFlags)):ql(e,n),Cl=i,Rl=a}break;case 30:break;default:ql(e,n)}}function Nl(e){var t=e.alternate;null!==t&&(e.alternate=null,Nl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&Ye(t),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Dl=null,Ul=!1;function Ol(e,t,n){for(n=n.child;null!==n;)Fl(e,t,n),n=n.sibling}function Fl(e,t,n){if(ve&&"function"==typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(ge,n)}catch(e){}switch(n.tag){case 26:Rl||xl(n,t),Ol(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Rl||xl(n,t);var r=Dl,i=Ul;Md(n.type)&&(Dl=n.stateNode,Ul=!1),Ol(e,t,n),Od(n.stateNode),Dl=r,Ul=i;break;case 5:Rl||xl(n,t);case 6:if(r=Dl,i=Ul,Dl=null,Ol(e,t,n),Ul=i,null!==(Dl=r))if(Ul)try{(9===Dl.nodeType?Dl.body:"HTML"===Dl.nodeName?Dl.ownerDocument.body:Dl).removeChild(n.stateNode)}catch(e){_u(n,t,e)}else try{Dl.removeChild(n.stateNode)}catch(e){_u(n,t,e)}break;case 18:null!==Dl&&(Ul?(Td(9===(e=Dl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Hh(e)):Td(Dl,n.stateNode));break;case 4:r=Dl,i=Ul,Dl=n.stateNode.containerInfo,Ul=!0,Ol(e,t,n),Dl=r,Ul=i;break;case 0:case 11:case 14:case 15:gl(2,n,t),Rl||gl(4,n,t),Ol(e,t,n);break;case 1:Rl||(xl(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&yl(n,t,r)),Ol(e,t,n);break;case 21:Ol(e,t,n);break;case 22:Rl=(r=Rl)||null!==n.memoizedState,Ol(e,t,n),Rl=r;break;default:Ol(e,t,n)}}function zl(e,t){if(null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)){e=e.dehydrated;try{Hh(e)}catch(e){_u(t,t.return,e)}}}function Bl(e,t){if(null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))try{Hh(e)}catch(e){_u(t,t.return,e)}}function Hl(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new kl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new kl),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Au.bind(null,e,t);t.then(r,r)}})}function Vl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 27:if(Md(l.type)){Dl=l.stateNode,Ul=!1;break e}break;case 5:Dl=l.stateNode,Ul=!1;break e;case 3:case 4:Dl=l.stateNode.containerInfo,Ul=!0;break e}l=l.return}if(null===Dl)throw Error(o(160));Fl(a,s,i),Dl=null,Ul=!1,null!==(a=i.alternate)&&(a.return=null),i.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Wl(t,e),t=t.sibling}var jl=null;function Wl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Vl(t,e),Gl(e),4&r&&(gl(3,e,e.return),ml(3,e),gl(5,e,e.return));break;case 1:Vl(t,e),Gl(e),512&r&&(Rl||null===n||xl(n,n.return)),64&r&&Cl&&null!==(e=e.updateQueue)&&null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r));break;case 26:var i=jl;if(Vl(t,e),Gl(e),512&r&&(Rl||null===n||xl(n,n.return)),4&r){var a=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(a=i.getElementsByTagName("title")[0])||a[qe]||a[Be]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=i.createElement(r),i.head.insertBefore(a,i.querySelector("head > title"))),dd(a,r,n),a[Be]=e,Qe(a),r=a;break e;case"link":var s=th("link","href",i).get(r+(n.href||""));if(s)for(var l=0;l<s.length;l++)if((a=s[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&a.getAttribute("rel")===(null==n.rel?null:n.rel)&&a.getAttribute("title")===(null==n.title?null:n.title)&&a.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(l,1);break t}dd(a=i.createElement(r),r,n),i.head.appendChild(a);break;case"meta":if(s=th("meta","content",i).get(r+(n.content||"")))for(l=0;l<s.length;l++)if((a=s[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&a.getAttribute("name")===(null==n.name?null:n.name)&&a.getAttribute("property")===(null==n.property?null:n.property)&&a.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&a.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(l,1);break t}dd(a=i.createElement(r),r,n),i.head.appendChild(a);break;default:throw Error(o(468,r))}a[Be]=e,Qe(a),r=a}e.stateNode=r}else nh(i,e.type,e.stateNode);else e.stateNode=Kd(i,r,e.memoizedProps);else a!==r?(null===a?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):a.count--,null===r?nh(i,e.type,e.stateNode):Kd(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&_l(e,e.memoizedProps,n.memoizedProps)}break;case 27:Vl(t,e),Gl(e),512&r&&(Rl||null===n||xl(n,n.return)),null!==n&&4&r&&_l(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Vl(t,e),Gl(e),512&r&&(Rl||null===n||xl(n,n.return)),32&e.flags){i=e.stateNode;try{Et(i,"")}catch(t){_u(e,e.return,t)}}4&r&&null!=e.stateNode&&_l(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(Pl=!0);break;case 6:if(Vl(t,e),Gl(e),4&r){if(null===e.stateNode)throw Error(o(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){_u(e,e.return,t)}}break;case 3:if(eh=null,i=jl,jl=Bd(t.containerInfo),Vl(t,e),jl=i,Gl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Hh(t.containerInfo)}catch(t){_u(e,e.return,t)}Pl&&(Pl=!1,Xl(e));break;case 4:r=jl,jl=Bd(e.stateNode.containerInfo),Vl(t,e),Gl(e),jl=r;break;case 12:default:Vl(t,e),Gl(e);break;case 31:case 19:Vl(t,e),Gl(e),4&r&&null!==(r=e.updateQueue)&&(e.updateQueue=null,Hl(e,r));break;case 13:Vl(t,e),Gl(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(kc=se()),4&r&&null!==(r=e.updateQueue)&&(e.updateQueue=null,Hl(e,r));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=Cl,d=Rl;if(Cl=u||i,Rl=d||c,Vl(t,e),Rl=d,Cl=u,Gl(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||Cl||Rl||Yl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(a=c.stateNode,i)"function"==typeof(s=a.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,p=null!=h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==p||"boolean"==typeof p?"":(""+p).trim()}}catch(e){_u(c,c.return,e)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(e){_u(c,c.return,e)}}}else if(18===t.tag){if(null===n){c=t;try{var f=c.stateNode;i?Ad(f,!0):Ad(c.stateNode,!1)}catch(e){_u(c,c.return,e)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&null!==(r=e.updateQueue)&&null!==(n=r.retryQueue)&&(r.retryQueue=null,Hl(e,n));case 30:case 21:}}function Gl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(El(r)){n=r;break}r=r.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var i=n.stateNode;Tl(e,Sl(e),i);break;case 5:var a=n.stateNode;32&n.flags&&(Et(a,""),n.flags&=-33),Tl(e,Sl(e),a);break;case 3:case 4:var s=n.stateNode.containerInfo;Ml(e,Sl(e),s);break;default:throw Error(o(161))}}catch(t){_u(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Xl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Xl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function ql(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ll(e,t.alternate,t),t=t.sibling}function Yl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:gl(4,t,t.return),Yl(t);break;case 1:xl(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&yl(t,t.return,n),Yl(t);break;case 27:Od(t.stateNode);case 26:case 5:xl(t,t.return),Yl(t);break;case 22:null===t.memoizedState&&Yl(t);break;default:Yl(t)}e=e.sibling}}function $l(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:$l(i,a,n),ml(4,a);break;case 1:if($l(i,a,n),"function"==typeof(i=(r=a).stateNode).componentDidMount)try{i.componentDidMount()}catch(e){_u(r,r.return,e)}if(null!==(i=(r=a).updateQueue)){var s=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)Sa(l[i],s)}catch(e){_u(r,r.return,e)}}n&&64&o&&vl(a),bl(a,a.return);break;case 27:Al(a);case 26:case 5:$l(i,a,n),n&&null===r&&4&o&&wl(a),bl(a,a.return);break;case 12:$l(i,a,n);break;case 31:$l(i,a,n),n&&4&o&&zl(i,a);break;case 13:$l(i,a,n),n&&4&o&&Bl(i,a);break;case 22:null===a.memoizedState&&$l(i,a,n),bl(a,a.return);break;case 30:break;default:$l(i,a,n)}t=t.sibling}}function Kl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&zi(n))}function Zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&zi(e))}function Jl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Ql(e,t,n,r),t=t.sibling}function Ql(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Jl(e,t,n,r),2048&i&&ml(9,t);break;case 1:case 31:case 13:default:Jl(e,t,n,r);break;case 3:Jl(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&zi(e)));break;case 12:if(2048&i){Jl(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;"function"==typeof s&&s(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(e){_u(t,t.return,e)}}else Jl(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,o=t.alternate,null!==t.memoizedState?2&a._visibility?Jl(e,t,n,r):tc(e,t):2&a._visibility?Jl(e,t,n,r):(a._visibility|=2,ec(e,t,n,r,!!(10256&t.subtreeFlags)||!1)),2048&i&&Kl(o,t);break;case 24:Jl(e,t,n,r),2048&i&&Zl(t.alternate,t)}}function ec(e,t,n,r,i){for(i=i&&(!!(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var a=e,o=t,s=n,l=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:ec(a,o,s,l,i),ml(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?2&u._visibility?ec(a,o,s,l,i):tc(a,o):(u._visibility|=2,ec(a,o,s,l,i)),i&&2048&c&&Kl(o.alternate,o);break;case 24:ec(a,o,s,l,i),i&&2048&c&&Zl(o.alternate,o);break;default:ec(a,o,s,l,i)}t=t.sibling}}function tc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:tc(n,r),2048&i&&Kl(r.alternate,r);break;case 24:tc(n,r),2048&i&&Zl(r.alternate,r);break;default:tc(n,r)}t=t.sibling}}var nc=8192;function rc(e,t,n){if(e.subtreeFlags&nc)for(e=e.child;null!==e;)ic(e,t,n),e=e.sibling}function ic(e,t,n){switch(e.tag){case 26:rc(e,t,n),e.flags&nc&&null!==e.memoizedState&&function(e,t,n,r){if(!("stylesheet"!==n.type||"string"==typeof r.media&&!1===matchMedia(r.media).matches||4&n.state.loading)){if(null===n.instance){var i=Gd(r.href),a=t.querySelector(Xd(i));if(a)return null!==(t=a._p)&&"object"==typeof t&&"function"==typeof t.then&&(e.count++,e=ah.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,void Qe(a);a=t.ownerDocument||t,r=qd(r),(i=Fd.get(i))&&Jd(r,i),Qe(a=a.createElement("link"));var o=a;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),dd(a,"link",r),n.instance=a}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(3&n.state.loading)&&(e.count++,n=ah.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,jl,e.memoizedState,e.memoizedProps);break;case 5:default:rc(e,t,n);break;case 3:case 4:var r=jl;jl=Bd(e.stateNode.containerInfo),rc(e,t,n),jl=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=nc,nc=16777216,rc(e,t,n),nc=r):rc(e,t,n))}}function ac(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function oc(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Il=r,cc(r,e)}ac(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)sc(e),e=e.sibling}function sc(e){switch(e.tag){case 0:case 11:case 15:oc(e),2048&e.flags&&gl(9,e,e.return);break;case 3:case 12:default:oc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,lc(e)):oc(e)}}function lc(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Il=r,cc(r,e)}ac(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:gl(8,t,t.return),lc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,lc(t));break;default:lc(t)}e=e.sibling}}function cc(e,t){for(;null!==Il;){var n=Il;switch(n.tag){case 0:case 11:case 15:gl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:zi(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Il=r;else e:for(n=e;null!==Il;){var i=(r=Il).sibling,a=r.return;if(Nl(r),r===n){Il=null;break e}if(null!==i){i.return=a,Il=i;break e}Il=a}}}var uc={getCacheForType:function(e){var t=ki(Oi),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return ki(Oi).controller.signal}},dc="function"==typeof WeakMap?WeakMap:Map,hc=0,pc=null,fc=null,mc=0,gc=0,vc=null,yc=!1,bc=!1,xc=!1,wc=0,_c=0,Ec=0,Sc=0,Mc=0,Tc=0,Ac=0,Cc=null,Rc=null,Pc=!1,kc=0,Ic=0,Lc=1/0,Nc=null,Dc=null,Uc=0,Oc=null,Fc=null,zc=0,Bc=0,Hc=null,Vc=null,jc=0,Wc=null;function Gc(){return 2&hc&&0!==mc?mc&-mc:null!==L.T?Hu():Oe()}function Xc(){if(0===Tc)if(536870912&mc&&!ui)Tc=536870912;else{var e=Ee;!(3932160&(Ee<<=1))&&(Ee=262144),Tc=e}return null!==(e=ka.current)&&(e.flags|=32),Tc}function qc(e,t,n){(e!==pc||2!==gc&&9!==gc)&&null===e.cancelPendingCommit||(eu(e,0),Zc(e,mc,Tc,!1)),ke(e,n),2&hc&&e===pc||(e===pc&&(!(2&hc)&&(Sc|=n),4===_c&&Zc(e,mc,Tc,!1)),Nu(e))}function Yc(e,t,n){if(6&hc)throw Error(o(327));for(var r=!n&&!(127&t)&&0===(t&e.expiredLanes)||Ae(e,t),i=r?function(e,t){var n=hc;hc|=2;var r=ru(),i=iu();pc!==e||mc!==t?(Nc=null,Lc=se()+500,eu(e,t)):bc=Ae(e,t);e:for(;;)try{if(0!==gc&&null!==fc){t=fc;var a=vc;t:switch(gc){case 1:gc=0,vc=null,du(e,t,a,1);break;case 2:case 9:if(ea(a)){gc=0,vc=null,uu(t);break}t=function(){2!==gc&&9!==gc||pc!==e||(gc=7),Nu(e)},a.then(t,t);break e;case 3:gc=7;break e;case 4:gc=5;break e;case 7:ea(a)?(gc=0,vc=null,uu(t)):(gc=0,vc=null,du(e,t,a,7));break;case 5:var s=null;switch(fc.tag){case 26:s=fc.memoizedState;case 5:case 27:var l=fc;if(s?rh(s):l.stateNode.complete){gc=0,vc=null;var c=l.sibling;if(null!==c)fc=c;else{var u=l.return;null!==u?(fc=u,hu(u)):fc=null}break t}}gc=0,vc=null,du(e,t,a,5);break;case 6:gc=0,vc=null,du(e,t,a,6);break;case 8:Qc(),_c=6;break e;default:throw Error(o(462))}}lu();break}catch(t){tu(e,t)}return Ei=_i=null,L.H=r,L.A=i,hc=n,null!==fc?0:(pc=null,mc=0,Rr(),_c)}(e,t):ou(e,t,!0),a=r;;){if(0===i){bc&&!r&&Zc(e,t,0,!1);break}if(n=e.current.alternate,!a||Kc(n)){if(2===i){if(a=t,e.errorRecoveryDisabledLanes&a)var s=0;else s=0!=(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var l=e;i=Cc;var c=l.current.memoizedState.isDehydrated;if(c&&(eu(l,s).flags|=256),2!==(s=ou(l,s,!1))){if(xc&&!c){l.errorRecoveryDisabledLanes|=a,Sc|=a,i=4;break e}a=Rc,Rc=i,null!==a&&(null===Rc?Rc=a:Rc.push.apply(Rc,a))}i=s}if(a=!1,2!==i)continue}}if(1===i){eu(e,0),Zc(e,t,0,!0);break}e:{switch(r=e,a=i){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:Zc(r,t,Tc,!yc);break e;case 2:Rc=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(i=kc+300-se())){if(Zc(r,t,Tc,!yc),0!==Te(r,0,!0))break e;zc=t,r.timeoutHandle=xd($c.bind(null,r,n,Rc,Nc,Pc,t,Tc,Sc,Ac,yc,a,"Throttled",-0,0),i)}else $c(r,n,Rc,Nc,Pc,t,Tc,Sc,Ac,yc,a,null,-0,0)}break}i=ou(e,t,!1),a=!1}Nu(e)}function $c(e,t,n,r,i,a,o,s,l,c,u,d,h,p){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||!(16785408&~d)){ic(t,a,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:kt});var f=(62914560&a)===a?kc-se():(4194048&a)===a?Ic-se():0;if(f=function(e,t){return e.stylesheets&&0===e.count&&sh(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&sh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===ih&&(ih=62500*function(){if("function"==typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var i=n[r],a=i.transferSize,o=i.initiatorType,s=i.duration;if(a&&s&&hd(o)){for(o=0,s=i.responseEnd,r+=1;r<n.length;r++){var l=n[r],c=l.startTime;if(c>s)break;var u=l.transferSize,d=l.initiatorType;u&&hd(d)&&(o+=u*((l=l.responseEnd)<s?1:(s-c)/(l-c)))}if(--r,t+=8*(a+o)/(i.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"==typeof(e=navigator.connection.downlink)?e:5}());var i=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&sh(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>ih?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}(d,f),null!==f)return zc=a,e.cancelPendingCommit=f(fu.bind(null,e,t,a,n,r,i,o,s,l,u,d,null,h,p)),void Zc(e,a,o,!c)}fu(e,t,a,n,r,i,o,s,l)}function Kc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&null!==(n=t.updateQueue)&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Zn(a(),i))return!1}catch(e){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zc(e,t,n,r){t&=~Mc,t&=~Sc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-be(i),o=1<<a;r[a]=-1,i&=~o}0!==n&&Ie(e,n,t)}function Jc(){return!!(6&hc)||(Du(0,!1),!1)}function Qc(){if(null!==fc){if(0===gc)var e=fc.return;else Ei=_i=null,ao(e=fc),oa=null,sa=0,e=fc;for(;null!==e;)fl(e.alternate,e),e=e.return;fc=null}}function eu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,wd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),zc=0,Qc(),pc=e,fc=n=zr(e.current,null),mc=t,gc=0,vc=null,yc=!1,bc=Ae(e,t),xc=!1,Ac=Tc=Mc=Sc=Ec=_c=0,Rc=Cc=null,Pc=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-be(r),a=1<<i;t|=e[i],r&=~a}return wc=t,Rr(),n}function tu(e,t){Ha=null,L.H=fs,t===Ki||t===Ji?(t=ia(),gc=3):t===Zi?(t=ia(),gc=4):gc=t===ks?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,vc=t,null===fc&&(_c=1,Ts(e,qr(t,e.current)))}function nu(){var e=ka.current;return null===e||((4194048&mc)===mc?null===Ia:!!((62914560&mc)===mc||536870912&mc)&&e===Ia)}function ru(){var e=L.H;return L.H=fs,null===e?fs:e}function iu(){var e=L.A;return L.A=uc,e}function au(){_c=4,yc||(4194048&mc)!==mc&&null!==ka.current||(bc=!0),!(134217727&Ec)&&!(134217727&Sc)||null===pc||Zc(pc,mc,Tc,!1)}function ou(e,t,n){var r=hc;hc|=2;var i=ru(),a=iu();pc===e&&mc===t||(Nc=null,eu(e,t)),t=!1;var o=_c;e:for(;;)try{if(0!==gc&&null!==fc){var s=fc,l=vc;switch(gc){case 8:Qc(),o=6;break e;case 3:case 2:case 9:case 6:null===ka.current&&(t=!0);var c=gc;if(gc=0,vc=null,du(e,s,l,c),n&&bc){o=0;break e}break;default:c=gc,gc=0,vc=null,du(e,s,l,c)}}su(),o=_c;break}catch(t){tu(e,t)}return t&&e.shellSuspendCounter++,Ei=_i=null,hc=r,L.H=i,L.A=a,null===fc&&(pc=null,mc=0,Rr()),o}function su(){for(;null!==fc;)cu(fc)}function lu(){for(;null!==fc&&!ae();)cu(fc)}function cu(e){var t=al(e.alternate,e,wc);e.memoizedProps=e.pendingProps,null===t?hu(e):fc=t}function uu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ws(n,t,t.pendingProps,t.type,void 0,mc);break;case 11:t=Ws(n,t,t.pendingProps,t.type.render,t.ref,mc);break;case 5:ao(t);default:fl(n,t),t=al(n,t=fc=Br(t,wc),wc)}e.memoizedProps=e.pendingProps,null===t?hu(e):fc=t}function du(e,t,n,r){Ei=_i=null,ao(t),oa=null,sa=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"==typeof r&&"function"==typeof r.then){if(null!==(t=n.alternate)&&Ci(t,n,i,!0),null!==(n=ka.current)){switch(n.tag){case 31:case 13:return null===Ia?au():null===n.alternate&&0===_c&&(_c=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Qi?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),Eu(e,r,i)),!1;case 22:return n.flags|=65536,r===Qi?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),Eu(e,r,i)),!1}throw Error(o(435,n.tag))}return Eu(e,r,i),au(),!1}if(ui)return null!==(t=ka.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==pi&&xi(qr(e=Error(o(422),{cause:r}),n))):(r!==pi&&xi(qr(t=Error(o(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=qr(r,n),xa(e,i=Cs(e.stateNode,r,i)),4!==_c&&(_c=2)),!1;var a=Error(o(520),{cause:r});if(a=qr(a,n),null===Cc?Cc=[a]:Cc.push(a),4!==_c&&(_c=2),null===t)return!0;r=qr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,xa(n,e=Cs(n.stateNode,r,e)),!1;case 1:if(t=n.type,a=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===a||"function"!=typeof a.componentDidCatch||null!==Dc&&Dc.has(a))))return n.flags|=65536,i&=-i,n.lanes|=i,Ps(i=Rs(i),e,n,r),xa(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,mc))return _c=1,Ts(e,qr(n,e.current)),void(fc=null)}catch(t){if(null!==i)throw fc=i,t;return _c=1,Ts(e,qr(n,e.current)),void(fc=null)}32768&t.flags?(ui||1===r?e=!0:bc||536870912&mc?e=!1:(yc=e=!0,(2===r||9===r||3===r||6===r)&&null!==(r=ka.current)&&13===r.tag&&(r.flags|=16384)),pu(t,e)):hu(t)}function hu(e){var t=e;do{if(32768&t.flags)return void pu(t,yc);e=t.return;var n=hl(t.alternate,t,wc);if(null!==n)return void(fc=n);if(null!==(t=t.sibling))return void(fc=t);fc=t=e}while(null!==t);0===_c&&(_c=5)}function pu(e,t){do{var n=pl(e.alternate,e);if(null!==n)return n.flags&=32767,void(fc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(fc=e);fc=e=n}while(null!==e);_c=6,fc=null}function fu(e,t,n,r,i,a,s,l,c){e.cancelPendingCommit=null;do{bu()}while(0!==Uc);if(6&hc)throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(a=t.lanes|t.childLanes,function(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-be(n),d=1<<u;s[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var p=h[u];null!==p&&(p.lane&=-536870913)}n&=~d}0!==r&&Ie(e,r,0),0!==a&&0===i&&0!==e.tag&&(e.suspendedLanes|=a&~(o&~t))}(e,n,a|=Cr,s,l,c),e===pc&&(fc=pc=null,mc=0),Fc=t,Oc=e,zc=n,Bc=a,Hc=i,Vc=r,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,re(de,function(){return xu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=!!(13878&t.flags),13878&t.subtreeFlags||r){r=L.T,L.T=null,i=N.p,N.p=2,s=hc,hc|=4;try{!function(e,t){if(e=e.containerInfo,pd=gh,rr(e=nr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(e){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==i&&3!==h.nodeType||(l=s+i),h!==a||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===i&&(l=s),p===a&&++d===r&&(c=s),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(fd={focusedElem:e,selectionRange:n},gh=!1,Il=t;null!==Il;)if(e=(t=Il).child,1028&t.subtreeFlags&&null!==e)e.return=t,Il=e;else for(;null!==Il;){switch(a=(t=Il).alternate,e=t.flags,t.tag){case 0:if(4&e&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(i=e[n]).ref.impl=i.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==a){e=void 0,n=t,i=a.memoizedProps,a=a.memoizedState,r=n.stateNode;try{var m=_s(n.type,i);e=r.getSnapshotBeforeUpdate(m,a),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){_u(n,n.return,e)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))Cd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Cd(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,Il=e;break}Il=t.return}}(e,t)}finally{hc=s,N.p=i,L.T=r}}Uc=1,mu(),gu(),vu()}}function mu(){if(1===Uc){Uc=0;var e=Oc,t=Fc,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=L.T,L.T=null;var r=N.p;N.p=2;var i=hc;hc|=4;try{Wl(t,e);var a=fd,o=nr(e.containerInfo),s=a.focusedElem,l=a.selectionRange;if(o!==s&&s&&s.ownerDocument&&tr(s.ownerDocument.documentElement,s)){if(null!==l&&rr(s)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in s)s.selectionStart=c,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var p=h.getSelection(),f=s.textContent.length,m=Math.min(l.start,f),g=void 0===l.end?m:Math.min(l.end,f);!p.extend&&m>g&&(o=g,g=m,m=o);var v=er(s,m),y=er(s,g);if(v&&y&&(1!==p.rangeCount||p.anchorNode!==v.node||p.anchorOffset!==v.offset||p.focusNode!==y.node||p.focusOffset!==y.offset)){var b=d.createRange();b.setStart(v.node,v.offset),p.removeAllRanges(),m>g?(p.addRange(b),p.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),p.addRange(b))}}}}for(d=[],p=s;p=p.parentNode;)1===p.nodeType&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"==typeof s.focus&&s.focus(),s=0;s<d.length;s++){var x=d[s];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}gh=!!pd,fd=pd=null}finally{hc=i,N.p=r,L.T=n}}e.current=t,Uc=2}}function gu(){if(2===Uc){Uc=0;var e=Oc,t=Fc,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=L.T,L.T=null;var r=N.p;N.p=2;var i=hc;hc|=4;try{Ll(e,t.alternate,t)}finally{hc=i,N.p=r,L.T=n}}Uc=3}}function vu(){if(4===Uc||3===Uc){Uc=0,oe();var e=Oc,t=Fc,n=zc,r=Vc;10256&t.subtreeFlags||10256&t.flags?Uc=5:(Uc=0,Fc=Oc=null,yu(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Dc=null),Ue(n),t=t.stateNode,ve&&"function"==typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(ge,t,void 0,!(128&~t.current.flags))}catch(e){}if(null!==r){t=L.T,i=N.p,N.p=2,L.T=null;try{for(var a=e.onRecoverableError,o=0;o<r.length;o++){var s=r[o];a(s.value,{componentStack:s.stack})}}finally{L.T=t,N.p=i}}3&zc&&bu(),Nu(e),i=e.pendingLanes,261930&n&&42&i?e===Wc?jc++:(jc=0,Wc=e):jc=0,Du(0,!1)}}function yu(e,t){0===(e.pooledCacheLanes&=t)&&null!=(t=e.pooledCache)&&(e.pooledCache=null,zi(t))}function bu(){return mu(),gu(),vu(),xu()}function xu(){if(5!==Uc)return!1;var e=Oc,t=Bc;Bc=0;var n=Ue(zc),r=L.T,i=N.p;try{N.p=32>n?32:n,L.T=null,n=Hc,Hc=null;var a=Oc,s=zc;if(Uc=0,Fc=Oc=null,zc=0,6&hc)throw Error(o(331));var l=hc;if(hc|=4,sc(a.current),Ql(a,a.current,s,n),hc=l,Du(0,!1),ve&&"function"==typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(ge,a)}catch(e){}return!0}finally{N.p=i,L.T=r,yu(e,t)}}function wu(e,t,n){t=qr(n,t),null!==(e=ya(e,t=Cs(e.stateNode,t,2),2))&&(ke(e,2),Nu(e))}function _u(e,t,n){if(3===e.tag)wu(e,e,n);else for(;null!==t;){if(3===t.tag){wu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Dc||!Dc.has(r))){e=qr(n,e),null!==(r=ya(t,n=Rs(2),2))&&(Ps(n,r,t,e),ke(r,2),Nu(r));break}}t=t.return}}function Eu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new dc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(xc=!0,i.add(n),e=Su.bind(null,e,t,n),t.then(e,e))}function Su(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,pc===e&&(mc&n)===n&&(4===_c||3===_c&&(62914560&mc)===mc&&300>se()-kc?!(2&hc)&&eu(e,0):Mc|=n,Ac===mc&&(Ac=0)),Nu(e)}function Mu(e,t){0===t&&(t=Re()),null!==(e=Ir(e,t))&&(ke(e,t),Nu(e))}function Tu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Mu(e,n)}function Au(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(t),Mu(e,n)}var Cu=null,Ru=null,Pu=!1,ku=!1,Iu=!1,Lu=0;function Nu(e){e!==Ru&&null===e.next&&(null===Ru?Cu=Ru=e:Ru=Ru.next=e),ku=!0,Pu||(Pu=!0,Ed(function(){6&hc?re(ce,Uu):Ou()}))}function Du(e,t){if(!Iu&&ku){Iu=!0;do{for(var n=!1,r=Cu;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=(1<<31-be(42|e)+1)-1,a=201326741&(a&=i&~(o&~s))?201326741&a|1:a?2|a:0}0!==a&&(n=!0,Bu(r,a))}else a=mc,!(3&(a=Te(r,r===pc?a:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Ae(r,a)||(n=!0,Bu(r,a));r=r.next}}while(n);Iu=!1}}function Uu(){Ou()}function Ou(){ku=Pu=!1;var e,t=0;0!==Lu&&((e=window.event)&&"popstate"===e.type?e!==bd&&(bd=e,1):(bd=null,0))&&(t=Lu);for(var n=se(),r=null,i=Cu;null!==i;){var a=i.next,o=Fu(i,n);0===o?(i.next=null,null===r?Cu=a:r.next=a,null===a&&(Ru=r)):(r=i,(0!==t||3&o)&&(ku=!0)),i=a}0!==Uc&&5!==Uc||Du(t,!1),0!==Lu&&(Lu=0)}function Fu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=-62914561&e.pendingLanes;0<a;){var o=31-be(a),s=1<<o,l=i[o];-1===l?0!==(s&n)&&0===(s&r)||(i[o]=Ce(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}if(n=mc,n=Te(e,e===(t=pc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===gc||9===gc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ie(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||Ae(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ie(r),Ue(n)){case 2:case 8:n=ue;break;case 32:default:n=de;break;case 268435456:n=pe}return r=zu.bind(null,e),n=re(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ie(r),e.callbackPriority=2,e.callbackNode=null,2}function zu(e,t){if(0!==Uc&&5!==Uc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(bu()&&e.callbackNode!==n)return null;var r=mc;return 0===(r=Te(e,e===pc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Yc(e,r,t),Fu(e,se()),null!=e.callbackNode&&e.callbackNode===n?zu.bind(null,e):null)}function Bu(e,t){if(bu())return null;Yc(e,t,!0)}function Hu(){if(0===Lu){var e=Vi;0===e&&(e=_e,!(261888&(_e<<=1))&&(_e=256)),Lu=e}return Lu}function Vu(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:Pt(""+e)}function ju(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Wu=0;Wu<Er.length;Wu++){var Gu=Er[Wu];Sr(Gu.toLowerCase(),"on"+(Gu[0].toUpperCase()+Gu.slice(1)))}Sr(mr,"onAnimationEnd"),Sr(gr,"onAnimationIteration"),Sr(vr,"onAnimationStart"),Sr("dblclick","onDoubleClick"),Sr("focusin","onFocus"),Sr("focusout","onBlur"),Sr(yr,"onTransitionRun"),Sr(br,"onTransitionStart"),Sr(xr,"onTransitionCancel"),Sr(wr,"onTransitionEnd"),rt("onMouseEnter",["mouseout","mouseover"]),rt("onMouseLeave",["mouseout","mouseover"]),rt("onPointerEnter",["pointerout","pointerover"]),rt("onPointerLeave",["pointerout","pointerover"]),nt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),nt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),nt("onBeforeInput",["compositionend","keypress","textInput","paste"]),nt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),nt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),nt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xu));function Yu(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;a=s,i.currentTarget=c;try{a(i)}catch(e){Mr(e)}i.currentTarget=null,a=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,c=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;a=s,i.currentTarget=c;try{a(i)}catch(e){Mr(e)}i.currentTarget=null,a=l}}}}function $u(e,t){var n=t[je];void 0===n&&(n=t[je]=new Set);var r=e+"__bubble";n.has(r)||(Qu(t,e,2,!1),n.add(r))}function Ku(e,t,n){var r=0;t&&(r|=4),Qu(n,e,r,t)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function Ju(e){if(!e[Zu]){e[Zu]=!0,et.forEach(function(t){"selectionchange"!==t&&(qu.has(t)||Ku(t,!1,e),Ku(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Zu]||(t[Zu]=!0,Ku("selectionchange",!1,t))}}function Qu(e,t,n,r){switch(Eh(t)){case 2:var i=vh;break;case 8:i=yh;break;default:i=bh}n=i.bind(null,t,n,e),i=void 0,!Ht||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function ed(e,t,n,r,i){var a=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var l=r.stateNode.containerInfo;if(l===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===i)return;o=o.return}for(;null!==l;){if(null===(o=$e(l)))return;if(5===(c=o.tag)||6===c||26===c||27===c){r=a=o;continue e}l=l.parentNode}}r=r.return}Ft(function(){var r=a,i=Lt(n),o=[];e:{var l=_r.get(e);if(void 0!==l){var c=tn,u=e;switch(e){case"keypress":if(0===qt(n))break e;case"keydown":case"keyup":c=vn;break;case"focusin":u="focus",c=ln;break;case"focusout":u="blur",c=ln;break;case"beforeblur":case"afterblur":c=ln;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=on;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=bn;break;case mr:case gr:case vr:c=cn;break;case wr:c=xn;break;case"scroll":case"scrollend":c=rn;break;case"wheel":c=wn;break;case"copy":case"cut":case"paste":c=un;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=yn;break;case"toggle":case"beforetoggle":c=_n}var d=!!(4&t),h=!d&&("scroll"===e||"scrollend"===e),p=d?null!==l?l+"Capture":null:l;d=[];for(var f,m=r;null!==m;){var g=m;if(f=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===f||null===p||null!=(g=zt(m,p))&&d.push(td(m,g,f)),h)break;m=m.return}0<d.length&&(l=new c(l,u,null,n,i),o.push({event:l,listeners:d}))}}if(!(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===It||!(u=n.relatedTarget||n.fromElement)||!$e(u)&&!u[Ve])&&(c||l)&&(l=i.window===i?i:(l=i.ownerDocument)?l.defaultView||l.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?$e(u):null)&&(h=s(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=on,g="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=yn,g="onPointerLeave",p="onPointerEnter",m="pointer"),h=null==c?l:Ze(c),f=null==u?l:Ze(u),(l=new d(g,m+"leave",c,n,i)).target=h,l.relatedTarget=f,g=null,$e(i)===r&&((d=new d(p,m+"enter",u,n,i)).target=f,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(d=rd,m=u,f=0,g=p=c;g;g=d(g))f++;g=0;for(var v=m;v;v=d(v))g++;for(;0<f-g;)p=d(p),f--;for(;0<g-f;)m=d(m),g--;for(;f--;){if(p===m||null!==m&&p===m.alternate){d=p;break e}p=d(p),m=d(m)}d=null}else d=null;null!==c&&id(o,l,c,d,!1),null!==u&&null!==h&&id(o,h,u,d,!0)}if("select"===(c=(l=r?Ze(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===c&&"file"===l.type)var y=Bn;else if(Nn(l))if(Hn)y=Kn;else{y=Yn;var b=qn}else!(c=l.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?r&&At(r.elementType)&&(y=Bn):y=$n;switch(y&&(y=y(e,r))?Dn(o,y,n,i):(b&&b(e,l,r),"focusout"===e&&r&&"number"===l.type&&null!=r.memoizedProps.value&&bt(l,"number",l.value)),b=r?Ze(r):window,e){case"focusin":(Nn(b)||"true"===b.contentEditable)&&(ar=b,or=r,sr=null);break;case"focusout":sr=or=ar=null;break;case"mousedown":lr=!0;break;case"contextmenu":case"mouseup":case"dragend":lr=!1,cr(o,n,i);break;case"selectionchange":if(ir)break;case"keydown":case"keyup":cr(o,n,i)}var x;if(Sn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else In?Pn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(An&&"ko"!==n.locale&&(In||"onCompositionStart"!==w?"onCompositionEnd"===w&&In&&(x=Xt()):(Wt="value"in(jt=i)?jt.value:jt.textContent,In=!0)),0<(b=nd(r,w)).length&&(w=new dn(w,e,null,n,i),o.push({event:w,listeners:b}),(x||null!==(x=kn(n)))&&(w.data=x))),(x=Tn?function(e,t){switch(e){case"compositionend":return kn(t);case"keypress":return 32!==t.which?null:(Rn=!0,Cn);case"textInput":return(e=t.data)===Cn&&Rn?null:e;default:return null}}(e,n):function(e,t){if(In)return"compositionend"===e||!Sn&&Pn(e,t)?(e=Xt(),Gt=Wt=jt=null,In=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return An&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(w=nd(r,"onBeforeInput")).length&&(b=new dn("onBeforeInput","beforeinput",null,n,i),o.push({event:b,listeners:w}),b.data=x),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var a=Vu((i[He]||null).action),o=r.submitter;o&&null!==(t=(t=o[He]||null)?Vu(t.formAction):o.getAttribute("formAction"))&&(a=t,o=null);var s=new tn("action","action",null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Lu){var e=o?ju(i,o):new FormData(i);es(n,{pending:!0,data:e,method:i.method,action:a},null,e)}}else"function"==typeof a&&(s.preventDefault(),e=o?ju(i,o):new FormData(i),es(n,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}(o,e,r,n,i)}Yu(o,t)})}function td(e,t,n){return{instance:e,listener:t,currentTarget:n}}function nd(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===a||(null!=(i=zt(e,n))&&r.unshift(td(e,i,a)),null!=(i=zt(e,t))&&r.push(td(e,i,a))),3===e.tag)return r;e=e.return}return[]}function rd(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function id(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(s=s.tag,null!==l&&l===r)break;5!==s&&26!==s&&27!==s||null===c||(l=c,i?null!=(c=zt(n,a))&&o.unshift(td(n,c,l)):i||null!=(c=zt(n,a))&&o.push(td(n,c,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var ad=/\r\n?/g,od=/\u0000|\uFFFD/g;function sd(e){return("string"==typeof e?e:""+e).replace(ad,"\n").replace(od,"")}function ld(e,t){return t=sd(t),sd(e)===t}function cd(e,t,n,r,i,a){switch(n){case"children":"string"==typeof r?"body"===t||"textarea"===t&&""===r||Et(e,r):("number"==typeof r||"bigint"==typeof r)&&"body"!==t&&Et(e,""+r);break;case"className":lt(e,"class",r);break;case"tabIndex":lt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":lt(e,n,r);break;case"style":Tt(e,r,a);break;case"data":if("object"!==t){lt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"==typeof r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=Pt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"==typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof a&&("formAction"===n?("input"!==t&&cd(e,t,"name",i.name,i,null),cd(e,t,"formEncType",i.formEncType,i,null),cd(e,t,"formMethod",i.formMethod,i,null),cd(e,t,"formTarget",i.formTarget,i,null)):(cd(e,t,"encType",i.encType,i,null),cd(e,t,"method",i.method,i,null),cd(e,t,"target",i.target,i,null))),null==r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=Pt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=kt);break;case"onScroll":null!=r&&$u("scroll",e);break;case"onScrollEnd":null!=r&&$u("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"muted":e.muted=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"==typeof r||"boolean"==typeof r||"symbol"==typeof r){e.removeAttribute("xlink:href");break}n=Pt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!=typeof r&&"symbol"!=typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"==typeof r||"symbol"==typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":$u("beforetoggle",e),$u("toggle",e),st(e,"popover",r);break;case"xlinkActuate":ct(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ct(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ct(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ct(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ct(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ct(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ct(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ct(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ct(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":st(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&st(e,n=Ct.get(n)||n,r)}}function ud(e,t,n,r,i,a){switch(n){case"style":Tt(e,r,a);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"==typeof r?Et(e,r):("number"==typeof r||"bigint"==typeof r)&&Et(e,""+r);break;case"onScroll":null!=r&&$u("scroll",e);break;case"onScrollEnd":null!=r&&$u("scrollend",e);break;case"onClick":null!=r&&(e.onclick=kt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:tt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"==typeof(a=null!=(a=e[He]||null)?a[n]:null)&&e.removeEventListener(t,a,i),"function"!=typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):st(e,n,r):("function"!=typeof a&&null!==a&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function dd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$u("error",e),$u("load",e);var r,i=!1,a=!1;for(r in n)if(n.hasOwnProperty(r)){var s=n[r];if(null!=s)switch(r){case"src":i=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:cd(e,t,r,s,n,null)}}return a&&cd(e,t,"srcSet",n.srcSet,n,null),void(i&&cd(e,t,"src",n.src,n,null));case"input":$u("invalid",e);var l=r=s=a=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":a=d;break;case"type":s=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(o(137,t));break;default:cd(e,t,i,d,n,null)}}return void yt(e,r,l,c,u,s,a,!1);case"select":for(a in $u("invalid",e),i=s=r=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":r=l;break;case"defaultValue":s=l;break;case"multiple":i=l;default:cd(e,t,a,l,n,null)}return t=r,n=s,e.multiple=!!i,void(null!=t?xt(e,!!i,t,!1):null!=n&&xt(e,!!i,n,!0));case"textarea":for(s in $u("invalid",e),r=a=i=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":i=l;break;case"defaultValue":a=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:cd(e,t,s,l,n,null)}return void _t(e,i,a,r);case"option":for(c in n)n.hasOwnProperty(c)&&null!=(i=n[c])&&("selected"===c?e.selected=i&&"function"!=typeof i&&"symbol"!=typeof i:cd(e,t,c,i,n,null));return;case"dialog":$u("beforetoggle",e),$u("toggle",e),$u("cancel",e),$u("close",e);break;case"iframe":case"object":$u("load",e);break;case"video":case"audio":for(i=0;i<Xu.length;i++)$u(Xu[i],e);break;case"image":$u("error",e),$u("load",e);break;case"details":$u("toggle",e);break;case"embed":case"source":case"link":$u("error",e),$u("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:cd(e,t,u,i,n,null)}return;default:if(At(t)){for(d in n)n.hasOwnProperty(d)&&void 0!==(i=n[d])&&ud(e,t,d,i,n,void 0);return}}for(l in n)n.hasOwnProperty(l)&&null!=(i=n[l])&&cd(e,t,l,i,n,null)}function hd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var pd=null,fd=null;function md(e){return 9===e.nodeType?e:e.ownerDocument}function gd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function yd(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var bd=null,xd="function"==typeof setTimeout?setTimeout:void 0,wd="function"==typeof clearTimeout?clearTimeout:void 0,_d="function"==typeof Promise?Promise:void 0,Ed="function"==typeof queueMicrotask?queueMicrotask:void 0!==_d?function(e){return _d.resolve(null).then(e).catch(Sd)}:xd;function Sd(e){setTimeout(function(){throw e})}function Md(e){return"head"===e}function Td(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)||"/&"===n){if(0===r)return e.removeChild(i),void Hh(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)Od(e.ownerDocument.documentElement);else if("head"===n){Od(n=e.ownerDocument.head);for(var a=n.firstChild;a;){var o=a.nextSibling,s=a.nodeName;a[qe]||"SCRIPT"===s||"STYLE"===s||"LINK"===s&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=o}}else"body"===n&&Od(e.ownerDocument.body);n=i}while(n);Hh(t)}function Ad(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function Cd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Cd(n),Ye(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Rd(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Id(e.nextSibling)))return null}return e}function Pd(e){return"$?"===e.data||"$~"===e.data}function kd(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Id(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Ld=null;function Nd(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Id(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Dd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Ud(e,t,n){switch(t=md(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function Od(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ye(e)}var Fd=new Map,zd=new Set;function Bd(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Hd=N.d;N.d={f:function(){var e=Hd.f(),t=Jc();return e||t},r:function(e){var t=Ke(e);null!==t&&5===t.tag&&"form"===t.type?ns(t):Hd.r(e)},D:function(e){Hd.D(e),jd("dns-prefetch",e,null)},C:function(e,t){Hd.C(e,t),jd("preconnect",e,t)},L:function(e,t,n){Hd.L(e,t,n);var r=Vd;if(r&&e&&t){var i='link[rel="preload"][as="'+gt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+gt(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(i+='[imagesizes="'+gt(n.imageSizes)+'"]')):i+='[href="'+gt(e)+'"]';var a=i;switch(t){case"style":a=Gd(e);break;case"script":a=Yd(e)}Fd.has(a)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Fd.set(a,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Xd(a))||"script"===t&&r.querySelector($d(a))||(dd(t=r.createElement("link"),"link",e),Qe(t),r.head.appendChild(t)))}},m:function(e,t){Hd.m(e,t);var n=Vd;if(n&&e){var r=t&&"string"==typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+gt(r)+'"][href="'+gt(e)+'"]',a=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Yd(e)}if(!Fd.has(a)&&(e=h({rel:"modulepreload",href:e},t),Fd.set(a,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector($d(a)))return}dd(r=n.createElement("link"),"link",e),Qe(r),n.head.appendChild(r)}}},X:function(e,t){Hd.X(e,t);var n=Vd;if(n&&e){var r=Je(n).hoistableScripts,i=Yd(e),a=r.get(i);a||((a=n.querySelector($d(i)))||(e=h({src:e,async:!0},t),(t=Fd.get(i))&&Qd(e,t),Qe(a=n.createElement("script")),dd(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(i,a))}},S:function(e,t,n){Hd.S(e,t,n);var r=Vd;if(r&&e){var i=Je(r).hoistableStyles,a=Gd(e);t=t||"default";var o=i.get(a);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(Xd(a)))s.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Fd.get(a))&&Jd(e,n);var l=o=r.createElement("link");Qe(l),dd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){s.loading|=1}),l.addEventListener("error",function(){s.loading|=2}),s.loading|=4,Zd(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:s},i.set(a,o)}}},M:function(e,t){Hd.M(e,t);var n=Vd;if(n&&e){var r=Je(n).hoistableScripts,i=Yd(e),a=r.get(i);a||((a=n.querySelector($d(i)))||(e=h({src:e,async:!0,type:"module"},t),(t=Fd.get(i))&&Qd(e,t),Qe(a=n.createElement("script")),dd(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(i,a))}}};var Vd="undefined"==typeof document?null:document;function jd(e,t,n){var r=Vd;if(r&&"string"==typeof t&&t){var i=gt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"==typeof n&&(i+='[crossorigin="'+n+'"]'),zd.has(i)||(zd.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(dd(t=r.createElement("link"),"link",e),Qe(t),r.head.appendChild(t)))}}function Wd(e,t,n,r){var i=(i=G.current)?Bd(i):null;if(!i)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=Gd(n.href),(r=(n=Je(i).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=Gd(n.href);var a=Je(i).hoistableStyles,s=a.get(e);if(s||(i=i.ownerDocument||i,s={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(e,s),(a=i.querySelector(Xd(e)))&&!a._p&&(s.instance=a,s.state.loading=5),Fd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Fd.set(e,n),a||function(e,t,n,r){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=e.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),dd(t,"link",n),Qe(t),e.head.appendChild(t))}(i,e,n,s.state))),t&&null===r)throw Error(o(528,""));return s}if(t&&null!==r)throw Error(o(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Yd(n),(r=(n=Je(i).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Gd(e){return'href="'+gt(e)+'"'}function Xd(e){return'link[rel="stylesheet"]['+e+"]"}function qd(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Yd(e){return'[src="'+gt(e)+'"]'}function $d(e){return"script[async]"+e}function Kd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+gt(n.href)+'"]');if(r)return t.instance=r,Qe(r),r;var i=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Qe(r=(e.ownerDocument||e).createElement("style")),dd(r,"style",i),Zd(r,n.precedence,e),t.instance=r;case"stylesheet":i=Gd(n.href);var a=e.querySelector(Xd(i));if(a)return t.state.loading|=4,t.instance=a,Qe(a),a;r=qd(n),(i=Fd.get(i))&&Jd(r,i),Qe(a=(e.ownerDocument||e).createElement("link"));var s=a;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),dd(a,"link",r),t.state.loading|=4,Zd(a,n.precedence,e),t.instance=a;case"script":return a=Yd(n.src),(i=e.querySelector($d(a)))?(t.instance=i,Qe(i),i):(r=n,(i=Fd.get(a))&&Qd(r=h({},n),i),Qe(i=(e=e.ownerDocument||e).createElement("script")),dd(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Zd(r,n.precedence,e));return t.instance}function Zd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,a=i,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)a=s;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Jd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Qd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var eh=null;function th(e,t,n){if(null===eh){var r=new Map,i=eh=new Map;i.set(n,r)}else(r=(i=eh).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var a=n[i];if(!(a[qe]||a[Be]||"link"===e&&"stylesheet"===a.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==a.namespaceURI){var o=a.getAttribute(t)||"";o=e+o;var s=r.get(o);s?s.push(a):r.set(o,[a])}}return r}function nh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function rh(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var ih=0;function ah(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)sh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var oh=null;function sh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,oh=new Map,t.forEach(lh,e),oh=null,ah.call(e))}function lh(e,t){if(!(4&t.state.loading)){var n=oh.get(e);if(n)var r=n.get(null);else{n=new Map,oh.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<i.length;a++){var o=i[a];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(i=t.instance).getAttribute("data-precedence"),(a=n.get(o)||r)===r&&n.set(null,i),n.set(o,i),this.count++,r=ah.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),a?a.parentNode.insertBefore(i,a.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var ch={$$typeof:x,Provider:null,Consumer:null,_currentValue:D,_currentValue2:D,_threadCount:0};function uh(e,t,n,r,i,a,o,s,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pe(0),this.hiddenUpdates=Pe(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function dh(e,t,n,r,i,a){i=function(e){return e?e=Dr:Dr}(i),null===r.context?r.context=i:r.pendingContext=i,(r=va(t)).payload={element:n},null!==(a=void 0===a?null:a)&&(r.callback=a),null!==(n=ya(e,r,t))&&(qc(n,0,t),ba(n,e,t))}function hh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ph(e,t){hh(e,t),(e=e.alternate)&&hh(e,t)}function fh(e){if(13===e.tag||31===e.tag){var t=Ir(e,67108864);null!==t&&qc(t,0,67108864),ph(e,67108864)}}function mh(e){if(13===e.tag||31===e.tag){var t=Gc(),n=Ir(e,t=De(t));null!==n&&qc(n,0,t),ph(e,t)}}var gh=!0;function vh(e,t,n,r){var i=L.T;L.T=null;var a=N.p;try{N.p=2,bh(e,t,n,r)}finally{N.p=a,L.T=i}}function yh(e,t,n,r){var i=L.T;L.T=null;var a=N.p;try{N.p=8,bh(e,t,n,r)}finally{N.p=a,L.T=i}}function bh(e,t,n,r){if(gh){var i=xh(r);if(null===i)ed(e,t,r,wh,n),Ih(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Mh=Lh(Mh,e,t,n,r,i),!0;case"dragenter":return Th=Lh(Th,e,t,n,r,i),!0;case"mouseover":return Ah=Lh(Ah,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Ch.set(a,Lh(Ch.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rh.set(a,Lh(Rh.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ih(e,r),4&t&&-1<kh.indexOf(e)){for(;null!==i;){var a=Ke(i);if(null!==a)switch(a.tag){case 3:if((a=a.stateNode).current.memoizedState.isDehydrated){var o=Me(a.pendingLanes);if(0!==o){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var l=1<<31-be(o);s.entanglements[1]|=l,o&=~l}Nu(a),!(6&hc)&&(Lc=se()+500,Du(0,!1))}}break;case 31:case 13:null!==(s=Ir(a,2))&&qc(s,0,2),Jc(),ph(a,2)}if(null===(a=xh(r))&&ed(e,t,r,wh,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else ed(e,t,r,null,n)}}function xh(e){return _h(e=Lt(e))}var wh=null;function _h(e){if(wh=null,null!==(e=$e(e))){var t=s(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=l(t)))return e;e=null}else if(31===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return wh=e,null}function Eh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(le()){case ce:return 2;case ue:return 8;case de:case he:return 32;case pe:return 268435456;default:return 32}default:return 32}}var Sh=!1,Mh=null,Th=null,Ah=null,Ch=new Map,Rh=new Map,Ph=[],kh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ih(e,t){switch(e){case"focusin":case"focusout":Mh=null;break;case"dragenter":case"dragleave":Th=null;break;case"mouseover":case"mouseout":Ah=null;break;case"pointerover":case"pointerout":Ch.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rh.delete(t.pointerId)}}function Lh(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&null!==(t=Ke(t))&&fh(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Nh(e){var t=$e(e.target);if(null!==t){var n=s(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=l(n)))return e.blockedOn=t,void Fe(e.priority,function(){mh(n)})}else if(31===t){if(null!==(t=c(n)))return e.blockedOn=t,void Fe(e.priority,function(){mh(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Dh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=xh(e.nativeEvent);if(null!==n)return null!==(t=Ke(n))&&fh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);It=r,n.target.dispatchEvent(r),It=null,t.shift()}return!0}function Uh(e,t,n){Dh(e)&&n.delete(t)}function Oh(){Sh=!1,null!==Mh&&Dh(Mh)&&(Mh=null),null!==Th&&Dh(Th)&&(Th=null),null!==Ah&&Dh(Ah)&&(Ah=null),Ch.forEach(Uh),Rh.forEach(Uh)}function Fh(e,t){e.blockedOn===t&&(e.blockedOn=null,Sh||(Sh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Oh)))}var zh=null;function Bh(e){zh!==e&&(zh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){zh===e&&(zh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!=typeof r){if(null===_h(r||n))continue;break}var a=Ke(n);null!==a&&(e.splice(t,3),t-=3,es(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Hh(e){function t(t){return Fh(t,e)}null!==Mh&&Fh(Mh,e),null!==Th&&Fh(Th,e),null!==Ah&&Fh(Ah,e),Ch.forEach(t),Rh.forEach(t);for(var n=0;n<Ph.length;n++){var r=Ph[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Ph.length&&null===(n=Ph[0]).blockedOn;)Nh(n),null===n.blockedOn&&Ph.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],o=i[He]||null;if("function"==typeof a)o||Bh(n);else if(o){var s=null;if(a&&a.hasAttribute("formAction")){if(i=a,o=a[He]||null)s=o.formAction;else if(null!==_h(i))continue}else s=o.action;"function"==typeof s?n[r+1]=s:(n.splice(r,3),r-=3),Bh(n)}}}function Vh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==i&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"==typeof navigation){var r=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==i&&(i(),i=null)}}}function jh(e){this._internalRoot=e}function Wh(e){this._internalRoot=e}Wh.prototype.render=jh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));dh(t.current,Gc(),e,t,null,null)},Wh.prototype.unmount=jh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dh(e.current,2,null,e,null,null),Jc(),t[Ve]=null}},Wh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Oe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ph.length&&0!==t&&t<Ph[n].priority;n++);Ph.splice(n,0,e),0===n&&Nh(e)}};var Gh=i.version;if("19.2.0"!==Gh)throw Error(o(527,Gh,"19.2.0"));N.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=s(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return u(i),e;if(a===r)return u(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var l=!1,c=i.child;c;){if(c===n){l=!0,n=i,r=a;break}if(c===r){l=!0,r=i,n=a;break}c=c.sibling}if(!l){for(c=a.child;c;){if(c===n){l=!0,n=a,r=i;break}if(c===r){l=!0,r=a,n=i;break}c=c.sibling}if(!l)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),null===(e=null!==e?d(e):null)?null:e.stateNode};var Xh={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.0"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qh.isDisabled&&qh.supportsFiber)try{ge=qh.inject(Xh),ve=qh}catch(e){}}t.createRoot=function(e,t){if(!(n=e)||1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType)throw Error(o(299));var n,r=!1,i="",a=Es,s=Ss,l=Ms;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=function(e,t,n,r,i,a,o,s,l,c,u,d){return e=new uh(e,t,n,o,l,c,u,d,s),t=1,!0===a&&(t|=24),a=Or(3,null,null,t),e.current=a,a.stateNode=e,(t=Fi()).refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},ma(a),e}(e,1,!1,null,0,r,i,null,a,s,l,Vh),e[Ve]=t.current,Ju(e),new jh(t)}},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,r,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(o[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&o[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},338:(e,t,n)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(247)},417:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},448:(e,t,n)=>{e.exports=n.p+"e05c5f3d1fa6a3893d84.ttf"},477:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>a(l,n))c<i&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,k();else{var t=r(u);null!==t&&I(w,t.startTime-e)}}var _,E=!1,S=-1,M=5,T=-1;function A(){return!(t.unstable_now()-T<M)}function C(){if(E){var e=t.unstable_now();T=e;var n=!0;try{e:{m=!1,g&&(g=!1,y(S),S=-1),f=!0;var a=p;try{t:{for(x(e),h=r(c);null!==h&&!(h.expirationTime>e&&A());){var o=h.callback;if("function"==typeof o){h.callback=null,p=h.priorityLevel;var s=o(h.expirationTime<=e);if(e=t.unstable_now(),"function"==typeof s){h.callback=s,x(e),n=!0;break t}h===r(c)&&i(c),x(e)}else i(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&I(w,l.startTime-e),n=!1}}break e}finally{h=null,p=a,f=!1}n=void 0}}finally{n?_():E=!1}}}if("function"==typeof b)_=function(){b(C)};else if("undefined"!=typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=C,_=function(){P.postMessage(null)}}else _=function(){v(C,0)};function k(){E||(E=!0,_())}function I(e,n){S=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,k())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?o+a:o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(y(S),S=-1):g=!0,I(w,a-o))):(e.sortIndex=s,n(c,e),m||f||(m=!0,k())),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},493:(e,t,n)=>{var r=n(540),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=r.useState,o=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,u=r[1];return s(function(){i.value=n,i.getSnapshot=t,c(i)&&u({inst:i})},[e,n,t]),o(function(){return c(i)&&u({inst:i}),e(function(){c(i)&&u({inst:i})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},540:(e,t,n)=>{e.exports=n(869)},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},677:(e,t)=>{t.ConcurrentRoot=1,t.ContinuousEventPriority=8,t.DefaultEventPriority=32,t.DiscreteEventPriority=2},698:(e,t)=>{var n=Symbol.for("react.transitional.element");Symbol.for("react.fragment"),t.jsx=function(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var a in r={},t)"key"!==a&&(r[a]=t[a]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}},725:(e,t,n)=>{e.exports=function(e){function t(e,t,n,r){return new Si(e,t,n,r)}function r(){}function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=la&&e[la]||e["@@iterator"])?e:null}function o(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===ca?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case qi:return"Fragment";case Xi:return"Portal";case $i:return"Profiler";case Yi:return"StrictMode";case ea:return"Suspense";case ta:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Ji:return(e.displayName||"Context")+".Provider";case Zi:return(e._context.displayName||"Context")+".Consumer";case Qi:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case na:return null!==(t=e.displayName||null)?t:o(e.type)||"Memo";case ra:t=e._payload,e=e._init;try{return o(e(t))}catch(e){}}return null}function s(e){if(void 0===aa)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);aa=t&&t[1]||"",oa=-1<e.stack.indexOf("\n    at")?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+aa+e+oa}function l(e,t){if(!e||da)return"";da=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(e){if(e&&r&&"string"==typeof e.stack)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),o=a[0],l=a[1];if(o&&l){var c=o.split("\n"),u=l.split("\n");for(i=r=0;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;for(;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;if(r===c.length||i===u.length)for(r=c.length-1,i=u.length-1;1<=r&&0<=i&&c[r]!==u[i];)i--;for(;1<=r&&0<=i;r--,i--)if(c[r]!==u[i]){if(1!==r||1!==i)do{if(r--,0>--i||c[r]!==u[i]){var d="\n"+c[r].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}}while(1<=r&&0<=i);break}}}finally{da=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?s(n):""}function c(e){switch(e.tag){case 26:case 27:case 5:return s(e.type);case 16:return s("Lazy");case 13:return s("Suspense");case 19:return s("SuspenseList");case 0:case 15:return l(e.type,!1);case 11:return l(e.type.render,!1);case 1:return l(e.type,!0);default:return""}}function u(e){try{var t="";do{t+=c(e),e=e.return}while(e);return t}catch(e){return"\nError generating stack: "+e.message+"\n"+e.stack}}function d(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function h(e){if(d(e)!==e)throw Error(i(188))}function p(e){var t=e.alternate;if(!t){if(null===(t=d(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return h(a),e;if(o===r)return h(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var s=!1,l=a.child;l;){if(l===n){s=!0,n=a,r=o;break}if(l===r){s=!0,r=a,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=a;break}if(l===r){s=!0,r=o,n=a;break}l=l.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}function f(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=f(e)))return t;e=e.sibling}return null}function m(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(4!==e.tag&&null!==(t=m(e)))return t;e=e.sibling}return null}function g(e){return{current:e}}function v(e){0>ys||(e.current=vs[ys],vs[ys]=null,ys--)}function y(e,t){ys++,vs[ys]=e.current,e.current=t}function b(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194176&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function x(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=e.warmLanes;e=0!==e.finishedLanes;var s=134217727&n;return 0!==s?0!==(n=s&~i)?r=b(n):0!==(a&=s)?r=b(a):e||0!==(o=s&~o)&&(r=b(o)):0!==(s=n&~i)?r=b(s):0!==a?r=b(a):e||0!==(o=n&~o)&&(r=b(o)),0===r?0:0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||32===i&&4194176&o)?t:r}function w(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function _(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function E(){var e=Es;return!(4194176&(Es<<=1))&&(Es=128),e}function S(){var e=Ss;return!(62914560&(Ss<<=1))&&(Ss=4194304),e}function M(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function T(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function A(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-xs(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194218&n}function C(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-xs(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function R(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function P(e){if("function"==typeof Ns&&Ds(e),Os&&"function"==typeof Os.setStrictMode)try{Os.setStrictMode(Us,e)}catch(e){}}function k(e,t){if("object"==typeof e&&null!==e){var n=zs.get(e);return void 0!==n?n:(t={value:e,source:t,stack:u(t)},zs.set(e,t),t)}return{value:e,source:t,stack:u(t)}}function I(e,t){Bs[Hs++]=js,Bs[Hs++]=Vs,Vs=e,js=t}function L(e,t,n){Ws[Gs++]=qs,Ws[Gs++]=Ys,Ws[Gs++]=Xs,Xs=e;var r=qs;e=Ys;var i=32-xs(r)-1;r&=~(1<<i),n+=1;var a=32-xs(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,qs=1<<32-xs(t)+i|n<<i|r,Ys=a+e}else qs=1<<a|n<<i|r,Ys=e}function N(e){null!==e.return&&(I(e,1),L(e,1,0))}function D(e){for(;e===Vs;)Vs=Bs[--Hs],Bs[Hs]=null,js=Bs[--Hs],Bs[Hs]=null;for(;e===Xs;)Xs=Ws[--Gs],Ws[Gs]=null,Ys=Ws[--Gs],Ws[Gs]=null,qs=Ws[--Gs],Ws[Gs]=null}function U(e,t){y(Zs,t),y(Ks,e),y($s,null),e=va(t),v($s),y($s,e)}function O(){v($s),v(Ks),v(Zs)}function F(e){null!==e.memoizedState&&y(Js,e);var t=$s.current,n=ya(t,e.type);t!==n&&(y(Ks,e),y($s,n))}function z(e){Ks.current===e&&(v($s),v(Ks)),Js.current===e&&(v(Js),Ra?Xa._currentValue=Ga:Xa._currentValue2=Ga)}function B(e){throw G(k(Error(i(418,"")),e)),il}function H(e,t){if(!Ia)throw Error(i(175));Bo(e.stateNode,e.type,e.memoizedProps,t,e)||B(e)}function V(e){for(Qs=e.return;Qs;)switch(Qs.tag){case 3:case 27:return void(rl=!0);case 5:case 13:return void(rl=!1);default:Qs=Qs.return}}function j(e){if(!Ia||e!==Qs)return!1;if(!tl)return V(e),tl=!0,!1;var t=!1;if(ds?3!==e.tag&&27!==e.tag&&(5!==e.tag||Yo(e.type)&&!Sa(e.type,e.memoizedProps))&&(t=!0):3!==e.tag&&(5!==e.tag||Yo(e.type)&&!Sa(e.type,e.memoizedProps))&&(t=!0),t&&el&&B(e),V(e),13===e.tag){if(!Ia)throw Error(i(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));el=jo(e)}else el=Qs?Lo(e.stateNode):null;return!0}function W(){Ia&&(el=Qs=null,tl=!1)}function G(e){null===nl?nl=[e]:nl.push(e)}function X(){for(var e=ol,t=sl=ol=0;t<e;){var n=al[t];al[t++]=null;var r=al[t];al[t++]=null;var i=al[t];al[t++]=null;var a=al[t];if(al[t++]=null,null!==r&&null!==i){var o=r.pending;null===o?i.next=i:(i.next=o.next,o.next=i),r.pending=i}0!==a&&K(n,i,a)}}function q(e,t,n,r){al[ol++]=e,al[ol++]=t,al[ol++]=n,al[ol++]=r,sl|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Y(e,t,n,r){return q(e,t,n,r),Z(e)}function $(e,t){return q(e,null,null,t),Z(e)}function K(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,a=e.return;null!==a;)a.childLanes|=n,null!==(r=a.alternate)&&(r.childLanes|=n),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(i=!0)),e=a,a=a.return;i&&null!==t&&3===e.tag&&(a=e.stateNode,i=31-xs(n),null===(e=(a=a.hiddenUpdates)[i])?a[i]=[t]:e.push(t),t.lane=536870912|n)}function Z(e){if(50<nu)throw nu=0,ru=null,Error(i(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}function J(e){var t;e!==cl&&null===e.next&&(null===cl?ll=cl=e:cl=cl.next=e),dl=!0,ul||(ul=!0,t=ee,Ya?$a(function(){6&Cc?Ms(Ps,t):t()}):Ms(Ps,t))}function Q(e,t){if(!hl&&dl){hl=!0;do{for(var n=!1,r=ll;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=(1<<31-xs(42|e)+1)-1,a=201326677&(a&=i&~(o&~s))?201326677&a|1:a?2|a:0}0!==a&&(n=!0,re(r,a))}else a=kc,!(3&(a=x(r,r===Rc?a:0)))||w(r,a)||(n=!0,re(r,a));r=r.next}}while(n);hl=!1}}function ee(){dl=ul=!1;var e=0;0!==pl&&(Fa()&&(e=pl),pl=0);for(var t=Rs(),n=null,r=ll;null!==r;){var i=r.next,a=te(r,t);0===a?(r.next=null,null===n?ll=i:n.next=i,null===i&&(cl=n)):(n=r,(0!==e||3&a)&&(dl=!0)),r=i}Q(e,!1)}function te(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=-62914561&e.pendingLanes;0<a;){var o=31-xs(a),s=1<<o,l=i[o];-1===l?0!==(s&n)&&0===(s&r)||(i[o]=_(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}if(n=kc,n=x(e,e===(t=Rc)?n:0),r=e.callbackNode,0===n||e===t&&2===Ic||null!==e.cancelPendingCommit)return null!==r&&null!==r&&Ts(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||w(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&Ts(r),R(n)){case 2:case 8:n=ks;break;case 32:default:n=Is;break;case 268435456:n=Ls}return r=ne.bind(null,e),n=Ms(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&Ts(r),e.callbackPriority=2,e.callbackNode=null,2}function ne(e,t){var n=e.callbackNode;if(gi()&&e.callbackNode!==n)return null;var r=kc;return 0===(r=x(e,e===Rc?r:0))?null:(qr(e,r,t),te(e,Rs()),null!=e.callbackNode&&e.callbackNode===n?ne.bind(null,e):null)}function re(e,t){if(gi())return null;qr(e,t,!0)}function ie(){return 0===pl&&(pl=E()),pl}function ae(){if(0===--ml&&null!==fl){null!==vl&&(vl.status="fulfilled");var e=fl;fl=null,gl=0,vl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function oe(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function se(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function le(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ce(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&Cc){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Z(e),K(e,null,n),t}return q(e,r,t,n),Z(e)}function ue(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194176&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,C(e,n)}}function de(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function he(){if(bl&&null!==vl)throw vl}function pe(e,t,n,r){bl=!1;var i=e.updateQueue;yl=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?a=c:o.next=c,o=l;var u=e.alternate;null!==u&&(s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l)}if(null!==a){var d=i.baseState;for(o=0,u=c=l=null,s=a;;){var h=-536870913&s.lane,p=h!==s.lane;if(p?(kc&h)===h:(r&h)===h){0!==h&&h===gl&&(bl=!0),null!==u&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var f=e,m=s;h=t;var g=n;switch(m.tag){case 1:if("function"==typeof(f=m.payload)){d=f.call(g,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(h="function"==typeof(f=m.payload)?f.call(g,d,h):f))break e;d=ji({},d,h);break e;case 2:yl=!0}}null!==(h=s.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[h]:p.push(h))}else p={lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(p=s).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===a&&(i.shared.lanes=0),zc|=o,e.lanes=o,e.memoizedState=d}}function fe(e,t){if("function"!=typeof e)throw Error(i(191,e));e.call(t)}function me(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)fe(n[e],t)}function ge(e,t){if(Fs(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!xl.call(t,i)||!Fs(e[i],t[i]))return!1}return!0}function ve(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ye(){}function be(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(ye,ye),t=n),t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===wl)throw Error(i(483));throw e;default:if("string"==typeof t.status)t.then(ye,ye);else{if(null!==(e=Rc)&&100<e.shellSuspendCounter)throw Error(i(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===wl)throw Error(i(483));throw e}throw Sl=t,wl}}function xe(){if(null===Sl)throw Error(i(459));var e=Sl;return Sl=null,e}function we(e){var t=Tl;return Tl+=1,null===Ml&&(Ml=[]),be(Ml,e,t)}function _e(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Ee(e,t){if(t.$$typeof===Wi)throw Error(i(525));throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Se(e){return(0,e._init)(e._payload)}function Me(e){function n(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function r(t,r){if(!e)return null;for(;null!==r;)n(t,r),r=r.sibling;return null}function o(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=Ti(e,t)).index=0,e.sibling=null,e}function l(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=33554434,n):r:(t.flags|=33554434,n):(t.flags|=1048576,n)}function c(t){return e&&null===t.alternate&&(t.flags|=33554434),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=ki(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function d(e,t,n,r){var i=n.type;return i===qi?p(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===ra&&Se(i)===t.type)?(_e(t=s(t,n.props),n),t.return=e,t):(_e(t=Ci(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function h(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ii(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function p(e,t,n,r,i){return null===t||7!==t.tag?((t=Ri(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=ki(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case Gi:return _e(n=Ci(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case Xi:return(t=Ii(t,e.mode,n)).return=e,t;case ra:return f(e,t=(0,t._init)(t._payload),n)}if(ha(t)||a(t))return(t=Ri(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return f(e,we(t),n);if(t.$$typeof===Ji)return f(e,Ln(e,t),n);Ee(e,t)}return null}function m(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==i?null:u(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Gi:return n.key===i?d(e,t,n,r):null;case Xi:return n.key===i?h(e,t,n,r):null;case ra:return m(e,t,n=(i=n._init)(n._payload),r)}if(ha(n)||a(n))return null!==i?null:p(e,t,n,r,null);if("function"==typeof n.then)return m(e,t,we(n),r);if(n.$$typeof===Ji)return m(e,t,Ln(e,n),r);Ee(e,n)}return null}function g(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Gi:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case Xi:return h(t,e=e.get(null===r.key?n:r.key)||null,r,i);case ra:return g(e,t,n,r=(0,r._init)(r._payload),i)}if(ha(r)||a(r))return p(t,e=e.get(n)||null,r,i,null);if("function"==typeof r.then)return g(e,t,n,we(r),i);if(r.$$typeof===Ji)return g(e,t,n,Ln(t,r),i);Ee(t,r)}return null}function v(t,u,d,h){if("object"==typeof d&&null!==d&&d.type===qi&&null===d.key&&(d=d.props.children),"object"==typeof d&&null!==d){switch(d.$$typeof){case Gi:e:{for(var p=d.key;null!==u;){if(u.key===p){if((p=d.type)===qi){if(7===u.tag){r(t,u.sibling),(h=s(u,d.props.children)).return=t,t=h;break e}}else if(u.elementType===p||"object"==typeof p&&null!==p&&p.$$typeof===ra&&Se(p)===u.type){r(t,u.sibling),_e(h=s(u,d.props),d),h.return=t,t=h;break e}r(t,u);break}n(t,u),u=u.sibling}d.type===qi?((h=Ri(d.props.children,t.mode,h,d.key)).return=t,t=h):(_e(h=Ci(d.type,d.key,d.props,null,t.mode,h),d),h.return=t,t=h)}return c(t);case Xi:e:{for(p=d.key;null!==u;){if(u.key===p){if(4===u.tag&&u.stateNode.containerInfo===d.containerInfo&&u.stateNode.implementation===d.implementation){r(t,u.sibling),(h=s(u,d.children||[])).return=t,t=h;break e}r(t,u);break}n(t,u),u=u.sibling}(h=Ii(d,t.mode,h)).return=t,t=h}return c(t);case ra:return v(t,u,d=(p=d._init)(d._payload),h)}if(ha(d))return function(t,i,a,s){for(var c=null,u=null,d=i,h=i=0,p=null;null!==d&&h<a.length;h++){d.index>h?(p=d,d=null):p=d.sibling;var v=m(t,d,a[h],s);if(null===v){null===d&&(d=p);break}e&&d&&null===v.alternate&&n(t,d),i=l(v,i,h),null===u?c=v:u.sibling=v,u=v,d=p}if(h===a.length)return r(t,d),tl&&I(t,h),c;if(null===d){for(;h<a.length;h++)null!==(d=f(t,a[h],s))&&(i=l(d,i,h),null===u?c=d:u.sibling=d,u=d);return tl&&I(t,h),c}for(d=o(d);h<a.length;h++)null!==(p=g(d,t,h,a[h],s))&&(e&&null!==p.alternate&&d.delete(null===p.key?h:p.key),i=l(p,i,h),null===u?c=p:u.sibling=p,u=p);return e&&d.forEach(function(e){return n(t,e)}),tl&&I(t,h),c}(t,u,d,h);if(a(d)){if("function"!=typeof(p=a(d)))throw Error(i(150));return function(t,a,s,c){if(null==s)throw Error(i(151));for(var u=null,d=null,h=a,p=a=0,v=null,y=s.next();null!==h&&!y.done;p++,y=s.next()){h.index>p?(v=h,h=null):v=h.sibling;var b=m(t,h,y.value,c);if(null===b){null===h&&(h=v);break}e&&h&&null===b.alternate&&n(t,h),a=l(b,a,p),null===d?u=b:d.sibling=b,d=b,h=v}if(y.done)return r(t,h),tl&&I(t,p),u;if(null===h){for(;!y.done;p++,y=s.next())null!==(y=f(t,y.value,c))&&(a=l(y,a,p),null===d?u=y:d.sibling=y,d=y);return tl&&I(t,p),u}for(h=o(h);!y.done;p++,y=s.next())null!==(y=g(h,t,p,y.value,c))&&(e&&null!==y.alternate&&h.delete(null===y.key?p:y.key),a=l(y,a,p),null===d?u=y:d.sibling=y,d=y);return e&&h.forEach(function(e){return n(t,e)}),tl&&I(t,p),u}(t,u,d=p.call(d),h)}if("function"==typeof d.then)return v(t,u,we(d),h);if(d.$$typeof===Ji)return v(t,u,Ln(t,d),h);Ee(t,d)}return"string"==typeof d&&""!==d||"number"==typeof d||"bigint"==typeof d?(d=""+d,null!==u&&6===u.tag?(r(t,u.sibling),(h=s(u,d)).return=t,t=h):(r(t,u),(h=ki(d,t.mode,h)).return=t,t=h),c(t)):r(t,u)}return function(e,n,r,i){try{Tl=0;var a=v(e,n,r,i);return Ml=null,a}catch(n){if(n===wl)throw n;var o=t(29,n,null,e.mode);return o.lanes=i,o.return=e,o}}}function Te(e,t){y(Pl,e=Oc),y(Rl,t),Oc=e|t.baseLanes}function Ae(){y(Pl,Oc),y(Rl,Rl.current)}function Ce(){Oc=Pl.current,v(Rl),v(Pl)}function Re(e){var t=e.alternate;y(Ll,1&Ll.current),y(kl,e),null===Il&&(null===t||null!==Rl.current||null!==t.memoizedState)&&(Il=e)}function Pe(e){if(22===e.tag){if(y(Ll,Ll.current),y(kl,e),null===Il){var t=e.alternate;null!==t&&null!==t.memoizedState&&(Il=e)}}else ke()}function ke(){y(Ll,Ll.current),y(kl,kl.current)}function Ie(e){v(kl),Il===e&&(Il=null),v(Ll)}function Le(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Ao(n)||Co(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Ne(){throw Error(i(321))}function De(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Fs(e[n],t[n]))return!1;return!0}function Ue(e,t,n,r,i,a){return Nl=a,Dl=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ua.H=null===e||null===e.memoizedState?ql:Yl,Bl=!1,a=n(r,i),Bl=!1,zl&&(a=Fe(t,n,r,i)),Oe(e),a}function Oe(e){ua.H=Xl;var t=null!==Ul&&null!==Ul.next;if(Nl=0,Ol=Ul=Dl=null,Fl=!1,Vl=0,jl=null,t)throw Error(i(300));null===e||Ql||null!==(e=e.dependencies)&&Pn(e)&&(Ql=!0)}function Fe(e,t,n,r){Dl=e;var a=0;do{if(zl&&(jl=null),Vl=0,zl=!1,25<=a)throw Error(i(301));if(a+=1,Ol=Ul=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}ua.H=$l,o=t(n,r)}while(zl);return o}function ze(){var e=ua.H,t=e.useState()[0];return t="function"==typeof t.then?Ge(t):t,e=e.useState()[0],(null!==Ul?Ul.memoizedState:null)!==e&&(Dl.flags|=1024),t}function Be(){var e=0!==Hl;return Hl=0,e}function He(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Ve(e){if(Fl){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Fl=!1}Nl=0,Ol=Ul=Dl=null,zl=!1,Vl=Hl=0,jl=null}function je(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ol?Dl.memoizedState=Ol=e:Ol=Ol.next=e,Ol}function We(){if(null===Ul){var e=Dl.alternate;e=null!==e?e.memoizedState:null}else e=Ul.next;var t=null===Ol?Dl.memoizedState:Ol.next;if(null!==t)Ol=t,Ul=e;else{if(null===e){if(null===Dl.alternate)throw Error(i(467));throw Error(i(310))}e={memoizedState:(Ul=e).memoizedState,baseState:Ul.baseState,baseQueue:Ul.baseQueue,queue:Ul.queue,next:null},null===Ol?Dl.memoizedState=Ol=e:Ol=Ol.next=e}return Ol}function Ge(e){var t=Vl;return Vl+=1,null===jl&&(jl=[]),e=be(jl,e,t),t=Dl,null===(null===Ol?t.memoizedState:Ol.next)&&(t=t.alternate,ua.H=null===t||null===t.memoizedState?ql:Yl),e}function Xe(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return Ge(e);if(e.$$typeof===Ji)return In(e)}throw Error(i(438,String(e)))}function qe(e){var t=null,n=Dl.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Dl.alternate;null!==r&&null!==(r=r.updateQueue)&&null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})}if(null==t&&(t={data:[],index:0}),null===n&&(n=Gl(),Dl.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=sa;return t.index++,n}function Ye(e,t){return"function"==typeof t?t(e):t}function $e(e){return Ke(We(),Ul,e)}function Ke(e,t,n){var r=e.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=n;var a=e.baseQueue,o=r.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}t.baseQueue=a=o,r.pending=null}if(o=e.baseState,null===a)e.memoizedState=o;else{var l=s=null,c=null,u=t=a.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(kc&h)===h:(Nl&h)===h){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===gl&&(d=!0);else{if((Nl&p)===p){u=u.next,p===gl&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,s=o):c=c.next=h,Dl.lanes|=p,zc|=p}h=u.action,Bl&&n(o,h),o=u.hasEagerState?u.eagerState:n(o,h)}else p={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=p,s=o):c=c.next=p,Dl.lanes|=h,zc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?s=o:c.next=l,!Fs(o,e.memoizedState)&&(Ql=!0,d&&null!==(n=vl)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=c,r.lastRenderedState=o}return null===a&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Ze(e){var t=We(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);Fs(o,t.memoizedState)||(Ql=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Je(e,t,n){var r=Dl,a=We(),o=tl;if(o){if(void 0===n)throw Error(i(407));n=n()}else n=t();var s=!Fs((Ul||a).memoizedState,n);if(s&&(a.memoizedState=n,Ql=!0),a=a.queue,Et(tt.bind(null,r,a,e),[e]),a.getSnapshot!==t||s||null!==Ol&&1&Ol.memoizedState.tag){if(r.flags|=2048,yt(9,et.bind(null,r,a,n,t),{destroy:void 0},null),null===Rc)throw Error(i(349));o||60&Nl||Qe(r,t,n)}return n}function Qe(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Dl.updateQueue)?(t=Gl(),Dl.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function et(e,t,n,r){t.value=n,t.getSnapshot=r,nt(t)&&rt(e)}function tt(e,t,n){return n(function(){nt(t)&&rt(e)})}function nt(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Fs(e,n)}catch(e){return!0}}function rt(e){var t=$(e,2);null!==t&&Xr(t,0,2)}function it(e){var t=je();if("function"==typeof e){var n=e;if(e=n(),Bl){P(!0);try{n()}finally{P(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ye,lastRenderedState:e},t}function at(e,t,n,r){return e.baseState=n,Ke(e,Ul,"function"==typeof r?r:Ye)}function ot(e,t,n,r,a){if(jt(e))throw Error(i(485));if(null!==(e=t.action)){var o={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==ua.T?n(!0):o.isTransition=!1,r(o),null===(n=t.pending)?(o.next=t.pending=o,st(t,o)):(o.next=n.next,t.pending=n.next=o)}}function st(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=ua.T,o={};ua.T=o;try{var s=n(i,r),l=ua.S;null!==l&&l(o,s),lt(e,t,s)}catch(n){ut(e,t,n)}finally{ua.T=a}}else try{lt(e,t,a=n(i,r))}catch(n){ut(e,t,n)}}function lt(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){ct(e,t,n)},function(n){return ut(e,t,n)}):ct(e,t,n)}function ct(e,t,n){t.status="fulfilled",t.value=n,dt(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,st(e,n)))}function ut(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,dt(t),t=t.next}while(t!==r)}e.action=null}function dt(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ht(e,t){return t}function pt(e,t){if(tl){var n=Rc.formState;if(null!==n){e:{var r=Dl;if(tl){if(el){var i=ko(el,rl);if(i){el=Lo(i),r=Io(i);break e}}B(r)}r=!1}r&&(t=n[0])}}(n=je()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ht,lastRenderedState:t},n.queue=r,n=Bt.bind(null,Dl,r),r.dispatch=n,r=it(!1);var a=Vt.bind(null,Dl,!1,r.queue);return i={state:t,dispatch:null,action:e,pending:null},(r=je()).queue=i,n=ot.bind(null,Dl,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function ft(e){return mt(We(),Ul,e)}function mt(e,t,n){t=Ke(e,t,ht)[0],e=$e(Ye)[0],t="object"==typeof t&&null!==t&&"function"==typeof t.then?Ge(t):t;var r=We(),i=r.queue,a=i.dispatch;return n!==r.memoizedState&&(Dl.flags|=2048,yt(9,gt.bind(null,i,n),{destroy:void 0},null)),[t,a,e]}function gt(e,t){e.action=t}function vt(e){var t=We(),n=Ul;if(null!==n)return mt(t,n,e);We(),t=t.memoizedState;var r=(n=We()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function yt(e,t,n,r){return e={tag:e,create:t,inst:n,deps:r,next:null},null===(t=Dl.updateQueue)&&(t=Gl(),Dl.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function bt(){return We().memoizedState}function xt(e,t,n,r){var i=je();Dl.flags|=e,i.memoizedState=yt(1|t,n,{destroy:void 0},void 0===r?null:r)}function wt(e,t,n,r){var i=We();r=void 0===r?null:r;var a=i.memoizedState.inst;null!==Ul&&null!==r&&De(r,Ul.memoizedState.deps)?i.memoizedState=yt(t,n,a,r):(Dl.flags|=e,i.memoizedState=yt(1|t,n,a,r))}function _t(e,t){xt(8390656,8,e,t)}function Et(e,t){wt(2048,8,e,t)}function St(e,t){return wt(4,2,e,t)}function Mt(e,t){return wt(4,4,e,t)}function Tt(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function At(e,t,n){n=null!=n?n.concat([e]):null,wt(4,4,Tt.bind(null,t,e),n)}function Ct(){}function Rt(e,t){var n=We();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&De(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Pt(e,t){var n=We();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&De(t,r[1]))return r[0];if(r=e(),Bl){P(!0);try{e()}finally{P(!1)}}return n.memoizedState=[r,t],r}function kt(e,t,n){return void 0===n||1073741824&Nl?e.memoizedState=t:(e.memoizedState=n,e=Gr(),Dl.lanes|=e,zc|=e,n)}function It(e,t,n,r){return Fs(n,t)?n:null!==Rl.current?(e=kt(e,n,r),Fs(e,t)||(Ql=!0),e):42&Nl?(e=Gr(),Dl.lanes|=e,zc|=e,t):(Ql=!0,e.memoizedState=n)}function Lt(e,t,n,r,i){var a=Ua();Da(0!==a&&8>a?a:8);var o,s,l,c=ua.T,u={};ua.T=u,Vt(e,!1,t,n);try{var d=i(),h=ua.S;if(null!==h&&h(u,d),null!==d&&"object"==typeof d&&"function"==typeof d.then){var p=(o=r,s=[],l={status:"pending",value:null,reason:null,then:function(e){s.push(e)}},d.then(function(){l.status="fulfilled",l.value=o;for(var e=0;e<s.length;e++)(0,s[e])(o)},function(e){for(l.status="rejected",l.reason=e,e=0;e<s.length;e++)(0,s[e])(void 0)}),l);Ht(e,t,p,Wr())}else Ht(e,t,r,Wr())}catch(n){Ht(e,t,{then:function(){},status:"rejected",reason:n},Wr())}finally{Da(a),ua.T=c}}function Nt(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:Ga,baseState:Ga,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ye,lastRenderedState:Ga},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ye,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Dt(){return In(Xa)}function Ut(){return We().memoizedState}function Ot(){return We().memoizedState}function Ft(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Wr(),r=ce(t,e=le(n),n);return null!==r&&(Xr(r,0,n),ue(r,t,n)),t={cache:Dn()},void(e.payload=t)}t=t.return}}function zt(e,t,n){var r=Wr();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},jt(e)?Wt(t,n):null!==(n=Y(e,t,n,r))&&(Xr(n,0,r),Gt(n,t,r))}function Bt(e,t,n){Ht(e,t,n,Wr())}function Ht(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(jt(e))Wt(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,Fs(s,o))return q(e,t,i,0),null===Rc&&X(),!1}catch(e){}if(null!==(n=Y(e,t,i,r)))return Xr(n,0,r),Gt(n,t,r),!0}return!1}function Vt(e,t,n,r){if(r={lane:2,revertLane:ie(),action:r,hasEagerState:!1,eagerState:null,next:null},jt(e)){if(t)throw Error(i(479))}else null!==(t=Y(e,n,r,2))&&Xr(t,0,2)}function jt(e){var t=e.alternate;return e===Dl||null!==t&&t===Dl}function Wt(e,t){zl=Fl=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Gt(e,t,n){if(4194176&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,C(e,n)}}function Xt(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:ji({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}function qt(e,t,n,r,i,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!(t.prototype&&t.prototype.isPureReactComponent&&ge(n,r)&&ge(i,a))}function Yt(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Kl.enqueueReplaceState(t,t.state,null)}function $t(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=ji({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}function Kt(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function Zt(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function Jt(e,t,n){return(n=le(n)).tag=3,n.payload={element:null},n.callback=function(){Kt(e,t)},n}function Qt(e){return(e=le(e)).tag=3,e}function en(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"==typeof i){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){Zt(t,n,r)}}var o=n.stateNode;null!==o&&"function"==typeof o.componentDidCatch&&(e.callback=function(){Zt(t,n,r),"function"!=typeof i&&(null===Kc?Kc=new Set([this]):Kc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}function tn(e,t,n,r){t.child=null===e?Cl(t,null,n,r):Al(t,e.child,n,r)}function nn(e,t,n,r,i){n=n.render;var a=t.ref;if("ref"in r){var o={};for(var s in r)"ref"!==s&&(o[s]=r[s])}else o=r;return kn(t),r=Ue(e,t,n,o,a,i),s=Be(),null===e||Ql?(tl&&s&&N(t),t.flags|=1,tn(e,t,r,i),t.child):(He(e,t,i),_n(e,t,i))}function rn(e,t,n,r,i){if(null===e){var a=n.type;return"function"!=typeof a||Mi(a)||void 0!==a.defaultProps||null!==n.compare?((e=Ci(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,an(e,t,a,r,i))}if(a=e.child,!En(e,i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ge)(o,r)&&e.ref===t.ref)return _n(e,t,i)}return t.flags|=1,(e=Ti(a,r)).ref=t.ref,e.return=t,t.child=e}function an(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ge(a,r)&&e.ref===t.ref){if(Ql=!1,t.pendingProps=r=a,!En(e,i))return t.lanes=e.lanes,_n(e,t,i);131072&e.flags&&(Ql=!0)}}return cn(e,t,n,r,i)}function on(e,t,n){var r=t.pendingProps,i=r.children,a=!!(2&t.stateNode._pendingVisibility),o=null!==e?e.memoizedState:null;if(ln(e,t),"hidden"===r.mode||a){if(128&t.flags){if(r=null!==o?o.baseLanes|n:n,null!==e){for(i=t.child=e.child,a=0;null!==i;)a=a|i.lanes|i.childLanes,i=i.sibling;t.childLanes=a&~r}else t.childLanes=0,t.child=null;return sn(e,t,r,n)}if(!(536870912&n))return t.lanes=t.childLanes=536870912,sn(e,t,null!==o?o.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Fn(0,null!==o?o.cachePool:null),null!==o?Te(t,o):Ae(),Pe(t)}else null!==o?(Fn(0,o.cachePool),Te(t,o),ke(),t.memoizedState=null):(null!==e&&Fn(0,null),Ae(),ke());return tn(e,t,i,n),t.child}function sn(e,t,n,r){var i=On();return i=null===i?null:{parent:Ra?sc._currentValue:sc._currentValue2,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Fn(0,null),Ae(),Pe(t),null!==e&&Rn(e,t,r,!0),null}function ln(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=2097664);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(i(284));null!==e&&e.ref===n||(t.flags|=2097664)}}function cn(e,t,n,r,i){return kn(t),n=Ue(e,t,n,r,void 0,i),r=Be(),null===e||Ql?(tl&&r&&N(t),t.flags|=1,tn(e,t,n,i),t.child):(He(e,t,i),_n(e,t,i))}function un(e,t,n,r,i,a){return kn(t),t.updateQueue=null,n=Fe(t,r,n,i),Oe(e),r=Be(),null===e||Ql?(tl&&r&&N(t),t.flags|=1,tn(e,t,n,a),t.child):(He(e,t,a),_n(e,t,a))}function dn(e,t,n,r,i){if(kn(t),null===t.stateNode){var a=bs,o=n.contextType;"object"==typeof o&&null!==o&&(a=In(o)),a=new n(r,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=Kl,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=r,a.state=t.memoizedState,a.refs={},oe(t),o=n.contextType,a.context="object"==typeof o&&null!==o?In(o):bs,a.state=t.memoizedState,"function"==typeof(o=n.getDerivedStateFromProps)&&(Xt(t,n,o,r),a.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(o=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),o!==a.state&&Kl.enqueueReplaceState(a,a.state,null),pe(t,r,a,i),he(),a.state=t.memoizedState),"function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){a=t.stateNode;var s=t.memoizedProps,l=$t(n,s);a.props=l;var c=a.context,u=n.contextType;o=bs,"object"==typeof u&&null!==u&&(o=In(u));var d=n.getDerivedStateFromProps;u="function"==typeof d||"function"==typeof a.getSnapshotBeforeUpdate,s=t.pendingProps!==s,u||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s||c!==o)&&Yt(t,a,r,o),yl=!1;var h=t.memoizedState;a.state=h,pe(t,r,a,i),he(),c=t.memoizedState,s||h!==c||yl?("function"==typeof d&&(Xt(t,n,d,r),c=t.memoizedState),(l=yl||qt(t,n,l,r,h,c,o))?(u||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=o,r=l):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,se(e,t),u=$t(n,o=t.memoizedProps),a.props=u,d=t.pendingProps,h=a.context,c=n.contextType,l=bs,"object"==typeof c&&null!==c&&(l=In(c)),(c="function"==typeof(s=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==d||h!==l)&&Yt(t,a,r,l),yl=!1,h=t.memoizedState,a.state=h,pe(t,r,a,i),he();var p=t.memoizedState;o!==d||h!==p||yl||null!==e&&null!==e.dependencies&&Pn(e.dependencies)?("function"==typeof s&&(Xt(t,n,s,r),p=t.memoizedState),(u=yl||qt(t,n,u,r,h,p,l)||null!==e&&null!==e.dependencies&&Pn(e.dependencies))?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=u):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,ln(e,t),r=!!(128&t.flags),a||r?(a=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&r?(t.child=Al(t,e.child,null,i),t.child=Al(t,null,n,i)):tn(e,t,n,i),t.memoizedState=a.state,e=t.child):e=_n(e,t,i),e}function hn(e,t,n,r){return W(),t.flags|=256,tn(e,t,n,r),t.child}function pn(e){return{baseLanes:e,cachePool:zn()}}function fn(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Vc),e}function mn(e,n,r){var a,o=n.pendingProps,s=!1,l=!!(128&n.flags);if((a=l)||(a=(null===e||null!==e.memoizedState)&&!!(2&Ll.current)),a&&(s=!0,n.flags&=-129),a=!!(32&n.flags),n.flags&=-33,null===e){if(tl){if(s?Re(n):ke(),tl){var c,u=el;(c=u)&&(null!==(u=zo(u,rl))?(n.memoizedState={dehydrated:u,treeContext:null!==Xs?{id:qs,overflow:Ys}:null,retryLane:536870912},(c=t(18,null,null,0)).stateNode=u,c.return=n,n.child=c,Qs=n,el=null,c=!0):c=!1),c||B(n)}if(null!==(u=n.memoizedState)&&null!==(u=u.dehydrated))return Co(u)?n.lanes=16:n.lanes=536870912,null;Ie(n)}return u=o.children,o=o.fallback,s?(ke(),u=vn({mode:"hidden",children:u},s=n.mode),o=Ri(o,s,r,null),u.return=n,o.return=n,u.sibling=o,n.child=u,(s=n.child).memoizedState=pn(r),s.childLanes=fn(e,a,r),n.memoizedState=ec,o):(Re(n),gn(n,u))}if(null!==(c=e.memoizedState)&&null!==(u=c.dehydrated)){if(l)256&n.flags?(Re(n),n.flags&=-257,n=yn(e,n,r)):null!==n.memoizedState?(ke(),n.child=e.child,n.flags|=128,n=null):(ke(),s=o.fallback,u=n.mode,o=vn({mode:"visible",children:o.children},u),(s=Ri(s,u,r,null)).flags|=2,o.return=n,s.return=n,o.sibling=s,n.child=o,Al(n,e.child,null,r),(o=n.child).memoizedState=pn(r),o.childLanes=fn(e,a,r),n.memoizedState=ec,n=s);else if(Re(n),Co(u))a=Ro(u).digest,(o=Error(i(419))).stack="",o.digest=a,G({value:o,source:null,stack:null}),n=yn(e,n,r);else if(Ql||Rn(e,n,r,!1),a=0!==(r&e.childLanes),Ql||a){if(null!==(a=Rc)){if(42&(o=r&-r))o=1;else switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=64;break;case 268435456:o=134217728;break;default:o=0}if(0!==(o=0!==(o&(a.suspendedLanes|r))?0:o)&&o!==c.retryLane)throw c.retryLane=o,$(e,o),Xr(a,0,o),Jl}Ao(u)||ai(),n=yn(e,n,r)}else Ao(u)?(n.flags|=128,n.child=e.child,n=_i.bind(null,e),Po(u,n),n=null):(e=c.treeContext,Ia&&(el=Uo(u),Qs=n,tl=!0,nl=null,rl=!1,null!==e&&(Ws[Gs++]=qs,Ws[Gs++]=Ys,Ws[Gs++]=Xs,qs=e.id,Ys=e.overflow,Xs=n)),(n=gn(n,o.children)).flags|=4096);return n}return s?(ke(),s=o.fallback,u=n.mode,l=(c=e.child).sibling,(o=Ti(c,{mode:"hidden",children:o.children})).subtreeFlags=31457280&c.subtreeFlags,null!==l?s=Ti(l,s):(s=Ri(s,u,r,null)).flags|=2,s.return=n,o.return=n,o.sibling=s,n.child=o,o=s,s=n.child,null===(u=e.child.memoizedState)?u=pn(r):(null!==(c=u.cachePool)?(l=Ra?sc._currentValue:sc._currentValue2,c=c.parent!==l?{parent:l,pool:l}:c):c=zn(),u={baseLanes:u.baseLanes|r,cachePool:c}),s.memoizedState=u,s.childLanes=fn(e,a,r),n.memoizedState=ec,o):(Re(n),e=(r=e.child).sibling,(r=Ti(r,{mode:"visible",children:o.children})).return=n,r.sibling=null,null!==e&&(null===(a=n.deletions)?(n.deletions=[e],n.flags|=16):a.push(e)),n.child=r,n.memoizedState=null,r)}function gn(e,t){return(t=vn({mode:"visible",children:t},e.mode)).return=e,e.child=t}function vn(e,t){return Pi(e,t,0,null)}function yn(e,t,n){return Al(t,e.child,null,n),(e=gn(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function bn(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),An(e.return,t,n)}function xn(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function wn(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(tn(e,t,r.children,n),2&(r=Ll.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&bn(e,n,t);else if(19===e.tag)bn(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(y(Ll,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Le(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),xn(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Le(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}xn(t,!0,n,null,a);break;case"together":xn(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function _n(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),zc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Rn(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Ti(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ti(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function En(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Pn(e))}function Sn(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ql=!0;else{if(!(En(e,n)||128&t.flags))return Ql=!1,function(e,t,n){switch(t.tag){case 3:U(t,t.stateNode.containerInfo),Mn(0,sc,e.memoizedState.cache),W();break;case 27:case 5:F(t);break;case 4:U(t,t.stateNode.containerInfo);break;case 10:Mn(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Re(t),t.flags|=128,null):0!==(n&t.child.childLanes)?mn(e,t,n):(Re(t),null!==(e=_n(e,t,n))?e.sibling:null);Re(t);break;case 19:var i=!!(128&e.flags);if((r=0!==(n&t.childLanes))||(Rn(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return wn(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),y(Ll,Ll.current),r)break;return null;case 22:case 23:return t.lanes=0,on(e,t,n);case 24:Mn(0,sc,e.memoizedState.cache)}return _n(e,t,n)}(e,t,n);Ql=!!(131072&e.flags)}else Ql=!1,tl&&1048576&t.flags&&L(t,js,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,a=r._init;if(r=a(r._payload),t.type=r,"function"!=typeof r){if(null!=r){if((a=r.$$typeof)===Qi){t.tag=11,t=nn(null,t,r,e,n);break e}if(a===na){t.tag=14,t=rn(null,t,r,e,n);break e}}throw t=o(r)||r,Error(i(306,t,""))}Mi(r)?(e=$t(r,e),t.tag=1,t=dn(null,t,r,e,n)):(t.tag=0,t=cn(null,t,r,e,n))}return t;case 0:return cn(e,t,t.type,t.pendingProps,n);case 1:return dn(e,t,r=t.type,a=$t(r,t.pendingProps),n);case 3:e:{if(U(t,t.stateNode.containerInfo),null===e)throw Error(i(387));var s=t.pendingProps;r=(a=t.memoizedState).element,se(e,t),pe(t,s,null,n);var l=t.memoizedState;if(s=l.cache,Mn(0,sc,s),s!==a.cache&&Cn(t,[sc],n,!0),he(),s=l.element,Ia&&a.isDehydrated){if(a={element:s,isDehydrated:!1,cache:l.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=hn(e,t,s,n);break e}if(s!==r){G(r=k(Error(i(424)),t)),t=hn(e,t,s,n);break e}for(Ia&&(el=Do(t.stateNode.containerInfo),Qs=t,tl=!0,nl=null,rl=!0),n=Cl(t,null,s,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(W(),s===r){t=_n(e,t,n);break e}tn(e,t,s,n)}t=t.child}return t;case 26:if(Zo)return ln(e,t),null===e?(n=es(t.type,null,t.pendingProps,null))?t.memoizedState=n:tl||(t.stateNode=os(t.type,t.pendingProps,Zs.current,t)):t.memoizedState=es(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:if(ds)return F(t),null===e&&ds&&tl&&(r=t.stateNode=hs(t.type,t.pendingProps,Zs.current,$s.current,!1),Qs=t,rl=!0,el=No(r)),r=t.pendingProps.children,null!==e||tl?tn(e,t,r,n):t.child=Al(t,null,r,n),ln(e,t),t.child;case 5:return null===e&&tl&&($o(t.type,t.pendingProps,$s.current),(a=r=el)&&(null!==(r=Oo(r,t.type,t.pendingProps,rl))?(t.stateNode=r,Qs=t,el=No(r),rl=!1,a=!0):a=!1),a||B(t)),F(t),a=t.type,s=t.pendingProps,l=null!==e?e.memoizedProps:null,r=s.children,Sa(a,s)?r=null:null!==l&&Sa(a,l)&&(t.flags|=32),null!==t.memoizedState&&(a=Ue(e,t,ze,null,null,n),Ra?Xa._currentValue=a:Xa._currentValue2=a),ln(e,t),tn(e,t,r,n),t.child;case 6:return null===e&&tl&&(Ko(t.pendingProps,$s.current),(e=n=el)&&(null!==(n=Fo(n,t.pendingProps,rl))?(t.stateNode=n,Qs=t,el=null,e=!0):e=!1),e||B(t)),null;case 13:return mn(e,t,n);case 4:return U(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Al(t,null,r,n):tn(e,t,r,n),t.child;case 11:return nn(e,t,t.type,t.pendingProps,n);case 7:return tn(e,t,t.pendingProps,n),t.child;case 8:case 12:return tn(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Mn(0,t.type,r.value),tn(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,kn(t),r=r(a=In(a)),t.flags|=1,tn(e,t,r,n),t.child;case 14:return rn(e,t,t.type,t.pendingProps,n);case 15:return an(e,t,t.type,t.pendingProps,n);case 19:return wn(e,t,n);case 22:return on(e,t,n);case 24:return kn(t),r=In(sc),null===e?(null===(a=On())&&(a=Rc,s=Dn(),a.pooledCache=s,s.refCount++,null!==s&&(a.pooledCacheLanes|=n),a=s),t.memoizedState={parent:r,cache:a},oe(t),Mn(0,sc,a)):(0!==(e.lanes&n)&&(se(e,t),pe(t,null,null,n),he()),a=e.memoizedState,s=t.memoizedState,a.parent!==r?(a={parent:r,cache:r},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),Mn(0,sc,r)):(r=s.cache,Mn(0,sc,r),r!==a.cache&&Cn(t,[sc],n,!0))),tn(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Mn(e,t,n){Ra?(y(tc,t._currentValue),t._currentValue=n):(y(tc,t._currentValue2),t._currentValue2=n)}function Tn(e){var t=tc.current;Ra?e._currentValue=t:e._currentValue2=t,v(tc)}function An(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Cn(e,t,n,r){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var o=a.dependencies;if(null!==o){var s=a.child;o=o.firstContext;e:for(;null!==o;){var l=o;o=a;for(var c=0;c<t.length;c++)if(l.context===t[c]){o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),An(o.return,n,e),r||(s=null);break e}o=l.next}}else if(18===a.tag){if(null===(s=a.return))throw Error(i(341));s.lanes|=n,null!==(o=s.alternate)&&(o.lanes|=n),An(s,n,e),s=null}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}}function Rn(e,t,n,r){e=null;for(var a=t,o=!1;null!==a;){if(!o)if(524288&a.flags)o=!0;else if(262144&a.flags)break;if(10===a.tag){var s=a.alternate;if(null===s)throw Error(i(387));if(null!==(s=s.memoizedProps)){var l=a.type;Fs(a.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(a===Js.current){if(null===(s=a.alternate))throw Error(i(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(Xa):e=[Xa])}a=a.return}null!==e&&Cn(t,e,n,r),t.flags|=262144}function Pn(e){for(e=e.firstContext;null!==e;){var t=e.context;if(!Fs(Ra?t._currentValue:t._currentValue2,e.memoizedValue))return!0;e=e.next}return!1}function kn(e){nc=e,rc=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function In(e){return Nn(nc,e)}function Ln(e,t){return null===nc&&kn(e),Nn(e,t)}function Nn(e,t){var n=Ra?t._currentValue:t._currentValue2;if(t={context:t,memoizedValue:n,next:null},null===rc){if(null===e)throw Error(i(308));rc=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else rc=rc.next=t;return n}function Dn(){return{controller:new ic,data:new Map,refCount:0}}function Un(e){e.refCount--,0===e.refCount&&ac(oc,function(){e.controller.abort()})}function On(){var e=cc.current;return null!==e?e:Rc.pooledCache}function Fn(e,t){y(cc,null===t?cc.current:t.pool)}function zn(){var e=On();return null===e?null:{parent:Ra?sc._currentValue:sc._currentValue2,pool:e}}function Bn(e){e.flags|=4}function Hn(e,t){if(null!==e&&e.child===t.child)return!1;if(16&t.flags)return!0;for(e=t.child;null!==e;){if(13878&e.flags||13878&e.subtreeFlags)return!0;e=e.sibling}return!1}function Vn(e,t,n,r){if(Pa)for(n=t.child;null!==n;){if(5===n.tag||6===n.tag)_a(e,n.stateNode);else if(!(4===n.tag||ds&&27===n.tag)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}else if(ka)for(var i=t.child;null!==i;){if(5===i.tag){var a=i.stateNode;n&&r&&(a=Mo(a,i.type,i.memoizedProps)),_a(e,a)}else if(6===i.tag)a=i.stateNode,n&&r&&(a=To(a,i.memoizedProps)),_a(e,a);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(a=i.child)&&(a.return=i),Vn(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function jn(e,t,n,r){if(ka)for(var i=t.child;null!==i;){if(5===i.tag){var a=i.stateNode;n&&r&&(a=Mo(a,i.type,i.memoizedProps)),_o(e,a)}else if(6===i.tag)a=i.stateNode,n&&r&&(a=To(a,i.memoizedProps)),_o(e,a);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(a=i.child)&&(a.return=i),jn(e,i,!(null!==i.memoizedProps&&"manual"===i.memoizedProps.mode),!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function Wn(e,t){if(ka&&Hn(e,t)){var n=(e=t.stateNode).containerInfo,r=wo();jn(r,t,!1,!1),e.pendingChildren=r,Bn(t),Eo(n,r)}}function Gn(e,t,n,r){if(Pa)e.memoizedProps!==r&&Bn(t);else if(ka){var i=e.stateNode,a=e.memoizedProps;if((e=Hn(e,t))||a!==r){var o=$s.current;(a=xo(i,n,a,r,!e,null))===i?t.stateNode=i:(Ea(a,n,r,o)&&Bn(t),t.stateNode=a,e?Vn(a,t,!1,!1):Bn(t))}else t.stateNode=i}}function Xn(e,t,n){if(Ba(t,n)){if(e.flags|=16777216,!Ha(t,n)){if(!ni())throw Sl=El,_l;e.flags|=8192}}else e.flags&=-16777217}function qn(e,t){if(ls(t)){if(e.flags|=16777216,!cs(t)){if(!ni())throw Sl=El,_l;e.flags|=8192}}else e.flags&=-16777217}function Yn(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?S():536870912,e.lanes|=t,jc|=t)}function $n(e,t){if(!tl)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Kn(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=31457280&i.subtreeFlags,r|=31457280&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Zn(e,t,n){var r=t.pendingProps;switch(D(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return Kn(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Tn(sc),O(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(j(t)?Bn(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==nl&&(Yr(nl),nl=null))),Wn(e,t),Kn(t),null;case 26:if(Zo){n=t.type;var a=t.memoizedState;return null===e?(Bn(t),null!==a?(Kn(t),qn(t,a)):(Kn(t),Xn(t,n,r))):a?a!==e.memoizedState?(Bn(t),Kn(t),qn(t,a)):(Kn(t),t.flags&=-16777217):(Pa?e.memoizedProps!==r&&Bn(t):Gn(e,t,n,r),Kn(t),Xn(t,n,r)),null}case 27:if(ds){if(z(t),n=Zs.current,a=t.type,null!==e&&null!=t.stateNode)Pa?e.memoizedProps!==r&&Bn(t):Gn(e,t,a,r);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Kn(t),null}e=$s.current,j(t)?H(t,e):(e=hs(a,r,n,e,!0),t.stateNode=e,Bn(t))}return Kn(t),null}case 5:if(z(t),n=t.type,null!==e&&null!=t.stateNode)Gn(e,t,n,r);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Kn(t),null}e=$s.current,j(t)?H(t,e):(Vn(a=wa(n,r,Zs.current,e,t),t,!1,!1),t.stateNode=a,Ea(a,n,r,e)&&Bn(t))}return Kn(t),Xn(t,t.type,t.pendingProps),null;case 6:if(e&&null!=t.stateNode)n=e.memoizedProps,Pa?n!==r&&Bn(t):ka&&(n!==r?(t.stateNode=Ma(r,Zs.current,$s.current,t),Bn(t)):t.stateNode=e.stateNode);else{if("string"!=typeof r&&null===t.stateNode)throw Error(i(166));if(e=Zs.current,n=$s.current,j(t)){if(!Ia)throw Error(i(176));if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(a=Qs))switch(a.tag){case 27:case 5:r=a.memoizedProps}Ho(e,n,t,r)||B(t)}else t.stateNode=Ma(r,e,n,t)}return Kn(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=j(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!Ia)throw Error(i(344));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));Vo(a,t)}else W(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Kn(t),a=!1}else null!==nl&&(Yr(nl),nl=null),a=!0;if(!a)return 256&t.flags?(Ie(t),t):(Ie(t),null)}if(Ie(t),128&t.flags)return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){a=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(a=r.alternate.memoizedState.cachePool.pool);var o=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(o=r.memoizedState.cachePool.pool),o!==a&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Yn(t,t.updateQueue),Kn(t),null;case 4:return O(),Wn(e,t),null===e&&Na(t.stateNode.containerInfo),Kn(t),null;case 10:return Tn(t.type),Kn(t),null;case 19:if(v(Ll),null===(a=t.memoizedState))return Kn(t),null;if(r=!!(128&t.flags),null===(o=a.rendering))if(r)$n(a,!1);else{if(0!==Fc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(o=Le(e))){for(t.flags|=128,$n(a,!1),e=o.updateQueue,t.updateQueue=e,Yn(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ai(n,e),n=n.sibling;return y(Ll,1&Ll.current|2),t.child}e=e.sibling}null!==a.tail&&Rs()>Yc&&(t.flags|=128,r=!0,$n(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Le(o))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Yn(t,e),$n(a,!0),null===a.tail&&"hidden"===a.tailMode&&!o.alternate&&!tl)return Kn(t),null}else 2*Rs()-a.renderingStartTime>Yc&&536870912!==n&&(t.flags|=128,r=!0,$n(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=a.last)?e.sibling=o:t.child=o,a.last=o)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Rs(),t.sibling=null,e=Ll.current,y(Ll,r?1&e|2:1&e),t):(Kn(t),null);case 22:case 23:return Ie(t),Ce(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?!!(536870912&n)&&!(128&t.flags)&&(Kn(t),6&t.subtreeFlags&&(t.flags|=8192)):Kn(t),null!==(n=t.updateQueue)&&Yn(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&v(cc),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Tn(sc),Kn(t),null;case 25:return null}throw Error(i(156,t.tag))}function Jn(e,t){switch(D(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Tn(sc),O(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return z(t),null;case 13:if(Ie(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));W()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return v(Ll),null;case 4:return O(),null;case 10:return Tn(t.type),null;case 22:case 23:return Ie(t),Ce(),null!==e&&v(cc),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Tn(sc),null;default:return null}}function Qn(e,t){switch(D(t),t.tag){case 3:Tn(sc),O();break;case 26:case 27:case 5:z(t);break;case 4:O();break;case 13:Ie(t);break;case 19:v(Ll);break;case 10:Tn(t.type);break;case 22:case 23:Ie(t),Ce(),null!==e&&v(cc);break;case 24:Tn(sc)}}function er(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){yi(t,t.return,e)}}function tr(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(void 0!==s){o.destroy=void 0,i=t;var l=n;try{s()}catch(e){yi(i,l,e)}}}r=r.next}while(r!==a)}}catch(e){yi(t,t.return,e)}}function nr(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{me(t,n)}catch(t){yi(e,e.return,t)}}}function rr(e,t,n){n.props=$t(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){yi(e,t,n)}}function ir(e,t){try{var n=e.ref;if(null!==n){var r=e.stateNode;switch(e.tag){case 26:case 27:case 5:var i=ga(r);break;default:i=r}"function"==typeof n?e.refCleanup=n(i):n.current=i}}catch(n){yi(e,t,n)}}function ar(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"==typeof r)try{r()}catch(n){yi(e,t,n)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(n){yi(e,t,n)}else n.current=null}function or(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{so(r,t,n,e)}catch(t){yi(e,e.return,t)}}function sr(e,t,n){try{lo(e.stateNode,e.type,n,t,e)}catch(t){yi(e,e.return,t)}}function lr(e){return 5===e.tag||3===e.tag||!!Zo&&26===e.tag||!!ds&&27===e.tag||4===e.tag}function cr(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||lr(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&(!ds||27!==e.tag)&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ur(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?uo(n,e,t):ao(n,e);else if(!(4===r||ds&&27===r)&&null!==(e=e.child))for(ur(e,t,n),e=e.sibling;null!==e;)ur(e,t,n),e=e.sibling}function dr(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?co(n,e,t):io(n,e);else if(!(4===r||ds&&27===r)&&null!==(e=e.child))for(dr(e,t,n),e=e.sibling;null!==e;)dr(e,t,n),e=e.sibling}function hr(e,t,n){e=e.containerInfo;try{So(e,n)}catch(e){yi(t,t.return,e)}}function pr(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Er(e,n),4&r&&er(5,n);break;case 1:if(Er(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(e){yi(n,n.return,e)}else{var i=$t(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){yi(n,n.return,e)}}64&r&&nr(n),512&r&&ir(n,n.return);break;case 3:if(Er(e,n),64&r&&null!==(r=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 27:case 5:e=ga(n.child.stateNode);break;case 1:e=n.child.stateNode}try{me(r,e)}catch(e){yi(n,n.return,e)}}break;case 26:if(Zo){Er(e,n),512&r&&ir(n,n.return);break}case 27:case 5:Er(e,n),null===t&&4&r&&or(n),512&r&&ir(n,n.return);break;case 12:Er(e,n);break;case 13:Er(e,n),4&r&&vr(e,n);break;case 22:if(!(i=null!==n.memoizedState||uc)){t=null!==t&&null!==t.memoizedState||dc;var a=uc,o=dc;uc=i,(dc=t)&&!o?Mr(e,n,!!(8772&n.subtreeFlags)):Er(e,n),uc=a,dc=o}512&r&&("manual"===n.memoizedProps.mode?ir(n,n.return):ar(n,n.return));break;default:Er(e,n)}}function fr(e){var t=e.alternate;null!==t&&(e.alternate=null,fr(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&za(t),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function mr(e,t,n){for(n=n.child;null!==n;)gr(e,t,n),n=n.sibling}function gr(e,t,n){if(Os&&"function"==typeof Os.onCommitFiberUnmount)try{Os.onCommitFiberUnmount(Us,n)}catch(e){}switch(n.tag){case 26:if(Zo){dc||ar(n,t),mr(e,t,n),n.memoizedState?ns(n.memoizedState):n.stateNode&&as(n.stateNode);break}case 27:if(ds){dc||ar(n,t);var r=gc,i=vc;gc=n.stateNode,mr(e,t,n),ms(n.stateNode),gc=r,vc=i;break}case 5:dc||ar(n,t);case 6:if(Pa){if(r=gc,i=vc,gc=null,mr(e,t,n),vc=i,null!==(gc=r))if(vc)try{po(gc,n.stateNode)}catch(e){yi(n,t,e)}else try{ho(gc,n.stateNode)}catch(e){yi(n,t,e)}}else mr(e,t,n);break;case 18:Pa&&null!==gc&&(vc?qo(gc,n.stateNode):Xo(gc,n.stateNode));break;case 4:Pa?(r=gc,i=vc,gc=n.stateNode.containerInfo,vc=!0,mr(e,t,n),gc=r,vc=i):(ka&&hr(n.stateNode,n,wo()),mr(e,t,n));break;case 0:case 11:case 14:case 15:dc||tr(2,n,t),dc||tr(4,n,t),mr(e,t,n);break;case 1:dc||(ar(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&rr(n,t,r)),mr(e,t,n);break;case 21:mr(e,t,n);break;case 22:dc||ar(n,t),dc=(r=dc)||null!==n.memoizedState,mr(e,t,n),dc=r;break;default:mr(e,t,n)}}function vr(e,t){if(Ia&&null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))try{Go(e)}catch(e){yi(t,t.return,e)}}function yr(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new pc),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new pc),t;default:throw Error(i(435,e.tag))}}(e);t.forEach(function(t){var r=Ei.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function br(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r],o=e,s=t;if(Pa){var l=s;e:for(;null!==l;){switch(l.tag){case 27:case 5:gc=l.stateNode,vc=!1;break e;case 3:case 4:gc=l.stateNode.containerInfo,vc=!0;break e}l=l.return}if(null===gc)throw Error(i(160));gr(o,s,a),gc=null,vc=!1}else gr(o,s,a);null!==(o=a.alternate)&&(o.return=null),a.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)xr(t,e),t=t.sibling}function xr(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:br(t,e),wr(e),4&r&&(tr(3,e,e.return),er(3,e),tr(5,e,e.return));break;case 1:br(t,e),wr(e),512&r&&(dc||null===n||ar(n,n.return)),64&r&&uc&&null!==(e=e.updateQueue)&&null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r));break;case 26:if(Zo){var a=yc;br(t,e),wr(e),512&r&&(dc||null===n||ar(n,n.return)),4&r&&(r=null!==n?n.memoizedState:null,t=e.memoizedState,null===n?null===t?null===e.stateNode?e.stateNode=rs(a,e.type,e.memoizedProps,e):is(a,e.type,e.stateNode):e.stateNode=ts(a,t,e.memoizedProps):r!==t?(null===r?null!==n.stateNode&&as(n.stateNode):ns(r),null===t?is(a,e.type,e.stateNode):ts(a,t,e.memoizedProps)):null===t&&null!==e.stateNode&&sr(e,e.memoizedProps,n.memoizedProps));break}case 27:if(ds&&4&r&&null===e.alternate){a=e.stateNode;var o=e.memoizedProps;try{ps(a),fs(e.type,o,a,e)}catch(t){yi(e,e.return,t)}}case 5:if(br(t,e),wr(e),512&r&&(dc||null===n||ar(n,n.return)),Pa){if(32&e.flags){t=e.stateNode;try{fo(t)}catch(t){yi(e,e.return,t)}}4&r&&null!=e.stateNode&&sr(e,t=e.memoizedProps,null!==n?n.memoizedProps:t),1024&r&&(hc=!0)}break;case 6:if(br(t,e),wr(e),4&r&&Pa){if(null===e.stateNode)throw Error(i(162));r=e.memoizedProps,n=null!==n?n.memoizedProps:r,t=e.stateNode;try{oo(t,n,r)}catch(t){yi(e,e.return,t)}}break;case 3:if(Zo?(ss(),a=yc,yc=Qo(t.containerInfo),br(t,e),yc=a):br(t,e),wr(e),4&r){if(Pa&&Ia&&null!==n&&n.memoizedState.isDehydrated)try{Wo(t.containerInfo)}catch(t){yi(e,e.return,t)}if(ka){r=t.containerInfo,n=t.pendingChildren;try{So(r,n)}catch(t){yi(e,e.return,t)}}}hc&&(hc=!1,_r(e));break;case 4:Zo?(n=yc,yc=Qo(e.stateNode.containerInfo),br(t,e),wr(e),yc=n):(br(t,e),wr(e)),4&r&&ka&&hr(e.stateNode,e,e.stateNode.pendingChildren);break;case 12:br(t,e),wr(e);break;case 13:br(t,e),wr(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(qc=Rs()),4&r&&null!==(r=e.updateQueue)&&(e.updateQueue=null,yr(e,r));break;case 22:512&r&&(dc||null===n||ar(n,n.return)),a=null!==e.memoizedState;var s=null!==n&&null!==n.memoizedState,l=uc,c=dc;if(uc=l||a,dc=c||s,br(t,e),dc=c,uc=l,wr(e),(t=e.stateNode)._current=e,t._visibility&=-3,t._visibility|=2&t._pendingVisibility,8192&r&&(t._visibility=a?-2&t._visibility:1|t._visibility,a&&(t=uc||dc,null===n||s||t||Sr(e)),Pa&&(null===e.memoizedProps||"manual"!==e.memoizedProps.mode)))e:if(n=null,Pa)for(t=e;;){if(5===t.tag||Zo&&26===t.tag||ds&&27===t.tag){if(null===n){s=n=t;try{o=s.stateNode,a?mo(o):vo(s.stateNode,s.memoizedProps)}catch(e){yi(s,s.return,e)}}}else if(6===t.tag){if(null===n){s=t;try{var u=s.stateNode;a?go(u):yo(u,s.memoizedProps)}catch(e){yi(s,s.return,e)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&null!==(r=e.updateQueue)&&null!==(n=r.retryQueue)&&(r.retryQueue=null,yr(e,n));break;case 19:br(t,e),wr(e),4&r&&null!==(r=e.updateQueue)&&(e.updateQueue=null,yr(e,r));break;case 21:break;default:br(t,e),wr(e)}}function wr(e){var t=e.flags;if(2&t){try{if(Pa&&(!ds||27!==e.tag)){e:{for(var n=e.return;null!==n;){if(lr(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 27:if(ds){var a=r.stateNode;dr(e,cr(e),a);break}case 5:var o=r.stateNode;32&r.flags&&(fo(o),r.flags&=-33),dr(e,cr(e),o);break;case 3:case 4:var s=r.stateNode.containerInfo;ur(e,cr(e),s);break;default:throw Error(i(161))}}}catch(t){yi(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _r(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;_r(t),5===t.tag&&1024&t.flags&&qa(t.stateNode),e=e.sibling}}function Er(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)pr(e,t.alternate,t),t=t.sibling}function Sr(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:tr(4,t,t.return),Sr(t);break;case 1:ar(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&rr(t,t.return,n),Sr(t);break;case 26:case 27:case 5:ar(t,t.return),Sr(t);break;case 22:ar(t,t.return),null===t.memoizedState&&Sr(t);break;default:Sr(t)}e=e.sibling}}function Mr(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:Mr(i,a,n),er(4,a);break;case 1:if(Mr(i,a,n),"function"==typeof(i=(r=a).stateNode).componentDidMount)try{i.componentDidMount()}catch(e){yi(r,r.return,e)}if(null!==(i=(r=a).updateQueue)){var s=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)fe(l[i],s)}catch(e){yi(r,r.return,e)}}n&&64&o&&nr(a),ir(a,a.return);break;case 26:case 27:case 5:Mr(i,a,n),n&&null===r&&4&o&&or(a),ir(a,a.return);break;case 12:default:Mr(i,a,n);break;case 13:Mr(i,a,n),n&&4&o&&vr(i,a);break;case 22:null===a.memoizedState&&Mr(i,a,n),ir(a,a.return)}t=t.sibling}}function Tr(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Un(n))}function Ar(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Un(e))}function Cr(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Rr(e,t,n,r),t=t.sibling}function Rr(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Cr(e,t,n,r),2048&i&&er(9,t);break;case 3:Cr(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Un(e)));break;case 12:if(2048&i){Cr(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;"function"==typeof s&&s(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(e){yi(t,t.return,e)}}else Cr(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,null!==t.memoizedState?4&a._visibility?Cr(e,t,n,r):kr(e,t):4&a._visibility?Cr(e,t,n,r):(a._visibility|=4,Pr(e,t,n,r,!!(10256&t.subtreeFlags))),2048&i&&Tr(t.alternate,t);break;case 24:Cr(e,t,n,r),2048&i&&Ar(t.alternate,t);break;default:Cr(e,t,n,r)}}function Pr(e,t,n,r,i){for(i=i&&!!(10256&t.subtreeFlags),t=t.child;null!==t;){var a=e,o=t,s=n,l=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:Pr(a,o,s,l,i),er(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?4&u._visibility?Pr(a,o,s,l,i):kr(a,o):(u._visibility|=4,Pr(a,o,s,l,i)),i&&2048&c&&Tr(o.alternate,o);break;case 24:Pr(a,o,s,l,i),i&&2048&c&&Ar(o.alternate,o);break;default:Pr(a,o,s,l,i)}t=t.sibling}}function kr(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:kr(n,r),2048&i&&Tr(r.alternate,r);break;case 24:kr(n,r),2048&i&&Ar(r.alternate,r);break;default:kr(n,r)}t=t.sibling}}function Ir(e){if(e.subtreeFlags&bc)for(e=e.child;null!==e;)Lr(e),e=e.sibling}function Lr(e){switch(e.tag){case 26:Ir(e),e.flags&bc&&(null!==e.memoizedState?us(yc,e.memoizedState,e.memoizedProps):ja(e.type,e.memoizedProps));break;case 5:Ir(e),e.flags&bc&&ja(e.type,e.memoizedProps);break;case 3:case 4:if(Zo){var t=yc;yc=Qo(e.stateNode.containerInfo),Ir(e),yc=t}else Ir(e);break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=bc,bc=16777216,Ir(e),bc=t):Ir(e));break;default:Ir(e)}}function Nr(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Dr(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];fc=r,Fr(r,e)}Nr(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Ur(e),e=e.sibling}function Ur(e){switch(e.tag){case 0:case 11:case 15:Dr(e),2048&e.flags&&tr(9,e,e.return);break;case 3:case 12:default:Dr(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&4&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-5,Or(e)):Dr(e)}}function Or(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];fc=r,Fr(r,e)}Nr(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:tr(8,t,t.return),Or(t);break;case 22:4&(n=t.stateNode)._visibility&&(n._visibility&=-5,Or(t));break;default:Or(t)}e=e.sibling}}function Fr(e,t){for(;null!==fc;){var n=fc;switch(n.tag){case 0:case 11:case 15:tr(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Un(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,fc=r;else e:for(n=e;null!==fc;){var i=(r=fc).sibling,a=r.return;if(fr(r),r===n){fc=null;break e}if(null!==i){i.return=a,fc=i;break e}fc=a}}}function zr(e){var t=La(e);if(null!=t){if("string"!=typeof t.memoizedProps["data-testname"])throw Error(i(364));return t}if(null===(e=Za(e)))throw Error(i(362));return e.stateNode.current}function Br(e,t){var n=e.tag;switch(t.$$typeof){case wc:if(e.type===t.value)return!0;break;case _c:e:{for(t=t.value,e=[e,0],n=0;n<e.length;){var r=e[n++],a=r.tag,o=e[n++],s=t[o];if(5!==a&&26!==a&&27!==a||!eo(r)){for(;null!=s&&Br(r,s);)s=t[++o];if(o===t.length){t=!0;break e}for(r=r.child;null!==r;)e.push(r,o),r=r.sibling}}t=!1}return t;case Ec:if((5===n||26===n||27===n)&&to(e.stateNode,t.value))return!0;break;case Mc:if((5===n||6===n||26===n||27===n)&&null!==(e=Qa(e))&&0<=e.indexOf(t.value))return!0;break;case Sc:if((5===n||26===n||27===n)&&"string"==typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase())return!0;break;default:throw Error(i(365))}return!1}function Hr(e){switch(e.$$typeof){case wc:return"<"+(o(e.value)||"Unknown")+">";case _c:return":has("+(Hr(e)||"")+")";case Ec:return'[role="'+e.value+'"]';case Mc:return'"'+e.value+'"';case Sc:return'[data-testname="'+e.value+'"]';default:throw Error(i(365))}}function Vr(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var i=e[r++],a=i.tag,o=e[r++],s=t[o];if(5!==a&&26!==a&&27!==a||!eo(i)){for(;null!=s&&Br(i,s);)s=t[++o];if(o===t.length)n.push(i);else for(i=i.child;null!==i;)e.push(i,o),i=i.sibling}}return n}function jr(e,t){if(!Ka)throw Error(i(363));e=Vr(e=zr(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++],a=r.tag;if(5===a||26===a||27===a)eo(r)||t.push(r.stateNode);else for(r=r.child;null!==r;)e.push(r),r=r.sibling}return t}function Wr(){return 2&Cc&&0!==kc?kc&-kc:null!==ua.T?0!==gl?gl:ie():Oa()}function Gr(){0===Vc&&(Vc=536870912&kc&&!tl?536870912:E());var e=kl.current;return null!==e&&(e.flags|=32),Vc}function Xr(e,t,n){(e===Rc&&2===Ic||null!==e.cancelPendingCommit)&&(ei(e,0),Zr(e,kc,Vc,!1)),T(e,n),2&Cc&&e===Rc||(e===Rc&&(!(2&Cc)&&(Bc|=n),4===Fc&&Zr(e,kc,Vc,!1)),J(e))}function qr(e,t,n){if(6&Cc)throw Error(i(327));for(var r=!n&&!(60&t)&&0===(t&e.expiredLanes)||w(e,t),a=r?function(e,t){var n=Cc;Cc|=2;var r=ri(),a=ii();Rc!==e||kc!==t?($c=null,Yc=Rs()+500,ei(e,t)):Dc=w(e,t);e:for(;;)try{if(0!==Ic&&null!==Pc){t=Pc;var o=Lc;t:switch(Ic){case 1:Ic=0,Lc=null,di(e,t,o,1);break;case 2:if(ve(o)){Ic=0,Lc=null,ui(t);break}t=function(){2===Ic&&Rc===e&&(Ic=7),J(e)},o.then(t,t);break e;case 3:Ic=7;break e;case 4:Ic=5;break e;case 7:ve(o)?(Ic=0,Lc=null,ui(t)):(Ic=0,Lc=null,di(e,t,o,7));break;case 5:var s=null;switch(Pc.tag){case 26:s=Pc.memoizedState;case 5:case 27:var l=Pc,c=l.type,u=l.pendingProps;if(s?cs(s):Ha(c,u)){Ic=0,Lc=null;var d=l.sibling;if(null!==d)Pc=d;else{var h=l.return;null!==h?(Pc=h,hi(h)):Pc=null}break t}}Ic=0,Lc=null,di(e,t,o,5);break;case 6:Ic=0,Lc=null,di(e,t,o,6);break;case 8:Qr(),Fc=6;break e;default:throw Error(i(462))}}li();break}catch(t){ti(e,t)}return rc=nc=null,ua.H=r,ua.A=a,Cc=n,null!==Pc?0:(Rc=null,kc=0,X(),Fc)}(e,t):oi(e,t,!0),o=r;;){if(0===a){Dc&&!r&&Zr(e,t,0,!1);break}if(6===a)Zr(e,t,0,!Nc);else{if(n=e.current.alternate,o&&!Kr(n)){a=oi(e,t,!1),o=!1;continue}if(2===a){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=0!=(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var l=e;a=Wc;var c=Ia&&l.current.memoizedState.isDehydrated;if(c&&(ei(l,s).flags|=256),2!==(s=oi(l,s,!1))){if(Uc&&!c){l.errorRecoveryDisabledLanes|=o,Bc|=o,a=4;break e}o=Gc,Gc=a,null!==o&&Yr(o)}a=s}if(o=!1,2!==a)continue}}if(1===a){ei(e,0),Zr(e,t,0,!0);break}e:{switch(r=e,a){case 0:case 1:throw Error(i(345));case 4:if((4194176&t)===t){Zr(r,t,Vc,!Nc);break e}break;case 2:Gc=null;break;case 3:case 5:break;default:throw Error(i(329))}if(r.finishedWork=n,r.finishedLanes=t,(62914560&t)===t&&10<(o=qc+300-Rs())){if(Zr(r,t,Vc,!Nc),0!==x(r,0))break e;r.timeoutHandle=Ta($r.bind(null,r,n,Gc,$c,Xc,t,Vc,Bc,jc,Nc,2,-0,0),o)}else $r(r,n,Gc,$c,Xc,t,Vc,Bc,jc,Nc,0,-0,0)}}break}J(e)}function Yr(e){null===Gc?Gc=e:Gc.push.apply(Gc,e)}function $r(e,t,n,r,i,a,o,s,l,c,u,d,h){var p=t.subtreeFlags;if((8192&p||!(16785408&~p))&&(Va(),Lr(t),null!==(t=Wa())))return e.cancelPendingCommit=t(fi.bind(null,e,n,r,i,o,s,l,1,d,h)),void Zr(e,a,o,!c);fi(e,n,r,i,o,s,l)}function Kr(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&null!==(n=t.updateQueue)&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Fs(a(),i))return!1}catch(e){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zr(e,t,n,r){t&=~Hc,t&=~Bc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-xs(i),o=1<<a;r[a]=-1,i&=~o}0!==n&&A(e,n,t)}function Jr(){return!!(6&Cc)||(Q(0,!1),!1)}function Qr(){if(null!==Pc){if(0===Ic)var e=Pc.return;else rc=nc=null,Ve(e=Pc),Ml=null,Tl=0,e=Pc;for(;null!==e;)Qn(e.alternate,e),e=e.return;Pc=null}}function ei(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;n!==Ca&&(e.timeoutHandle=Ca,Aa(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Qr(),Rc=e,Pc=n=Ti(e.current,null),kc=t,Ic=0,Lc=null,Nc=!1,Dc=w(e,t),Uc=!1,jc=Vc=Hc=Bc=zc=Fc=0,Gc=Wc=null,Xc=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-xs(r),a=1<<i;t|=e[i],r&=~a}return Oc=t,X(),n}function ti(e,t){Dl=null,ua.H=Xl,t===wl?(t=xe(),Ic=3):t===_l?(t=xe(),Ic=4):Ic=t===Jl?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,Lc=t,null===Pc&&(Fc=1,Kt(e,k(t,e.current)))}function ni(){var e=kl.current;return null===e||((4194176&kc)===kc?null===Il:!!((62914560&kc)===kc||536870912&kc)&&e===Il)}function ri(){var e=ua.H;return ua.H=Xl,null===e?Xl:e}function ii(){var e=ua.A;return ua.A=xc,e}function ai(){Fc=4,Nc||(4194176&kc)!==kc&&null!==kl.current||(Dc=!0),!(134217727&zc)&&!(134217727&Bc)||null===Rc||Zr(Rc,kc,Vc,!1)}function oi(e,t,n){var r=Cc;Cc|=2;var i=ri(),a=ii();Rc===e&&kc===t||($c=null,ei(e,t)),t=!1;var o=Fc;e:for(;;)try{if(0!==Ic&&null!==Pc){var s=Pc,l=Lc;switch(Ic){case 8:Qr(),o=6;break e;case 3:case 2:case 6:null===kl.current&&(t=!0);var c=Ic;if(Ic=0,Lc=null,di(e,s,l,c),n&&Dc){o=0;break e}break;default:c=Ic,Ic=0,Lc=null,di(e,s,l,c)}}si(),o=Fc;break}catch(t){ti(e,t)}return t&&e.shellSuspendCounter++,rc=nc=null,Cc=r,ua.H=i,ua.A=a,null===Pc&&(Rc=null,kc=0,X()),o}function si(){for(;null!==Pc;)ci(Pc)}function li(){for(;null!==Pc&&!As();)ci(Pc)}function ci(e){var t=Sn(e.alternate,e,Oc);e.memoizedProps=e.pendingProps,null===t?hi(e):Pc=t}function ui(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=un(n,t,t.pendingProps,t.type,void 0,kc);break;case 11:t=un(n,t,t.pendingProps,t.type.render,t.ref,kc);break;case 5:Ve(t);default:Qn(n,t),t=Sn(n,t=Pc=Ai(t,Oc),Oc)}e.memoizedProps=e.pendingProps,null===t?hi(e):Pc=t}function di(e,t,n,r){rc=nc=null,Ve(t),Ml=null,Tl=0;var a=t.return;try{if(function(e,t,n,r,a){if(n.flags|=32768,null!==r&&"object"==typeof r&&"function"==typeof r.then){if(null!==(t=n.alternate)&&Rn(t,n,a,!0),null!==(n=kl.current)){switch(n.tag){case 13:return null===Il?ai():null===n.alternate&&0===Fc&&(Fc=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===El?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),bi(e,r,a)),!1;case 22:return n.flags|=65536,r===El?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),bi(e,r,a)),!1}throw Error(i(435,n.tag))}return bi(e,r,a),ai(),!1}if(tl)return null!==(t=kl.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==il&&G(k(e=Error(i(422),{cause:r}),n))):(r!==il&&G(k(t=Error(i(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,r=k(r,n),de(e,a=Jt(e.stateNode,r,a)),4!==Fc&&(Fc=2)),!1;var o=Error(i(520),{cause:r});if(o=k(o,n),null===Wc?Wc=[o]:Wc.push(o),4!==Fc&&(Fc=2),null===t)return!0;r=k(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,de(n,e=Jt(n.stateNode,r,e)),!1;case 1:if(t=n.type,o=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===o||"function"!=typeof o.componentDidCatch||null!==Kc&&Kc.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,en(a=Qt(a),e,n,r),de(n,a),!1}n=n.return}while(null!==n);return!1}(e,a,t,n,kc))return Fc=1,Kt(e,k(n,e.current)),void(Pc=null)}catch(t){if(null!==a)throw Pc=a,t;return Fc=1,Kt(e,k(n,e.current)),void(Pc=null)}32768&t.flags?(tl||1===r?e=!0:Dc||536870912&kc?e=!1:(Nc=e=!0,(2===r||3===r||6===r)&&null!==(r=kl.current)&&13===r.tag&&(r.flags|=16384)),pi(t,e)):hi(t)}function hi(e){var t=e;do{if(32768&t.flags)return void pi(t,Nc);e=t.return;var n=Zn(t.alternate,t,Oc);if(null!==n)return void(Pc=n);if(null!==(t=t.sibling))return void(Pc=t);Pc=t=e}while(null!==t);0===Fc&&(Fc=5)}function pi(e,t){do{var n=Jn(e.alternate,e);if(null!==n)return n.flags&=32767,void(Pc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(Pc=e);Pc=e=n}while(null!==e);Fc=6,Pc=null}function fi(e,t,n,r,a,o,s,l,c,u){var d=ua.T,h=Ua();try{Da(2),ua.T=null,function(e,t,n,r,a,o,s,l){do{gi()}while(null!==Jc);if(6&Cc)throw Error(i(327));var c=e.finishedWork;if(r=e.finishedLanes,null===c)return null;if(e.finishedWork=null,e.finishedLanes=0,c===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var u=c.lanes|c.childLanes;if(function(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-xs(n),d=1<<u;s[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var p=h[u];null!==p&&(p.lane&=-536870913)}n&=~d}0!==r&&A(e,r,0),0!==a&&0===i&&0!==e.tag&&(e.suspendedLanes|=a&~(o&~t))}(e,r,u|=sl,o,s,l),e===Rc&&(Pc=Rc=null,kc=0),!(10256&c.subtreeFlags)&&!(10256&c.flags)||Zc||(Zc=!0,eu=u,tu=n,Ms(Is,function(){return gi(),null})),n=!!(15990&c.flags),15990&c.subtreeFlags||n?(n=ua.T,ua.T=null,o=Ua(),Da(2),s=Cc,Cc|=4,function(e,t){for(ba(e.containerInfo),fc=t;null!==fc;)if(t=(e=fc).child,1028&e.subtreeFlags&&null!==t)t.return=e,fc=t;else for(;null!==fc;){var n=(e=fc).alternate;switch(t=e.flags,e.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&t&&null!==n){t=void 0;var r=e,a=n.memoizedProps;n=n.memoizedState;var o=r.stateNode;try{var s=$t(r.type,a,(r.elementType,r.type));t=o.getSnapshotBeforeUpdate(s,n),o.__reactInternalSnapshotBeforeUpdate=t}catch(e){yi(r,r.return,e)}}break;case 3:1024&t&&Pa&&bo(e.stateNode.containerInfo);break;default:if(1024&t)throw Error(i(163))}if(null!==(t=e.sibling)){t.return=e.return,fc=t;break}fc=e.return}s=mc,mc=!1}(e,c),xr(c,e),xa(e.containerInfo),e.current=c,pr(e,c.alternate,c),Cs(),Cc=s,Da(o),ua.T=n):e.current=c,Zc?(Zc=!1,Jc=e,Qc=r):mi(e,u),0===(u=e.pendingLanes)&&(Kc=null),function(e){if(Os&&"function"==typeof Os.onCommitFiberRoot)try{Os.onCommitFiberRoot(Us,e,void 0,!(128&~e.current.flags))}catch(e){}}(c.stateNode),J(e),null!==t)for(a=e.onRecoverableError,c=0;c<t.length;c++)a((u=t[c]).value,{componentStack:u.stack});!!(3&Qc)&&gi(),u=e.pendingLanes,4194218&r&&42&u?e===ru?nu++:(nu=0,ru=e):nu=0,Q(0,!1)}(e,t,n,r,h,a,o,s)}finally{ua.T=d,Da(h)}}function mi(e,t){0===(e.pooledCacheLanes&=t)&&null!=(t=e.pooledCache)&&(e.pooledCache=null,Un(t))}function gi(){if(null!==Jc){var e=Jc,t=eu;eu=0;var n=R(Qc),r=32>n?32:n;n=ua.T;var a=Ua();try{if(Da(r),ua.T=null,null===Jc)var o=!1;else{r=tu,tu=null;var s=Jc,l=Qc;if(Jc=null,Qc=0,6&Cc)throw Error(i(331));var c=Cc;if(Cc|=4,Ur(s.current),Rr(s,s.current,l,r),Cc=c,Q(0,!1),Os&&"function"==typeof Os.onPostCommitFiberRoot)try{Os.onPostCommitFiberRoot(Us,s)}catch(e){}o=!0}return o}finally{Da(a),ua.T=n,mi(e,t)}}return!1}function vi(e,t,n){t=k(n,t),null!==(e=ce(e,t=Jt(e.stateNode,t,2),2))&&(T(e,2),J(e))}function yi(e,t,n){if(3===e.tag)vi(e,e,n);else for(;null!==t;){if(3===t.tag){vi(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Kc||!Kc.has(r))){e=k(n,e),null!==(r=ce(t,n=Qt(2),2))&&(en(n,r,t,e),T(r,2),J(r));break}}t=t.return}}function bi(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Ac;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(Uc=!0,i.add(n),e=xi.bind(null,e,t,n),t.then(e,e))}function xi(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Rc===e&&(kc&n)===n&&(4===Fc||3===Fc&&(62914560&kc)===kc&&300>Rs()-qc?!(2&Cc)&&ei(e,0):Hc|=n,jc===kc&&(jc=0)),J(e)}function wi(e,t){0===t&&(t=S()),null!==(e=$(e,t))&&(T(e,t),J(e))}function _i(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),wi(e,n)}function Ei(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}null!==r&&r.delete(t),wi(e,n)}function Si(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mi(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ti(e,n){var r=e.alternate;return null===r?((r=t(e.tag,n,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=n,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=31457280&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,n=e.dependencies,r.dependencies=null===n?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Ai(e,t){e.flags&=31457282;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ci(e,n,r,a,o,s){var l=0;if(a=e,"function"==typeof e)Mi(e)&&(l=1);else if("string"==typeof e)l=Zo&&ds?Jo(e,r,$s.current)?26:gs(e)?27:5:Zo?Jo(e,r,$s.current)?26:5:ds&&gs(e)?27:5;else e:switch(e){case qi:return Ri(r.children,o,s,n);case Yi:l=8,o|=24;break;case $i:return(e=t(12,r,n,2|o)).elementType=$i,e.lanes=s,e;case ea:return(e=t(13,r,n,o)).elementType=ea,e.lanes=s,e;case ta:return(e=t(19,r,n,o)).elementType=ta,e.lanes=s,e;case ia:return Pi(r,o,s,n);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Ki:case Ji:l=10;break e;case Zi:l=9;break e;case Qi:l=11;break e;case na:l=14;break e;case ra:l=16,a=null;break e}l=29,r=Error(i(130,null===e?"null":typeof e,"")),a=null}return(n=t(l,r,n,o)).elementType=e,n.type=a,n.lanes=s,n}function Ri(e,n,r,i){return(e=t(7,e,i,n)).lanes=r,e}function Pi(e,n,r,a){(e=t(22,e,a,n)).elementType=ia,e.lanes=r;var o={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var e=o._current;if(null===e)throw Error(i(456));if(!(2&o._pendingVisibility)){var t=$(e,2);null!==t&&(o._pendingVisibility|=2,Xr(t,0,2))}},attach:function(){var e=o._current;if(null===e)throw Error(i(456));if(2&o._pendingVisibility){var t=$(e,2);null!==t&&(o._pendingVisibility&=-3,Xr(t,0,2))}}};return e.stateNode=o,e}function ki(e,n,r){return(e=t(6,e,null,n)).lanes=r,e}function Ii(e,n,r){return(n=t(4,null!==e.children?e.children:[],e.key,n)).lanes=r,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Li(e,t,n,r,i,a,o,s){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ca,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=M(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=M(0),this.hiddenUpdates=M(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function Ni(e,n,r,i,a,o,s,l,c,u,d,h){return e=new Li(e,n,r,s,l,c,u,h),n=1,!0===o&&(n|=24),o=t(3,null,null,n),e.current=o,o.stateNode=e,(n=Dn()).refCount++,e.pooledCache=n,n.refCount++,o.memoizedState={element:i,isDehydrated:r,cache:n},oe(o),e}function Di(e){return e?e=bs:bs}function Ui(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return null===(e=null!==(e=p(t))?f(e):null)?null:ga(e.stateNode)}function Oi(e,t,n,r,i,a){i=Di(i),null===r.context?r.context=i:r.pendingContext=i,(r=le(t)).payload={element:n},null!==(a=void 0===a?null:a)&&(r.callback=a),null!==(n=ce(e,r,t))&&(Xr(n,0,t),ue(n,e,t))}function Fi(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function zi(e,t){Fi(e,t),(e=e.alternate)&&Fi(e,t)}var Bi={},Hi=n(540),Vi=n(982),ji=Object.assign,Wi=Symbol.for("react.element"),Gi=Symbol.for("react.transitional.element"),Xi=Symbol.for("react.portal"),qi=Symbol.for("react.fragment"),Yi=Symbol.for("react.strict_mode"),$i=Symbol.for("react.profiler"),Ki=Symbol.for("react.provider"),Zi=Symbol.for("react.consumer"),Ji=Symbol.for("react.context"),Qi=Symbol.for("react.forward_ref"),ea=Symbol.for("react.suspense"),ta=Symbol.for("react.suspense_list"),na=Symbol.for("react.memo"),ra=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var ia=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var aa,oa,sa=Symbol.for("react.memo_cache_sentinel"),la=Symbol.iterator,ca=Symbol.for("react.client.reference"),ua=Hi.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,da=!1,ha=Array.isArray,pa=e.rendererVersion,fa=e.rendererPackageName,ma=e.extraDevToolsConfig,ga=e.getPublicInstance,va=e.getRootHostContext,ya=e.getChildHostContext,ba=e.prepareForCommit,xa=e.resetAfterCommit,wa=e.createInstance,_a=e.appendInitialChild,Ea=e.finalizeInitialChildren,Sa=e.shouldSetTextContent,Ma=e.createTextInstance,Ta=e.scheduleTimeout,Aa=e.cancelTimeout,Ca=e.noTimeout,Ra=e.isPrimaryRenderer;e.warnsIfNotActing;var Pa=e.supportsMutation,ka=e.supportsPersistence,Ia=e.supportsHydration,La=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Na=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Da=e.setCurrentUpdatePriority,Ua=e.getCurrentUpdatePriority,Oa=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var Fa=e.shouldAttemptEagerTransition,za=e.detachDeletedInstance;e.requestPostPaintCallback;var Ba=e.maySuspendCommit,Ha=e.preloadInstance,Va=e.startSuspendingCommit,ja=e.suspendInstance,Wa=e.waitForCommitToBeReady,Ga=e.NotPendingTransition,Xa=e.HostTransitionContext,qa=e.resetFormInstance;e.bindToConsole;var Ya=e.supportsMicrotasks,$a=e.scheduleMicrotask,Ka=e.supportsTestSelectors,Za=e.findFiberRoot,Ja=e.getBoundingRect,Qa=e.getTextContent,eo=e.isHiddenSubtree,to=e.matchAccessibilityRole,no=e.setFocusIfFocusable,ro=e.setupIntersectionObserver,io=e.appendChild,ao=e.appendChildToContainer,oo=e.commitTextUpdate,so=e.commitMount,lo=e.commitUpdate,co=e.insertBefore,uo=e.insertInContainerBefore,ho=e.removeChild,po=e.removeChildFromContainer,fo=e.resetTextContent,mo=e.hideInstance,go=e.hideTextInstance,vo=e.unhideInstance,yo=e.unhideTextInstance,bo=e.clearContainer,xo=e.cloneInstance,wo=e.createContainerChildSet,_o=e.appendChildToContainerChildSet,Eo=e.finalizeContainerChildren,So=e.replaceContainerChildren,Mo=e.cloneHiddenInstance,To=e.cloneHiddenTextInstance,Ao=e.isSuspenseInstancePending,Co=e.isSuspenseInstanceFallback,Ro=e.getSuspenseInstanceFallbackErrorDetails,Po=e.registerSuspenseInstanceRetry,ko=e.canHydrateFormStateMarker,Io=e.isFormStateMarkerMatching,Lo=e.getNextHydratableSibling,No=e.getFirstHydratableChild,Do=e.getFirstHydratableChildWithinContainer,Uo=e.getFirstHydratableChildWithinSuspenseInstance,Oo=e.canHydrateInstance,Fo=e.canHydrateTextInstance,zo=e.canHydrateSuspenseInstance,Bo=e.hydrateInstance,Ho=e.hydrateTextInstance,Vo=e.hydrateSuspenseInstance,jo=e.getNextHydratableInstanceAfterSuspenseInstance,Wo=e.commitHydratedContainer,Go=e.commitHydratedSuspenseInstance,Xo=e.clearSuspenseBoundary,qo=e.clearSuspenseBoundaryFromContainer,Yo=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var $o=e.validateHydratableInstance,Ko=e.validateHydratableTextInstance,Zo=e.supportsResources,Jo=e.isHostHoistableType,Qo=e.getHoistableRoot,es=e.getResource,ts=e.acquireResource,ns=e.releaseResource,rs=e.hydrateHoistable,is=e.mountHoistable,as=e.unmountHoistable,os=e.createHoistableInstance,ss=e.prepareToCommitHoistables,ls=e.mayResourceSuspendCommit,cs=e.preloadResource,us=e.suspendResource,ds=e.supportsSingletons,hs=e.resolveSingletonInstance,ps=e.clearSingleton,fs=e.acquireSingletonInstance,ms=e.releaseSingletonInstance,gs=e.isHostSingletonType,vs=[],ys=-1,bs={},xs=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(ws(e)/_s|0)|0},ws=Math.log,_s=Math.LN2,Es=128,Ss=4194304,Ms=Vi.unstable_scheduleCallback,Ts=Vi.unstable_cancelCallback,As=Vi.unstable_shouldYield,Cs=Vi.unstable_requestPaint,Rs=Vi.unstable_now,Ps=Vi.unstable_ImmediatePriority,ks=Vi.unstable_UserBlockingPriority,Is=Vi.unstable_NormalPriority,Ls=Vi.unstable_IdlePriority,Ns=Vi.log,Ds=Vi.unstable_setDisableYieldValue,Us=null,Os=null,Fs="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},zs=new WeakMap,Bs=[],Hs=0,Vs=null,js=0,Ws=[],Gs=0,Xs=null,qs=1,Ys="",$s=g(null),Ks=g(null),Zs=g(null),Js=g(null),Qs=null,el=null,tl=!1,nl=null,rl=!1,il=Error(i(519)),al=[],ol=0,sl=0,ll=null,cl=null,ul=!1,dl=!1,hl=!1,pl=0,fl=null,ml=0,gl=0,vl=null,yl=!1,bl=!1,xl=Object.prototype.hasOwnProperty,wl=Error(i(460)),_l=Error(i(474)),El={then:function(){}},Sl=null,Ml=null,Tl=0,Al=Me(!0),Cl=Me(!1),Rl=g(null),Pl=g(0),kl=g(null),Il=null,Ll=g(0),Nl=0,Dl=null,Ul=null,Ol=null,Fl=!1,zl=!1,Bl=!1,Hl=0,Vl=0,jl=null,Wl=0,Gl=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Xl={readContext:In,use:Xe,useCallback:Ne,useContext:Ne,useEffect:Ne,useImperativeHandle:Ne,useLayoutEffect:Ne,useInsertionEffect:Ne,useMemo:Ne,useReducer:Ne,useRef:Ne,useState:Ne,useDebugValue:Ne,useDeferredValue:Ne,useTransition:Ne,useSyncExternalStore:Ne,useId:Ne};Xl.useCacheRefresh=Ne,Xl.useMemoCache=Ne,Xl.useHostTransitionStatus=Ne,Xl.useFormState=Ne,Xl.useActionState=Ne,Xl.useOptimistic=Ne;var ql={readContext:In,use:Xe,useCallback:function(e,t){return je().memoizedState=[e,void 0===t?null:t],e},useContext:In,useEffect:_t,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,xt(4194308,4,Tt.bind(null,t,e),n)},useLayoutEffect:function(e,t){return xt(4194308,4,e,t)},useInsertionEffect:function(e,t){xt(4,2,e,t)},useMemo:function(e,t){var n=je();t=void 0===t?null:t;var r=e();if(Bl){P(!0);try{e()}finally{P(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=je();if(void 0!==n){var i=n(t);if(Bl){P(!0);try{n(t)}finally{P(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=zt.bind(null,Dl,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},je().memoizedState=e},useState:function(e){var t=(e=it(e)).queue,n=Bt.bind(null,Dl,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ct,useDeferredValue:function(e,t){return kt(je(),e,t)},useTransition:function(){var e=it(!1);return e=Lt.bind(null,Dl,e.queue,!0,!1),je().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Dl,a=je();if(tl){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Rc)throw Error(i(349));60&kc||Qe(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,_t(tt.bind(null,r,o,e),[e]),r.flags|=2048,yt(9,et.bind(null,r,o,n,t),{destroy:void 0},null),n},useId:function(){var e=je(),t=Rc.identifierPrefix;if(tl){var n=Ys;t=":"+t+"R"+(n=(qs&~(1<<32-xs(qs)-1)).toString(32)+n),0<(n=Hl++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Wl++).toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return je().memoizedState=Ft.bind(null,Dl)}};ql.useMemoCache=qe,ql.useHostTransitionStatus=Dt,ql.useFormState=pt,ql.useActionState=pt,ql.useOptimistic=function(e){var t=je();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Vt.bind(null,Dl,!0,n),n.dispatch=t,[e,t]};var Yl={readContext:In,use:Xe,useCallback:Rt,useContext:In,useEffect:Et,useImperativeHandle:At,useInsertionEffect:St,useLayoutEffect:Mt,useMemo:Pt,useReducer:$e,useRef:bt,useState:function(){return $e(Ye)},useDebugValue:Ct,useDeferredValue:function(e,t){return It(We(),Ul.memoizedState,e,t)},useTransition:function(){var e=$e(Ye)[0],t=We().memoizedState;return["boolean"==typeof e?e:Ge(e),t]},useSyncExternalStore:Je,useId:Ut};Yl.useCacheRefresh=Ot,Yl.useMemoCache=qe,Yl.useHostTransitionStatus=Dt,Yl.useFormState=ft,Yl.useActionState=ft,Yl.useOptimistic=function(e,t){return at(We(),0,e,t)};var $l={readContext:In,use:Xe,useCallback:Rt,useContext:In,useEffect:Et,useImperativeHandle:At,useInsertionEffect:St,useLayoutEffect:Mt,useMemo:Pt,useReducer:Ze,useRef:bt,useState:function(){return Ze(Ye)},useDebugValue:Ct,useDeferredValue:function(e,t){var n=We();return null===Ul?kt(n,e,t):It(n,Ul.memoizedState,e,t)},useTransition:function(){var e=Ze(Ye)[0],t=We().memoizedState;return["boolean"==typeof e?e:Ge(e),t]},useSyncExternalStore:Je,useId:Ut};$l.useCacheRefresh=Ot,$l.useMemoCache=qe,$l.useHostTransitionStatus=Dt,$l.useFormState=vt,$l.useActionState=vt,$l.useOptimistic=function(e,t){var n=We();return null!==Ul?at(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])};var Kl={isMounted:function(e){return!!(e=e._reactInternals)&&d(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Wr(),i=le(r);i.payload=t,null!=n&&(i.callback=n),null!==(t=ce(e,i,r))&&(Xr(t,0,r),ue(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Wr(),i=le(r);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=ce(e,i,r))&&(Xr(t,0,r),ue(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Wr(),r=le(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=ce(e,r,n))&&(Xr(t,0,n),ue(t,e,n))}},Zl="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Jl=Error(i(461)),Ql=!1,ec={dehydrated:null,treeContext:null,retryLane:0},tc=g(null),nc=null,rc=null,ic="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},ac=Vi.unstable_scheduleCallback,oc=Vi.unstable_NormalPriority,sc={$$typeof:Ji,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},lc=ua.S;ua.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===fl){var n=fl=[];ml=0,gl=ie(),vl={status:"pending",value:void 0,then:function(e){n.push(e)}}}ml++,t.then(ae,ae)}(0,t),null!==lc&&lc(e,t)};var cc=g(null),uc=!1,dc=!1,hc=!1,pc="function"==typeof WeakSet?WeakSet:Set,fc=null,mc=!1,gc=null,vc=!1,yc=null,bc=8192,xc={getCacheForType:function(e){var t=In(sc),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},wc=0,_c=1,Ec=2,Sc=3,Mc=4;if("function"==typeof Symbol&&Symbol.for){var Tc=Symbol.for;wc=Tc("selector.component"),_c=Tc("selector.has_pseudo_class"),Ec=Tc("selector.role"),Sc=Tc("selector.test_id"),Mc=Tc("selector.text")}var Ac="function"==typeof WeakMap?WeakMap:Map,Cc=0,Rc=null,Pc=null,kc=0,Ic=0,Lc=null,Nc=!1,Dc=!1,Uc=!1,Oc=0,Fc=0,zc=0,Bc=0,Hc=0,Vc=0,jc=0,Wc=null,Gc=null,Xc=!1,qc=0,Yc=1/0,$c=null,Kc=null,Zc=!1,Jc=null,Qc=0,eu=0,tu=null,nu=0,ru=null;return Bi.attemptContinuousHydration=function(e){if(13===e.tag){var t=$(e,67108864);null!==t&&Xr(t,0,67108864),zi(e,67108864)}},Bi.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=Wr(),n=$(e,t);null!==n&&Xr(n,0,t),zi(e,t)}},Bi.attemptSynchronousHydration=function(e){switch(e.tag){case 3:if((e=e.stateNode).current.memoizedState.isDehydrated){var t=b(e.pendingLanes);if(0!==t){for(e.pendingLanes|=2,e.entangledLanes|=2;t;){var n=1<<31-xs(t);e.entanglements[1]|=n,t&=~n}J(e),!(6&Cc)&&(Yc=Rs()+500,Q(0,!1))}}break;case 13:null!==(t=$(e,2))&&Xr(t,0,2),Jr(),zi(e,2)}},Bi.batchedUpdates=function(e,t){return e(t)},Bi.createComponentSelector=function(e){return{$$typeof:wc,value:e}},Bi.createContainer=function(e,t,n,r,i,a,o,s,l,c){return Ni(e,t,!1,null,0,r,a,o,s,l,0,null)},Bi.createHasPseudoClassSelector=function(e){return{$$typeof:_c,value:e}},Bi.createHydrationContainer=function(e,t,n,r,i,a,o,s,l,c,u,d,h){return(e=Ni(n,r,!0,e,0,a,s,l,c,u,0,h)).context=Di(null),n=e.current,(i=le(r=Wr())).callback=null!=t?t:null,ce(n,i,r),e.current.lanes=r,T(e,r),J(e),e},Bi.createPortal=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Xi,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},Bi.createRoleSelector=function(e){return{$$typeof:Ec,value:e}},Bi.createTestNameSelector=function(e){return{$$typeof:Sc,value:e}},Bi.createTextSelector=function(e){return{$$typeof:Mc,value:e}},Bi.defaultOnCaughtError=function(e){console.error(e)},Bi.defaultOnRecoverableError=function(e){Zl(e)},Bi.defaultOnUncaughtError=function(e){Zl(e)},Bi.deferredUpdates=function(e){var t=ua.T,n=Ua();try{return Da(32),ua.T=null,e()}finally{Da(n),ua.T=t}},Bi.discreteUpdates=function(e,t,n,r,i){var a=ua.T,o=Ua();try{return Da(2),ua.T=null,e(t,n,r,i)}finally{Da(o),ua.T=a,0===Cc&&(Yc=Rs()+500)}},Bi.findAllNodes=jr,Bi.findBoundingRects=function(e,t){if(!Ka)throw Error(i(363));t=jr(e,t),e=[];for(var n=0;n<t.length;n++)e.push(Ja(t[n]));for(t=e.length-1;0<t;t--)for(var r=(n=e[t]).x,a=r+n.width,o=n.y,s=o+n.height,l=t-1;0<=l;l--)if(t!==l){var c=e[l],u=c.x,d=u+c.width,h=c.y,p=h+c.height;if(r>=u&&o>=h&&a<=d&&s<=p){e.splice(t,1);break}if(!(r!==u||n.width!==c.width||p<o||h>s)){h>o&&(c.height+=h-o,c.y=o),p<s&&(c.height=s-h),e.splice(t,1);break}if(!(o!==h||n.height!==c.height||d<r||u>a)){u>r&&(c.width+=u-r,c.x=r),d<a&&(c.width=a-u),e.splice(t,1);break}}return e},Bi.findHostInstance=Ui,Bi.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=p(e))?m(e):null)?null:ga(e.stateNode)},Bi.findHostInstanceWithWarning=function(e){return Ui(e)},Bi.flushPassiveEffects=gi,Bi.flushSyncFromReconciler=function(e){var t=Cc;Cc|=1;var n=ua.T,r=Ua();try{if(Da(2),ua.T=null,e)return e()}finally{Da(r),ua.T=n,!(6&(Cc=t))&&Q(0,!1)}},Bi.flushSyncWork=Jr,Bi.focusWithin=function(e,t){if(!Ka)throw Error(i(363));for(t=Vr(e=zr(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++],r=n.tag;if(!eo(n)){if((5===r||26===r||27===r)&&no(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},Bi.getFindAllNodesFailureDescription=function(e,t){if(!Ka)throw Error(i(363));var n=0,r=[];e=[zr(e),0];for(var a=0;a<e.length;){var o=e[a++],s=o.tag,l=e[a++],c=t[l];if((5!==s&&26!==s&&27!==s||!eo(o))&&(Br(o,c)&&(r.push(Hr(c)),++l>n&&(n=l)),l<t.length))for(o=o.child;null!==o;)e.push(o,l),o=o.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(Hr(t[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},Bi.getPublicRootInstance=function(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 27:case 5:return ga(e.child.stateNode);default:return e.child.stateNode}},Bi.injectIntoDevTools=function(){var e={bundleType:0,version:pa,rendererPackageName:fa,currentDispatcherRef:ua,findFiberByHostInstance:La,reconcilerVersion:"19.0.0"};if(null!==ma&&(e.rendererConfig=ma),"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Us=t.inject(e),Os=t}catch(e){}e=!!t.checkDCE}}return e},Bi.isAlreadyRendering=function(){return!1},Bi.observeVisibleRects=function(e,t,n,r){if(!Ka)throw Error(i(363));e=jr(e,t);var a=ro(e,n,r).disconnect;return{disconnect:function(){a()}}},Bi.shouldError=function(){return null},Bi.shouldSuspend=function(){return!1},Bi.startHostTransition=function(e,t,n,a){if(5!==e.tag)throw Error(i(476));var o=Nt(e).queue;Lt(e,o,t,Ga,null===n?r:function(){var t=Nt(e).next.queue;return Ht(e,t,{},Wr()),n(a)})},Bi.updateContainer=function(e,t,n,r){var i=t.current,a=Wr();return Oi(i,a,e,t,n,r),a},Bi.updateContainerSync=function(e,t,n,r){return 0===t.tag&&gi(),Oi(t.current,2,e,t,n,r),2},Bi},e.exports.default=e.exports,Object.defineProperty(e.exports,"__esModule",{value:!0})},772:(e,t,n)=>{e.exports=n(677)},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},845:(e,t,n)=>{e.exports=n(725)},848:(e,t,n)=>{e.exports=n(698)},869:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),f=Symbol.iterator,m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||m}function b(){}function x(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var w=x.prototype=new b;w.constructor=x,g(w,y.prototype),w.isPureReactComponent=!0;var _=Array.isArray;function E(){}var S={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function T(e,t,r){var i=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==i?i:null,props:r}}function A(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function R(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36);var n,r}function P(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(s){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return P((u=e._init)(e._payload),t,i,a,o)}}if(u)return o=o(e),u=""===a?"."+R(e,0):a,_(o)?(i="",null!=u&&(i=u.replace(C,"$&/")+"/"),P(o,t,i,"",function(e){return e})):null!=o&&(A(o)&&(l=o,c=i+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+u,o=T(l.type,c,l.props)),t.push(o)),1;u=0;var d,p=""===a?".":a+":";if(_(e))for(var m=0;m<e.length;m++)u+=P(a=e[m],t,i,s=p+R(a,m),o);else if("function"==typeof(m=null===(d=e)||"object"!=typeof d?null:"function"==typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(a=e.next()).done;)u+=P(a=a.value,t,i,s=p+R(a,m++),o);else if("object"===s){if("function"==typeof e.then)return P(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(E,E):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,a,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function k(e,t,n){if(null==e)return e;var r=[],i=0;return P(e,r,"","",function(e){return t.call(n,e,i++)}),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},N={map:k,forEach:function(e,t,n){k(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return k(e,function(){t++}),t},toArray:function(e){return k(e,function(e){return e})||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=p,t.Children=N,t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=x,t.StrictMode=a,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),i=e.key;if(null!=t)for(a in void 0!==t.key&&(i=""+t.key),t)!M.call(t,a)||"key"===a||"__self"===a||"__source"===a||"ref"===a&&void 0===t.ref||(r[a]=t[a]);var a=arguments.length-2;if(1===a)r.children=n;else if(1<a){for(var o=Array(a),s=0;s<a;s++)o[s]=arguments[s+2];r.children=o}return T(e.type,i,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},t.createElement=function(e,t,n){var r,i={},a=null;if(null!=t)for(r in void 0!==t.key&&(a=""+t.key),t)M.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var s=Array(o),l=0;l<o;l++)s[l]=arguments[l+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===i[r]&&(i[r]=o[r]);return T(e,a,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),i=S.S;null!==i&&i(n,r),"object"==typeof r&&null!==r&&"function"==typeof r.then&&r.then(E,L)}catch(e){L(e)}finally{null!==t&&null!==n.types&&(t.types=n.types),S.T=t}},t.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},t.use=function(e){return S.H.use(e)},t.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},t.useCallback=function(e,t){return S.H.useCallback(e,t)},t.useContext=function(e){return S.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return S.H.useEffect(e,t)},t.useEffectEvent=function(e){return S.H.useEffectEvent(e)},t.useId=function(){return S.H.useId()},t.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return S.H.useMemo(e,t)},t.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},t.useRef=function(e){return S.H.useRef(e)},t.useState=function(e){return S.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return S.H.useTransition()},t.version="19.2.0"},888:(e,t,n)=>{e.exports=n(493)},910:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(601),i=n.n(r),a=n(314),o=n.n(a)()(i());o.push([e.id,"/* Home.css */\n\n/* Ensure body and root elements take full width and height */\nbody, html, #root {\n  margin: 0;\n  padding: 0;\n  width: 100vw;\n  height: 100vh;\n  overflow: hidden;\n}\n\n.scene-container {\n  width: 100vw;\n  height: 100vh;\n  overflow: hidden;\n  position: relative;\n}\n\n.black-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: black;\n  z-index: 1000;\n  pointer-events: none; /* Ensure overlay doesnâ€™t block interaction */\n  opacity: 1;\n  transition: opacity 1s ease-in-out; /* 1-second fade-out */\n}\n\n.black-overlay.fade-in {\n  opacity: 1;\n}\n\n.black-overlay.fade-out {\n  opacity: 0;\n}\n\n.loading-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.8);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  z-index: 9999;\n}\n\n.spinner {\n  position: relative;\n  border: 5px solid rgba(0, 0, 0, 0.0);\n  border-top: 5px solid #fff;\n  border-radius: 50%;\n  width: 60px;\n  height: 60px;\n  animation: spin 1s linear infinite;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.spinner-image {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -120%);\n  width: 60px; /* Adjust size as needed */\n  height: 60px; /* Adjust size as needed */\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n#title {\n  position: absolute;\n  top: 5%;\n  left: 50%;\n  transform: translateX(-50%);\n  color: white;\n  font-size: 40px;\n  pointer-events: none;\n  z-index: 1;\n  user-select: none;\n  display: flex;\n  text-align: center;\n  flex-direction: column;\n  align-items: center;\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  height: 10%;\n}\n\n#title p {\n  margin: 0;\n  padding: 0;\n}\n\n#title-mobile {\n  display: none;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n#instruction-text {\n  position: absolute;\n  bottom: 0%;\n  right: 5%;\n  color: white;\n  font-size: 15px;\n  pointer-events: none;\n  z-index: 2;\n  user-select: none;\n  display: block;\n  justify-content: flex-end;\n  text-align: right;\n  width: auto;\n  height: auto;\n  opacity: 0;\n  transition: opacity 1s ease-in-out;\n}\n\n#instruction-text.fade-in {\n  animation: fadeIn 1s forwards; /* Apply fade-in animation */\n}\n\n#instruction-text-mobile {\n  display: none;\n}\n\n.accessible-link {\n  font-size: 20px;\n  margin-top: 5px;\n}\n\n.span-link {\n  pointer-events: auto; /* Ensure the link is clickable */\n  cursor: pointer;\n  text-align: left;\n  text-decoration: underline;\n  color: #db13bd\n}\n\n@media (pointer:none), (pointer:coarse) {\n  #title {\n    display: none;\n  }\n\n  #title-mobile {\n    position: absolute;\n    top: 0%;\n    left: 50%;\n    transform: translateX(-50%);\n    color: white;\n    font-size: 25px;\n    pointer-events: none;\n    z-index: 1;\n    user-select: none;\n    -webkit-touch-callout: none;\n    -webkit-user-select: none;\n    -khtml-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    -webkit-tap-highlight-color:rgba(0,0,0,0);\n    display: flex;\n    text-align: center;\n    justify-content: center;\n    width: 100%;\n    height: 10%;\n  }\n\n  #instruction-text {\n    display: none;\n  }\n\n  #instruction-text-mobile {\n    position: absolute; /* Keep it absolute */\n    top: 100px; /* Adjust this value based on the height of the title */\n    left: 5%; /* Align left or center as per the layout */\n    right: 5%; /* Provide some margin on the right */\n    color: white;\n    font-size: 15px;\n    pointer-events: none;\n    z-index: 2;\n    user-select: none;\n    -webkit-touch-callout: none;\n    -webkit-user-select: none;\n    -khtml-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    -webkit-tap-highlight-color:rgba(0,0,0,0);\n    display: block;\n    justify-content: flex-start; /* Align to start */\n    text-align: left; /* Left align the text */\n    max-width: 90%; /* Limit width for better responsiveness */\n    word-wrap: break-word; /* Break long words */\n  }\n}",""]);const s=o},961:(e,t,n)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(221)},982:(e,t,n)=>{e.exports=n(477)}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={id:e,exports:{}};return n[e](a,a.exports,i),a.exports}i.m=n,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var a=Object.create(null);i.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&n;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>o[e]=()=>n[e]);return o.default=()=>n,i.d(a,o),a},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="/",i.b="undefined"!=typeof document&&document.baseURI||self.location.href,i.nc=void 0;var a={};i.r(a),i.d(a,{ACESFilmicToneMapping:()=>Wt,AddEquation:()=>ct,AddOperation:()=>zt,AdditiveAnimationBlendMode:()=>Cr,AdditiveBlending:()=>at,AgXToneMapping:()=>Xt,AlphaFormat:()=>Rn,AlwaysCompare:()=>hi,AlwaysDepth:()=>Pt,AlwaysStencilFunc:()=>ii,AmbientLight:()=>Uh,AnimationAction:()=>Ap,AnimationClip:()=>ih,AnimationLoader:()=>ph,AnimationMixer:()=>Rp,AnimationObjectGroup:()=>Tp,AnimationUtils:()=>Gd,ArcCurve:()=>gu,ArrayCamera:()=>rp,ArrowHelper:()=>kf,AttachedBindMode:()=>Yt,Audio:()=>dp,AudioAnalyser:()=>vp,AudioContext:()=>Zh,AudioListener:()=>up,AudioLoader:()=>Jh,AxesHelper:()=>If,BackSide:()=>tt,BasicDepthPacking:()=>Ir,BasicShadowMap:()=>Ke,BatchedMesh:()=>Tc,Bone:()=>Ol,BooleanKeyframeTrack:()=>Zd,Box2:()=>Xp,Box3:()=>Ca,Box3Helper:()=>Tf,BoxGeometry:()=>Fs,BoxHelper:()=>Mf,BufferAttribute:()=>ss,BufferGeometry:()=>Ss,BufferGeometryLoader:()=>jh,ByteType:()=>vn,Cache:()=>oh,Camera:()=>Ws,CameraHelper:()=>_f,CanvasTexture:()=>eu,CapsuleGeometry:()=>ru,CatmullRomCurve3:()=>_u,CineonToneMapping:()=>jt,CircleGeometry:()=>iu,ClampToEdgeWrapping:()=>rn,Clock:()=>ip,Color:()=>Yo,ColorKeyframeTrack:()=>Jd,ColorManagement:()=>ua,CompressedArrayTexture:()=>Jc,CompressedCubeTexture:()=>Qc,CompressedTexture:()=>Zc,CompressedTextureLoader:()=>fh,ConeGeometry:()=>ou,ConstantAlphaFactor:()=>At,ConstantColorFactor:()=>Mt,Controls:()=>Nf,CubeCamera:()=>Ks,CubeReflectionMapping:()=>Zt,CubeRefractionMapping:()=>Jt,CubeTexture:()=>Zs,CubeTextureLoader:()=>vh,CubeUVReflectionMapping:()=>tn,CubicBezierCurve:()=>Tu,CubicBezierCurve3:()=>Au,CubicInterpolant:()=>qd,CullFaceBack:()=>qe,CullFaceFront:()=>Ye,CullFaceFrontBack:()=>$e,CullFaceNone:()=>Xe,Curve:()=>fu,CurvePath:()=>Nu,CustomBlending:()=>lt,CustomToneMapping:()=>Gt,CylinderGeometry:()=>au,Cylindrical:()=>jp,Data3DTexture:()=>Ta,DataArrayTexture:()=>Sa,DataTexture:()=>Fl,DataTextureLoader:()=>yh,DataUtils:()=>rs,DecrementStencilOp:()=>qr,DecrementWrapStencilOp:()=>$r,DefaultLoadingManager:()=>lh,DepthFormat:()=>In,DepthStencilFormat:()=>Ln,DepthTexture:()=>tu,DetachedBindMode:()=>$t,DirectionalLight:()=>Dh,DirectionalLightHelper:()=>bf,DiscreteInterpolant:()=>$d,DodecahedronGeometry:()=>lu,DoubleSide:()=>nt,DstAlphaFactor:()=>xt,DstColorFactor:()=>_t,DynamicCopyUsage:()=>xi,DynamicDrawUsage:()=>fi,DynamicReadUsage:()=>vi,EdgesGeometry:()=>pu,EllipseCurve:()=>mu,EqualCompare:()=>si,EqualDepth:()=>Lt,EqualStencilFunc:()=>Qr,EquirectangularReflectionMapping:()=>Qt,EquirectangularRefractionMapping:()=>en,Euler:()=>ho,EventDispatcher:()=>Vi,ExternalTexture:()=>nu,ExtrudeGeometry:()=>hd,FileLoader:()=>hh,Float16BufferAttribute:()=>ms,Float32BufferAttribute:()=>gs,FloatType:()=>_n,Fog:()=>rl,FogExp2:()=>nl,FramebufferTexture:()=>Kc,FrontSide:()=>et,Frustum:()=>ic,FrustumArray:()=>sc,GLBufferAttribute:()=>Dp,GLSL1:()=>_i,GLSL3:()=>Ei,GreaterCompare:()=>ci,GreaterDepth:()=>Dt,GreaterEqualCompare:()=>di,GreaterEqualDepth:()=>Nt,GreaterEqualStencilFunc:()=>ri,GreaterStencilFunc:()=>ti,GridHelper:()=>ff,Group:()=>Qs,HalfFloatType:()=>En,HemisphereLight:()=>wh,HemisphereLightHelper:()=>pf,IcosahedronGeometry:()=>fd,ImageBitmapLoader:()=>$h,ImageLoader:()=>gh,ImageUtils:()=>fa,IncrementStencilOp:()=>Xr,IncrementWrapStencilOp:()=>Yr,InstancedBufferAttribute:()=>Vl,InstancedBufferGeometry:()=>Vh,InstancedInterleavedBuffer:()=>Np,InstancedMesh:()=>Kl,Int16BufferAttribute:()=>ds,Int32BufferAttribute:()=>ps,Int8BufferAttribute:()=>ls,IntType:()=>xn,InterleavedBuffer:()=>al,InterleavedBufferAttribute:()=>sl,Interpolant:()=>Xd,InterpolateDiscrete:()=>wr,InterpolateLinear:()=>_r,InterpolateSmooth:()=>Er,InterpolationSamplingMode:()=>Ci,InterpolationSamplingType:()=>Ai,InvertStencilOp:()=>Kr,KeepStencilOp:()=>Wr,KeyframeTrack:()=>Kd,LOD:()=>Tl,LatheGeometry:()=>md,Layers:()=>po,LessCompare:()=>oi,LessDepth:()=>kt,LessEqualCompare:()=>li,LessEqualDepth:()=>It,LessEqualStencilFunc:()=>ei,LessStencilFunc:()=>Jr,Light:()=>xh,LightProbe:()=>zh,Line:()=>Dc,Line3:()=>ef,LineBasicMaterial:()=>Ac,LineCurve:()=>Cu,LineCurve3:()=>Ru,LineDashedMaterial:()=>zd,LineLoop:()=>Bc,LineSegments:()=>zc,LinearFilter:()=>dn,LinearInterpolant:()=>Yd,LinearMipMapLinearFilter:()=>mn,LinearMipMapNearestFilter:()=>pn,LinearMipmapLinearFilter:()=>fn,LinearMipmapNearestFilter:()=>hn,LinearSRGBColorSpace:()=>Br,LinearToneMapping:()=>Ht,LinearTransfer:()=>Hr,Loader:()=>ch,LoaderUtils:()=>Hh,LoadingManager:()=>sh,LoopOnce:()=>yr,LoopPingPong:()=>xr,LoopRepeat:()=>br,MOUSE:()=>We,Material:()=>Zo,MaterialLoader:()=>Bh,MathUtils:()=>Qi,Matrix2:()=>Wp,Matrix3:()=>aa,Matrix4:()=>to,MaxEquation:()=>pt,Mesh:()=>Us,MeshBasicMaterial:()=>Jo,MeshDepthMaterial:()=>Ud,MeshDistanceMaterial:()=>Od,MeshLambertMaterial:()=>Dd,MeshMatcapMaterial:()=>Fd,MeshNormalMaterial:()=>Nd,MeshPhongMaterial:()=>Id,MeshPhysicalMaterial:()=>kd,MeshStandardMaterial:()=>Pd,MeshToonMaterial:()=>Ld,MinEquation:()=>ht,MirroredRepeatWrapping:()=>an,MixOperation:()=>Ft,MultiplyBlending:()=>st,MultiplyOperation:()=>Ot,NearestFilter:()=>on,NearestMipMapLinearFilter:()=>un,NearestMipMapNearestFilter:()=>ln,NearestMipmapLinearFilter:()=>cn,NearestMipmapNearestFilter:()=>sn,NeutralToneMapping:()=>qt,NeverCompare:()=>ai,NeverDepth:()=>Rt,NeverStencilFunc:()=>Zr,NoBlending:()=>rt,NoColorSpace:()=>Fr,NoToneMapping:()=>Bt,NormalAnimationBlendMode:()=>Ar,NormalBlending:()=>it,NotEqualCompare:()=>ui,NotEqualDepth:()=>Ut,NotEqualStencilFunc:()=>ni,NumberKeyframeTrack:()=>Qd,Object3D:()=>Ro,ObjectLoader:()=>Wh,ObjectSpaceNormalMap:()=>Or,OctahedronGeometry:()=>gd,OneFactor:()=>mt,OneMinusConstantAlphaFactor:()=>Ct,OneMinusConstantColorFactor:()=>Tt,OneMinusDstAlphaFactor:()=>wt,OneMinusDstColorFactor:()=>Et,OneMinusSrcAlphaFactor:()=>bt,OneMinusSrcColorFactor:()=>vt,OrthographicCamera:()=>Lh,PCFShadowMap:()=>Ze,PCFSoftShadowMap:()=>Je,PMREMGenerator:()=>am,Path:()=>Du,PerspectiveCamera:()=>Ys,Plane:()=>ec,PlaneGeometry:()=>vd,PlaneHelper:()=>Af,PointLight:()=>Ih,PointLightHelper:()=>cf,Points:()=>Xc,PointsMaterial:()=>Hc,PolarGridHelper:()=>mf,PolyhedronGeometry:()=>su,PositionalAudio:()=>gp,PropertyBinding:()=>Mp,PropertyMixer:()=>yp,QuadraticBezierCurve:()=>Pu,QuadraticBezierCurve3:()=>ku,Quaternion:()=>ta,QuaternionKeyframeTrack:()=>th,QuaternionLinearInterpolant:()=>eh,RED_GREEN_RGTC2_Format:()=>gr,RED_RGTC1_Format:()=>fr,REVISION:()=>je,RGBADepthPacking:()=>Lr,RGBAFormat:()=>kn,RGBAIntegerFormat:()=>zn,RGBA_ASTC_10x10_Format:()=>lr,RGBA_ASTC_10x5_Format:()=>ar,RGBA_ASTC_10x6_Format:()=>or,RGBA_ASTC_10x8_Format:()=>sr,RGBA_ASTC_12x10_Format:()=>cr,RGBA_ASTC_12x12_Format:()=>ur,RGBA_ASTC_4x4_Format:()=>Zn,RGBA_ASTC_5x4_Format:()=>Jn,RGBA_ASTC_5x5_Format:()=>Qn,RGBA_ASTC_6x5_Format:()=>er,RGBA_ASTC_6x6_Format:()=>tr,RGBA_ASTC_8x5_Format:()=>nr,RGBA_ASTC_8x6_Format:()=>rr,RGBA_ASTC_8x8_Format:()=>ir,RGBA_BPTC_Format:()=>dr,RGBA_ETC2_EAC_Format:()=>Kn,RGBA_PVRTC_2BPPV1_Format:()=>qn,RGBA_PVRTC_4BPPV1_Format:()=>Xn,RGBA_S3TC_DXT1_Format:()=>Hn,RGBA_S3TC_DXT3_Format:()=>Vn,RGBA_S3TC_DXT5_Format:()=>jn,RGBDepthPacking:()=>Nr,RGBFormat:()=>Pn,RGBIntegerFormat:()=>Fn,RGB_BPTC_SIGNED_Format:()=>hr,RGB_BPTC_UNSIGNED_Format:()=>pr,RGB_ETC1_Format:()=>Yn,RGB_ETC2_Format:()=>$n,RGB_PVRTC_2BPPV1_Format:()=>Gn,RGB_PVRTC_4BPPV1_Format:()=>Wn,RGB_S3TC_DXT1_Format:()=>Bn,RGDepthPacking:()=>Dr,RGFormat:()=>Un,RGIntegerFormat:()=>On,RawShaderMaterial:()=>Rd,Ray:()=>eo,Raycaster:()=>Op,RectAreaLight:()=>Oh,RedFormat:()=>Nn,RedIntegerFormat:()=>Dn,ReinhardToneMapping:()=>Vt,RenderTarget:()=>_a,RenderTarget3D:()=>Pp,RepeatWrapping:()=>nn,ReplaceStencilOp:()=>Gr,ReverseSubtractEquation:()=>dt,RingGeometry:()=>yd,SIGNED_RED_GREEN_RGTC2_Format:()=>vr,SIGNED_RED_RGTC1_Format:()=>mr,SRGBColorSpace:()=>zr,SRGBTransfer:()=>Vr,Scene:()=>il,ShaderChunk:()=>zf,ShaderLib:()=>Hf,ShaderMaterial:()=>js,ShadowMaterial:()=>Cd,Shape:()=>Uu,ShapeGeometry:()=>bd,ShapePath:()=>Lf,ShapeUtils:()=>cd,ShortType:()=>yn,Skeleton:()=>Hl,SkeletonHelper:()=>sf,SkinnedMesh:()=>Ul,Source:()=>ga,Sphere:()=>Xa,SphereGeometry:()=>xd,Spherical:()=>Vp,SphericalHarmonics3:()=>Fh,SplineCurve:()=>Iu,SpotLight:()=>Ah,SpotLightHelper:()=>nf,Sprite:()=>_l,SpriteMaterial:()=>ll,SrcAlphaFactor:()=>yt,SrcAlphaSaturateFactor:()=>St,SrcColorFactor:()=>gt,StaticCopyUsage:()=>bi,StaticDrawUsage:()=>pi,StaticReadUsage:()=>gi,StereoCamera:()=>np,StreamCopyUsage:()=>wi,StreamDrawUsage:()=>mi,StreamReadUsage:()=>yi,StringKeyframeTrack:()=>nh,SubtractEquation:()=>ut,SubtractiveBlending:()=>ot,TOUCH:()=>Ge,TangentSpaceNormalMap:()=>Ur,TetrahedronGeometry:()=>wd,Texture:()=>xa,TextureLoader:()=>bh,TextureUtils:()=>Uf,Timer:()=>Bp,TimestampQuery:()=>Ti,TorusGeometry:()=>_d,TorusKnotGeometry:()=>Ed,Triangle:()=>jo,TriangleFanDrawMode:()=>kr,TriangleStripDrawMode:()=>Pr,TrianglesDrawMode:()=>Rr,TubeGeometry:()=>Sd,UVMapping:()=>Kt,Uint16BufferAttribute:()=>hs,Uint32BufferAttribute:()=>fs,Uint8BufferAttribute:()=>cs,Uint8ClampedBufferAttribute:()=>us,Uniform:()=>kp,UniformsGroup:()=>Lp,UniformsLib:()=>Bf,UniformsUtils:()=>Vs,UnsignedByteType:()=>gn,UnsignedInt101111Type:()=>Cn,UnsignedInt248Type:()=>Tn,UnsignedInt5999Type:()=>An,UnsignedIntType:()=>wn,UnsignedShort4444Type:()=>Sn,UnsignedShort5551Type:()=>Mn,UnsignedShortType:()=>bn,VSMShadowMap:()=>Qe,Vector2:()=>ea,Vector3:()=>na,Vector4:()=>wa,VectorKeyframeTrack:()=>rh,VideoFrameTexture:()=>$c,VideoTexture:()=>Yc,WebGL3DRenderTarget:()=>Aa,WebGLArrayRenderTarget:()=>Ma,WebGLCoordinateSystem:()=>Si,WebGLCubeRenderTarget:()=>Js,WebGLRenderTarget:()=>Ea,WebGLRenderer:()=>mv,WebGLUtils:()=>ov,WebGPUCoordinateSystem:()=>Mi,WebXRController:()=>tl,WireframeGeometry:()=>Md,WrapAroundEnding:()=>Tr,ZeroCurvatureEnding:()=>Sr,ZeroFactor:()=>ft,ZeroSlopeEnding:()=>Mr,ZeroStencilOp:()=>jr,createCanvasElement:()=>Li,error:()=>Bi,getConsoleFunction:()=>Oi,log:()=>Fi,setConsoleFunction:()=>Ui,warn:()=>zi,warnOnce:()=>Hi});var o=i(540),s=i.t(o,2),l=i(338),c="popstate";function u(e={}){return function(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,s="POP",l=null,u=h();function h(){return(o.state||{idx:null}).idx}function g(){s="POP";let e=h(),t=null==e?null:e-u;u=e,l&&l({action:s,location:y.location,delta:t})}function v(e){return function(e,t=!1){let n="http://localhost";"undefined"!=typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),d(n,"No window.location.(origin|href) available to create URL");let r="string"==typeof e?e:m(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}(e)}null==u&&(u=0,o.replaceState({...o.state,idx:u},""));let y={get action(){return s},get location(){return e(i,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(c,g),l=e,()=>{i.removeEventListener(c,g),l=null}},createHref:e=>t(i,e),createURL:v,encodeLocation(e){let t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){s="PUSH";let r=f(y.location,e,t);n&&n(r,e),u=h()+1;let c=p(r,u),d=y.createHref(r);try{o.pushState(c,"",d)}catch(e){if(e instanceof DOMException&&"DataCloneError"===e.name)throw e;i.location.assign(d)}a&&l&&l({action:s,location:y.location,delta:1})},replace:function(e,t){s="REPLACE";let r=f(y.location,e,t);n&&n(r,e),u=h();let i=p(r,u),c=y.createHref(r);o.replaceState(i,"",c),a&&l&&l({action:s,location:y.location,delta:0})},go:e=>o.go(e)};return y}(function(e,t){let{pathname:n="/",search:r="",hash:i=""}=g(e.location.hash.substring(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),f("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"==typeof t?t:m(t))},function(e,t){h("/"===e.pathname.charAt(0),`relative pathnames are not supported in hash history.push(${JSON.stringify(t)})`)},e)}function d(e,t){if(!1===e||null==e)throw new Error(t)}function h(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(e){}}}function p(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n=null,r){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?g(t):t,state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)}}function m({pathname:e="/",search:t="",hash:n=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),n&&"#"!==n&&(e+="#"===n.charAt(0)?n:"#"+n),e}function g(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function v(e,t,n="/"){return function(e,t,n,r){let i=k(("string"==typeof t?g(t):t).pathname||"/",n);if(null==i)return null;let a=y(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let o=null;for(let e=0;null==o&&e<a.length;++e){let t=P(i);o=C(a[e],t,r)}return o}(e,t,n,!1)}function y(e,t=[],n=[],r="",i=!1){let a=(e,a,o=i,s)=>{let l={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&o)return;d(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length)}let c=O([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(d(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),y(e.children,t,u,c,o)),(null!=e.path||e.index)&&t.push({path:c,score:A(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let n of b(e.path))a(e,t,!0,n);else a(e,t)}),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return i?[a,""]:[a];let o=b(r.join("/")),s=[];return s.push(...o.map(e=>""===e?a:[a,e].join("/"))),i&&s.push(...o),s.map(t=>e.startsWith("/")&&""===t?"/":t)}new WeakMap;var x=/^:[\w-]+$/,w=3,_=2,E=1,S=10,M=-2,T=e=>"*"===e;function A(e,t){let n=e.split("/"),r=n.length;return n.some(T)&&(r+=M),t&&(r+=_),n.filter(e=>!T(e)).reduce((e,t)=>e+(x.test(t)?w:""===t?E:S),r)}function C(e,t,n=!1){let{routesMeta:r}=e,i={},a="/",o=[];for(let e=0;e<r.length;++e){let s=r[e],l=e===r.length-1,c="/"===a?t:t.slice(a.length)||"/",u=R({path:s.relativePath,caseSensitive:s.caseSensitive,end:l},c),d=s.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=R({path:s.relativePath,caseSensitive:s.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:O([a,u.pathname]),pathnameBase:F(O([a,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(a=O([a,u.pathnameBase]))}return o}function R(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t=!1,n=!0){h("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((e,{paramName:t,isOptional:n},r)=>{if("*"===t){let e=s[r]||"";o=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const i=s[r];return e[t]=n&&!i?void 0:(i||"").replace(/%2F/g,"/"),e},{}),pathname:a,pathnameBase:o,pattern:e}}function P(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return h(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function k(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}var I=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function L(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function N(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function D(e){let t=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function U(e,t,n,r=!1){let i;"string"==typeof e?i=g(e):(i={...e},d(!i.pathname||!i.pathname.includes("?"),N("?","pathname","search",i)),d(!i.pathname||!i.pathname.includes("#"),N("#","pathname","hash",i)),d(!i.search||!i.search.includes("#"),N("#","search","hash",i)));let a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(null==s)a=n;else{let e=t.length-1;if(!r&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e,t="/"){let n,{pathname:r,search:i="",hash:a=""}="string"==typeof e?g(e):e;if(r)if(o=r,I.test(o))n=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),h(!1,`Pathnames cannot have embedded double slashes - normalizing ${e} -> ${r}`)}n=r.startsWith("/")?L(r.substring(1),"/"):L(r,t)}else n=t;var o;return{pathname:n,search:z(i),hash:B(a)}}(i,a),c=s&&"/"!==s&&s.endsWith("/"),u=(o||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var O=e=>e.join("/").replace(/\/\/+/g,"/"),F=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),z=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",B=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function H(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}Symbol("Uninstrumented"),Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var V=["POST","PUT","PATCH","DELETE"],j=(new Set(V),["GET",...V]);new Set(j),Symbol("ResetLoaderData");var W=o.createContext(null);W.displayName="DataRouter";var G=o.createContext(null);G.displayName="DataRouterState";o.createContext(!1);var X=o.createContext({isTransitioning:!1});X.displayName="ViewTransition",o.createContext(new Map).displayName="Fetchers",o.createContext(null).displayName="Await";var q=o.createContext(null);q.displayName="Navigation";var Y=o.createContext(null);Y.displayName="Location";var $=o.createContext({outlet:null,matches:[],isDataRoute:!1});$.displayName="Route";var K=o.createContext(null);function Z(){return null!=o.useContext(Y)}function J(){return d(Z(),"useLocation() may be used only in the context of a <Router> component."),o.useContext(Y).location}K.displayName="RouteError";var Q="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ee(e){o.useContext(q).static||o.useLayoutEffect(e)}function te(){let{isDataRoute:e}=o.useContext($);return e?function(){let{router:e}=function(e){let t=o.useContext(W);return d(t,le(e)),t}("useNavigate"),t=ce("useNavigate"),n=o.useRef(!1);ee(()=>{n.current=!0});let r=o.useCallback(async(r,i={})=>{h(n.current,Q),n.current&&("number"==typeof r?e.navigate(r):await e.navigate(r,{fromRouteId:t,...i}))},[e,t]);return r}():function(){d(Z(),"useNavigate() may be used only in the context of a <Router> component.");let e=o.useContext(W),{basename:t,navigator:n}=o.useContext(q),{matches:r}=o.useContext($),{pathname:i}=J(),a=JSON.stringify(D(r)),s=o.useRef(!1);ee(()=>{s.current=!0});let l=o.useCallback((r,o={})=>{if(h(s.current,Q),!s.current)return;if("number"==typeof r)return void n.go(r);let l=U(r,JSON.parse(a),i,"path"===o.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:O([t,l.pathname])),(o.replace?n.replace:n.push)(l,o.state,o)},[t,n,a,i,e]);return l}()}function ne(e,{relative:t}={}){let{matches:n}=o.useContext($),{pathname:r}=J(),i=JSON.stringify(D(n));return o.useMemo(()=>U(e,JSON.parse(i),r,"path"===t),[e,i,r,t])}function re(e,t,n,r,i){d(Z(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=o.useContext(q),{matches:s}=o.useContext($),l=s[s.length-1],c=l?l.params:{},u=l?l.pathname:"/",p=l?l.pathnameBase:"/",f=l&&l.route;{let e=f&&f.path||"";de(u,!f||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let m,y=J();if(t){let e="string"==typeof t?g(t):t;d("/"===p||e.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${e.pathname}" was given in the \`location\` prop.`),m=e}else m=y;let b=m.pathname||"/",x=b;if("/"!==p){let e=p.replace(/^\//,"").split("/");x="/"+b.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=v(e,{pathname:x});h(f||null!=w,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),h(null==w||void 0!==w[w.length-1].route.element||void 0!==w[w.length-1].route.Component||void 0!==w[w.length-1].route.lazy,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=function(e,t=[],n=null,r=null){if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let i=e,a=n?.errors;if(null!=a){let e=i.findIndex(e=>e.route.id&&void 0!==a?.[e.route.id]);d(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,e+1))}let s=!1,l=-1;if(n)for(let e=0;e<i.length;e++){let t=i[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(l=e),t.route.id){let{loaderData:e,errors:r}=n,a=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!r||void 0===r[t.route.id]);if(t.route.lazy||a){s=!0,i=l>=0?i.slice(0,l+1):[i[0]];break}}}let c=n&&r?(e,t)=>{r(e,{location:n.location,params:n.matches?.[0]?.params??{},errorInfo:t})}:void 0;return i.reduceRight((e,r,u)=>{let d,h=!1,p=null,f=null;n&&(d=a&&r.route.id?a[r.route.id]:void 0,p=r.route.errorElement||ae,s&&(l<0&&0===u?(de("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,f=null):l===u&&(h=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(i.slice(0,u+1)),g=()=>{let t;return t=d?p:h?f:r.route.Component?o.createElement(r.route.Component,null):r.route.element?r.route.element:e,o.createElement(se,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===u)?o.createElement(oe,{location:n.location,revalidation:n.revalidation,component:p,error:d,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0},onError:c}):g()},null)}(w&&w.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:O([p,a.encodeLocation?a.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?p:O([p,a.encodeLocation?a.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),s,n,r,i);return t&&_?o.createElement(Y.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},_):_}function ie(){let e=function(){let e=o.useContext(K),t=function(e){let t=o.useContext(G);return d(t,le(e)),t}("useRouteError"),n=ce("useRouteError");return void 0!==e?e:t.errors?.[n]}(),t=H(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=o.createElement(o.Fragment,null,o.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),o.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",o.createElement("code",{style:a},"ErrorBoundary")," or"," ",o.createElement("code",{style:a},"errorElement")," prop on your route.")),o.createElement(o.Fragment,null,o.createElement("h2",null,"Unexpected Application Error!"),o.createElement("h3",{style:{fontStyle:"italic"}},t),n?o.createElement("pre",{style:i},n):null,s)}o.createContext(null);var ae=o.createElement(ie,null),oe=class extends o.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?o.createElement($.Provider,{value:this.props.routeContext},o.createElement(K.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function se({routeContext:e,match:t,children:n}){let r=o.useContext(W);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),o.createElement($.Provider,{value:e},n)}function le(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ce(e){let t=function(e){let t=o.useContext($);return d(t,le(e)),t}(e),n=t.matches[t.matches.length-1];return d(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}var ue={};function de(e,t,n){t||ue[e]||(ue[e]=!0,h(!1,n))}function he(e){d(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function pe({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:a=!1}){d(!Z(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=e.replace(/^\/*/,"/"),l=o.useMemo(()=>({basename:s,navigator:i,static:a,future:{}}),[s,i,a]);"string"==typeof n&&(n=g(n));let{pathname:c="/",search:u="",hash:p="",state:f=null,key:m="default"}=n,v=o.useMemo(()=>{let e=k(c,s);return null==e?null:{location:{pathname:e,search:u,hash:p,state:f,key:m},navigationType:r}},[s,c,u,p,f,m,r]);return h(null!=v,`<Router basename="${s}"> is not able to match the URL "${c}${u}${p}" because it does not start with the basename, so the <Router> won't render anything.`),null==v?null:o.createElement(q.Provider,{value:l},o.createElement(Y.Provider,{children:t,value:v}))}function fe({children:e,location:t}){return re(me(e),t)}function me(e,t=[]){let n=[];return o.Children.forEach(e,(e,r)=>{if(!o.isValidElement(e))return;let i=[...t,r];if(e.type===o.Fragment)return void n.push.apply(n,me(e.props.children,i));d(e.type===he,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),d(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=me(e.props.children,i)),n.push(a)}),n}o.memo(function({routes:e,future:t,state:n,unstable_onError:r}){return re(e,void 0,n,r,t)}),o.Component;var ge="get",ve="application/x-www-form-urlencoded";function ye(e){return null!=e&&"string"==typeof e.tagName}var be=null,xe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function we(e){return null==e||xe.has(e)?e:(h(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ve}"`),null)}function _e(e,t){if(!1===e||null==e)throw new Error(t)}function Ee(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}function Se(e,t,n,r,i,a){let o=(e,t)=>!n[t]||e.route.id!==n[t].route.id,s=(e,t)=>n[t].pathname!==e.pathname||n[t].route.path?.endsWith("*")&&n[t].params["*"]!==e.params["*"];return"assets"===a?t.filter((e,t)=>o(e,t)||s(e,t)):"data"===a?t.filter((t,a)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(o(t,a)||s(t,a))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof r)return r}return!0}):[]}function Me(e,t,{includeHydrateFallback:n}={}){return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1),[...new Set(r)];var r}function Te(){let e=o.useContext(W);return _e(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Ae(){let e=o.useContext(G);return _e(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0"),"undefined"!=typeof window?window:"undefined"!=typeof globalThis&&globalThis,Symbol("SingleFetchRedirect");var Ce=o.createContext(void 0);function Re(){let e=o.useContext(Ce);return _e(e,"You must render this element inside a <HydratedRouter> element"),e}function Pe(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function ke({page:e,...t}){let{router:n}=Te(),r=o.useMemo(()=>v(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?o.createElement(Le,{page:e,matches:r,...t}):null}function Ie(e){let{manifest:t,routeModules:n}=Re(),[r,i]=o.useState([]);return o.useEffect(()=>{let r=!1;return async function(e,t,n){return function(e,t){let n=new Set,r=new Set(t);return e.reduce((e,i)=>{if(t&&(null==(a=i)||"string"!=typeof a.page)&&"script"===i.as&&i.href&&r.has(i.href))return e;var a;let o=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(i));return n.has(o)||(n.add(o),e.push({key:o,link:i})),e},[])}((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await async function(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(t){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Ee).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}(e,t,n).then(e=>{r||i(e)}),()=>{r=!0}},[e,t,n]),r}function Le({page:e,matches:t,...n}){let r=J(),{manifest:i,routeModules:a}=Re(),{basename:s}=Te(),{loaderData:l,matches:c}=Ae(),u=o.useMemo(()=>Se(e,t,c,i,r,"data"),[e,t,c,i,r]),d=o.useMemo(()=>Se(e,t,c,i,r,"assets"),[e,t,c,i,r]),h=o.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let n=new Set,o=!1;if(t.forEach(e=>{let t=i.routes[e.route.id];t&&t.hasLoader&&(!u.some(t=>t.route.id===e.route.id)&&e.route.id in l&&a[e.route.id]?.shouldRevalidate||t.hasClientLoader?o=!0:n.add(e.route.id))}),0===n.size)return[];let c=function(e,t,n){let r="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname=`_root.${n}`:t&&"/"===k(r.pathname,t)?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}(e,s,"data");return o&&n.size>0&&c.searchParams.set("_routes",t.filter(e=>n.has(e.route.id)).map(e=>e.route.id).join(",")),[c.pathname+c.search]},[s,l,r,i,u,t,e,a]),p=o.useMemo(()=>Me(d,i),[d,i]),f=Ie(d);return o.createElement(o.Fragment,null,h.map(e=>o.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...n})),p.map(e=>o.createElement("link",{key:e,rel:"modulepreload",href:e,...n})),f.map(({key:e,link:t})=>o.createElement("link",{key:e,nonce:n.nonce,...t})))}Ce.displayName="FrameworkContext";function Ne(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}o.Component;var De="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{De&&(window.__reactRouterVersion="7.9.6")}catch(e){}function Ue({basename:e,children:t,window:n}){let r=o.useRef();null==r.current&&(r.current=u({window:n,v5Compat:!0}));let i=r.current,[a,s]=o.useState({action:i.action,location:i.location}),l=o.useCallback(e=>{o.startTransition(()=>s(e))},[s]);return o.useLayoutEffect(()=>i.listen(l),[i,l]),o.createElement(pe,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:i})}var Oe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fe=o.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:i,replace:a,state:s,target:l,to:c,preventScrollReset:u,viewTransition:p,...f},g){let v,{basename:y}=o.useContext(q),b="string"==typeof c&&Oe.test(c),x=!1;if("string"==typeof c&&b&&(v=c,De))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),n=k(t.pathname,y);t.origin===e.origin&&null!=n?c=n+t.search+t.hash:x=!0}catch(e){h(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=function(e,{relative:t}={}){d(Z(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=o.useContext(q),{hash:i,pathname:a,search:s}=ne(e,{relative:t}),l=a;return"/"!==n&&(l="/"===a?n:O([n,a])),r.createHref({pathname:l,search:s,hash:i})}(c,{relative:r}),[_,E,S]=function(e,t){let n=o.useContext(Ce),[r,i]=o.useState(!1),[a,s]=o.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=t,p=o.useRef(null);o.useEffect(()=>{if("render"===e&&s(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{s(e.isIntersecting)})},{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}},[e]),o.useEffect(()=>{if(r){let e=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(e)}}},[r]);let f=()=>{i(!0)},m=()=>{i(!1),s(!1)};return n?"intent"!==e?[a,p,{}]:[a,p,{onFocus:Pe(l,f),onBlur:Pe(c,m),onMouseEnter:Pe(u,f),onMouseLeave:Pe(d,m),onTouchStart:Pe(h,f)}]:[!1,p,{}]}(n,f),M=function(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:s}={}){let l=te(),c=J(),u=ne(e,{relative:a});return o.useCallback(o=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(o,t)){o.preventDefault();let t=void 0!==n?n:m(c)===m(u);l(e,{replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:s})}},[c,l,u,n,r,t,e,i,a,s])}(c,{replace:a,state:s,target:l,preventScrollReset:u,relative:r,viewTransition:p}),T=o.createElement("a",{...f,...S,href:v||w,onClick:x||i?e:function(t){e&&e(t),t.defaultPrevented||M(t)},ref:Ne(g,E),target:l,"data-discover":b||"render"!==t?void 0:"true"});return _&&!b?o.createElement(o.Fragment,null,T,o.createElement(ke,{page:w})):T});Fe.displayName="Link",o.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:i,to:a,viewTransition:s,children:l,...c},u){let h=ne(a,{relative:c.relative}),p=J(),f=o.useContext(G),{navigator:m,basename:g}=o.useContext(q),v=null!=f&&function(e,{relative:t}={}){let n=o.useContext(X);d(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Be("useViewTransitionState"),i=ne(e,{relative:t});if(!n.isTransitioning)return!1;let a=k(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=k(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=R(i.pathname,s)||null!=R(i.pathname,a)}(h)&&!0===s,y=m.encodeLocation?m.encodeLocation(h).pathname:h.pathname,b=p.pathname,x=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;t||(b=b.toLowerCase(),x=x?x.toLowerCase():null,y=y.toLowerCase()),x&&g&&(x=k(x,g)||x);const w="/"!==y&&y.endsWith("/")?y.length-1:y.length;let _,E=b===y||!r&&b.startsWith(y)&&"/"===b.charAt(w),S=null!=x&&(x===y||!r&&x.startsWith(y)&&"/"===x.charAt(y.length)),M={isActive:E,isPending:S,isTransitioning:v},T=E?e:void 0;_="function"==typeof n?n(M):[n,E?"active":null,S?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let A="function"==typeof i?i(M):i;return o.createElement(Fe,{...c,"aria-current":T,className:_,ref:u,style:A,to:a,viewTransition:s},"function"==typeof l?l(M):l)}).displayName="NavLink";var ze=o.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:a,method:s=ge,action:l,onSubmit:c,relative:u,preventScrollReset:h,viewTransition:p,...f},g)=>{let v=function(){let{router:e}=Be("useSubmit"),{basename:t}=o.useContext(q),n=ce("useRouteId");return o.useCallback(async(r,i={})=>{let{action:a,method:o,encType:s,formData:l,body:c}=function(e,t){let n,r,i,a,o;if(ye(s=e)&&"form"===s.tagName.toLowerCase()){let o=e.getAttribute("action");r=o?k(o,t):null,n=e.getAttribute("method")||ge,i=we(e.getAttribute("enctype"))||ve,a=new FormData(e)}else if(function(e){return ye(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return ye(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let o=e.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let s=e.getAttribute("formaction")||o.getAttribute("action");if(r=s?k(s,t):null,n=e.getAttribute("formmethod")||o.getAttribute("method")||ge,i=we(e.getAttribute("formenctype"))||we(o.getAttribute("enctype"))||ve,a=new FormData(o,e),!function(){if(null===be)try{new FormData(document.createElement("form"),0),be=!1}catch(e){be=!0}return be}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?`${t}.`:"";a.append(`${e}x`,"0"),a.append(`${e}y`,"0")}else t&&a.append(t,r)}}else{if(ye(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ge,r=null,i=ve,o=e}var s;return a&&"text/plain"===i&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:o}}(r,t);if(!1===i.navigate){let t=i.fetcherKey||Ve();await e.fetch(t,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||s,flushSync:i.flushSync})}else await e.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||s,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}(),y=function(e,{relative:t}={}){let{basename:n}=o.useContext(q),r=o.useContext($);d(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...ne(e||".",{relative:t})},s=J();if(null==e){a.search=s.search;let e=new URLSearchParams(a.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();a.search=n?`?${n}`:""}}return e&&"."!==e||!i.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),"/"!==n&&(a.pathname="/"===a.pathname?n:O([n,a.pathname])),m(a)}(l,{relative:u}),b="get"===s.toLowerCase()?"get":"post",x="string"==typeof l&&Oe.test(l);return o.createElement("form",{ref:g,method:b,action:y,onSubmit:r?c:e=>{if(c&&c(e),e.defaultPrevented)return;e.preventDefault();let r=e.nativeEvent.submitter,o=r?.getAttribute("formmethod")||s;v(r||e.currentTarget,{fetcherKey:t,method:o,navigate:n,replace:i,state:a,relative:u,preventScrollReset:h,viewTransition:p})},...f,"data-discover":x||"render"!==e?void 0:"true"})});function Be(e){let t=o.useContext(W);return d(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}ze.displayName="Form";var He=0,Ve=()=>`__${String(++He)}__`;const je="181",We={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ge={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Xe=0,qe=1,Ye=2,$e=3,Ke=0,Ze=1,Je=2,Qe=3,et=0,tt=1,nt=2,rt=0,it=1,at=2,ot=3,st=4,lt=5,ct=100,ut=101,dt=102,ht=103,pt=104,ft=200,mt=201,gt=202,vt=203,yt=204,bt=205,xt=206,wt=207,_t=208,Et=209,St=210,Mt=211,Tt=212,At=213,Ct=214,Rt=0,Pt=1,kt=2,It=3,Lt=4,Nt=5,Dt=6,Ut=7,Ot=0,Ft=1,zt=2,Bt=0,Ht=1,Vt=2,jt=3,Wt=4,Gt=5,Xt=6,qt=7,Yt="attached",$t="detached",Kt=300,Zt=301,Jt=302,Qt=303,en=304,tn=306,nn=1e3,rn=1001,an=1002,on=1003,sn=1004,ln=1004,cn=1005,un=1005,dn=1006,hn=1007,pn=1007,fn=1008,mn=1008,gn=1009,vn=1010,yn=1011,bn=1012,xn=1013,wn=1014,_n=1015,En=1016,Sn=1017,Mn=1018,Tn=1020,An=35902,Cn=35899,Rn=1021,Pn=1022,kn=1023,In=1026,Ln=1027,Nn=1028,Dn=1029,Un=1030,On=1031,Fn=1032,zn=1033,Bn=33776,Hn=33777,Vn=33778,jn=33779,Wn=35840,Gn=35841,Xn=35842,qn=35843,Yn=36196,$n=37492,Kn=37496,Zn=37808,Jn=37809,Qn=37810,er=37811,tr=37812,nr=37813,rr=37814,ir=37815,ar=37816,or=37817,sr=37818,lr=37819,cr=37820,ur=37821,dr=36492,hr=36494,pr=36495,fr=36283,mr=36284,gr=36285,vr=36286,yr=2200,br=2201,xr=2202,wr=2300,_r=2301,Er=2302,Sr=2400,Mr=2401,Tr=2402,Ar=2500,Cr=2501,Rr=0,Pr=1,kr=2,Ir=3200,Lr=3201,Nr=3202,Dr=3203,Ur=0,Or=1,Fr="",zr="srgb",Br="srgb-linear",Hr="linear",Vr="srgb",jr=0,Wr=7680,Gr=7681,Xr=7682,qr=7683,Yr=34055,$r=34056,Kr=5386,Zr=512,Jr=513,Qr=514,ei=515,ti=516,ni=517,ri=518,ii=519,ai=512,oi=513,si=514,li=515,ci=516,ui=517,di=518,hi=519,pi=35044,fi=35048,mi=35040,gi=35045,vi=35049,yi=35041,bi=35046,xi=35050,wi=35042,_i="100",Ei="300 es",Si=2e3,Mi=2001,Ti={COMPUTE:"compute",RENDER:"render"},Ai={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},Ci={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function Ri(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const Pi={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ki(e,t){return new Pi[e](t)}function Ii(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Li(){const e=Ii("canvas");return e.style.display="block",e}const Ni={};let Di=null;function Ui(e){Di=e}function Oi(){return Di}function Fi(...e){const t="THREE."+e.shift();Di?Di("log",t,...e):console.log(t,...e)}function zi(...e){const t="THREE."+e.shift();Di?Di("warn",t,...e):console.warn(t,...e)}function Bi(...e){const t="THREE."+e.shift();Di?Di("error",t,...e):console.error(t,...e)}function Hi(...e){const t=e.join(" ");t in Ni||(Ni[t]=!0,zi(...e))}class Vi{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return void 0!==n&&void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){const n=this._listeners;if(void 0===n)return;const r=n[e];if(void 0!==r){const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}dispatchEvent(e){const t=this._listeners;if(void 0===t)return;const n=t[e.type];if(void 0!==n){e.target=this;const t=n.slice(0);for(let n=0,r=t.length;n<r;n++)t[n].call(this,e);e.target=null}}}const ji=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Wi=1234567;const Gi=Math.PI/180,Xi=180/Math.PI;function qi(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(ji[255&e]+ji[e>>8&255]+ji[e>>16&255]+ji[e>>24&255]+"-"+ji[255&t]+ji[t>>8&255]+"-"+ji[t>>16&15|64]+ji[t>>24&255]+"-"+ji[63&n|128]+ji[n>>8&255]+"-"+ji[n>>16&255]+ji[n>>24&255]+ji[255&r]+ji[r>>8&255]+ji[r>>16&255]+ji[r>>24&255]).toLowerCase()}function Yi(e,t,n){return Math.max(t,Math.min(n,e))}function $i(e,t){return(e%t+t)%t}function Ki(e,t,n){return(1-n)*e+n*t}function Zi(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Ji(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const Qi={DEG2RAD:Gi,RAD2DEG:Xi,generateUUID:qi,clamp:Yi,euclideanModulo:$i,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:Ki,damp:function(e,t,n,r){return Ki(e,t,1-Math.exp(-n*r))},pingpong:function(e,t=1){return t-Math.abs($i(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(Wi=e);let t=Wi+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*Gi},radToDeg:function(e){return e*Xi},isPowerOfTwo:function(e){return!(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,i){const a=Math.cos,o=Math.sin,s=a(n/2),l=o(n/2),c=a((t+r)/2),u=o((t+r)/2),d=a((t-r)/2),h=o((t-r)/2),p=a((r-t)/2),f=o((r-t)/2);switch(i){case"XYX":e.set(s*u,l*d,l*h,s*c);break;case"YZY":e.set(l*h,s*u,l*d,s*c);break;case"ZXZ":e.set(l*d,l*h,s*u,s*c);break;case"XZX":e.set(s*u,l*f,l*p,s*c);break;case"YXY":e.set(l*p,s*u,l*f,s*c);break;case"ZYZ":e.set(l*f,l*p,s*u,s*c);break;default:zi("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:Ji,denormalize:Zi};class ea{constructor(e=0,t=0){ea.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Yi(this.x,e.x,t.x),this.y=Yi(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Yi(this.x,e,t),this.y=Yi(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Yi(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Yi(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ta{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,a,o){let s=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3],d=i[a+0],h=i[a+1],p=i[a+2],f=i[a+3];if(o<=0)return e[t+0]=s,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(o>=1)return e[t+0]=d,e[t+1]=h,e[t+2]=p,void(e[t+3]=f);if(u!==f||s!==d||l!==h||c!==p){let e=s*d+l*h+c*p+u*f;e<0&&(d=-d,h=-h,p=-p,f=-f,e=-e);let t=1-o;if(e<.9995){const n=Math.acos(e),r=Math.sin(n);t=Math.sin(t*n)/r,s=s*t+d*(o=Math.sin(o*n)/r),l=l*t+h*o,c=c*t+p*o,u=u*t+f*o}else{s=s*t+d*o,l=l*t+h*o,c=c*t+p*o,u=u*t+f*o;const e=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=e,l*=e,c*=e,u*=e}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,a){const o=n[r],s=n[r+1],l=n[r+2],c=n[r+3],u=i[a],d=i[a+1],h=i[a+2],p=i[a+3];return e[t]=o*p+c*u+s*h-l*d,e[t+1]=s*p+c*d+l*u-o*h,e[t+2]=l*p+c*h+o*d-s*u,e[t+3]=c*p-o*u-s*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,i=e._z,a=e._order,o=Math.cos,s=Math.sin,l=o(n/2),c=o(r/2),u=o(i/2),d=s(n/2),h=s(r/2),p=s(i/2);switch(a){case"XYZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"YXZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"ZXY":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"ZYX":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"YZX":this._x=d*c*u+l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u-d*h*p;break;case"XZY":this._x=d*c*u-l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u+d*h*p;break;default:zi("Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],l=t[2],c=t[6],u=t[10],d=n+o+u;if(d>0){const e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(c-s)*e,this._y=(i-l)*e,this._z=(a-r)*e}else if(n>o&&n>u){const e=2*Math.sqrt(1+n-o-u);this._w=(c-s)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(i+l)/e}else if(o>u){const e=2*Math.sqrt(1+o-n-u);this._w=(i-l)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(s+c)/e}else{const e=2*Math.sqrt(1+u-n-o);this._w=(a-r)/e,this._x=(i+l)/e,this._y=(s+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Yi(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+a*o+r*l-i*s,this._y=r*c+a*s+i*o-n*l,this._z=i*c+a*l+n*s-r*o,this._w=a*c-n*o-r*s-i*l,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let n=e._x,r=e._y,i=e._z,a=e._w,o=this.dot(e);o<0&&(n=-n,r=-r,i=-i,a=-a,o=-o);let s=1-t;if(o<.9995){const e=Math.acos(o),l=Math.sin(e);s=Math.sin(s*e)/l,t=Math.sin(t*e)/l,this._x=this._x*s+n*t,this._y=this._y*s+r*t,this._z=this._z*s+i*t,this._w=this._w*s+a*t,this._onChangeCallback()}else this._x=this._x*s+n*t,this._y=this._y*s+r*t,this._z=this._z*s+i*t,this._w=this._w*s+a*t,this.normalize();return this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),i=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),i*Math.sin(t),i*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class na{constructor(e=0,t=0,n=0){na.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(ia.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(ia.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,l=2*(a*r-o*n),c=2*(o*t-i*r),u=2*(i*n-a*t);return this.x=t+s*l+a*u-o*c,this.y=n+s*c+o*l-i*u,this.z=r+s*u+i*c-a*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Yi(this.x,e.x,t.x),this.y=Yi(this.y,e.y,t.y),this.z=Yi(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Yi(this.x,e,t),this.y=Yi(this.y,e,t),this.z=Yi(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Yi(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return ra.copy(this).projectOnVector(e),this.sub(ra)}reflect(e){return this.sub(ra.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Yi(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ra=new na,ia=new ta;class aa{constructor(e,t,n,r,i,a,o,s,l){aa.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,a,o,s,l)}set(e,t,n,r,i,a,o,s,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=o,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],c=n[4],u=n[7],d=n[2],h=n[5],p=n[8],f=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],x=r[2],w=r[5],_=r[8];return i[0]=a*f+o*v+s*x,i[3]=a*m+o*y+s*w,i[6]=a*g+o*b+s*_,i[1]=l*f+c*v+u*x,i[4]=l*m+c*y+u*w,i[7]=l*g+c*b+u*_,i[2]=d*f+h*v+p*x,i[5]=d*m+h*y+p*w,i[8]=d*g+h*b+p*_,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8];return t*a*c-t*o*l-n*i*c+n*o*s+r*i*l-r*a*s}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=c*a-o*l,d=o*s-c*i,h=l*i-a*s,p=t*u+n*d+r*h;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(r*l-c*n)*f,e[2]=(o*n-r*a)*f,e[3]=d*f,e[4]=(c*t-r*s)*f,e[5]=(r*i-o*t)*f,e[6]=h*f,e[7]=(n*s-l*t)*f,e[8]=(a*t-n*i)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,a,o){const s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*a+l*o)+a+e,-r*l,r*s,-r*(-l*a+s*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(oa.makeScale(e,t)),this}rotate(e){return this.premultiply(oa.makeRotation(-e)),this}translate(e,t){return this.premultiply(oa.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const oa=new aa,sa=(new aa).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),la=(new aa).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function ca(){const e={enabled:!0,workingColorSpace:Br,spaces:{},convert:function(e,t,n){return!1!==this.enabled&&t!==n&&t&&n?(this.spaces[t].transfer===Vr&&(e.r=da(e.r),e.g=da(e.g),e.b=da(e.b)),this.spaces[t].primaries!==this.spaces[n].primaries&&(e.applyMatrix3(this.spaces[t].toXYZ),e.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===Vr&&(e.r=ha(e.r),e.g=ha(e.g),e.b=ha(e.b)),e):e},workingToColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},colorSpaceToWorking:function(e,t){return this.convert(e,t,this.workingColorSpace)},getPrimaries:function(e){return this.spaces[e].primaries},getTransfer:function(e){return e===Fr?Hr:this.spaces[e].transfer},getToneMappingMode:function(e){return this.spaces[e].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(e,t=this.workingColorSpace){return e.fromArray(this.spaces[t].luminanceCoefficients)},define:function(e){Object.assign(this.spaces,e)},_getMatrix:function(e,t,n){return e.copy(this.spaces[t].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(e){return this.spaces[e].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(e=this.workingColorSpace){return this.spaces[e].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(t,n){return Hi("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),e.workingToColorSpace(t,n)},toWorkingColorSpace:function(t,n){return Hi("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),e.colorSpaceToWorking(t,n)}},t=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return e.define({[Br]:{primaries:t,whitePoint:r,transfer:Hr,toXYZ:sa,fromXYZ:la,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:zr},outputColorSpaceConfig:{drawingBufferColorSpace:zr}},[zr]:{primaries:t,whitePoint:r,transfer:Vr,toXYZ:sa,fromXYZ:la,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:zr}}}),e}const ua=ca();function da(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function ha(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let pa;class fa{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{void 0===pa&&(pa=Ii("canvas")),pa.width=e.width,pa.height=e.height;const t=pa.getContext("2d");e instanceof ImageData?t.putImageData(e,0,0):t.drawImage(e,0,0,e.width,e.height),n=pa}return n.toDataURL(t)}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=Ii("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*da(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*da(t[e]/255)):t[e]=da(t[e]);return{data:t,width:e.width,height:e.height}}return zi("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let ma=0;class ga{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:ma++}),this.uuid=qi(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):null!==t?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(va(r[t].image)):e.push(va(r[t]))}else e=va(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function va(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?fa.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(zi("Texture: Unable to serialize Texture."),{})}let ya=0;const ba=new na;class xa extends Vi{constructor(e=xa.DEFAULT_IMAGE,t=xa.DEFAULT_MAPPING,n=rn,r=rn,i=dn,a=fn,o=kn,s=gn,l=xa.DEFAULT_ANISOTROPY,c=Fr){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ya++}),this.uuid=qi(),this.name="",this.source=new ga(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=a,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=s,this.offset=new ea(0,0),this.repeat=new ea(1,1),this.center=new ea(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new aa,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(ba).x}get height(){return this.source.getSize(ba).y}get depth(){return this.source.getSize(ba).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(void 0===n){zi(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&n&&r.isVector2&&n.isVector2||r&&n&&r.isVector3&&n.isVector3||r&&n&&r.isMatrix3&&n.isMatrix3?r.copy(n):this[t]=n:zi(`Texture.setValues(): property '${t}' does not exist.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Kt)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case nn:e.x=e.x-Math.floor(e.x);break;case rn:e.x=e.x<0?0:1;break;case an:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case nn:e.y=e.y-Math.floor(e.y);break;case rn:e.y=e.y<0?0:1;break;case an:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}xa.DEFAULT_IMAGE=null,xa.DEFAULT_MAPPING=Kt,xa.DEFAULT_ANISOTROPY=1;class wa{constructor(e=0,t=0,n=0,r=1){wa.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const a=.01,o=.1,s=e.elements,l=s[0],c=s[4],u=s[8],d=s[1],h=s[5],p=s[9],f=s[2],m=s[6],g=s[10];if(Math.abs(c-d)<a&&Math.abs(u-f)<a&&Math.abs(p-m)<a){if(Math.abs(c+d)<o&&Math.abs(u+f)<o&&Math.abs(p+m)<o&&Math.abs(l+h+g-3)<o)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,s=(h+1)/2,v=(g+1)/2,y=(c+d)/4,b=(u+f)/4,x=(p+m)/4;return e>s&&e>v?e<a?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=y/n,i=b/n):s>v?s<a?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=y/r,i=x/r):v<a?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=b/i,r=x/i),this.set(n,r,i,t),this}let v=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(d-c)*(d-c));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(u-f)/v,this.z=(d-c)/v,this.w=Math.acos((l+h+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Yi(this.x,e.x,t.x),this.y=Yi(this.y,e.y,t.y),this.z=Yi(this.z,e.z,t.z),this.w=Yi(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Yi(this.x,e,t),this.y=Yi(this.y,e,t),this.z=Yi(this.z,e,t),this.w=Yi(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Yi(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class _a extends Vi{constructor(e=1,t=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:dn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new wa(0,0,e,t),this.scissorTest=!1,this.viewport=new wa(0,0,e,t);const r={width:e,height:t,depth:n.depth},i=new xa(r);this.textures=[];const a=n.count;for(let e=0;e<a;e++)this.textures[e]=i.clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const t={minFilter:dn,generateMipmaps:!1,flipY:!1,internalFormat:null};void 0!==e.mapping&&(t.mapping=e.mapping),void 0!==e.wrapS&&(t.wrapS=e.wrapS),void 0!==e.wrapT&&(t.wrapT=e.wrapT),void 0!==e.wrapR&&(t.wrapR=e.wrapR),void 0!==e.magFilter&&(t.magFilter=e.magFilter),void 0!==e.minFilter&&(t.minFilter=e.minFilter),void 0!==e.format&&(t.format=e.format),void 0!==e.type&&(t.type=e.type),void 0!==e.anisotropy&&(t.anisotropy=e.anisotropy),void 0!==e.colorSpace&&(t.colorSpace=e.colorSpace),void 0!==e.flipY&&(t.flipY=e.flipY),void 0!==e.generateMipmaps&&(t.generateMipmaps=e.generateMipmaps),void 0!==e.internalFormat&&(t.internalFormat=e.internalFormat);for(let e=0;e<this.textures.length;e++)this.textures[e].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==e&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.textures.length;r<i;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n,!0!==this.textures[r].isData3DTexture&&(this.textures[r].isArrayTexture=this.textures[r].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const n=Object.assign({},e.textures[t].image);this.textures[t].source=new ga(n)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ea extends _a{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class Sa extends xa{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=on,this.minFilter=on,this.wrapR=rn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Ma extends Ea{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Sa(null,e,t,n),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class Ta extends xa{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=on,this.minFilter=on,this.wrapR=rn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Aa extends Ea{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new Ta(null,e,t,n),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class Ca{constructor(e=new na(1/0,1/0,1/0),t=new na(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Pa.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Pa.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Pa.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const r=n.getAttribute("position");if(!0===t&&void 0!==r&&!0!==e.isInstancedMesh)for(let t=0,n=r.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,Pa):Pa.fromBufferAttribute(r,t),Pa.applyMatrix4(e.matrixWorld),this.expandByPoint(Pa);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),ka.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),ka.copy(n.boundingBox)),ka.applyMatrix4(e.matrixWorld),this.union(ka)}const r=e.children;for(let e=0,n=r.length;e<n;e++)this.expandByObject(r[e],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Pa),Pa.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Fa),za.subVectors(this.max,Fa),Ia.subVectors(e.a,Fa),La.subVectors(e.b,Fa),Na.subVectors(e.c,Fa),Da.subVectors(La,Ia),Ua.subVectors(Na,La),Oa.subVectors(Ia,Na);let t=[0,-Da.z,Da.y,0,-Ua.z,Ua.y,0,-Oa.z,Oa.y,Da.z,0,-Da.x,Ua.z,0,-Ua.x,Oa.z,0,-Oa.x,-Da.y,Da.x,0,-Ua.y,Ua.x,0,-Oa.y,Oa.x,0];return!!Va(t,Ia,La,Na,za)&&(t=[1,0,0,0,1,0,0,0,1],!!Va(t,Ia,La,Na,za)&&(Ba.crossVectors(Da,Ua),t=[Ba.x,Ba.y,Ba.z],Va(t,Ia,La,Na,za)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Pa).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Pa).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Ra[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ra[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ra[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ra[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ra[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ra[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ra[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ra[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ra)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Ra=[new na,new na,new na,new na,new na,new na,new na,new na],Pa=new na,ka=new Ca,Ia=new na,La=new na,Na=new na,Da=new na,Ua=new na,Oa=new na,Fa=new na,za=new na,Ba=new na,Ha=new na;function Va(e,t,n,r,i){for(let a=0,o=e.length-3;a<=o;a+=3){Ha.fromArray(e,a);const o=i.x*Math.abs(Ha.x)+i.y*Math.abs(Ha.y)+i.z*Math.abs(Ha.z),s=t.dot(Ha),l=n.dot(Ha),c=r.dot(Ha);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>o)return!1}return!0}const ja=new Ca,Wa=new na,Ga=new na;class Xa{constructor(e=new na,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):ja.setFromPoints(e).getCenter(n);let r=0;for(let t=0,i=e.length;t<i;t++)r=Math.max(r,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Wa.subVectors(e,this.center);const t=Wa.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(Wa,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Ga.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Wa.copy(e.center).add(Ga)),this.expandByPoint(Wa.copy(e.center).sub(Ga))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const qa=new na,Ya=new na,$a=new na,Ka=new na,Za=new na,Ja=new na,Qa=new na;class eo{constructor(e=new na,t=new na(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,qa)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=qa.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(qa.copy(this.origin).addScaledVector(this.direction,t),qa.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){Ya.copy(e).add(t).multiplyScalar(.5),$a.copy(t).sub(e).normalize(),Ka.copy(this.origin).sub(Ya);const i=.5*e.distanceTo(t),a=-this.direction.dot($a),o=Ka.dot(this.direction),s=-Ka.dot($a),l=Ka.lengthSq(),c=Math.abs(1-a*a);let u,d,h,p;if(c>0)if(u=a*s-o,d=a*o-s,p=i*c,u>=0)if(d>=-p)if(d<=p){const e=1/c;u*=e,d*=e,h=u*(u+a*d+2*o)+d*(a*u+d+2*s)+l}else d=i,u=Math.max(0,-(a*d+o)),h=-u*u+d*(d+2*s)+l;else d=-i,u=Math.max(0,-(a*d+o)),h=-u*u+d*(d+2*s)+l;else d<=-p?(u=Math.max(0,-(-a*i+o)),d=u>0?-i:Math.min(Math.max(-i,-s),i),h=-u*u+d*(d+2*s)+l):d<=p?(u=0,d=Math.min(Math.max(-i,-s),i),h=d*(d+2*s)+l):(u=Math.max(0,-(a*i+o)),d=u>0?i:Math.min(Math.max(-i,-s),i),h=-u*u+d*(d+2*s)+l);else d=a>0?-i:i,u=Math.max(0,-(a*d+o)),h=-u*u+d*(d+2*s)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(Ya).addScaledVector($a,d),h}intersectSphere(e,t){qa.subVectors(e.center,this.origin);const n=qa.dot(this.direction),r=qa.dot(qa)-n*n,i=e.radius*e.radius;if(r>i)return null;const a=Math.sqrt(i-r),o=n-a,s=n+a;return s<0?null:o<0?this.at(s,t):this.at(o,t)}intersectsSphere(e){return!(e.radius<0)&&this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,a,o,s;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),c>=0?(i=(e.min.y-d.y)*c,a=(e.max.y-d.y)*c):(i=(e.max.y-d.y)*c,a=(e.min.y-d.y)*c),n>a||i>r?null:((i>n||isNaN(n))&&(n=i),(a<r||isNaN(r))&&(r=a),u>=0?(o=(e.min.z-d.z)*u,s=(e.max.z-d.z)*u):(o=(e.max.z-d.z)*u,s=(e.min.z-d.z)*u),n>s||o>r?null:((o>n||n!=n)&&(n=o),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,qa)}intersectTriangle(e,t,n,r,i){Za.subVectors(t,e),Ja.subVectors(n,e),Qa.crossVectors(Za,Ja);let a,o=this.direction.dot(Qa);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Ka.subVectors(this.origin,e);const s=a*this.direction.dot(Ja.crossVectors(Ka,Ja));if(s<0)return null;const l=a*this.direction.dot(Za.cross(Ka));if(l<0)return null;if(s+l>o)return null;const c=-a*Ka.dot(Qa);return c<0?null:this.at(c/o,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class to{constructor(e,t,n,r,i,a,o,s,l,c,u,d,h,p,f,m){to.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,a,o,s,l,c,u,d,h,p,f,m)}set(e,t,n,r,i,a,o,s,l,c,u,d,h,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=a,g[9]=o,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=d,g[3]=h,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new to).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/no.setFromMatrixColumn(e,0).length(),i=1/no.setFromMatrixColumn(e,1).length(),a=1/no.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){const e=a*c,n=a*u,r=o*c,i=o*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-o*s,t[2]=i-e*l,t[6]=r+n*l,t[10]=a*s}else if("YXZ"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e+i*o,t[4]=r*o-n,t[8]=a*l,t[1]=a*u,t[5]=a*c,t[9]=-o,t[2]=n*o-r,t[6]=i+e*o,t[10]=a*s}else if("ZXY"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e-i*o,t[4]=-a*u,t[8]=r+n*o,t[1]=n+r*o,t[5]=a*c,t[9]=i-e*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){const e=a*c,n=a*u,r=o*c,i=o*u;t[0]=s*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=s*u,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){const e=a*s,n=a*l,r=o*s,i=o*l;t[0]=s*c,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=a*c,t[9]=-o*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){const e=a*s,n=a*l,r=o*s,i=o*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=e*u+i,t[5]=a*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=o*c,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(io,e,ao)}lookAt(e,t,n){const r=this.elements;return lo.subVectors(e,t),0===lo.lengthSq()&&(lo.z=1),lo.normalize(),oo.crossVectors(n,lo),0===oo.lengthSq()&&(1===Math.abs(n.z)?lo.x+=1e-4:lo.z+=1e-4,lo.normalize(),oo.crossVectors(n,lo)),oo.normalize(),so.crossVectors(lo,oo),r[0]=oo.x,r[4]=so.x,r[8]=lo.x,r[1]=oo.y,r[5]=so.y,r[9]=lo.y,r[2]=oo.z,r[6]=so.z,r[10]=lo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],c=n[1],u=n[5],d=n[9],h=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],x=n[15],w=r[0],_=r[4],E=r[8],S=r[12],M=r[1],T=r[5],A=r[9],C=r[13],R=r[2],P=r[6],k=r[10],I=r[14],L=r[3],N=r[7],D=r[11],U=r[15];return i[0]=a*w+o*M+s*R+l*L,i[4]=a*_+o*T+s*P+l*N,i[8]=a*E+o*A+s*k+l*D,i[12]=a*S+o*C+s*I+l*U,i[1]=c*w+u*M+d*R+h*L,i[5]=c*_+u*T+d*P+h*N,i[9]=c*E+u*A+d*k+h*D,i[13]=c*S+u*C+d*I+h*U,i[2]=p*w+f*M+m*R+g*L,i[6]=p*_+f*T+m*P+g*N,i[10]=p*E+f*A+m*k+g*D,i[14]=p*S+f*C+m*I+g*U,i[3]=v*w+y*M+b*R+x*L,i[7]=v*_+y*T+b*P+x*N,i[11]=v*E+y*A+b*k+x*D,i[15]=v*S+y*C+b*I+x*U,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],l=e[13],c=e[2],u=e[6],d=e[10],h=e[14];return e[3]*(+i*s*u-r*l*u-i*o*d+n*l*d+r*o*h-n*s*h)+e[7]*(+t*s*h-t*l*d+i*a*d-r*a*h+r*l*c-i*s*c)+e[11]*(+t*l*u-t*o*h-i*a*u+n*a*h+i*o*c-n*l*c)+e[15]*(-r*o*c-t*s*u+t*o*d+r*a*u-n*a*d+n*s*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=u*m*l-f*d*l+f*s*h-o*m*h-u*s*g+o*d*g,y=p*d*l-c*m*l-p*s*h+a*m*h+c*s*g-a*d*g,b=c*f*l-p*u*l+p*o*h-a*f*h-c*o*g+a*u*g,x=p*u*s-c*f*s-p*o*d+a*f*d+c*o*m-a*u*m,w=t*v+n*y+r*b+i*x;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const _=1/w;return e[0]=v*_,e[1]=(f*d*i-u*m*i-f*r*h+n*m*h+u*r*g-n*d*g)*_,e[2]=(o*m*i-f*s*i+f*r*l-n*m*l-o*r*g+n*s*g)*_,e[3]=(u*s*i-o*d*i-u*r*l+n*d*l+o*r*h-n*s*h)*_,e[4]=y*_,e[5]=(c*m*i-p*d*i+p*r*h-t*m*h-c*r*g+t*d*g)*_,e[6]=(p*s*i-a*m*i-p*r*l+t*m*l+a*r*g-t*s*g)*_,e[7]=(a*d*i-c*s*i+c*r*l-t*d*l-a*r*h+t*s*h)*_,e[8]=b*_,e[9]=(p*u*i-c*f*i-p*n*h+t*f*h+c*n*g-t*u*g)*_,e[10]=(a*f*i-p*o*i+p*n*l-t*f*l-a*n*g+t*o*g)*_,e[11]=(c*o*i-a*u*i-c*n*l+t*u*l+a*n*h-t*o*h)*_,e[12]=x*_,e[13]=(c*f*r-p*u*r+p*n*d-t*f*d-c*n*m+t*u*m)*_,e[14]=(p*o*r-a*f*r-p*n*s+t*f*s+a*n*m-t*o*m)*_,e[15]=(a*u*r-c*o*r+c*n*s-t*u*s-a*n*d+t*o*d)*_,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,l=i*a,c=i*o;return this.set(l*a+n,l*o-r*s,l*s+r*o,0,l*o+r*s,c*o+n,c*s-r*a,0,l*s-r*o,c*s+r*a,i*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,l=i+i,c=a+a,u=o+o,d=i*l,h=i*c,p=i*u,f=a*c,m=a*u,g=o*u,v=s*l,y=s*c,b=s*u,x=n.x,w=n.y,_=n.z;return r[0]=(1-(f+g))*x,r[1]=(h+b)*x,r[2]=(p-y)*x,r[3]=0,r[4]=(h-b)*w,r[5]=(1-(d+g))*w,r[6]=(m+v)*w,r[7]=0,r[8]=(p+y)*_,r[9]=(m-v)*_,r[10]=(1-(d+f))*_,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=no.set(r[0],r[1],r[2]).length();const a=no.set(r[4],r[5],r[6]).length(),o=no.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],ro.copy(this);const s=1/i,l=1/a,c=1/o;return ro.elements[0]*=s,ro.elements[1]*=s,ro.elements[2]*=s,ro.elements[4]*=l,ro.elements[5]*=l,ro.elements[6]*=l,ro.elements[8]*=c,ro.elements[9]*=c,ro.elements[10]*=c,t.setFromRotationMatrix(ro),n.x=i,n.y=a,n.z=o,this}makePerspective(e,t,n,r,i,a,o=Si,s=!1){const l=this.elements,c=2*i/(t-e),u=2*i/(n-r),d=(t+e)/(t-e),h=(n+r)/(n-r);let p,f;if(s)p=i/(a-i),f=a*i/(a-i);else if(o===Si)p=-(a+i)/(a-i),f=-2*a*i/(a-i);else{if(o!==Mi)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);p=-a/(a-i),f=-a*i/(a-i)}return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=f,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,r,i,a,o=Si,s=!1){const l=this.elements,c=2/(t-e),u=2/(n-r),d=-(t+e)/(t-e),h=-(n+r)/(n-r);let p,f;if(s)p=1/(a-i),f=a/(a-i);else if(o===Si)p=-2/(a-i),f=-(a+i)/(a-i);else{if(o!==Mi)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);p=-1/(a-i),f=-i/(a-i)}return l[0]=c,l[4]=0,l[8]=0,l[12]=d,l[1]=0,l[5]=u,l[9]=0,l[13]=h,l[2]=0,l[6]=0,l[10]=p,l[14]=f,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const no=new na,ro=new to,io=new na(0,0,0),ao=new na(1,1,1),oo=new na,so=new na,lo=new na,co=new to,uo=new ta;class ho{constructor(e=0,t=0,n=0,r=ho.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],a=r[4],o=r[8],s=r[1],l=r[5],c=r[9],u=r[2],d=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(Yi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Yi(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(Yi(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-Yi(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(Yi(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-Yi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-c,h),this._y=0);break;default:zi("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return co.makeRotationFromQuaternion(e),this.setFromRotationMatrix(co,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return uo.setFromEuler(this),this.setFromQuaternion(uo,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ho.DEFAULT_ORDER="XYZ";class po{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return!!(this.mask&1<<e)}}let fo=0;const mo=new na,go=new ta,vo=new to,yo=new na,bo=new na,xo=new na,wo=new ta,_o=new na(1,0,0),Eo=new na(0,1,0),So=new na(0,0,1),Mo={type:"added"},To={type:"removed"},Ao={type:"childadded",child:null},Co={type:"childremoved",child:null};class Ro extends Vi{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:fo++}),this.uuid=qi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ro.DEFAULT_UP.clone();const e=new na,t=new ho,n=new ta,r=new na(1,1,1);t._onChange(function(){n.setFromEuler(t,!1)}),n._onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new to},normalMatrix:{value:new aa}}),this.matrix=new to,this.matrixWorld=new to,this.matrixAutoUpdate=Ro.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Ro.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new po,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return go.setFromAxisAngle(e,t),this.quaternion.multiply(go),this}rotateOnWorldAxis(e,t){return go.setFromAxisAngle(e,t),this.quaternion.premultiply(go),this}rotateX(e){return this.rotateOnAxis(_o,e)}rotateY(e){return this.rotateOnAxis(Eo,e)}rotateZ(e){return this.rotateOnAxis(So,e)}translateOnAxis(e,t){return mo.copy(e).applyQuaternion(this.quaternion),this.position.add(mo.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(_o,e)}translateY(e){return this.translateOnAxis(Eo,e)}translateZ(e){return this.translateOnAxis(So,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(vo.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?yo.copy(e):yo.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),bo.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?vo.lookAt(bo,yo,this.up):vo.lookAt(yo,bo,this.up),this.quaternion.setFromRotationMatrix(vo),r&&(vo.extractRotation(r.matrixWorld),go.setFromRotationMatrix(vo),this.quaternion.premultiply(go.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(Bi("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Mo),Ao.child=e,this.dispatchEvent(Ao),Ao.child=null):Bi("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(To),Co.child=e,this.dispatchEvent(Co),Co.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),vo.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),vo.multiply(e.parent.matrixWorld)),e.applyMatrix4(vo),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Mo),Ao.child=e,this.dispatchEvent(Ao),Ao.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const r=this.children;for(let i=0,a=r.length;i<a;i++)r[i].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bo,e,xo),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bo,wo,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(e=>({...e,boundingBox:e.boundingBox?e.boundingBox.toJSON():void 0,boundingSphere:e.boundingSphere?e.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(e=>({...e})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),null!==this._colorsTexture&&(r.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(r.boundingSphere=this.boundingSphere.toJSON()),null!==this.boundingBox&&(r.boundingBox=this.boundingBox.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=a(e.geometries),r=a(e.materials),i=a(e.textures),o=a(e.images),s=a(e.shapes),l=a(e.skeletons),c=a(e.animations),u=a(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),o.length>0&&(n.images=o),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=r,n;function a(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}}Ro.DEFAULT_UP=new na(0,1,0),Ro.DEFAULT_MATRIX_AUTO_UPDATE=!0,Ro.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Po=new na,ko=new na,Io=new na,Lo=new na,No=new na,Do=new na,Uo=new na,Oo=new na,Fo=new na,zo=new na,Bo=new wa,Ho=new wa,Vo=new wa;class jo{constructor(e=new na,t=new na,n=new na){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),Po.subVectors(e,t),r.cross(Po);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){Po.subVectors(r,t),ko.subVectors(n,t),Io.subVectors(e,t);const a=Po.dot(Po),o=Po.dot(ko),s=Po.dot(Io),l=ko.dot(ko),c=ko.dot(Io),u=a*l-o*o;if(0===u)return i.set(0,0,0),null;const d=1/u,h=(l*s-o*c)*d,p=(a*c-o*s)*d;return i.set(1-h-p,p,h)}static containsPoint(e,t,n,r){return null!==this.getBarycoord(e,t,n,r,Lo)&&Lo.x>=0&&Lo.y>=0&&Lo.x+Lo.y<=1}static getInterpolation(e,t,n,r,i,a,o,s){return null===this.getBarycoord(e,t,n,r,Lo)?(s.x=0,s.y=0,"z"in s&&(s.z=0),"w"in s&&(s.w=0),null):(s.setScalar(0),s.addScaledVector(i,Lo.x),s.addScaledVector(a,Lo.y),s.addScaledVector(o,Lo.z),s)}static getInterpolatedAttribute(e,t,n,r,i,a){return Bo.setScalar(0),Ho.setScalar(0),Vo.setScalar(0),Bo.fromBufferAttribute(e,t),Ho.fromBufferAttribute(e,n),Vo.fromBufferAttribute(e,r),a.setScalar(0),a.addScaledVector(Bo,i.x),a.addScaledVector(Ho,i.y),a.addScaledVector(Vo,i.z),a}static isFrontFacing(e,t,n,r){return Po.subVectors(n,t),ko.subVectors(e,t),Po.cross(ko).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Po.subVectors(this.c,this.b),ko.subVectors(this.a,this.b),.5*Po.cross(ko).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return jo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return jo.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,i){return jo.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return jo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return jo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let a,o;No.subVectors(r,n),Do.subVectors(i,n),Oo.subVectors(e,n);const s=No.dot(Oo),l=Do.dot(Oo);if(s<=0&&l<=0)return t.copy(n);Fo.subVectors(e,r);const c=No.dot(Fo),u=Do.dot(Fo);if(c>=0&&u<=c)return t.copy(r);const d=s*u-c*l;if(d<=0&&s>=0&&c<=0)return a=s/(s-c),t.copy(n).addScaledVector(No,a);zo.subVectors(e,i);const h=No.dot(zo),p=Do.dot(zo);if(p>=0&&h<=p)return t.copy(i);const f=h*l-s*p;if(f<=0&&l>=0&&p<=0)return o=l/(l-p),t.copy(n).addScaledVector(Do,o);const m=c*p-h*u;if(m<=0&&u-c>=0&&h-p>=0)return Uo.subVectors(i,r),o=(u-c)/(u-c+(h-p)),t.copy(r).addScaledVector(Uo,o);const g=1/(m+f+d);return a=f*g,o=d*g,t.copy(n).addScaledVector(No,a).addScaledVector(Do,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Wo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Go={h:0,s:0,l:0},Xo={h:0,s:0,l:0};function qo(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class Yo{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=zr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,ua.colorSpaceToWorking(this,t),this}setRGB(e,t,n,r=ua.workingColorSpace){return this.r=e,this.g=t,this.b=n,ua.colorSpaceToWorking(this,r),this}setHSL(e,t,n,r=ua.workingColorSpace){if(e=$i(e,1),t=Yi(t,0,1),n=Yi(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=qo(i,r,e+1/3),this.g=qo(i,r,e),this.b=qo(i,r,e-1/3)}return ua.colorSpaceToWorking(this,r),this}setStyle(e,t=zr){function n(t){void 0!==t&&parseFloat(t)<1&&zi("Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let i;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,t);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,t);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,t);break;default:zi("Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const n=r[1],i=n.length;if(3===i)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,t);if(6===i)return this.setHex(parseInt(n,16),t);zi("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=zr){const n=Wo[e.toLowerCase()];return void 0!==n?this.setHex(n,t):zi("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=da(e.r),this.g=da(e.g),this.b=da(e.b),this}copyLinearToSRGB(e){return this.r=ha(e.r),this.g=ha(e.g),this.b=ha(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=zr){return ua.workingToColorSpace($o.copy(this),e),65536*Math.round(Yi(255*$o.r,0,255))+256*Math.round(Yi(255*$o.g,0,255))+Math.round(Yi(255*$o.b,0,255))}getHexString(e=zr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ua.workingColorSpace){ua.workingToColorSpace($o.copy(this),t);const n=$o.r,r=$o.g,i=$o.b,a=Math.max(n,r,i),o=Math.min(n,r,i);let s,l;const c=(o+a)/2;if(o===a)s=0,l=0;else{const e=a-o;switch(l=c<=.5?e/(a+o):e/(2-a-o),a){case n:s=(r-i)/e+(r<i?6:0);break;case r:s=(i-n)/e+2;break;case i:s=(n-r)/e+4}s/=6}return e.h=s,e.s=l,e.l=c,e}getRGB(e,t=ua.workingColorSpace){return ua.workingToColorSpace($o.copy(this),t),e.r=$o.r,e.g=$o.g,e.b=$o.b,e}getStyle(e=zr){ua.workingToColorSpace($o.copy(this),e);const t=$o.r,n=$o.g,r=$o.b;return e!==zr?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(e,t,n){return this.getHSL(Go),this.setHSL(Go.h+e,Go.s+t,Go.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Go),e.getHSL(Xo);const n=Ki(Go.h,Xo.h,t),r=Ki(Go.s,Xo.s,t),i=Ki(Go.l,Xo.l,t);return this.setHSL(n,r,i),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const $o=new Yo;Yo.NAMES=Wo;let Ko=0;class Zo extends Vi{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Ko++}),this.uuid=qi(),this.name="",this.type="Material",this.blending=it,this.side=et,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=yt,this.blendDst=bt,this.blendEquation=ct,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Yo(0,0,0),this.blendAlpha=0,this.depthFunc=It,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ii,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Wr,this.stencilZFail=Wr,this.stencilZPass=Wr,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){zi(`Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:zi(`Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==it&&(n.blending=this.blending),this.side!==et&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==yt&&(n.blendSrc=this.blendSrc),this.blendDst!==bt&&(n.blendDst=this.blendDst),this.blendEquation!==ct&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==It&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==ii&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Wr&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Wr&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Wr&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class Jo extends Zo{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Yo(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ho,this.combine=Ot,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Qo=es();function es(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),i=new Uint32Array(512);for(let e=0;e<256;++e){const t=e-127;t<-27?(r[e]=0,r[256|e]=32768,i[e]=24,i[256|e]=24):t<-14?(r[e]=1024>>-t-14,r[256|e]=1024>>-t-14|32768,i[e]=-t-1,i[256|e]=-t-1):t<=15?(r[e]=t+15<<10,r[256|e]=t+15<<10|32768,i[e]=13,i[256|e]=13):t<128?(r[e]=31744,r[256|e]=64512,i[e]=24,i[256|e]=24):(r[e]=31744,r[256|e]=64512,i[e]=13,i[256|e]=13)}const a=new Uint32Array(2048),o=new Uint32Array(64),s=new Uint32Array(64);for(let e=1;e<1024;++e){let t=e<<13,n=0;for(;!(8388608&t);)t<<=1,n-=8388608;t&=-8388609,n+=947912704,a[e]=t|n}for(let e=1024;e<2048;++e)a[e]=939524096+(e-1024<<13);for(let e=1;e<31;++e)o[e]=e<<23;o[31]=1199570944,o[32]=2147483648;for(let e=33;e<63;++e)o[e]=2147483648+(e-32<<23);o[63]=3347054592;for(let e=1;e<64;++e)32!==e&&(s[e]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:a,exponentTable:o,offsetTable:s}}function ts(e){Math.abs(e)>65504&&zi("DataUtils.toHalfFloat(): Value out of range."),e=Yi(e,-65504,65504),Qo.floatView[0]=e;const t=Qo.uint32View[0],n=t>>23&511;return Qo.baseTable[n]+((8388607&t)>>Qo.shiftTable[n])}function ns(e){const t=e>>10;return Qo.uint32View[0]=Qo.mantissaTable[Qo.offsetTable[t]+(1023&e)]+Qo.exponentTable[t],Qo.floatView[0]}class rs{static toHalfFloat(e){return ts(e)}static fromHalfFloat(e){return ns(e)}}const is=new na,as=new ea;let os=0;class ss{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:os++}),this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=pi,this.updateRanges=[],this.gpuType=_n,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)as.fromBufferAttribute(this,t),as.applyMatrix3(e),this.setXY(t,as.x,as.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)is.fromBufferAttribute(this,t),is.applyMatrix3(e),this.setXYZ(t,is.x,is.y,is.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)is.fromBufferAttribute(this,t),is.applyMatrix4(e),this.setXYZ(t,is.x,is.y,is.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)is.fromBufferAttribute(this,t),is.applyNormalMatrix(e),this.setXYZ(t,is.x,is.y,is.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)is.fromBufferAttribute(this,t),is.transformDirection(e),this.setXYZ(t,is.x,is.y,is.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Zi(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Ji(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Zi(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ji(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Zi(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ji(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Zi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ji(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Zi(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ji(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Ji(t,this.array),n=Ji(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Ji(t,this.array),n=Ji(n,this.array),r=Ji(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=Ji(t,this.array),n=Ji(n,this.array),r=Ji(r,this.array),i=Ji(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==pi&&(e.usage=this.usage),e}}class ls extends ss{constructor(e,t,n){super(new Int8Array(e),t,n)}}class cs extends ss{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class us extends ss{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class ds extends ss{constructor(e,t,n){super(new Int16Array(e),t,n)}}class hs extends ss{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class ps extends ss{constructor(e,t,n){super(new Int32Array(e),t,n)}}class fs extends ss{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class ms extends ss{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=ns(this.array[e*this.itemSize]);return this.normalized&&(t=Zi(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ji(t,this.array)),this.array[e*this.itemSize]=ts(t),this}getY(e){let t=ns(this.array[e*this.itemSize+1]);return this.normalized&&(t=Zi(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ji(t,this.array)),this.array[e*this.itemSize+1]=ts(t),this}getZ(e){let t=ns(this.array[e*this.itemSize+2]);return this.normalized&&(t=Zi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ji(t,this.array)),this.array[e*this.itemSize+2]=ts(t),this}getW(e){let t=ns(this.array[e*this.itemSize+3]);return this.normalized&&(t=Zi(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ji(t,this.array)),this.array[e*this.itemSize+3]=ts(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Ji(t,this.array),n=Ji(n,this.array)),this.array[e+0]=ts(t),this.array[e+1]=ts(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Ji(t,this.array),n=Ji(n,this.array),r=Ji(r,this.array)),this.array[e+0]=ts(t),this.array[e+1]=ts(n),this.array[e+2]=ts(r),this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=Ji(t,this.array),n=Ji(n,this.array),r=Ji(r,this.array),i=Ji(i,this.array)),this.array[e+0]=ts(t),this.array[e+1]=ts(n),this.array[e+2]=ts(r),this.array[e+3]=ts(i),this}}class gs extends ss{constructor(e,t,n){super(new Float32Array(e),t,n)}}let vs=0;const ys=new to,bs=new Ro,xs=new na,ws=new Ca,_s=new Ca,Es=new na;class Ss extends Vi{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:vs++}),this.uuid=qi(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Ri(e)?fs:hs)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new aa).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return ys.makeRotationFromQuaternion(e),this.applyMatrix4(ys),this}rotateX(e){return ys.makeRotationX(e),this.applyMatrix4(ys),this}rotateY(e){return ys.makeRotationY(e),this.applyMatrix4(ys),this}rotateZ(e){return ys.makeRotationZ(e),this.applyMatrix4(ys),this}translate(e,t,n){return ys.makeTranslation(e,t,n),this.applyMatrix4(ys),this}scale(e,t,n){return ys.makeScale(e,t,n),this.applyMatrix4(ys),this}lookAt(e){return bs.lookAt(e),bs.updateMatrix(),this.applyMatrix4(bs.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(xs).negate(),this.translate(xs.x,xs.y,xs.z),this}setFromPoints(e){const t=this.getAttribute("position");if(void 0===t){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}this.setAttribute("position",new gs(t,3))}else{const n=Math.min(e.length,t.count);for(let r=0;r<n;r++){const n=e[r];t.setXYZ(r,n.x,n.y,n.z||0)}e.length>t.count&&zi("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ca);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return Bi("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new na(-1/0,-1/0,-1/0),new na(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];ws.setFromBufferAttribute(n),this.morphTargetsRelative?(Es.addVectors(this.boundingBox.min,ws.min),this.boundingBox.expandByPoint(Es),Es.addVectors(this.boundingBox.max,ws.max),this.boundingBox.expandByPoint(Es)):(this.boundingBox.expandByPoint(ws.min),this.boundingBox.expandByPoint(ws.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&Bi('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Xa);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return Bi("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new na,1/0);if(e){const n=this.boundingSphere.center;if(ws.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];_s.setFromBufferAttribute(n),this.morphTargetsRelative?(Es.addVectors(ws.min,_s.min),ws.expandByPoint(Es),Es.addVectors(ws.max,_s.max),ws.expandByPoint(Es)):(ws.expandByPoint(_s.min),ws.expandByPoint(_s.max))}ws.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)Es.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(Es));if(t)for(let i=0,a=t.length;i<a;i++){const a=t[i],o=this.morphTargetsRelative;for(let t=0,i=a.count;t<i;t++)Es.fromBufferAttribute(a,t),o&&(xs.fromBufferAttribute(e,t),Es.add(xs)),r=Math.max(r,n.distanceToSquared(Es))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&Bi('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void Bi("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.position,r=t.normal,i=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new ss(new Float32Array(4*n.count),4));const a=this.getAttribute("tangent"),o=[],s=[];for(let e=0;e<n.count;e++)o[e]=new na,s[e]=new na;const l=new na,c=new na,u=new na,d=new ea,h=new ea,p=new ea,f=new na,m=new na;function g(e,t,r){l.fromBufferAttribute(n,e),c.fromBufferAttribute(n,t),u.fromBufferAttribute(n,r),d.fromBufferAttribute(i,e),h.fromBufferAttribute(i,t),p.fromBufferAttribute(i,r),c.sub(l),u.sub(l),h.sub(d),p.sub(d);const a=1/(h.x*p.y-p.x*h.y);isFinite(a)&&(f.copy(c).multiplyScalar(p.y).addScaledVector(u,-h.y).multiplyScalar(a),m.copy(u).multiplyScalar(h.x).addScaledVector(c,-p.x).multiplyScalar(a),o[e].add(f),o[t].add(f),o[r].add(f),s[e].add(m),s[t].add(m),s[r].add(m))}let v=this.groups;0===v.length&&(v=[{start:0,count:e.count}]);for(let t=0,n=v.length;t<n;++t){const n=v[t],r=n.start;for(let t=r,i=r+n.count;t<i;t+=3)g(e.getX(t+0),e.getX(t+1),e.getX(t+2))}const y=new na,b=new na,x=new na,w=new na;function _(e){x.fromBufferAttribute(r,e),w.copy(x);const t=o[e];y.copy(t),y.sub(x.multiplyScalar(x.dot(t))).normalize(),b.crossVectors(w,t);const n=b.dot(s[e])<0?-1:1;a.setXYZW(e,y.x,y.y,y.z,n)}for(let t=0,n=v.length;t<n;++t){const n=v[t],r=n.start;for(let t=r,i=r+n.count;t<i;t+=3)_(e.getX(t+0)),_(e.getX(t+1)),_(e.getX(t+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new ss(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new na,i=new na,a=new na,o=new na,s=new na,l=new na,c=new na,u=new na;if(e)for(let d=0,h=e.count;d<h;d+=3){const h=e.getX(d+0),p=e.getX(d+1),f=e.getX(d+2);r.fromBufferAttribute(t,h),i.fromBufferAttribute(t,p),a.fromBufferAttribute(t,f),c.subVectors(a,i),u.subVectors(r,i),c.cross(u),o.fromBufferAttribute(n,h),s.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),o.add(c),s.add(c),l.add(c),n.setXYZ(h,o.x,o.y,o.z),n.setXYZ(p,s.x,s.y,s.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,o=t.count;e<o;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),c.subVectors(a,i),u.subVectors(r,i),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Es.fromBufferAttribute(e,t),Es.normalize(),e.setXYZ(t,Es.x,Es.y,Es.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r);let o=0,s=0;for(let i=0,l=t.length;i<l;i++){o=e.isInterleavedBufferAttribute?t[i]*e.data.stride+e.offset:t[i]*r;for(let e=0;e<r;e++)a[s++]=n[o++]}return new ss(a,r,i)}if(null===this.index)return zi("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ss,n=this.index.array,r=this.attributes;for(const i in r){const a=e(r[i],n);t.setAttribute(i,a)}const i=this.morphAttributes;for(const r in i){const a=[],o=i[r];for(let t=0,r=o.length;t<r;t++){const r=e(o[t],n);a.push(r)}t.morphAttributes[r]=a}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let e=0,n=a.length;e<n;e++){const n=a[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const r=n[t];e.data.attributes[t]=r.toJSON(e.data)}const r={};let i=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],a=[];for(let t=0,r=n.length;t<r;t++){const r=n[t];a.push(r.toJSON(e.data))}a.length>0&&(r[t]=a,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return null!==o&&(e.data.boundingSphere=o.toJSON()),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone());const r=e.attributes;for(const e in r){const n=r[e];this.setAttribute(e,n.clone(t))}const i=e.morphAttributes;for(const e in i){const n=[],r=i[e];for(let e=0,i=r.length;e<i;e++)n.push(r[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let e=0,t=a.length;e<t;e++){const t=a[e];this.addGroup(t.start,t.count,t.materialIndex)}const o=e.boundingBox;null!==o&&(this.boundingBox=o.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Ms=new to,Ts=new eo,As=new Xa,Cs=new na,Rs=new na,Ps=new na,ks=new na,Is=new na,Ls=new na,Ns=new na,Ds=new na;class Us extends Ro{constructor(e=new Ss,t=new Jo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(i&&o){Ls.set(0,0,0);for(let n=0,r=i.length;n<r;n++){const r=o[n],s=i[n];0!==r&&(Is.fromBufferAttribute(s,e),a?Ls.addScaledVector(Is,r):Ls.addScaledVector(Is.sub(t),r))}t.add(Ls)}return t}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),As.copy(n.boundingSphere),As.applyMatrix4(i),Ts.copy(e.ray).recast(e.near),!1===As.containsPoint(Ts.origin)){if(null===Ts.intersectSphere(As,Cs))return;if(Ts.origin.distanceToSquared(Cs)>(e.far-e.near)**2)return}Ms.copy(i).invert(),Ts.copy(e.ray).applyMatrix4(Ms),null!==n.boundingBox&&!1===Ts.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,Ts)}}_computeIntersections(e,t,n){let r;const i=this.geometry,a=this.material,o=i.index,s=i.attributes.position,l=i.attributes.uv,c=i.attributes.uv1,u=i.attributes.normal,d=i.groups,h=i.drawRange;if(null!==o)if(Array.isArray(a))for(let i=0,s=d.length;i<s;i++){const s=d[i],p=a[s.materialIndex];for(let i=Math.max(s.start,h.start),a=Math.min(o.count,Math.min(s.start+s.count,h.start+h.count));i<a;i+=3)r=Os(this,p,e,n,l,c,u,o.getX(i),o.getX(i+1),o.getX(i+2)),r&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=s.materialIndex,t.push(r))}else for(let i=Math.max(0,h.start),s=Math.min(o.count,h.start+h.count);i<s;i+=3)r=Os(this,a,e,n,l,c,u,o.getX(i),o.getX(i+1),o.getX(i+2)),r&&(r.faceIndex=Math.floor(i/3),t.push(r));else if(void 0!==s)if(Array.isArray(a))for(let i=0,o=d.length;i<o;i++){const o=d[i],p=a[o.materialIndex];for(let i=Math.max(o.start,h.start),a=Math.min(s.count,Math.min(o.start+o.count,h.start+h.count));i<a;i+=3)r=Os(this,p,e,n,l,c,u,i,i+1,i+2),r&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=o.materialIndex,t.push(r))}else for(let i=Math.max(0,h.start),o=Math.min(s.count,h.start+h.count);i<o;i+=3)r=Os(this,a,e,n,l,c,u,i,i+1,i+2),r&&(r.faceIndex=Math.floor(i/3),t.push(r))}}function Os(e,t,n,r,i,a,o,s,l,c){e.getVertexPosition(s,Rs),e.getVertexPosition(l,Ps),e.getVertexPosition(c,ks);const u=function(e,t,n,r,i,a,o,s){let l;if(l=t.side===tt?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,t.side===et,s),null===l)return null;Ds.copy(s),Ds.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(Ds);return c<n.near||c>n.far?null:{distance:c,point:Ds.clone(),object:e}}(e,t,n,r,Rs,Ps,ks,Ns);if(u){const e=new na;jo.getBarycoord(Ns,Rs,Ps,ks,e),i&&(u.uv=jo.getInterpolatedAttribute(i,s,l,c,e,new ea)),a&&(u.uv1=jo.getInterpolatedAttribute(a,s,l,c,e,new ea)),o&&(u.normal=jo.getInterpolatedAttribute(o,s,l,c,e,new na),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const t={a:s,b:l,c,normal:new na,materialIndex:0};jo.getNormal(Rs,Ps,ks,t.normal),u.face=t,u.barycoord=e}return u}class Fs extends Ss{constructor(e=1,t=1,n=1,r=1,i=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};const o=this;r=Math.floor(r),i=Math.floor(i),a=Math.floor(a);const s=[],l=[],c=[],u=[];let d=0,h=0;function p(e,t,n,r,i,a,p,f,m,g,v){const y=a/m,b=p/g,x=a/2,w=p/2,_=f/2,E=m+1,S=g+1;let M=0,T=0;const A=new na;for(let a=0;a<S;a++){const o=a*b-w;for(let s=0;s<E;s++){const d=s*y-x;A[e]=d*r,A[t]=o*i,A[n]=_,l.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=f>0?1:-1,c.push(A.x,A.y,A.z),u.push(s/m),u.push(1-a/g),M+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){const n=d+t+E*e,r=d+t+E*(e+1),i=d+(t+1)+E*(e+1),a=d+(t+1)+E*e;s.push(n,r,a),s.push(r,i,a),T+=6}o.addGroup(h,T,v),h+=T,d+=M}p("z","y","x",-1,-1,n,t,e,a,i,0),p("z","y","x",1,-1,n,t,-e,a,i,1),p("x","z","y",1,1,e,n,t,r,a,2),p("x","z","y",1,-1,e,n,-t,r,a,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new gs(l,3)),this.setAttribute("normal",new gs(c,3)),this.setAttribute("uv",new gs(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fs(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function zs(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(zi("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function Bs(e){const t={};for(let n=0;n<e.length;n++){const r=zs(e[n]);for(const e in r)t[e]=r[e]}return t}function Hs(e){const t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:ua.workingColorSpace}const Vs={clone:zs,merge:Bs};class js extends Zo{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=zs(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Ws extends Ro{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new to,this.projectionMatrix=new to,this.projectionMatrixInverse=new to,this.coordinateSystem=Si,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const Gs=new na,Xs=new ea,qs=new ea;class Ys extends Ws{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Xi*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Gi*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Xi*Math.atan(Math.tan(.5*Gi*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Gs.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Gs.x,Gs.y).multiplyScalar(-e/Gs.z),Gs.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Gs.x,Gs.y).multiplyScalar(-e/Gs.z)}getViewSize(e,t){return this.getViewBounds(e,Xs,qs),t.subVectors(qs,Xs)}setViewOffset(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Gi*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const a=this.view;if(null!==this.view&&this.view.enabled){const e=a.fullWidth,o=a.fullHeight;i+=a.offsetX*r/e,t-=a.offsetY*n/o,r*=a.width/e,n*=a.height/o}const o=this.filmOffset;0!==o&&(i+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const $s=-90;class Ks extends Ro{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Ys($s,1,e,t);r.layers=this.layers,this.add(r);const i=new Ys($s,1,e,t);i.layers=this.layers,this.add(i);const a=new Ys($s,1,e,t);a.layers=this.layers,this.add(a);const o=new Ys($s,1,e,t);o.layers=this.layers,this.add(o);const s=new Ys($s,1,e,t);s.layers=this.layers,this.add(s);const l=new Ys($s,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,i,a,o,s]=t;for(const e of t)this.remove(e);if(e===Si)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),s.up.set(0,1,0),s.lookAt(0,0,-1);else{if(e!==Mi)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),s.up.set(0,-1,0),s.lookAt(0,0,-1)}for(const e of t)this.add(e),e.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[i,a,o,s,l,c]=this.children,u=e.getRenderTarget(),d=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,i),e.setRenderTarget(n,1,r),e.render(t,a),e.setRenderTarget(n,2,r),e.render(t,o),e.setRenderTarget(n,3,r),e.render(t,s),e.setRenderTarget(n,4,r),e.render(t,l),n.texture.generateMipmaps=f,e.setRenderTarget(n,5,r),e.render(t,c),e.setRenderTarget(u,d,h),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class Zs extends xa{constructor(e=[],t=Zt,n,r,i,a,o,s,l,c){super(e,t,n,r,i,a,o,s,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Js extends Ea{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new Zs(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new Fs(5,5,5),o=new js({name:"CubemapFromEquirect",uniforms:zs(n),vertexShader:r,fragmentShader:i,side:tt,blending:rt});o.uniforms.tEquirect.value=t;const s=new Us(a,o),l=t.minFilter;return t.minFilter===fn&&(t.minFilter=dn),new Ks(1,10,this).update(e,s),t.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}clear(e,t=!0,n=!0,r=!0){const i=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(i)}}class Qs extends Ro{constructor(){super(),this.isGroup=!0,this.type="Group"}}const el={type:"move"};class tl{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Qs,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Qs,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new na,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new na),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Qs,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new na,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new na),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,a=null;const o=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){a=!0;for(const r of e.hand.values()){const e=t.getJointPose(r,n),i=this._getHandJoint(l,r);null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=e.radius),i.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],o=r.position.distanceTo(i.position),s=.02,c=.005;l.inputState.pinching&&o>s+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&o<=s-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));null!==o&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(el)))}return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==a),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new Qs;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class nl{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Yo(e),this.density=t}clone(){return new nl(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class rl{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Yo(e),this.near=t,this.far=n}clone(){return new rl(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class il extends Ro{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ho,this.environmentIntensity=1,this.environmentRotation=new ho,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class al{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=pi,this.updateRanges=[],this.version=0,this.uuid=qi()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=qi()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=qi()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ol=new na;class sl{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)ol.fromBufferAttribute(this,t),ol.applyMatrix4(e),this.setXYZ(t,ol.x,ol.y,ol.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ol.fromBufferAttribute(this,t),ol.applyNormalMatrix(e),this.setXYZ(t,ol.x,ol.y,ol.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ol.fromBufferAttribute(this,t),ol.transformDirection(e),this.setXYZ(t,ol.x,ol.y,ol.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Zi(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Ji(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=Ji(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Ji(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Ji(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Ji(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Zi(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Zi(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Zi(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Zi(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ji(t,this.array),n=Ji(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ji(t,this.array),n=Ji(n,this.array),r=Ji(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ji(t,this.array),n=Ji(n,this.array),r=Ji(r,this.array),i=Ji(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){Fi("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new ss(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new sl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){Fi("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class ll extends Zo{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Yo(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let cl;const ul=new na,dl=new na,hl=new na,pl=new ea,fl=new ea,ml=new to,gl=new na,vl=new na,yl=new na,bl=new ea,xl=new ea,wl=new ea;class _l extends Ro{constructor(e=new ll){if(super(),this.isSprite=!0,this.type="Sprite",void 0===cl){cl=new Ss;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new al(e,5);cl.setIndex([0,1,2,0,2,3]),cl.setAttribute("position",new sl(t,3,0,!1)),cl.setAttribute("uv",new sl(t,2,3,!1))}this.geometry=cl,this.material=e,this.center=new ea(.5,.5),this.count=1}raycast(e,t){null===e.camera&&Bi('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),dl.setFromMatrixScale(this.matrixWorld),ml.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),hl.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&dl.multiplyScalar(-hl.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const a=this.center;El(gl.set(-.5,-.5,0),hl,a,dl,r,i),El(vl.set(.5,-.5,0),hl,a,dl,r,i),El(yl.set(.5,.5,0),hl,a,dl,r,i),bl.set(0,0),xl.set(1,0),wl.set(1,1);let o=e.ray.intersectTriangle(gl,vl,yl,!1,ul);if(null===o&&(El(vl.set(-.5,.5,0),hl,a,dl,r,i),xl.set(0,1),o=e.ray.intersectTriangle(gl,yl,vl,!1,ul),null===o))return;const s=e.ray.origin.distanceTo(ul);s<e.near||s>e.far||t.push({distance:s,point:ul.clone(),uv:jo.getInterpolation(ul,gl,vl,yl,bl,xl,wl,new ea),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function El(e,t,n,r,i,a){pl.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(fl.x=a*pl.x-i*pl.y,fl.y=i*pl.x+a*pl.y):fl.copy(pl),e.copy(t),e.x+=fl.x,e.y+=fl.y,e.applyMatrix4(ml)}const Sl=new na,Ml=new na;class Tl extends Ro{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let e=0,n=t.length;e<n;e++){const n=t[e];this.addLevel(n.object.clone(),n.distance,n.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const r=this.levels;let i;for(i=0;i<r.length&&!(t<r[i].distance);i++);return r.splice(i,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const e=t.splice(n,1);return this.remove(e[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Sl.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(Sl);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Sl.setFromMatrixPosition(e.matrixWorld),Ml.setFromMatrixPosition(this.matrixWorld);const n=Sl.distanceTo(Ml)/e.zoom;let r,i;for(t[0].object.visible=!0,r=1,i=t.length;r<i;r++){let e=t[r].distance;if(t[r].object.visible&&(e-=e*t[r].hysteresis),!(n>=e))break;t[r-1].object.visible=!1,t[r].object.visible=!0}for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let e=0,r=n.length;e<r;e++){const r=n[e];t.object.levels.push({object:r.object.uuid,distance:r.distance,hysteresis:r.hysteresis})}return t}}const Al=new na,Cl=new wa,Rl=new wa,Pl=new na,kl=new to,Il=new na,Ll=new Xa,Nl=new to,Dl=new eo;class Ul extends Us{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Yt,this.bindMatrix=new to,this.bindMatrixInverse=new to,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new Ca),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let e=0;e<t.count;e++)this.getVertexPosition(e,Il),this.boundingBox.expandByPoint(Il)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Xa),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let e=0;e<t.count;e++)this.getVertexPosition(e,Il),this.boundingSphere.expandByPoint(Il)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),Ll.copy(this.boundingSphere),Ll.applyMatrix4(r),!1!==e.ray.intersectsSphere(Ll)&&(Nl.copy(r).invert(),Dl.copy(e.ray).applyMatrix4(Nl),null!==this.boundingBox&&!1===Dl.intersectsBox(this.boundingBox)||this._computeIntersections(e,t,Dl)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new wa,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Yt?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===$t?this.bindMatrixInverse.copy(this.bindMatrix).invert():zi("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;Cl.fromBufferAttribute(r.attributes.skinIndex,e),Rl.fromBufferAttribute(r.attributes.skinWeight,e),Al.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const r=Rl.getComponent(e);if(0!==r){const i=Cl.getComponent(e);kl.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(Pl.copy(Al).applyMatrix4(kl),r)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Ol extends Ro{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Fl extends xa{constructor(e=null,t=1,n=1,r,i,a,o,s,l=on,c=on,u,d){super(null,a,o,s,l,c,r,i,u,d),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const zl=new to,Bl=new to;class Hl{constructor(e=[],t=[]){this.uuid=qi(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){zi("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new to)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new to;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let r=0,i=e.length;r<i;r++){const i=e[r]?e[r].matrixWorld:Bl;zl.multiplyMatrices(i,t[r]),zl.toArray(n,16*r)}null!==r&&(r.needsUpdate=!0)}clone(){return new Hl(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Fl(t,e,e,kn,_n);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let i=t[r];void 0===i&&(zi("Skeleton: No bone found with UUID:",r),i=new Ol),this.bones.push(i),this.boneInverses.push((new to).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const a=n[r];e.boneInverses.push(a.toArray())}return e}}class Vl extends ss{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const jl=new to,Wl=new to,Gl=[],Xl=new Ca,ql=new to,Yl=new Us,$l=new Xa;class Kl extends Us{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Vl(new Float32Array(16*n),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let e=0;e<n;e++)this.setMatrixAt(e,ql)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new Ca),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,jl),Xl.copy(e.boundingBox).applyMatrix4(jl),this.boundingBox.union(Xl)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new Xa),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,jl),$l.copy(e.boundingSphere).applyMatrix4(jl),this.boundingSphere.union($l)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.morphTexture&&(this.morphTexture=e.morphTexture.clone()),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}getMorphAt(e,t){const n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,i=e*(n.length+1)+1;for(let e=0;e<n.length;e++)n[e]=r[i+e]}raycast(e,t){const n=this.matrixWorld,r=this.count;if(Yl.geometry=this.geometry,Yl.material=this.material,void 0!==Yl.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),$l.copy(this.boundingSphere),$l.applyMatrix4(n),!1!==e.ray.intersectsSphere($l)))for(let i=0;i<r;i++){this.getMatrixAt(i,jl),Wl.multiplyMatrices(n,jl),Yl.matrixWorld=Wl,Yl.raycast(e,Gl);for(let e=0,n=Gl.length;e<n;e++){const n=Gl[e];n.instanceId=i,n.object=this,t.push(n)}Gl.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Vl(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}setMorphAt(e,t){const n=t.morphTargetInfluences,r=n.length+1;null===this.morphTexture&&(this.morphTexture=new Fl(new Float32Array(r*this.count),r,this.count,Nn,_n));const i=this.morphTexture.source.data.data;let a=0;for(let e=0;e<n.length;e++)a+=n[e];const o=this.geometry.morphTargetsRelative?1:1-a,s=r*e;i[s]=o,i.set(n,s+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null)}}const Zl=new na,Jl=new na,Ql=new aa;class ec{constructor(e=new na(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=Zl.subVectors(n,t).cross(Jl.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(Zl),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Ql.getNormalMatrix(e),r=this.coplanarPoint(Zl).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const tc=new Xa,nc=new ea(.5,.5),rc=new na;class ic{constructor(e=new ec,t=new ec,n=new ec,r=new ec,i=new ec,a=new ec){this.planes=[e,t,n,r,i,a]}set(e,t,n,r,i,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Si,n=!1){const r=this.planes,i=e.elements,a=i[0],o=i[1],s=i[2],l=i[3],c=i[4],u=i[5],d=i[6],h=i[7],p=i[8],f=i[9],m=i[10],g=i[11],v=i[12],y=i[13],b=i[14],x=i[15];if(r[0].setComponents(l-a,h-c,g-p,x-v).normalize(),r[1].setComponents(l+a,h+c,g+p,x+v).normalize(),r[2].setComponents(l+o,h+u,g+f,x+y).normalize(),r[3].setComponents(l-o,h-u,g-f,x-y).normalize(),n)r[4].setComponents(s,d,m,b).normalize(),r[5].setComponents(l-s,h-d,g-m,x-b).normalize();else if(r[4].setComponents(l-s,h-d,g-m,x-b).normalize(),t===Si)r[5].setComponents(l+s,h+d,g+m,x+b).normalize();else{if(t!==Mi)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);r[5].setComponents(s,d,m,b).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),tc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),tc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(tc)}intersectsSprite(e){tc.center.set(0,0,0);const t=nc.distanceTo(e.center);return tc.radius=.7071067811865476+t,tc.applyMatrix4(e.matrixWorld),this.intersectsSphere(tc)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(rc.x=r.normal.x>0?e.max.x:e.min.x,rc.y=r.normal.y>0?e.max.y:e.min.y,rc.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(rc)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}const ac=new to,oc=new ic;class sc{constructor(){this.coordinateSystem=Si}intersectsObject(e,t){if(!t.isArrayCamera||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(ac.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),oc.setFromProjectionMatrix(ac,r.coordinateSystem,r.reversedDepth),oc.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(ac.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),oc.setFromProjectionMatrix(ac,r.coordinateSystem,r.reversedDepth),oc.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(ac.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),oc.setFromProjectionMatrix(ac,r.coordinateSystem,r.reversedDepth),oc.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(ac.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),oc.setFromProjectionMatrix(ac,r.coordinateSystem,r.reversedDepth),oc.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(ac.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),oc.setFromProjectionMatrix(ac,r.coordinateSystem,r.reversedDepth),oc.containsPoint(e))return!0}return!1}clone(){return new sc}}function lc(e,t){return e-t}function cc(e,t){return e.z-t.z}function uc(e,t){return t.z-e.z}class dc{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,r){const i=this.pool,a=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1,index:-1});const o=i[this.index];a.push(o),this.index++,o.start=e,o.count=t,o.z=n,o.index=r}reset(){this.list.length=0,this.index=0}}const hc=new to,pc=new Yo(1,1,1),fc=new ic,mc=new sc,gc=new Ca,vc=new Xa,yc=new na,bc=new na,xc=new na,wc=new dc,_c=new Us,Ec=[];function Sc(e,t,n=0){const r=t.itemSize;if(e.isInterleavedBufferAttribute||e.array.constructor!==t.array.constructor){const i=e.count;for(let a=0;a<i;a++)for(let i=0;i<r;i++)t.setComponent(a+n,i,e.getComponent(a,i))}else t.array.set(e.array,n*r);t.needsUpdate=!0}function Mc(e,t){if(e.constructor!==t.constructor){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++)t[r]=e[r]}else{const n=Math.min(e.length,t.length);t.set(new e.constructor(e.buffer,0,n))}}class Tc extends Us{constructor(e,t,n=2*t,r){super(new Ss,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(4*this._maxInstanceCount);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Fl(t,e,e,kn,_n);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Fl(t,e,e,Dn,wn);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Fl(t,e,e,kn,_n);n.colorSpace=ua.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,r=this._maxIndexCount;if(!1===this._geometryInitialized){for(const r in e.attributes){const i=e.getAttribute(r),{array:a,itemSize:o,normalized:s}=i,l=new a.constructor(n*o),c=new ss(l,o,s);t.setAttribute(r,c)}if(null!==e.getIndex()){const e=n>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new ss(e,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(Boolean(e.getIndex())!==Boolean(t.getIndex()))throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const r=e.getAttribute(n),i=t.getAttribute(n);if(r.itemSize!==i.itemSize||r.normalized!==i.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||!1===t[e].active)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||!1===t[e].active)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ca);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(!1===t[n].active)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,hc),this.getBoundingBoxAt(r,gc).applyMatrix4(hc),e.union(gc)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Xa);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(!1===t[n].active)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,hc),this.getBoundingSphereAt(r,vc).applyMatrix4(hc),e.union(vc)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&0===this._availableInstanceIds.length)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const t={visible:!0,active:!0,geometryIndex:e};let n=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(lc),n=this._availableInstanceIds.shift(),this._instanceInfo[n]=t):(n=this._instanceInfo.length,this._instanceInfo.push(t));const r=this._matricesTexture;hc.identity().toArray(r.image.data,16*n),r.needsUpdate=!0;const i=this._colorsTexture;return i&&(pc.toArray(i.image.data,4*n),i.needsUpdate=!0),this._visibilityChanged=!0,n}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},i=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=-1===t?e.getAttribute("position").count:t;const a=e.getIndex();if(null!==a&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=-1===n?a.count:n),-1!==r.indexStart&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let o;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(lc),o=this._availableGeometryIds.shift(),i[o]=r):(o=this._geometryCount,this._geometryCount++,i.push(r)),this.setGeometryAt(o,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,o}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,r=null!==n.getIndex(),i=n.getIndex(),a=t.getIndex(),o=this._geometryInfo[e];if(r&&a.count>o.reservedIndexCount||t.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const s=o.vertexStart,l=o.reservedVertexCount;o.vertexCount=t.getAttribute("position").count;for(const e in n.attributes){const r=t.getAttribute(e),i=n.getAttribute(e);Sc(r,i,s);const a=r.itemSize;for(let e=r.count,t=l;e<t;e++){const t=s+e;for(let e=0;e<a;e++)i.setComponent(t,e,0)}i.needsUpdate=!0,i.addUpdateRange(s*a,l*a)}if(r){const e=o.indexStart,n=o.reservedIndexCount;o.indexCount=t.getIndex().count;for(let t=0;t<a.count;t++)i.setX(e+t,s+a.getX(t));for(let t=a.count,r=n;t<r;t++)i.setX(e+t,s);i.needsUpdate=!0,i.addUpdateRange(e,o.reservedIndexCount)}return o.start=r?o.indexStart:o.vertexStart,o.count=r?o.indexCount:o.vertexCount,o.boundingBox=null,null!==t.boundingBox&&(o.boundingBox=t.boundingBox.clone()),o.boundingSphere=null,null!==t.boundingSphere&&(o.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||!1===t[e].active)return this;const n=this._instanceInfo;for(let t=0,r=n.length;t<r;t++)n[t].active&&n[t].geometryIndex===e&&this.deleteInstance(t);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,r=n.map((e,t)=>t).sort((e,t)=>n[e].vertexStart-n[t].vertexStart),i=this.geometry;for(let a=0,o=n.length;a<o;a++){const o=r[a],s=n[o];if(!1!==s.active){if(null!==i.index){if(s.indexStart!==t){const{indexStart:n,vertexStart:r,reservedIndexCount:a}=s,o=i.index,l=o.array,c=e-r;for(let e=n;e<n+a;e++)l[e]=l[e]+c;o.array.copyWithin(t,n,n+a),o.addUpdateRange(t,a),s.indexStart=t}t+=s.reservedIndexCount}if(s.vertexStart!==e){const{vertexStart:t,reservedVertexCount:n}=s,r=i.attributes;for(const i in r){const a=r[i],{array:o,itemSize:s}=a;o.copyWithin(e*s,t*s,(t+n)*s),a.addUpdateRange(e*s,n*s)}s.vertexStart=e}e+=s.reservedVertexCount,s.start=i.index?s.indexStart:s.vertexStart,this._nextIndexStart=i.index?s.indexStart+s.reservedIndexCount:0,this._nextVertexStart=s.vertexStart+s.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(null===r.boundingBox){const e=new Ca,t=n.index,i=n.attributes.position;for(let n=r.start,a=r.start+r.count;n<a;n++){let r=n;t&&(r=t.getX(r)),e.expandByPoint(yc.fromBufferAttribute(i,r))}r.boundingBox=e}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(null===r.boundingSphere){const t=new Xa;this.getBoundingBoxAt(e,gc),gc.getCenter(t.center);const i=n.index,a=n.attributes.position;let o=0;for(let e=r.start,n=r.start+r.count;e<n;e++){let n=e;i&&(n=i.getX(n)),yc.fromBufferAttribute(a,n),o=Math.max(o,t.center.distanceToSquared(yc))}t.radius=Math.sqrt(o),r.boundingSphere=t}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,16*e),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,16*e)}setColorAt(e,t){return this.validateInstanceId(e),null===this._colorsTexture&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,4*e),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,4*e)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t||(this._instanceInfo[e].visible=t,this._visibilityChanged=!0),this}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(lc);t[t.length-1]===n.length-1;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),i=new Int32Array(e);Mc(this._multiDrawCounts,r),Mc(this._multiDrawStarts,i),this._multiDrawCounts=r,this._multiDrawStarts=i,this._maxInstanceCount=e;const a=this._indirectTexture,o=this._matricesTexture,s=this._colorsTexture;a.dispose(),this._initIndirectTexture(),Mc(a.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),Mc(o.image.data,this._matricesTexture.image.data),s&&(s.dispose(),this._initColorsTexture(),Mc(s.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(e=>e.active);if(Math.max(...n.map(e=>e.vertexStart+e.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(e=>e.indexStart+e.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const r=this.geometry;r.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Ss,this._initializeGeometry(r));const i=this.geometry;r.index&&Mc(r.index.array,i.index.array);for(const e in r.attributes)Mc(r.attributes[e].array,i.attributes[e].array)}raycast(e,t){const n=this._instanceInfo,r=this._geometryInfo,i=this.matrixWorld,a=this.geometry;_c.material=this.material,_c.geometry.index=a.index,_c.geometry.attributes=a.attributes,null===_c.geometry.boundingBox&&(_c.geometry.boundingBox=new Ca),null===_c.geometry.boundingSphere&&(_c.geometry.boundingSphere=new Xa);for(let a=0,o=n.length;a<o;a++){if(!n[a].visible||!n[a].active)continue;const o=n[a].geometryIndex,s=r[o];_c.geometry.setDrawRange(s.start,s.count),this.getMatrixAt(a,_c.matrixWorld).premultiply(i),this.getBoundingBoxAt(o,_c.geometry.boundingBox),this.getBoundingSphereAt(o,_c.geometry.boundingSphere),_c.raycast(e,Ec);for(let e=0,n=Ec.length;e<n;e++){const n=Ec[e];n.object=this,n.batchId=a,t.push(n)}Ec.length=0}_c.material=null,_c.geometry.index=null,_c.geometry.attributes={},_c.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=null!==e.boundingBox?e.boundingBox.clone():null,this.boundingSphere=null!==e.boundingSphere?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(e=>({...e,boundingBox:null!==e.boundingBox?e.boundingBox.clone():null,boundingSphere:null!==e.boundingSphere?e.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(e=>({...e})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),null!==this._colorsTexture&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,null!==this._colorsTexture&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,r,i){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=r.getIndex(),o=null===a?1:a.array.BYTES_PER_ELEMENT,s=this._instanceInfo,l=this._multiDrawStarts,c=this._multiDrawCounts,u=this._geometryInfo,d=this.perObjectFrustumCulled,h=this._indirectTexture,p=h.image.data,f=n.isArrayCamera?mc:fc;d&&!n.isArrayCamera&&(hc.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),fc.setFromProjectionMatrix(hc,n.coordinateSystem,n.reversedDepth));let m=0;if(this.sortObjects){hc.copy(this.matrixWorld).invert(),yc.setFromMatrixPosition(n.matrixWorld).applyMatrix4(hc),bc.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(hc);for(let e=0,t=s.length;e<t;e++)if(s[e].visible&&s[e].active){const t=s[e].geometryIndex;this.getMatrixAt(e,hc),this.getBoundingSphereAt(t,vc).applyMatrix4(hc);let r=!1;if(d&&(r=!f.intersectsSphere(vc,n)),!r){const n=u[t],r=xc.subVectors(vc.center,yc).dot(bc);wc.push(n.start,n.count,r,e)}}const e=wc.list,t=this.customSort;null===t?e.sort(i.transparent?uc:cc):t.call(this,e,n);for(let t=0,n=e.length;t<n;t++){const n=e[t];l[m]=n.start*o,c[m]=n.count,p[m]=n.index,m++}wc.reset()}else for(let e=0,t=s.length;e<t;e++)if(s[e].visible&&s[e].active){const t=s[e].geometryIndex;let r=!1;if(d&&(this.getMatrixAt(e,hc),this.getBoundingSphereAt(t,vc).applyMatrix4(hc),r=!f.intersectsSphere(vc,n)),!r){const n=u[t];l[m]=n.start*o,c[m]=n.count,p[m]=e,m++}}h.needsUpdate=!0,this._multiDrawCount=m,this._visibilityChanged=!1}onBeforeShadow(e,t,n,r,i,a){this.onBeforeRender(e,null,r,i,a)}}class Ac extends Zo{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Yo(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Cc=new na,Rc=new na,Pc=new to,kc=new eo,Ic=new Xa,Lc=new na,Nc=new na;class Dc extends Ro{constructor(e=new Ss,t=new Ac){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)Cc.fromBufferAttribute(t,e-1),Rc.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=Cc.distanceTo(Rc);e.setAttribute("lineDistance",new gs(n,1))}else zi("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ic.copy(n.boundingSphere),Ic.applyMatrix4(r),Ic.radius+=i,!1===e.ray.intersectsSphere(Ic))return;Pc.copy(r).invert(),kc.copy(e.ray).applyMatrix4(Pc);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=this.isLineSegments?2:1,c=n.index,u=n.attributes.position;if(null!==c){const n=Math.max(0,a.start),r=Math.min(c.count,a.start+a.count);for(let i=n,a=r-1;i<a;i+=l){const n=c.getX(i),r=c.getX(i+1),a=Uc(this,e,kc,s,n,r,i);a&&t.push(a)}if(this.isLineLoop){const i=c.getX(r-1),a=c.getX(n),o=Uc(this,e,kc,s,i,a,r-1);o&&t.push(o)}}else{const n=Math.max(0,a.start),r=Math.min(u.count,a.start+a.count);for(let i=n,a=r-1;i<a;i+=l){const n=Uc(this,e,kc,s,i,i+1,i);n&&t.push(n)}if(this.isLineLoop){const i=Uc(this,e,kc,s,r-1,n,r-1);i&&t.push(i)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function Uc(e,t,n,r,i,a,o){const s=e.geometry.attributes.position;if(Cc.fromBufferAttribute(s,i),Rc.fromBufferAttribute(s,a),n.distanceSqToSegment(Cc,Rc,Lc,Nc)>r)return;Lc.applyMatrix4(e.matrixWorld);const l=t.ray.origin.distanceTo(Lc);return l<t.near||l>t.far?void 0:{distance:l,point:Nc.clone().applyMatrix4(e.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:e}}const Oc=new na,Fc=new na;class zc extends Dc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)Oc.fromBufferAttribute(t,e),Fc.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+Oc.distanceTo(Fc);e.setAttribute("lineDistance",new gs(n,1))}else zi("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Bc extends Dc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Hc extends Zo{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Yo(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Vc=new to,jc=new eo,Wc=new Xa,Gc=new na;class Xc extends Ro{constructor(e=new Ss,t=new Hc){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Wc.copy(n.boundingSphere),Wc.applyMatrix4(r),Wc.radius+=i,!1===e.ray.intersectsSphere(Wc))return;Vc.copy(r).invert(),jc.copy(e.ray).applyMatrix4(Vc);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=n.index,c=n.attributes.position;if(null!==l)for(let n=Math.max(0,a.start),i=Math.min(l.count,a.start+a.count);n<i;n++){const i=l.getX(n);Gc.fromBufferAttribute(c,i),qc(Gc,i,s,r,e,t,this)}else for(let n=Math.max(0,a.start),i=Math.min(c.count,a.start+a.count);n<i;n++)Gc.fromBufferAttribute(c,n),qc(Gc,n,s,r,e,t,this)}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function qc(e,t,n,r,i,a,o){const s=jc.distanceSqToPoint(e);if(s<n){const n=new na;jc.closestPointToPoint(e,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,faceIndex:null,barycoord:null,object:o})}}class Yc extends xa{constructor(e,t,n,r,i=dn,a=dn,o,s,l){super(e,t,n,r,i,a,o,s,l),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const c=this;"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(function t(){c.needsUpdate=!0,c._requestVideoFrameCallbackId=e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1=="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){0!==this._requestVideoFrameCallbackId&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class $c extends Yc{constructor(e,t,n,r,i,a,o,s){super({},e,t,n,r,i,a,o,s),this.isVideoFrameTexture=!0}update(){}clone(){return(new this.constructor).copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class Kc extends xa{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=on,this.minFilter=on,this.generateMipmaps=!1,this.needsUpdate=!0}}class Zc extends xa{constructor(e,t,n,r,i,a,o,s,l,c,u,d){super(null,a,o,s,l,c,r,i,u,d),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Jc extends Zc{constructor(e,t,n,r,i,a){super(e,t,n,i,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=rn,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Qc extends Zc{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Zt),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class eu extends xa{constructor(e,t,n,r,i,a,o,s,l){super(e,t,n,r,i,a,o,s,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class tu extends xa{constructor(e,t,n=wn,r,i,a,o=on,s=on,l,c=In,u=1){if(c!==In&&c!==Ln)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super({width:e,height:t,depth:u},r,i,a,o,s,c,n,l),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new ga(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class nu extends xa{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class ru extends Ss{constructor(e=1,t=1,n=4,r=8,i=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:r,heightSegments:i},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),r=Math.max(3,Math.floor(r)),i=Math.max(1,Math.floor(i));const a=[],o=[],s=[],l=[],c=t/2,u=Math.PI/2*e,d=t,h=2*u+d,p=2*n+i,f=r+1,m=new na,g=new na;for(let v=0;v<=p;v++){let y=0,b=0,x=0,w=0;if(v<=n){const t=v/n,r=t*Math.PI/2;b=-c-e*Math.cos(r),x=e*Math.sin(r),w=-e*Math.cos(r),y=t*u}else if(v<=n+i){const r=(v-n)/i;b=r*t-c,x=e,w=0,y=u+r*d}else{const t=(v-n-i)/n,r=t*Math.PI/2;b=c+e*Math.sin(r),x=e*Math.cos(r),w=e*Math.sin(r),y=u+d+t*u}const _=Math.max(0,Math.min(1,y/h));let E=0;0===v?E=.5/r:v===p&&(E=-.5/r);for(let e=0;e<=r;e++){const t=e/r,n=t*Math.PI*2,i=Math.sin(n),a=Math.cos(n);g.x=-x*a,g.y=b,g.z=x*i,o.push(g.x,g.y,g.z),m.set(-x*a,w,x*i),m.normalize(),s.push(m.x,m.y,m.z),l.push(t+E,_)}if(v>0){const e=(v-1)*f;for(let t=0;t<r;t++){const n=e+t,r=e+t+1,i=v*f+t,o=v*f+t+1;a.push(n,r,i),a.push(r,o,i)}}}this.setIndex(a),this.setAttribute("position",new gs(o,3)),this.setAttribute("normal",new gs(s,3)),this.setAttribute("uv",new gs(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ru(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class iu extends Ss{constructor(e=1,t=32,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const i=[],a=[],o=[],s=[],l=new na,c=new ea;a.push(0,0,0),o.push(0,0,1),s.push(.5,.5);for(let i=0,u=3;i<=t;i++,u+=3){const d=n+i/t*r;l.x=e*Math.cos(d),l.y=e*Math.sin(d),a.push(l.x,l.y,l.z),o.push(0,0,1),c.x=(a[u]/e+1)/2,c.y=(a[u+1]/e+1)/2,s.push(c.x,c.y)}for(let e=1;e<=t;e++)i.push(e,e+1,0);this.setIndex(i),this.setAttribute("position",new gs(a,3)),this.setAttribute("normal",new gs(o,3)),this.setAttribute("uv",new gs(s,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new iu(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class au extends Ss{constructor(e=1,t=1,n=1,r=32,i=1,a=!1,o=0,s=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s};const l=this;r=Math.floor(r),i=Math.floor(i);const c=[],u=[],d=[],h=[];let p=0;const f=[],m=n/2;let g=0;function v(n){const i=p,a=new ea,f=new na;let v=0;const y=!0===n?e:t,b=!0===n?1:-1;for(let e=1;e<=r;e++)u.push(0,m*b,0),d.push(0,b,0),h.push(.5,.5),p++;const x=p;for(let e=0;e<=r;e++){const t=e/r*s+o,n=Math.cos(t),i=Math.sin(t);f.x=y*i,f.y=m*b,f.z=y*n,u.push(f.x,f.y,f.z),d.push(0,b,0),a.x=.5*n+.5,a.y=.5*i*b+.5,h.push(a.x,a.y),p++}for(let e=0;e<r;e++){const t=i+e,r=x+e;!0===n?c.push(r,r+1,t):c.push(r+1,r,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}!function(){const a=new na,v=new na;let y=0;const b=(t-e)/n;for(let l=0;l<=i;l++){const c=[],g=l/i,y=g*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,i=t*s+o,l=Math.sin(i),f=Math.cos(i);v.x=y*l,v.y=-g*n+m,v.z=y*f,u.push(v.x,v.y,v.z),a.set(l,b,f).normalize(),d.push(a.x,a.y,a.z),h.push(t,1-g),c.push(p++)}f.push(c)}for(let n=0;n<r;n++)for(let r=0;r<i;r++){const a=f[r][n],o=f[r+1][n],s=f[r+1][n+1],l=f[r][n+1];(e>0||0!==r)&&(c.push(a,o,l),y+=3),(t>0||r!==i-1)&&(c.push(o,s,l),y+=3)}l.addGroup(g,y,0),g+=y}(),!1===a&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new gs(u,3)),this.setAttribute("normal",new gs(d,3)),this.setAttribute("uv",new gs(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new au(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ou extends au{constructor(e=1,t=1,n=32,r=1,i=!1,a=0,o=2*Math.PI){super(0,e,t,n,r,i,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:o}}static fromJSON(e){return new ou(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class su extends Ss{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const i=[],a=[];function o(e,t,n,r){const i=r+1,a=[];for(let r=0;r<=i;r++){a[r]=[];const o=e.clone().lerp(n,r/i),s=t.clone().lerp(n,r/i),l=i-r;for(let e=0;e<=l;e++)a[r][e]=0===e&&r===i?o:o.clone().lerp(s,e/l)}for(let e=0;e<i;e++)for(let t=0;t<2*(i-e)-1;t++){const n=Math.floor(t/2);t%2==0?(s(a[e][n+1]),s(a[e+1][n]),s(a[e][n])):(s(a[e][n+1]),s(a[e+1][n+1]),s(a[e+1][n]))}}function s(e){i.push(e.x,e.y,e.z)}function l(t,n){const r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function c(e,t,n,r){r<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}function d(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}!function(e){const n=new na,r=new na,i=new na;for(let a=0;a<t.length;a+=3)l(t[a+0],n),l(t[a+1],r),l(t[a+2],i),o(n,r,i,e)}(r),function(e){const t=new na;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){const e=new na;for(let t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];const n=u(e)/2/Math.PI+.5,r=d(e)/Math.PI+.5;a.push(n,1-r)}(function(){const e=new na,t=new na,n=new na,r=new na,o=new ea,s=new ea,l=new ea;for(let d=0,h=0;d<i.length;d+=9,h+=6){e.set(i[d+0],i[d+1],i[d+2]),t.set(i[d+3],i[d+4],i[d+5]),n.set(i[d+6],i[d+7],i[d+8]),o.set(a[h+0],a[h+1]),s.set(a[h+2],a[h+3]),l.set(a[h+4],a[h+5]),r.copy(e).add(t).add(n).divideScalar(3);const p=u(r);c(o,h+0,e,p),c(s,h+2,t,p),c(l,h+4,n,p)}})(),function(){for(let e=0;e<a.length;e+=6){const t=a[e+0],n=a[e+2],r=a[e+4],i=Math.max(t,n,r),o=Math.min(t,n,r);i>.9&&o<.1&&(t<.2&&(a[e+0]+=1),n<.2&&(a[e+2]+=1),r<.2&&(a[e+4]+=1))}}()}(),this.setAttribute("position",new gs(i,3)),this.setAttribute("normal",new gs(i.slice(),3)),this.setAttribute("uv",new gs(a,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new su(e.vertices,e.indices,e.radius,e.details)}}class lu extends su{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new lu(e.radius,e.detail)}}const cu=new na,uu=new na,du=new na,hu=new jo;class pu extends Ss{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,r=Math.pow(10,n),i=Math.cos(Gi*t),a=e.getIndex(),o=e.getAttribute("position"),s=a?a.count:o.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),d={},h=[];for(let e=0;e<s;e+=3){a?(l[0]=a.getX(e),l[1]=a.getX(e+1),l[2]=a.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:s}=hu;if(t.fromBufferAttribute(o,l[0]),n.fromBufferAttribute(o,l[1]),s.fromBufferAttribute(o,l[2]),hu.getNormal(du),u[0]=`${Math.round(t.x*r)},${Math.round(t.y*r)},${Math.round(t.z*r)}`,u[1]=`${Math.round(n.x*r)},${Math.round(n.y*r)},${Math.round(n.z*r)}`,u[2]=`${Math.round(s.x*r)},${Math.round(s.y*r)},${Math.round(s.z*r)}`,u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=u[e],r=u[t],a=hu[c[e]],o=hu[c[t]],s=`${n}_${r}`,p=`${r}_${n}`;p in d&&d[p]?(du.dot(d[p].normal)<=i&&(h.push(a.x,a.y,a.z),h.push(o.x,o.y,o.z)),d[p]=null):s in d||(d[s]={index0:l[e],index1:l[t],normal:du.clone()})}}for(const e in d)if(d[e]){const{index0:t,index1:n}=d[e];cu.fromBufferAttribute(o,t),uu.fromBufferAttribute(o,n),h.push(cu.x,cu.y,cu.z),h.push(uu.x,uu.y,uu.z)}this.setAttribute("position",new gs(h,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class fu{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){zi("Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let r=0;const i=n.length;let a;a=t||e*n[i-1];let o,s=0,l=i-1;for(;s<=l;)if(r=Math.floor(s+(l-s)/2),o=n[r]-a,o<0)s=r+1;else{if(!(o>0)){l=r;break}l=r-1}if(r=l,n[r]===a)return r/(i-1);const c=n[r];return(r+(a-c)/(n[r+1]-c))/(i-1)}getTangent(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const a=this.getPoint(r),o=this.getPoint(i),s=t||(a.isVector2?new ea:new na);return s.copy(o).sub(a).normalize(),s}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new na,r=[],i=[],a=[],o=new na,s=new to;for(let t=0;t<=e;t++){const n=t/e;r[t]=this.getTangentAt(n,new na)}i[0]=new na,a[0]=new na;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),u=Math.abs(r[0].y),d=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),d<=l&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),a[0].crossVectors(r[0],i[0]);for(let t=1;t<=e;t++){if(i[t]=i[t-1].clone(),a[t]=a[t-1].clone(),o.crossVectors(r[t-1],r[t]),o.length()>Number.EPSILON){o.normalize();const e=Math.acos(Yi(r[t-1].dot(r[t]),-1,1));i[t].applyMatrix4(s.makeRotationAxis(o,e))}a[t].crossVectors(r[t],i[t])}if(!0===t){let t=Math.acos(Yi(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(s.makeRotationAxis(r[n],t*n)),a[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:a}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class mu extends fu{constructor(e=0,t=0,n=1,r=1,i=0,a=2*Math.PI,o=!1,s=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=a,this.aClockwise=o,this.aRotation=s}getPoint(e,t=new ea){const n=t,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const a=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);const o=this.aStartAngle+e*i;let s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=s-this.aX,r=l-this.aY;s=n*e-r*t+this.aX,l=n*t+r*e+this.aY}return n.set(s,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class gu extends mu{constructor(e,t,n,r,i,a){super(e,t,n,n,r,i,a),this.isArcCurve=!0,this.type="ArcCurve"}}function vu(){let e=0,t=0,n=0,r=0;function i(i,a,o,s){e=i,t=o,n=-3*i+3*a-2*o-s,r=2*i-2*a+o+s}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,o,s){let l=(t-e)/a-(n-e)/(a+o)+(n-t)/o,c=(n-t)/o-(r-t)/(o+s)+(r-n)/s;l*=o,c*=o,i(t,n,l,c)},calc:function(i){const a=i*i;return e+t*i+n*a+r*(a*i)}}}const yu=new na,bu=new vu,xu=new vu,wu=new vu;class _u extends fu{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new na){const n=t,r=this.points,i=r.length,a=(i-(this.closed?0:1))*e;let o,s,l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/i)+1)*i:0===c&&l===i-1&&(l=i-2,c=1),this.closed||l>0?o=r[(l-1)%i]:(yu.subVectors(r[0],r[1]).add(r[0]),o=yu);const u=r[l%i],d=r[(l+1)%i];if(this.closed||l+2<i?s=r[(l+2)%i]:(yu.subVectors(r[i-1],r[i-2]).add(r[i-1]),s=yu),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(o.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(d),e),r=Math.pow(d.distanceToSquared(s),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),bu.initNonuniformCatmullRom(o.x,u.x,d.x,s.x,t,n,r),xu.initNonuniformCatmullRom(o.y,u.y,d.y,s.y,t,n,r),wu.initNonuniformCatmullRom(o.z,u.z,d.z,s.z,t,n,r)}else"catmullrom"===this.curveType&&(bu.initCatmullRom(o.x,u.x,d.x,s.x,this.tension),xu.initCatmullRom(o.y,u.y,d.y,s.y,this.tension),wu.initCatmullRom(o.z,u.z,d.z,s.z,this.tension));return n.set(bu.calc(c),xu.calc(c),wu.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new na).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Eu(e,t,n,r,i){const a=.5*(r-t),o=.5*(i-n),s=e*e;return(2*n-2*r+a+o)*(e*s)+(-3*n+3*r-2*a-o)*s+a*e+n}function Su(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function Mu(e,t,n,r,i){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}class Tu extends fu{constructor(e=new ea,t=new ea,n=new ea,r=new ea){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new ea){const n=t,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(Mu(e,r.x,i.x,a.x,o.x),Mu(e,r.y,i.y,a.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Au extends fu{constructor(e=new na,t=new na,n=new na,r=new na){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new na){const n=t,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(Mu(e,r.x,i.x,a.x,o.x),Mu(e,r.y,i.y,a.y,o.y),Mu(e,r.z,i.z,a.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Cu extends fu{constructor(e=new ea,t=new ea){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ea){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ea){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ru extends fu{constructor(e=new na,t=new na){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new na){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new na){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Pu extends fu{constructor(e=new ea,t=new ea,n=new ea){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ea){const n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(Su(e,r.x,i.x,a.x),Su(e,r.y,i.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ku extends fu{constructor(e=new na,t=new na,n=new na){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new na){const n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(Su(e,r.x,i.x,a.x),Su(e,r.y,i.y,a.y),Su(e,r.z,i.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Iu extends fu{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ea){const n=t,r=this.points,i=(r.length-1)*e,a=Math.floor(i),o=i-a,s=r[0===a?a:a-1],l=r[a],c=r[a>r.length-2?r.length-1:a+1],u=r[a>r.length-3?r.length-1:a+2];return n.set(Eu(o,s.x,l.x,c.x,u.x),Eu(o,s.y,l.y,c.y,u.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new ea).fromArray(n))}return this}}var Lu=Object.freeze({__proto__:null,ArcCurve:gu,CatmullRomCurve3:_u,CubicBezierCurve:Tu,CubicBezierCurve3:Au,EllipseCurve:mu,LineCurve:Cu,LineCurve3:Ru,QuadraticBezierCurve:Pu,QuadraticBezierCurve3:ku,SplineCurve:Iu});class Nu extends fu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new Lu[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=n){const e=r[i]-n,a=this.curves[i],o=a.getLength(),s=0===o?0:1-e/o;return a.getPointAt(s,t)}i++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const a=i[r],o=a.isEllipseCurve?2*e:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o);for(let e=0;e<s.length;e++){const r=s[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new Lu[n.type]).fromJSON(n))}return this}}class Du extends Nu{constructor(e){super(),this.type="Path",this.currentPoint=new ea,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Cu(this.currentPoint.clone(),new ea(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new Pu(this.currentPoint.clone(),new ea(e,t),new ea(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,a){const o=new Tu(this.currentPoint.clone(),new ea(e,t),new ea(n,r),new ea(i,a));return this.curves.push(o),this.currentPoint.set(i,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new Iu(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,a){const o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,r,i,a),this}absarc(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this}ellipse(e,t,n,r,i,a,o,s){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,i,a,o,s),this}absellipse(e,t,n,r,i,a,o,s){const l=new mu(e,t,n,r,i,a,o,s);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Uu extends Du{constructor(e){super(e),this.uuid=qi(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new Du).fromJSON(n))}return this}}function Ou(e,t,n,r,i){let a;if(i===function(e,t,n,r){let i=0;for(let a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}(e,t,n,r)>0)for(let i=t;i<n;i+=r)a=ad(i/r|0,e[i],e[i+1],a);else for(let i=n-r;i>=t;i-=r)a=ad(i/r|0,e[i],e[i+1],a);return a&&Qu(a,a.next)&&(od(a),a=a.next),a}function Fu(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!Qu(r,r.next)&&0!==Ju(r.prev,r,r.next))r=r.next;else{if(od(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function zu(e,t,n,r,i,a,o){if(!e)return;!o&&a&&function(e,t,n,r){let i=e;do{0===i.z&&(i.z=qu(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n=1;do{let r,i=e;e=null;let a=null;for(t=0;i;){t++;let o=i,s=0;for(let e=0;e<n&&(s++,o=o.nextZ,o);e++);let l=n;for(;s>0||l>0&&o;)0!==s&&(0===l||!o||i.z<=o.z)?(r=i,i=i.nextZ,s--):(r=o,o=o.nextZ,l--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;i=o}a.nextZ=null,n*=2}while(t>1)}(i)}(e,r,i,a);let s=e;for(;e.prev!==e.next;){const l=e.prev,c=e.next;if(a?Hu(e,r,i,a):Bu(e))t.push(l.i,e.i,c.i),od(e),e=c.next,s=c.next;else if((e=c)===s){o?1===o?zu(e=Vu(Fu(e),t),t,n,r,i,a,2):2===o&&ju(e,t,n,r,i,a):zu(Fu(e),t,n,r,i,a,1);break}}}function Bu(e){const t=e.prev,n=e,r=e.next;if(Ju(t,n,r)>=0)return!1;const i=t.x,a=n.x,o=r.x,s=t.y,l=n.y,c=r.y,u=Math.min(i,a,o),d=Math.min(s,l,c),h=Math.max(i,a,o),p=Math.max(s,l,c);let f=r.next;for(;f!==t;){if(f.x>=u&&f.x<=h&&f.y>=d&&f.y<=p&&Ku(i,s,a,l,o,c,f.x,f.y)&&Ju(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Hu(e,t,n,r){const i=e.prev,a=e,o=e.next;if(Ju(i,a,o)>=0)return!1;const s=i.x,l=a.x,c=o.x,u=i.y,d=a.y,h=o.y,p=Math.min(s,l,c),f=Math.min(u,d,h),m=Math.max(s,l,c),g=Math.max(u,d,h),v=qu(p,f,t,n,r),y=qu(m,g,t,n,r);let b=e.prevZ,x=e.nextZ;for(;b&&b.z>=v&&x&&x.z<=y;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==i&&b!==o&&Ku(s,u,l,d,c,h,b.x,b.y)&&Ju(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==i&&x!==o&&Ku(s,u,l,d,c,h,x.x,x.y)&&Ju(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;b&&b.z>=v;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==i&&b!==o&&Ku(s,u,l,d,c,h,b.x,b.y)&&Ju(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;x&&x.z<=y;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==i&&x!==o&&Ku(s,u,l,d,c,h,x.x,x.y)&&Ju(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function Vu(e,t){let n=e;do{const r=n.prev,i=n.next.next;!Qu(r,i)&&ed(r,n,n.next,i)&&rd(r,i)&&rd(i,r)&&(t.push(r.i,n.i,i.i),od(n),od(n.next),n=e=i),n=n.next}while(n!==e);return Fu(n)}function ju(e,t,n,r,i,a){let o=e;do{let e=o.next.next;for(;e!==o.prev;){if(o.i!==e.i&&Zu(o,e)){let s=id(o,e);return o=Fu(o,o.next),s=Fu(s,s.next),zu(o,t,n,r,i,a,0),void zu(s,t,n,r,i,a,0)}e=e.next}o=o.next}while(o!==e)}function Wu(e,t){let n=e.x-t.x;return 0===n&&(n=e.y-t.y,0===n)&&(n=(e.next.y-e.y)/(e.next.x-e.x)-(t.next.y-t.y)/(t.next.x-t.x)),n}function Gu(e,t){const n=function(e,t){let n=t;const r=e.x,i=e.y;let a,o=-1/0;if(Qu(e,n))return n;do{if(Qu(e,n.next))return n.next;if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const e=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=r&&e>o&&(o=e,a=n.x<n.next.x?n:n.next,e===r))return a}n=n.next}while(n!==t);if(!a)return null;const s=a,l=a.x,c=a.y;let u=1/0;n=a;do{if(r>=n.x&&n.x>=l&&r!==n.x&&$u(i<c?r:o,i,l,c,i<c?o:r,i,n.x,n.y)){const t=Math.abs(i-n.y)/(r-n.x);rd(n,e)&&(t<u||t===u&&(n.x>a.x||n.x===a.x&&Xu(a,n)))&&(a=n,u=t)}n=n.next}while(n!==s);return a}(e,t);if(!n)return t;const r=id(n,e);return Fu(r,r.next),Fu(n,n.next)}function Xu(e,t){return Ju(e.prev,e,t.prev)<0&&Ju(t.next,e,e.next)<0}function qu(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Yu(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function $u(e,t,n,r,i,a,o,s){return(i-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(r-s)>=(n-o)*(t-s)&&(n-o)*(a-s)>=(i-o)*(r-s)}function Ku(e,t,n,r,i,a,o,s){return!(e===o&&t===s)&&$u(e,t,n,r,i,a,o,s)}function Zu(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&ed(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(rd(e,t)&&rd(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Ju(e.prev,e,t.prev)||Ju(e,t.prev,t))||Qu(e,t)&&Ju(e.prev,e,e.next)>0&&Ju(t.prev,t,t.next)>0)}function Ju(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Qu(e,t){return e.x===t.x&&e.y===t.y}function ed(e,t,n,r){const i=nd(Ju(e,t,n)),a=nd(Ju(e,t,r)),o=nd(Ju(n,r,e)),s=nd(Ju(n,r,t));return i!==a&&o!==s||!(0!==i||!td(e,n,t))||!(0!==a||!td(e,r,t))||!(0!==o||!td(n,e,r))||!(0!==s||!td(n,t,r))}function td(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function nd(e){return e>0?1:e<0?-1:0}function rd(e,t){return Ju(e.prev,e,e.next)<0?Ju(e,t,e.next)>=0&&Ju(e,e.prev,t)>=0:Ju(e,t,e.prev)<0||Ju(e,e.next,t)<0}function id(e,t){const n=sd(e.i,e.x,e.y),r=sd(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function ad(e,t,n,r){const i=sd(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function od(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function sd(e,t,n){return{i:e,x:t,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class ld{static triangulate(e,t,n=2){return function(e,t,n=2){const r=t&&t.length,i=r?t[0]*n:e.length;let a=Ou(e,0,i,n,!0);const o=[];if(!a||a.next===a.prev)return o;let s,l,c;if(r&&(a=function(e,t,n,r){const i=[];for(let n=0,a=t.length;n<a;n++){const o=Ou(e,t[n]*r,n<a-1?t[n+1]*r:e.length,r,!1);o===o.next&&(o.steiner=!0),i.push(Yu(o))}i.sort(Wu);for(let e=0;e<i.length;e++)n=Gu(i[e],n);return n}(e,t,a,n)),e.length>80*n){s=e[0],l=e[1];let t=s,r=l;for(let a=n;a<i;a+=n){const n=e[a],i=e[a+1];n<s&&(s=n),i<l&&(l=i),n>t&&(t=n),i>r&&(r=i)}c=Math.max(t-s,r-l),c=0!==c?32767/c:0}return zu(a,o,n,s,l,c,0),o}(e,t,n)}}class cd{static area(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return cd.area(e)<0}static triangulateShape(e,t){const n=[],r=[],i=[];ud(e),dd(n,e);let a=e.length;t.forEach(ud);for(let e=0;e<t.length;e++)r.push(a),a+=t[e].length,dd(n,t[e]);const o=ld.triangulate(n,r);for(let e=0;e<o.length;e+=3)i.push(o.slice(e,e+3));return i}}function ud(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function dd(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class hd extends Ss{constructor(e=new Uu([new ea(.5,.5),new ea(-.5,.5),new ea(-.5,-.5),new ea(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let t=0,n=e.length;t<n;t++)a(e[t]);function a(e){const a=[],o=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,d=void 0!==t.bevelSize?t.bevelSize:u-.1,h=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:pd;let g,v,y,b,x,w=!1;f&&(g=f.getSpacedPoints(s),w=!0,c=!1,v=f.computeFrenetFrames(s,!1),y=new na,b=new na,x=new na),c||(p=0,u=0,d=0,h=0);const _=e.extractPoints(o);let E=_.shape;const S=_.holes;if(!cd.isClockWise(E)){E=E.reverse();for(let e=0,t=S.length;e<t;e++){const t=S[e];cd.isClockWise(t)&&(S[e]=t.reverse())}}function M(e){const t=1e-10*1e-10;let n=e[0];for(let r=1;r<=e.length;r++){const i=r%e.length,a=e[i],o=a.x-n.x,s=a.y-n.y,l=o*o+s*s,c=Math.max(Math.abs(a.x),Math.abs(a.y),Math.abs(n.x),Math.abs(n.y));l<=t*c*c?(e.splice(i,1),r--):n=a}}M(E),S.forEach(M);const T=S.length,A=E;for(let e=0;e<T;e++){const t=S[e];E=E.concat(t)}function C(e,t,n){return t||Bi("ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}const R=E.length;function P(e,t,n){let r,i,a;const o=e.x-t.x,s=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=o*o+s*s,d=o*c-s*l;if(Math.abs(d)>Number.EPSILON){const d=Math.sqrt(u),h=Math.sqrt(l*l+c*c),p=t.x-s/d,f=t.y+o/d,m=((n.x-c/h-p)*c-(n.y+l/h-f)*l)/(o*c-s*l);r=p+o*m-e.x,i=f+s*m-e.y;const g=r*r+i*i;if(g<=2)return new ea(r,i);a=Math.sqrt(g/2)}else{let e=!1;o>Number.EPSILON?l>Number.EPSILON&&(e=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(s)===Math.sign(c)&&(e=!0),e?(r=-s,i=o,a=Math.sqrt(u)):(r=o,i=s,a=Math.sqrt(u/2))}return new ea(r/a,i/a)}const k=[];for(let e=0,t=A.length,n=t-1,r=e+1;e<t;e++,n++,r++)n===t&&(n=0),r===t&&(r=0),k[e]=P(A[e],A[n],A[r]);const I=[];let L,N,D=k.concat();for(let e=0,t=T;e<t;e++){const t=S[e];L=[];for(let e=0,n=t.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),L[e]=P(t[e],t[r],t[i]);I.push(L),D=D.concat(L)}if(0===p)N=cd.triangulateShape(A,S);else{const e=[],t=[];for(let n=0;n<p;n++){const r=n/p,i=u*Math.cos(r*Math.PI/2),a=d*Math.sin(r*Math.PI/2)+h;for(let t=0,n=A.length;t<n;t++){const n=C(A[t],k[t],a);z(n.x,n.y,-i),0===r&&e.push(n)}for(let e=0,n=T;e<n;e++){const n=S[e];L=I[e];const o=[];for(let e=0,t=n.length;e<t;e++){const t=C(n[e],L[e],a);z(t.x,t.y,-i),0===r&&o.push(t)}0===r&&t.push(o)}}N=cd.triangulateShape(e,t)}const U=N.length,O=d+h;for(let e=0;e<R;e++){const t=c?C(E[e],D[e],O):E[e];w?(b.copy(v.normals[0]).multiplyScalar(t.x),y.copy(v.binormals[0]).multiplyScalar(t.y),x.copy(g[0]).add(b).add(y),z(x.x,x.y,x.z)):z(t.x,t.y,0)}for(let e=1;e<=s;e++)for(let t=0;t<R;t++){const n=c?C(E[t],D[t],O):E[t];w?(b.copy(v.normals[e]).multiplyScalar(n.x),y.copy(v.binormals[e]).multiplyScalar(n.y),x.copy(g[e]).add(b).add(y),z(x.x,x.y,x.z)):z(n.x,n.y,l/s*e)}for(let e=p-1;e>=0;e--){const t=e/p,n=u*Math.cos(t*Math.PI/2),r=d*Math.sin(t*Math.PI/2)+h;for(let e=0,t=A.length;e<t;e++){const t=C(A[e],k[e],r);z(t.x,t.y,l+n)}for(let e=0,t=S.length;e<t;e++){const t=S[e];L=I[e];for(let e=0,i=t.length;e<i;e++){const i=C(t[e],L[e],r);w?z(i.x,i.y+g[s-1].y,g[s-1].x+n):z(i.x,i.y,l+n)}}}function F(e,t){let n=e.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=s+2*p;e<n;e++){const n=R*e,a=R*(e+1);H(t+r+n,t+i+n,t+i+a,t+r+a)}}}function z(e,t,n){a.push(e),a.push(t),a.push(n)}function B(e,t,i){V(e),V(t),V(i);const a=r.length/3,o=m.generateTopUV(n,r,a-3,a-2,a-1);j(o[0]),j(o[1]),j(o[2])}function H(e,t,i,a){V(e),V(t),V(a),V(t),V(i),V(a);const o=r.length/3,s=m.generateSideWallUV(n,r,o-6,o-3,o-2,o-1);j(s[0]),j(s[1]),j(s[3]),j(s[1]),j(s[2]),j(s[3])}function V(e){r.push(a[3*e+0]),r.push(a[3*e+1]),r.push(a[3*e+2])}function j(e){i.push(e.x),i.push(e.y)}!function(){const e=r.length/3;if(c){let e=0,t=R*e;for(let e=0;e<U;e++){const n=N[e];B(n[2]+t,n[1]+t,n[0]+t)}e=s+2*p,t=R*e;for(let e=0;e<U;e++){const n=N[e];B(n[0]+t,n[1]+t,n[2]+t)}}else{for(let e=0;e<U;e++){const t=N[e];B(t[2],t[1],t[0])}for(let e=0;e<U;e++){const t=N[e];B(t[0]+R*s,t[1]+R*s,t[2]+R*s)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;F(A,t),t+=A.length;for(let e=0,n=S.length;e<n;e++){const n=S[e];F(n,t),t+=n.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new gs(r,3)),this.setAttribute("uv",new gs(i,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,r=e.length;t<r;t++){const r=e[t];n.shapes.push(r.uuid)}else n.shapes.push(e.uuid);return n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new Lu[r.type]).fromJSON(r)),new hd(n,e.options)}}const pd={generateTopUV:function(e,t,n,r,i){const a=t[3*n],o=t[3*n+1],s=t[3*r],l=t[3*r+1],c=t[3*i],u=t[3*i+1];return[new ea(a,o),new ea(s,l),new ea(c,u)]},generateSideWallUV:function(e,t,n,r,i,a){const o=t[3*n],s=t[3*n+1],l=t[3*n+2],c=t[3*r],u=t[3*r+1],d=t[3*r+2],h=t[3*i],p=t[3*i+1],f=t[3*i+2],m=t[3*a],g=t[3*a+1],v=t[3*a+2];return Math.abs(s-u)<Math.abs(o-c)?[new ea(o,1-l),new ea(c,1-d),new ea(h,1-f),new ea(m,1-v)]:[new ea(s,1-l),new ea(u,1-d),new ea(p,1-f),new ea(g,1-v)]}};class fd extends su{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new fd(e.radius,e.detail)}}class md extends Ss{constructor(e=[new ea(0,-.5),new ea(.5,0),new ea(0,.5)],t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Yi(r,0,2*Math.PI);const i=[],a=[],o=[],s=[],l=[],c=1/t,u=new na,d=new ea,h=new na,p=new na,f=new na;let m=0,g=0;for(let t=0;t<=e.length-1;t++)switch(t){case 0:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,h.x=1*g,h.y=-m,h.z=0*g,f.copy(h),h.normalize(),s.push(h.x,h.y,h.z);break;case e.length-1:s.push(f.x,f.y,f.z);break;default:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,h.x=1*g,h.y=-m,h.z=0*g,p.copy(h),h.x+=f.x,h.y+=f.y,h.z+=f.z,h.normalize(),s.push(h.x,h.y,h.z),f.copy(p)}for(let i=0;i<=t;i++){const h=n+i*c*r,p=Math.sin(h),f=Math.cos(h);for(let n=0;n<=e.length-1;n++){u.x=e[n].x*p,u.y=e[n].y,u.z=e[n].x*f,a.push(u.x,u.y,u.z),d.x=i/t,d.y=n/(e.length-1),o.push(d.x,d.y);const r=s[3*n+0]*p,c=s[3*n+1],h=s[3*n+0]*f;l.push(r,c,h)}}for(let n=0;n<t;n++)for(let t=0;t<e.length-1;t++){const r=t+n*e.length,a=r,o=r+e.length,s=r+e.length+1,l=r+1;i.push(a,o,l),i.push(s,l,o)}this.setIndex(i),this.setAttribute("position",new gs(a,3)),this.setAttribute("uv",new gs(o,2)),this.setAttribute("normal",new gs(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new md(e.points,e.segments,e.phiStart,e.phiLength)}}class gd extends su{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new gd(e.radius,e.detail)}}class vd extends Ss{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,a=t/2,o=Math.floor(n),s=Math.floor(r),l=o+1,c=s+1,u=e/o,d=t/s,h=[],p=[],f=[],m=[];for(let e=0;e<c;e++){const t=e*d-a;for(let n=0;n<l;n++){const r=n*u-i;p.push(r,-t,0),f.push(0,0,1),m.push(n/o),m.push(1-e/s)}}for(let e=0;e<s;e++)for(let t=0;t<o;t++){const n=t+l*e,r=t+l*(e+1),i=t+1+l*(e+1),a=t+1+l*e;h.push(n,r,a),h.push(r,i,a)}this.setIndex(h),this.setAttribute("position",new gs(p,3)),this.setAttribute("normal",new gs(f,3)),this.setAttribute("uv",new gs(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vd(e.width,e.height,e.widthSegments,e.heightSegments)}}class yd extends Ss{constructor(e=.5,t=1,n=32,r=1,i=0,a=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},n=Math.max(3,n);const o=[],s=[],l=[],c=[];let u=e;const d=(t-e)/(r=Math.max(1,r)),h=new na,p=new ea;for(let e=0;e<=r;e++){for(let e=0;e<=n;e++){const r=i+e/n*a;h.x=u*Math.cos(r),h.y=u*Math.sin(r),s.push(h.x,h.y,h.z),l.push(0,0,1),p.x=(h.x/t+1)/2,p.y=(h.y/t+1)/2,c.push(p.x,p.y)}u+=d}for(let e=0;e<r;e++){const t=e*(n+1);for(let e=0;e<n;e++){const r=e+t,i=r,a=r+n+1,s=r+n+2,l=r+1;o.push(i,a,l),o.push(a,s,l)}}this.setIndex(o),this.setAttribute("position",new gs(s,3)),this.setAttribute("normal",new gs(l,3)),this.setAttribute("uv",new gs(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yd(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class bd extends Ss{constructor(e=new Uu([new ea(0,.5),new ea(-.5,-.5),new ea(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],a=[];let o=0,s=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(o,s,t),o+=s,s=0;function l(e){const o=r.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===cd.isClockWise(c)&&(c=c.reverse());for(let e=0,t=u.length;e<t;e++){const t=u[e];!0===cd.isClockWise(t)&&(u[e]=t.reverse())}const d=cd.triangulateShape(c,u);for(let e=0,t=u.length;e<t;e++){const t=u[e];c=c.concat(t)}for(let e=0,t=c.length;e<t;e++){const t=c[e];r.push(t.x,t.y,0),i.push(0,0,1),a.push(t.x,t.y)}for(let e=0,t=d.length;e<t;e++){const t=d[e],r=t[0]+o,i=t[1]+o,a=t[2]+o;n.push(r,i,a),s+=3}}this.setIndex(n),this.setAttribute("position",new gs(r,3)),this.setAttribute("normal",new gs(i,3)),this.setAttribute("uv",new gs(a,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}return new bd(n,e.curveSegments)}}class xd extends Ss{constructor(e=1,t=32,n=16,r=0,i=2*Math.PI,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const s=Math.min(a+o,Math.PI);let l=0;const c=[],u=new na,d=new na,h=[],p=[],f=[],m=[];for(let h=0;h<=n;h++){const g=[],v=h/n;let y=0;0===h&&0===a?y=.5/t:h===n&&s===Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const s=n/t;u.x=-e*Math.cos(r+s*i)*Math.sin(a+v*o),u.y=e*Math.cos(a+v*o),u.z=e*Math.sin(r+s*i)*Math.sin(a+v*o),p.push(u.x,u.y,u.z),d.copy(u).normalize(),f.push(d.x,d.y,d.z),m.push(s+y,1-v),g.push(l++)}c.push(g)}for(let e=0;e<n;e++)for(let r=0;r<t;r++){const t=c[e][r+1],i=c[e][r],o=c[e+1][r],l=c[e+1][r+1];(0!==e||a>0)&&h.push(t,i,l),(e!==n-1||s<Math.PI)&&h.push(i,o,l)}this.setIndex(h),this.setAttribute("position",new gs(p,3)),this.setAttribute("normal",new gs(f,3)),this.setAttribute("uv",new gs(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xd(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class wd extends su{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new wd(e.radius,e.detail)}}class _d extends Ss{constructor(e=1,t=.4,n=12,r=48,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const a=[],o=[],s=[],l=[],c=new na,u=new na,d=new na;for(let a=0;a<=n;a++)for(let h=0;h<=r;h++){const p=h/r*i,f=a/n*Math.PI*2;u.x=(e+t*Math.cos(f))*Math.cos(p),u.y=(e+t*Math.cos(f))*Math.sin(p),u.z=t*Math.sin(f),o.push(u.x,u.y,u.z),c.x=e*Math.cos(p),c.y=e*Math.sin(p),d.subVectors(u,c).normalize(),s.push(d.x,d.y,d.z),l.push(h/r),l.push(a/n)}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){const n=(r+1)*e+t-1,i=(r+1)*(e-1)+t-1,o=(r+1)*(e-1)+t,s=(r+1)*e+t;a.push(n,i,s),a.push(i,o,s)}this.setIndex(a),this.setAttribute("position",new gs(o,3)),this.setAttribute("normal",new gs(s,3)),this.setAttribute("uv",new gs(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _d(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Ed extends Ss{constructor(e=1,t=.4,n=64,r=8,i=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},n=Math.floor(n),r=Math.floor(r);const o=[],s=[],l=[],c=[],u=new na,d=new na,h=new na,p=new na,f=new na,m=new na,g=new na;for(let o=0;o<=n;++o){const y=o/n*i*Math.PI*2;v(y,i,a,e,h),v(y+.01,i,a,e,p),m.subVectors(p,h),g.addVectors(p,h),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let e=0;e<=r;++e){const i=e/r*Math.PI*2,a=-t*Math.cos(i),p=t*Math.sin(i);u.x=h.x+(a*g.x+p*f.x),u.y=h.y+(a*g.y+p*f.y),u.z=h.z+(a*g.z+p*f.z),s.push(u.x,u.y,u.z),d.subVectors(u,h).normalize(),l.push(d.x,d.y,d.z),c.push(o/n),c.push(e/r)}}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),a=(r+1)*e+t,s=(r+1)*(e-1)+t;o.push(n,i,s),o.push(i,a,s)}function v(e,t,n,r,i){const a=Math.cos(e),o=Math.sin(e),s=n/t*e,l=Math.cos(s);i.x=r*(2+l)*.5*a,i.y=r*(2+l)*o*.5,i.z=r*Math.sin(s)*.5}this.setIndex(o),this.setAttribute("position",new gs(s,3)),this.setAttribute("normal",new gs(l,3)),this.setAttribute("uv",new gs(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ed(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Sd extends Ss{constructor(e=new ku(new na(-1,-1,0),new na(-1,1,0),new na(1,1,0)),t=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};const a=e.computeFrenetFrames(t,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new na,s=new na,l=new ea;let c=new na;const u=[],d=[],h=[],p=[];function f(i){c=e.getPointAt(i/t,c);const l=a.normals[i],h=a.binormals[i];for(let e=0;e<=r;e++){const t=e/r*Math.PI*2,i=Math.sin(t),a=-Math.cos(t);s.x=a*l.x+i*h.x,s.y=a*l.y+i*h.y,s.z=a*l.z+i*h.z,s.normalize(),d.push(s.x,s.y,s.z),o.x=c.x+n*s.x,o.y=c.y+n*s.y,o.z=c.z+n*s.z,u.push(o.x,o.y,o.z)}}!function(){for(let e=0;e<t;e++)f(e);f(!1===i?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)l.x=e/t,l.y=n/r,h.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),a=(r+1)*e+t,o=(r+1)*(e-1)+t;p.push(n,i,o),p.push(i,a,o)}}()}(),this.setIndex(p),this.setAttribute("position",new gs(u,3)),this.setAttribute("normal",new gs(d,3)),this.setAttribute("uv",new gs(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Sd((new Lu[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Md extends Ss{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,r=new na,i=new na;if(null!==e.index){const a=e.attributes.position,o=e.index;let s=e.groups;0===s.length&&(s=[{start:0,count:o.count,materialIndex:0}]);for(let e=0,l=s.length;e<l;++e){const l=s[e],c=l.start;for(let e=c,s=c+l.count;e<s;e+=3)for(let s=0;s<3;s++){const l=o.getX(e+s),c=o.getX(e+(s+1)%3);r.fromBufferAttribute(a,l),i.fromBufferAttribute(a,c),!0===Td(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}}else{const a=e.attributes.position;for(let e=0,o=a.count/3;e<o;e++)for(let o=0;o<3;o++){const s=3*e+o,l=3*e+(o+1)%3;r.fromBufferAttribute(a,s),i.fromBufferAttribute(a,l),!0===Td(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}this.setAttribute("position",new gs(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function Td(e,t,n){const r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}var Ad=Object.freeze({__proto__:null,BoxGeometry:Fs,CapsuleGeometry:ru,CircleGeometry:iu,ConeGeometry:ou,CylinderGeometry:au,DodecahedronGeometry:lu,EdgesGeometry:pu,ExtrudeGeometry:hd,IcosahedronGeometry:fd,LatheGeometry:md,OctahedronGeometry:gd,PlaneGeometry:vd,PolyhedronGeometry:su,RingGeometry:yd,ShapeGeometry:bd,SphereGeometry:xd,TetrahedronGeometry:wd,TorusGeometry:_d,TorusKnotGeometry:Ed,TubeGeometry:Sd,WireframeGeometry:Md});class Cd extends Zo{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Yo(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Rd extends js{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Pd extends Zo{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Yo(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Yo(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ur,this.normalScale=new ea(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ho,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class kd extends Pd{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ea(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Yi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Yo(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Yo(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Yo(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Id extends Zo{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Yo(16777215),this.specular=new Yo(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Yo(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ur,this.normalScale=new ea(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ho,this.combine=Ot,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ld extends Zo{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Yo(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Yo(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ur,this.normalScale=new ea(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Nd extends Zo{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ur,this.normalScale=new ea(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Dd extends Zo{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Yo(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Yo(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ur,this.normalScale=new ea(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ho,this.combine=Ot,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ud extends Zo{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Ir,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Od extends Zo{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class Fd extends Zo{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Yo(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ur,this.normalScale=new ea(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zd extends Ac{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Bd(e,t){return e&&e.constructor!==t?"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e):e}function Hd(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Vd(e){const t=e.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort(function(t,n){return e[t]-e[n]}),n}function jd(e,t,n){const r=e.length,i=new e.constructor(r);for(let a=0,o=0;o!==r;++a){const r=n[a]*t;for(let n=0;n!==t;++n)i[o++]=e[r+n]}return i}function Wd(e,t,n,r){let i=1,a=e[0];for(;void 0!==a&&void 0===a[r];)a=e[i++];if(void 0===a)return;let o=a[r];if(void 0!==o)if(Array.isArray(o))do{o=a[r],void 0!==o&&(t.push(a.time),n.push(...o)),a=e[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{o=a[r],void 0!==o&&(t.push(a.time),o.toArray(n,n.length)),a=e[i++]}while(void 0!==a);else do{o=a[r],void 0!==o&&(t.push(a.time),n.push(o)),a=e[i++]}while(void 0!==a)}class Gd{static convertArray(e,t){return Bd(e,t)}static isTypedArray(e){return Hd(e)}static getKeyframeOrder(e){return Vd(e)}static sortedArray(e,t,n){return jd(e,t,n)}static flattenJSON(e,t,n,r){Wd(e,t,n,r)}static subclip(e,t,n,r,i=30){return function(e,t,n,r,i=30){const a=e.clone();a.name=t;const o=[];for(let e=0;e<a.tracks.length;++e){const t=a.tracks[e],s=t.getValueSize(),l=[],c=[];for(let e=0;e<t.times.length;++e){const a=t.times[e]*i;if(!(a<n||a>=r)){l.push(t.times[e]);for(let n=0;n<s;++n)c.push(t.values[e*s+n])}}0!==l.length&&(t.times=Bd(l,t.times.constructor),t.values=Bd(c,t.values.constructor),o.push(t))}a.tracks=o;let s=1/0;for(let e=0;e<a.tracks.length;++e)s>a.tracks[e].times[0]&&(s=a.tracks[e].times[0]);for(let e=0;e<a.tracks.length;++e)a.tracks[e].shift(-1*s);return a.resetDuration(),a}(e,t,n,r,i)}static makeClipAdditive(e,t=0,n=e,r=30){return function(e,t=0,n=e,r=30){r<=0&&(r=30);const i=n.tracks.length,a=t/r;for(let t=0;t<i;++t){const r=n.tracks[t],i=r.ValueTypeName;if("bool"===i||"string"===i)continue;const o=e.tracks.find(function(e){return e.name===r.name&&e.ValueTypeName===i});if(void 0===o)continue;let s=0;const l=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);let c=0;const u=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const d=r.times.length-1;let h;if(a<=r.times[0]){const e=s,t=l-s;h=r.values.slice(e,t)}else if(a>=r.times[d]){const e=d*l+s,t=e+l-s;h=r.values.slice(e,t)}else{const e=r.createInterpolant(),t=s,n=l-s;e.evaluate(a),h=e.resultBuffer.slice(t,n)}"quaternion"===i&&(new ta).fromArray(h).normalize().conjugate().toArray(h);const p=o.times.length;for(let e=0;e<p;++e){const t=e*u+c;if("quaternion"===i)ta.multiplyQuaternionsFlat(o.values,t,h,0,o.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)o.values[t+n]-=h[n]}}}return e.blendMode=Cr,e}(e,t,n,r)}}class Xd{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let a;n:{r:if(!(e<r)){for(let a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(i=r,r=t[++n],e<r)break t}a=t.length;break n}if(!(e>=i)){const o=t[1];e<o&&(n=2,i=o);for(let a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===a)break;if(r=i,i=t[--n-1],e>=i)break t}a=n,n=0;break n}break e}for(;n<a;){const r=n+a>>>1;e<t[r]?a=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let e=0;e!==r;++e)t[e]=n[i+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class qd extends Xd{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Sr,endingEnd:Sr}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case Mr:i=e,o=2*t-n;break;case Tr:i=r.length-2,o=t+r[i]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Mr:a=e,s=2*n-t;break;case Tr:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-n),this._offsetPrev=i*c,this._offsetNext=a*c}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,h=this._weightNext,p=(n-t)/(r-t),f=p*p,m=f*p,g=-d*m+2*d*f-d*p,v=(1+d)*m+(-1.5-2*d)*f+(-.5+d)*p+1,y=(-1-h)*m+(1.5+h)*f+.5*p,b=h*m-h*f;for(let e=0;e!==o;++e)i[e]=g*a[c+e]+v*a[l+e]+y*a[s+e]+b*a[u+e];return i}}class Yd extends Xd{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,c=(n-t)/(r-t),u=1-c;for(let e=0;e!==o;++e)i[e]=a[l+e]*u+a[s+e]*c;return i}}class $d extends Xd{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Kd{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Bd(t,this.TimeBufferType),this.values=Bd(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Bd(e.times,Array),values:Bd(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new $d(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Yd(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new qd(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case wr:t=this.InterpolantFactoryMethodDiscrete;break;case _r:t=this.InterpolantFactoryMethodLinear;break;case Er:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return zi("KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return wr;case this.InterpolantFactoryMethodLinear:return _r;case this.InterpolantFactoryMethodSmooth:return Er}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,a=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(a=Math.max(a,1),i=a-1);const e=this.getValueSize();this.times=n.slice(i,a),this.values=this.values.slice(i*e,a*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(Bi("KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(Bi("KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let t=0;t!==i;t++){const r=n[t];if("number"==typeof r&&isNaN(r)){Bi("KeyframeTrack: Time is not a valid number.",this,t,r),e=!1;break}if(null!==a&&a>r){Bi("KeyframeTrack: Out of order keys.",this,t,r,a),e=!1;break}a=r}if(void 0!==r&&Hd(r))for(let t=0,n=r.length;t!==n;++t){const n=r[t];if(isNaN(n)){Bi("KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===Er,i=e.length-1;let a=1;for(let o=1;o<i;++o){let i=!1;const s=e[o];if(s!==e[o+1]&&(1!==o||s!==e[0]))if(r)i=!0;else{const e=o*n,r=e-n,a=e+n;for(let o=0;o!==n;++o){const n=t[e+o];if(n!==t[r+o]||n!==t[a+o]){i=!0;break}}}if(i){if(o!==a){e[a]=e[o];const r=o*n,i=a*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++a}}if(i>0){e[a]=e[i];for(let e=i*n,r=a*n,o=0;o!==n;++o)t[r+o]=t[e+o];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}Kd.prototype.ValueTypeName="",Kd.prototype.TimeBufferType=Float32Array,Kd.prototype.ValueBufferType=Float32Array,Kd.prototype.DefaultInterpolation=_r;class Zd extends Kd{constructor(e,t,n){super(e,t,n)}}Zd.prototype.ValueTypeName="bool",Zd.prototype.ValueBufferType=Array,Zd.prototype.DefaultInterpolation=wr,Zd.prototype.InterpolantFactoryMethodLinear=void 0,Zd.prototype.InterpolantFactoryMethodSmooth=void 0;class Jd extends Kd{constructor(e,t,n,r){super(e,t,n,r)}}Jd.prototype.ValueTypeName="color";class Qd extends Kd{constructor(e,t,n,r){super(e,t,n,r)}}Qd.prototype.ValueTypeName="number";class eh extends Xd{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t);let l=e*o;for(let e=l+o;l!==e;l+=4)ta.slerpFlat(i,0,a,l-o,a,l,s);return i}}class th extends Kd{constructor(e,t,n,r){super(e,t,n,r)}InterpolantFactoryMethodLinear(e){return new eh(this.times,this.values,this.getValueSize(),e)}}th.prototype.ValueTypeName="quaternion",th.prototype.InterpolantFactoryMethodSmooth=void 0;class nh extends Kd{constructor(e,t,n){super(e,t,n)}}nh.prototype.ValueTypeName="string",nh.prototype.ValueBufferType=Array,nh.prototype.DefaultInterpolation=wr,nh.prototype.InterpolantFactoryMethodLinear=void 0,nh.prototype.InterpolantFactoryMethodSmooth=void 0;class rh extends Kd{constructor(e,t,n,r){super(e,t,n,r)}}rh.prototype.ValueTypeName="vector";class ih{constructor(e="",t=-1,n=[],r=Ar){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=qi(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let e=0,i=n.length;e!==i;++e)t.push(ah(n[e]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i.userData=JSON.parse(e.userData||"{}"),i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let e=0,r=n.length;e!==r;++e)t.push(Kd.toJSON(n[e]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,a=[];for(let e=0;e<i;e++){let o=[],s=[];o.push((e+i-1)%i,e,(e+1)%i),s.push(0,1,0);const l=Vd(o);o=jd(o,1,l),s=jd(s,1,l),r||0!==o[0]||(o.push(i),s.push(s[0])),a.push(new Qd(".morphTargetInfluences["+t[e].name+"]",o,s).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){const n=e[t],a=n.name.match(i);if(a&&a.length>1){const e=a[1];let t=r[e];t||(r[e]=t=[]),t.push(n)}}const a=[];for(const e in r)a.push(this.CreateFromMorphTargetSequence(e,r[e],t,n));return a}static parseAnimation(e,t){if(zi("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return Bi("AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const a=[],o=[];Wd(n,a,o,r),0!==a.length&&i.push(new e(t,a,o))}},r=[],i=e.name||"default",a=e.fps||30,o=e.blendMode;let s=e.length||-1;const l=e.hierarchy||[];for(let e=0;e<l.length;e++){const i=l[e].keys;if(i&&0!==i.length)if(i[0].morphTargets){const e={};let t;for(t=0;t<i.length;t++)if(i[t].morphTargets)for(let n=0;n<i[t].morphTargets.length;n++)e[i[t].morphTargets[n]]=-1;for(const n in e){const e=[],a=[];for(let r=0;r!==i[t].morphTargets.length;++r){const r=i[t];e.push(r.time),a.push(r.morphTarget===n?1:0)}r.push(new Qd(".morphTargetInfluence["+n+"]",e,a))}s=e.length*a}else{const a=".bones["+t[e].name+"]";n(rh,a+".position",i,"pos",r),n(th,a+".quaternion",i,"rot",r),n(rh,a+".scale",i,"scl",r)}}return 0===r.length?null:new this(i,s,r,o)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function ah(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Qd;case"vector":case"vector2":case"vector3":case"vector4":return rh;case"color":return Jd;case"quaternion":return th;case"bool":case"boolean":return Zd;case"string":return nh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];Wd(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const oh={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class sh{constructor(e,t,n){const r=this;let i,a=!1,o=0,s=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this._abortController=null,this.itemStart=function(e){s++,!1===a&&void 0!==r.onStart&&r.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,s),o===s&&(a=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const lh=new sh;class ch{constructor(e){this.manager=void 0!==e?e:lh,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,i){n.load(e,r,t,i)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}ch.DEFAULT_MATERIAL_NAME="__DEFAULT";const uh={};class dh extends Error{constructor(e,t){super(e),this.response=t}}class hh extends ch{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=oh.get(`file:${e}`);if(void 0!==i)return this.manager.itemStart(e),setTimeout(()=>{t&&t(i),this.manager.itemEnd(e)},0),i;if(void 0!==uh[e])return void uh[e].push({onLoad:t,onProgress:n,onError:r});uh[e]=[],uh[e].push({onLoad:t,onProgress:n,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:"function"==typeof AbortSignal.any?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),o=this.mimeType,s=this.responseType;fetch(a).then(t=>{if(200===t.status||0===t.status){if(0===t.status&&zi("FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=uh[e],r=t.body.getReader(),i=t.headers.get("X-File-Size")||t.headers.get("Content-Length"),a=i?parseInt(i):0,o=0!==a;let s=0;const l=new ReadableStream({start(e){!function t(){r.read().then(({done:r,value:i})=>{if(r)e.close();else{s+=i.byteLength;const r=new ProgressEvent("progress",{lengthComputable:o,loaded:s,total:a});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(i),t()}},t=>{e.error(t)})}()}});return new Response(l)}throw new dh(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)}).then(e=>{switch(s){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then(e=>(new DOMParser).parseFromString(e,o));case"json":return e.json();default:if(""===o)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(o),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then(e=>r.decode(e))}}}).then(t=>{oh.add(`file:${e}`,t);const n=uh[e];delete uh[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}}).catch(t=>{const n=uh[e];if(void 0===n)throw this.manager.itemError(e),t;delete uh[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class ph extends ch{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new hh(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):Bi(t),i.manager.itemError(e)}},n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=ih.parse(e[n]);t.push(r)}return t}}class fh extends ch{constructor(e){super(e)}load(e,t,n,r){const i=this,a=[],o=new Zc,s=new hh(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);let l=0;function c(c){s.load(e[c],function(e){const n=i.parse(e,!0);a[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(o.minFilter=dn),o.image=a,o.format=n.format,o.needsUpdate=!0,t&&t(o))},n,r)}if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)c(t);else s.load(e,function(e){const n=i.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){a[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)a[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),a[t].format=n.format,a[t].width=n.width,a[t].height=n.height}o.image=a}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=dn),o.format=n.format,o.needsUpdate=!0,t&&t(o)},n,r);return o}}const mh=new WeakMap;class gh extends ch{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,a=oh.get(`image:${e}`);if(void 0!==a){if(!0===a.complete)i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0);else{let e=mh.get(a);void 0===e&&(e=[],mh.set(a,e)),e.push({onLoad:t,onError:r})}return a}const o=Ii("img");function s(){c(),t&&t(this);const n=mh.get(this)||[];for(let e=0;e<n.length;e++){const t=n[e];t.onLoad&&t.onLoad(this)}mh.delete(this),i.manager.itemEnd(e)}function l(t){c(),r&&r(t),oh.remove(`image:${e}`);const n=mh.get(this)||[];for(let e=0;e<n.length;e++){const r=n[e];r.onError&&r.onError(t)}mh.delete(this),i.manager.itemError(e),i.manager.itemEnd(e)}function c(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),oh.add(`image:${e}`,o),i.manager.itemStart(e),o.src=e,o}}class vh extends ch{constructor(e){super(e)}load(e,t,n,r){const i=new Zs;i.colorSpace=zr;const a=new gh(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function s(n){a.load(e[n],function(e){i.images[n]=e,o++,6===o&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}for(let t=0;t<e.length;++t)s(t);return i}}class yh extends ch{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new Fl,o=new hh(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(i.withCredentials),o.load(e,function(e){let n;try{n=i.parse(e)}catch(e){if(void 0===r)return void e(e);r(e)}void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:rn,a.wrapT=void 0!==n.wrapT?n.wrapT:rn,a.magFilter=void 0!==n.magFilter?n.magFilter:dn,a.minFilter=void 0!==n.minFilter?n.minFilter:dn,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace&&(a.colorSpace=n.colorSpace),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=fn),1===n.mipmapCount&&(a.minFilter=dn),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,t&&t(a,n)},n,r),a}}class bh extends ch{constructor(e){super(e)}load(e,t,n,r){const i=new xa,a=new gh(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)},n,r),i}}class xh extends Ro{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Yo(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}class wh extends xh{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Ro.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Yo(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const _h=new to,Eh=new na,Sh=new na;class Mh{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ea(512,512),this.mapType=gn,this.map=null,this.mapPass=null,this.matrix=new to,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ic,this._frameExtents=new ea(1,1),this._viewportCount=1,this._viewports=[new wa(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Eh.setFromMatrixPosition(e.matrixWorld),t.position.copy(Eh),Sh.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Sh),t.updateMatrixWorld(),_h.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_h,t.coordinateSystem,t.reversedDepth),t.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(_h)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Th extends Mh{constructor(){super(new Ys(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=2*Xi*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Ah extends xh{constructor(e,t,n=0,r=Math.PI/3,i=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ro.DEFAULT_UP),this.updateMatrix(),this.target=new Ro,this.distance=n,this.angle=r,this.penumbra=i,this.decay=a,this.map=null,this.shadow=new Th}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Ch=new to,Rh=new na,Ph=new na;class kh extends Mh{constructor(){super(new Ys(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ea(4,2),this._viewportCount=6,this._viewports=[new wa(2,1,1,1),new wa(0,1,1,1),new wa(3,1,1,1),new wa(1,1,1,1),new wa(3,0,1,1),new wa(1,0,1,1)],this._cubeDirections=[new na(1,0,0),new na(-1,0,0),new na(0,0,1),new na(0,0,-1),new na(0,1,0),new na(0,-1,0)],this._cubeUps=[new na(0,1,0),new na(0,1,0),new na(0,1,0),new na(0,1,0),new na(0,0,1),new na(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),Rh.setFromMatrixPosition(e.matrixWorld),n.position.copy(Rh),Ph.copy(n.position),Ph.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Ph),n.updateMatrixWorld(),r.makeTranslation(-Rh.x,-Rh.y,-Rh.z),Ch.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ch,n.coordinateSystem,n.reversedDepth)}}class Ih extends xh{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new kh}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Lh extends Ws{constructor(e=-1,t=1,n=1,r=-1,i=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,a=i+e*this.view.width,o-=t*this.view.offsetY,s=o-t*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}class Nh extends Mh{constructor(){super(new Lh(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Dh extends xh{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ro.DEFAULT_UP),this.updateMatrix(),this.target=new Ro,this.shadow=new Nh}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Uh extends xh{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Oh extends xh{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Fh{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new na)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],n*i*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*n*i),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}class zh extends xh{constructor(e=new Fh,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Bh extends ch{constructor(e){super(e),this.textures={}}load(e,t,n,r){const i=this,a=new hh(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):Bi(t),i.manager.itemError(e)}},n,r)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&zi("MaterialLoader: Undefined texture",e),t[e]}const r=this.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new Yo).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.dispersion&&(r.dispersion=e.dispersion),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(r.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(r.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.alphaHash&&(r.alphaHash=e.alphaHash),void 0!==e.depthFunc&&(r.depthFunc=e.depthFunc),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.blendSrc&&(r.blendSrc=e.blendSrc),void 0!==e.blendDst&&(r.blendDst=e.blendDst),void 0!==e.blendEquation&&(r.blendEquation=e.blendEquation),void 0!==e.blendSrcAlpha&&(r.blendSrcAlpha=e.blendSrcAlpha),void 0!==e.blendDstAlpha&&(r.blendDstAlpha=e.blendDstAlpha),void 0!==e.blendEquationAlpha&&(r.blendEquationAlpha=e.blendEquationAlpha),void 0!==e.blendColor&&void 0!==r.blendColor&&r.blendColor.setHex(e.blendColor),void 0!==e.blendAlpha&&(r.blendAlpha=e.blendAlpha),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),void 0!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(r.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const t in e.uniforms){const i=e.uniforms[t];switch(r.uniforms[t]={},i.type){case"t":r.uniforms[t].value=n(i.value);break;case"c":r.uniforms[t].value=(new Yo).setHex(i.value);break;case"v2":r.uniforms[t].value=(new ea).fromArray(i.value);break;case"v3":r.uniforms[t].value=(new na).fromArray(i.value);break;case"v4":r.uniforms[t].value=(new wa).fromArray(i.value);break;case"m3":r.uniforms[t].value=(new aa).fromArray(i.value);break;case"m4":r.uniforms[t].value=(new to).fromArray(i.value);break;default:r.uniforms[t].value=i.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(r.glslVersion=e.glslVersion),void 0!==e.extensions)for(const t in e.extensions)r.extensions[t]=e.extensions[t];if(void 0!==e.lights&&(r.lights=e.lights),void 0!==e.clipping&&(r.clipping=e.clipping),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=(new ea).fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapRotation&&r.envMapRotation.fromArray(e.envMapRotation),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new ea).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),void 0!==e.anisotropyMap&&(r.anisotropyMap=n(e.anisotropyMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Bh.createMaterialFromType(e)}static createMaterialFromType(e){return new{ShadowMaterial:Cd,SpriteMaterial:ll,RawShaderMaterial:Rd,ShaderMaterial:js,PointsMaterial:Hc,MeshPhysicalMaterial:kd,MeshStandardMaterial:Pd,MeshPhongMaterial:Id,MeshToonMaterial:Ld,MeshNormalMaterial:Nd,MeshLambertMaterial:Dd,MeshDepthMaterial:Ud,MeshDistanceMaterial:Od,MeshBasicMaterial:Jo,MeshMatcapMaterial:Fd,LineDashedMaterial:zd,LineBasicMaterial:Ac,Material:Zo}[e]}}class Hh{static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Vh extends Ss{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class jh extends ch{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new hh(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):Bi(t),i.manager.itemError(e)}},n,r)}parse(e){const t={},n={};function r(e,r){if(void 0!==t[r])return t[r];const i=e.interleavedBuffers[r],a=function(e,t){if(void 0!==n[t])return n[t];const r=e.arrayBuffers[t],i=new Uint32Array(r).buffer;return n[t]=i,i}(e,i.buffer),o=ki(i.type,a),s=new al(o,i.stride);return s.uuid=i.uuid,t[r]=s,s}const i=e.isInstancedBufferGeometry?new Vh:new Ss,a=e.data.index;if(void 0!==a){const e=ki(a.type,a.array);i.setIndex(new ss(e,1))}const o=e.data.attributes;for(const t in o){const n=o[t];let a;if(n.isInterleavedBufferAttribute){const t=r(e.data,n.data);a=new sl(t,n.itemSize,n.offset,n.normalized)}else{const e=ki(n.type,n.array);a=new(n.isInstancedBufferAttribute?Vl:ss)(e,n.itemSize,n.normalized)}void 0!==n.name&&(a.name=n.name),void 0!==n.usage&&a.setUsage(n.usage),i.setAttribute(t,a)}const s=e.data.morphAttributes;if(s)for(const t in s){const n=s[t],a=[];for(let t=0,i=n.length;t<i;t++){const i=n[t];let o;if(i.isInterleavedBufferAttribute){const t=r(e.data,i.data);o=new sl(t,i.itemSize,i.offset,i.normalized)}else{const e=ki(i.type,i.array);o=new ss(e,i.itemSize,i.normalized)}void 0!==i.name&&(o.name=i.name),a.push(o)}i.morphAttributes[t]=a}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let e=0,t=l.length;e!==t;++e){const t=l[e];i.addGroup(t.start,t.count,t.materialIndex)}const c=e.data.boundingSphere;return void 0!==c&&(i.boundingSphere=(new Xa).fromJSON(c)),e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}class Wh extends ch{constructor(e){super(e)}load(e,t,n,r){const i=this,a=""===this.path?Hh.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new hh(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(n){let a=null;try{a=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void t("ObjectLoader: Can't parse "+e+".",t.message)}const o=a.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase())return void 0!==r&&r(new Error("THREE.ObjectLoader: Can't load "+e)),void Bi("ObjectLoader: Can't load "+e);i.parse(a,t)},n,r)}async loadAsync(e,t){const n=""===this.path?Hh.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const r=new hh(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const i=await r.loadAsync(e,t),a=JSON.parse(i),o=a.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(a)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){void 0!==t&&t(l)}),o=this.parseTextures(e.textures,a),s=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,s,o,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),this.bindLightTargets(l),void 0!==t){let e=!1;for(const t in a)if(a[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),i=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,i),o=this.parseMaterials(e.materials,a),s=this.parseObject(e.object,r,o,a,t),l=this.parseSkeletons(e.skeletons,s);return this.bindSkeletons(s,l),this.bindLightTargets(s),s}parseShapes(e){const t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){const r=(new Uu).fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse(function(e){e.isBone&&(r[e.uuid]=e)}),void 0!==e)for(let t=0,i=e.length;t<i;t++){const i=(new Hl).fromJSON(e[t],r);n[i.uuid]=i}return n}parseGeometries(e,t){const n={};if(void 0!==e){const r=new jh;for(let i=0,a=e.length;i<a;i++){let a;const o=e[i];switch(o.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(o);break;default:o.type in Ad?a=Ad[o.type].fromJSON(o,t):zi(`ObjectLoader: Unsupported geometry type "${o.type}"`)}a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),void 0!==o.userData&&(a.userData=o.userData),n[o.uuid]=a}}return n}parseMaterials(e,t){const n={},r={};if(void 0!==e){const i=new Bh;i.setTextures(t);for(let t=0,a=e.length;t<a;t++){const a=e[t];void 0===n[a.uuid]&&(n[a.uuid]=i.parse(a)),r[a.uuid]=n[a.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const r=e[n],i=ih.parse(r);t[i.uuid]=i}return t}parseImages(e,t){const n=this,r={};let i;function a(e){if("string"==typeof e){const t=e;return function(e){return n.manager.itemStart(e),i.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemError(e),n.manager.itemEnd(e)})}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:ki(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new sh(t);i=new gh(n),i.setCrossOrigin(this.crossOrigin);for(let t=0,n=e.length;t<n;t++){const n=e[t],i=n.url;if(Array.isArray(i)){const e=[];for(let t=0,n=i.length;t<n;t++){const n=a(i[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new Fl(n.data,n.width,n.height)))}r[n.uuid]=new ga(e)}else{const e=a(n.url);r[n.uuid]=new ga(e)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function i(e){if("string"==typeof e){const n=e,i=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await r.loadAsync(i)}return e.data?{data:ki(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){r=new gh(this.manager),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const r=e[t],a=r.url;if(Array.isArray(a)){const e=[];for(let t=0,n=a.length;t<n;t++){const n=a[t],r=await i(n);null!==r&&(r instanceof HTMLImageElement?e.push(r):e.push(new Fl(r.data,r.width,r.height)))}n[r.uuid]=new ga(e)}else{const e=await i(r.url);n[r.uuid]=new ga(e)}}}return n}parseTextures(e,t){function n(e,t){return"number"==typeof e?e:(zi("ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const r={};if(void 0!==e)for(let i=0,a=e.length;i<a;i++){const a=e[i];void 0===a.image&&zi('ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&zi("ObjectLoader: Undefined image",a.image);const o=t[a.image],s=o.data;let l;Array.isArray(s)?(l=new Zs,6===s.length&&(l.needsUpdate=!0)):(l=s&&s.data?new Fl:new xa,s&&(l.needsUpdate=!0)),l.source=o,l.uuid=a.uuid,void 0!==a.name&&(l.name=a.name),void 0!==a.mapping&&(l.mapping=n(a.mapping,Gh)),void 0!==a.channel&&(l.channel=a.channel),void 0!==a.offset&&l.offset.fromArray(a.offset),void 0!==a.repeat&&l.repeat.fromArray(a.repeat),void 0!==a.center&&l.center.fromArray(a.center),void 0!==a.rotation&&(l.rotation=a.rotation),void 0!==a.wrap&&(l.wrapS=n(a.wrap[0],Xh),l.wrapT=n(a.wrap[1],Xh)),void 0!==a.format&&(l.format=a.format),void 0!==a.internalFormat&&(l.internalFormat=a.internalFormat),void 0!==a.type&&(l.type=a.type),void 0!==a.colorSpace&&(l.colorSpace=a.colorSpace),void 0!==a.minFilter&&(l.minFilter=n(a.minFilter,qh)),void 0!==a.magFilter&&(l.magFilter=n(a.magFilter,qh)),void 0!==a.anisotropy&&(l.anisotropy=a.anisotropy),void 0!==a.flipY&&(l.flipY=a.flipY),void 0!==a.generateMipmaps&&(l.generateMipmaps=a.generateMipmaps),void 0!==a.premultiplyAlpha&&(l.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(l.unpackAlignment=a.unpackAlignment),void 0!==a.compareFunction&&(l.compareFunction=a.compareFunction),void 0!==a.userData&&(l.userData=a.userData),r[a.uuid]=l}return r}parseObject(e,t,n,r,i){let a,o,s;function l(e){return void 0===t[e]&&zi("ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];void 0===n[i]&&zi("ObjectLoader: Undefined material",i),t.push(n[i])}return t}return void 0===n[e]&&zi("ObjectLoader: Undefined material",e),n[e]}}function u(e){return void 0===r[e]&&zi("ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":a=new il,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new Yo(e.background):a.background=u(e.background)),void 0!==e.environment&&(a.environment=u(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new rl(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new nl(e.fog.color,e.fog.density)),""!==e.fog.name&&(a.fog.name=e.fog.name)),void 0!==e.backgroundBlurriness&&(a.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(a.backgroundIntensity=e.backgroundIntensity),void 0!==e.backgroundRotation&&a.backgroundRotation.fromArray(e.backgroundRotation),void 0!==e.environmentIntensity&&(a.environmentIntensity=e.environmentIntensity),void 0!==e.environmentRotation&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new Ys(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Lh(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new Uh(e.color,e.intensity);break;case"DirectionalLight":a=new Dh(e.color,e.intensity),a.target=e.target||"";break;case"PointLight":a=new Ih(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new Oh(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new Ah(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),a.target=e.target||"";break;case"HemisphereLight":a=new wh(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=(new zh).fromJSON(e);break;case"SkinnedMesh":o=l(e.geometry),s=c(e.material),a=new Ul(o,s),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":o=l(e.geometry),s=c(e.material),a=new Us(o,s);break;case"InstancedMesh":o=l(e.geometry),s=c(e.material);const t=e.count,n=e.instanceMatrix,r=e.instanceColor;a=new Kl(o,s,t),a.instanceMatrix=new Vl(new Float32Array(n.array),16),void 0!==r&&(a.instanceColor=new Vl(new Float32Array(r.array),r.itemSize));break;case"BatchedMesh":o=l(e.geometry),s=c(e.material),a=new Tc(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,s),a.geometry=o,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._geometryInfo=e.geometryInfo.map(e=>{let t=null,n=null;return void 0!==e.boundingBox&&(t=(new Ca).fromJSON(e.boundingBox)),void 0!==e.boundingSphere&&(n=(new Xa).fromJSON(e.boundingSphere)),{...e,boundingBox:t,boundingSphere:n}}),a._instanceInfo=e.instanceInfo,a._availableInstanceIds=e._availableInstanceIds,a._availableGeometryIds=e._availableGeometryIds,a._nextIndexStart=e.nextIndexStart,a._nextVertexStart=e.nextVertexStart,a._geometryCount=e.geometryCount,a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._matricesTexture=u(e.matricesTexture.uuid),a._indirectTexture=u(e.indirectTexture.uuid),void 0!==e.colorsTexture&&(a._colorsTexture=u(e.colorsTexture.uuid)),void 0!==e.boundingSphere&&(a.boundingSphere=(new Xa).fromJSON(e.boundingSphere)),void 0!==e.boundingBox&&(a.boundingBox=(new Ca).fromJSON(e.boundingBox));break;case"LOD":a=new Tl;break;case"Line":a=new Dc(l(e.geometry),c(e.material));break;case"LineLoop":a=new Bc(l(e.geometry),c(e.material));break;case"LineSegments":a=new zc(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":a=new Xc(l(e.geometry),c(e.material));break;case"Sprite":a=new _l(c(e.material));break;case"Group":a=new Qs;break;case"Bone":a=new Ol;break;default:a=new Ro}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.up&&a.up.fromArray(e.up),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.intensity&&(a.shadow.intensity=e.shadow.intensity),void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children){const o=e.children;for(let e=0;e<o.length;e++)a.add(this.parseObject(o[e],t,n,r,i))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];a.animations.push(i[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=a.getObjectByProperty("uuid",n.object);void 0!==r&&a.addLevel(r,n.distance,n.hysteresis)}}return a}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse(function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?zi("ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,r=e.getObjectByProperty("uuid",n);t.target=void 0!==r?r:new Ro}})}}const Gh={UVMapping:Kt,CubeReflectionMapping:Zt,CubeRefractionMapping:Jt,EquirectangularReflectionMapping:Qt,EquirectangularRefractionMapping:en,CubeUVReflectionMapping:tn},Xh={RepeatWrapping:nn,ClampToEdgeWrapping:rn,MirroredRepeatWrapping:an},qh={NearestFilter:on,NearestMipmapNearestFilter:sn,NearestMipmapLinearFilter:cn,LinearFilter:dn,LinearMipmapNearestFilter:hn,LinearMipmapLinearFilter:fn},Yh=new WeakMap;class $h extends ch{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&zi("ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&zi("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,a=oh.get(`image-bitmap:${e}`);if(void 0!==a)return i.manager.itemStart(e),a.then?void a.then(n=>{if(!0!==Yh.has(a))return t&&t(n),i.manager.itemEnd(e),n;r&&r(Yh.get(a)),i.manager.itemError(e),i.manager.itemEnd(e)}):(setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a);const o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,o.signal="function"==typeof AbortSignal.any?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const s=fetch(e,o).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))}).then(function(n){return oh.add(`image-bitmap:${e}`,n),t&&t(n),i.manager.itemEnd(e),n}).catch(function(t){r&&r(t),Yh.set(s,t),oh.remove(`image-bitmap:${e}`),i.manager.itemError(e),i.manager.itemEnd(e)});oh.add(`image-bitmap:${e}`,s),i.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let Kh;class Zh{static getContext(){return void 0===Kh&&(Kh=new(window.AudioContext||window.webkitAudioContext)),Kh}static setContext(e){Kh=e}}class Jh extends ch{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new hh(this.manager);function o(t){r?r(t):Bi(t),i.manager.itemError(e)}a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(e){try{const n=e.slice(0);Zh.getContext().decodeAudioData(n,function(e){t(e)}).catch(o)}catch(e){o(e)}},n,r)}}const Qh=new to,ep=new to,tp=new to;class np{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ys,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ys,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,tp.copy(e.projectionMatrix);const n=t.eyeSep/2,r=n*t.near/t.focus,i=t.near*Math.tan(Gi*t.fov*.5)/t.zoom;let a,o;ep.elements[12]=-n,Qh.elements[12]=n,a=-i*t.aspect+r,o=i*t.aspect+r,tp.elements[0]=2*t.near/(o-a),tp.elements[8]=(o+a)/(o-a),this.cameraL.projectionMatrix.copy(tp),a=-i*t.aspect-r,o=i*t.aspect-r,tp.elements[0]=2*t.near/(o-a),tp.elements[8]=(o+a)/(o-a),this.cameraR.projectionMatrix.copy(tp)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(ep),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Qh)}}class rp extends Ys{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class ip{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const ap=new na,op=new ta,sp=new na,lp=new na,cp=new na;class up extends Ro{constructor(){super(),this.type="AudioListener",this.context=Zh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new ip}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ap,op,sp),lp.set(0,0,-1).applyQuaternion(op),cp.set(0,1,0).applyQuaternion(op),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(ap.x,e),t.positionY.linearRampToValueAtTime(ap.y,e),t.positionZ.linearRampToValueAtTime(ap.z,e),t.forwardX.linearRampToValueAtTime(lp.x,e),t.forwardY.linearRampToValueAtTime(lp.y,e),t.forwardZ.linearRampToValueAtTime(lp.z,e),t.upX.linearRampToValueAtTime(cp.x,e),t.upY.linearRampToValueAtTime(cp.y,e),t.upZ.linearRampToValueAtTime(cp.z,e)}else t.setPosition(ap.x,ap.y,ap.z),t.setOrientation(lp.x,lp.y,lp.z,cp.x,cp.y,cp.z)}}class dp extends Ro{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void zi("Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void zi("Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;zi("Audio: this Audio has no playback control.")}stop(e=0){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this;zi("Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;zi("Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return!1===this.hasPlaybackControl?(zi("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;zi("Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),"buffer"!==e.sourceType?(zi("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const hp=new na,pp=new ta,fp=new na,mp=new na;class gp extends dp{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(hp,pp,fp),mp.set(0,0,1).applyQuaternion(pp);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(hp.x,e),t.positionY.linearRampToValueAtTime(hp.y,e),t.positionZ.linearRampToValueAtTime(hp.z,e),t.orientationX.linearRampToValueAtTime(mp.x,e),t.orientationY.linearRampToValueAtTime(mp.y,e),t.orientationZ.linearRampToValueAtTime(mp.z,e)}else t.setPosition(hp.x,hp.y,hp.z),t.setOrientation(mp.x,mp.y,mp.z)}}class vp{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class yp{constructor(e,t,n){let r,i,a;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let a=this.cumulativeWeight;if(0===a){for(let e=0;e!==r;++e)n[i+e]=n[e];a=t}else{a+=t;const e=t/a;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let e=t,i=t+t;e!==i;++e)if(n[e]!==n[e+t]){o.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let e=n,i=r;e!==i;++e)t[e]=t[r+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let r=0;r!==i;++r)e[t+r]=e[n+r]}_slerp(e,t,n,r){ta.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const a=this._workIndex*i;ta.multiplyQuaternionsFlat(e,a,e,t,e,n),ta.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,n,r,i){const a=1-r;for(let o=0;o!==i;++o){const i=t+o;e[i]=e[i]*a+e[n+o]*r}}_lerpAdditive(e,t,n,r,i){for(let a=0;a!==i;++a){const i=t+a;e[i]=e[i]+e[n+a]*r}}}const bp="\\[\\]\\.:\\/",xp=new RegExp("["+bp+"]","g"),wp="[^"+bp+"]",_p="[^"+bp.replace("\\.","")+"]",Ep=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",wp)+/(WCOD+)?/.source.replace("WCOD",_p)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",wp)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",wp)+"$"),Sp=["material","materials","bones","map"];class Mp{constructor(e,t,n){this.path=t,this.parsedPath=n||Mp.parseTrackName(t),this.node=Mp.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Mp.Composite(e,t,n):new Mp(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(xp,"")}static parseTrackName(e){const t=Ep.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==Sp.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const a=n(i.children);if(a)return a}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=Mp.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void zi("PropertyBinding: No target node found for track: "+this.path+".");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void Bi("PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void Bi("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void Bi("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void Bi("PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void Bi("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void Bi("PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void Bi("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const a=e[r];if(void 0===a)return void Bi("PropertyBinding: Trying to update property for track: "+t.nodeName+"."+r+" but it wasn't found.",e);let o=this.Versioning.None;this.targetObject=e,!0===e.isMaterial?o=this.Versioning.NeedsUpdate:!0===e.isObject3D&&(o=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void Bi("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void Bi("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=i}else void 0!==a.fromArray&&void 0!==a.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(s=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Mp.Composite=class{constructor(e,t,n){const r=n||Mp.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Mp.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Mp.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Mp.prototype.GetterByBindingType=[Mp.prototype._getValue_direct,Mp.prototype._getValue_array,Mp.prototype._getValue_arrayElement,Mp.prototype._getValue_toArray],Mp.prototype.SetterByBindingTypeAndVersioning=[[Mp.prototype._setValue_direct,Mp.prototype._setValue_direct_setNeedsUpdate,Mp.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Mp.prototype._setValue_array,Mp.prototype._setValue_array_setNeedsUpdate,Mp.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Mp.prototype._setValue_arrayElement,Mp.prototype._setValue_arrayElement_setNeedsUpdate,Mp.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Mp.prototype._setValue_fromArray,Mp.prototype._setValue_fromArray_setNeedsUpdate,Mp.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Tp{constructor(){this.isAnimationObjectGroup=!0,this.uuid=qi(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length;let o,s=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],d=u.uuid;let h=t[d];if(void 0===h){h=s++,t[d]=h,e.push(u);for(let e=0,t=a;e!==t;++e)i[e].push(new Mp(u,n[e],r[e]))}else if(h<l){o=e[h];const s=--l,c=e[s];t[c.uuid]=h,e[h]=c,t[d]=s,e[s]=u;for(let e=0,t=a;e!==t;++e){const t=i[e],a=t[s];let o=t[h];t[h]=a,void 0===o&&(o=new Mp(u,n[e],r[e])),t[s]=o}}else e[h]!==o&&Bi("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const o=arguments[a],s=o.uuid,l=t[s];if(void 0!==l&&l>=i){const a=i++,c=e[a];t[c.uuid]=l,e[l]=c,t[s]=a,e[a]=o;for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[a],i=t[l];t[l]=r,t[a]=i}}}this.nCachedObjects_=i}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,a=e.length;for(let o=0,s=arguments.length;o!==s;++o){const s=arguments[o].uuid,l=t[s];if(void 0!==l)if(delete t[s],l<i){const o=--i,s=e[o],c=--a,u=e[c];t[s.uuid]=l,e[l]=s,t[u.uuid]=o,e[o]=u,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[o],i=t[c];t[l]=r,t[o]=i,t.pop()}}else{const i=--a,o=e[i];i>0&&(t[o.uuid]=l),e[l]=o,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e];t[l]=t[i],t.pop()}}}this.nCachedObjects_=i}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const i=this._bindings;if(void 0!==r)return i[r];const a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);r=i.length,n[e]=r,a.push(e),o.push(t),i.push(u);for(let n=c,r=s.length;n!==r;++n){const r=s[n];u[n]=new Mp(r,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const r=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}}class Ap{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,a=i.length,o=new Array(a),s={endingStart:Sr,endingEnd:Sr};for(let e=0;e!==a;++e){const t=i[e].createInterpolant(null);o[e]=t,t.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=br,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),!0===n){const n=this._clip.duration,r=e._clip.duration,i=r/n,a=n/r;e.warp(1,i,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,a=this.timeScale;let o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const s=o.parameterPositions,l=o.sampleValues;return s[0]=i,s[1]=i+n,l[0]=e/a,l[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;r<0||0===n?t=0:(this._startTime=null,t=n*r)}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===Cr)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(a),t[n].accumulateAdditive(o);else for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(a),t[n].accumulate(r,o)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const a=n===xr;if(0===e)return-1===i||!a||1&~i?r:t-r;if(n===yr){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const o=this.repetitions-i;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===o){const t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(a&&!(1&~i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=Mr,r.endingEnd=Mr):(r.endingStart=e?this.zeroSlopeAtStart?Mr:Sr:Tr,r.endingEnd=t?this.zeroSlopeAtEnd?Mr:Sr:Tr)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=n,this}}const Cp=new Float32Array(1);class Rp extends Vi{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName;let c=l[s];void 0===c&&(c={},l[s]=c);for(let e=0;e!==i;++e){const i=r[e],l=i.name;let u=c[l];if(void 0!==u)++u.referenceCount,a[e]=u;else{if(u=a[e],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,s,l));continue}const r=t&&t._propertyBindings[e].binding.parsedPath;u=new yp(Mp.create(n,l,r),i.ValueTypeName,i.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,s,l),a[e]=u}o[e].resultBuffer=u.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{const t=a.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,l=s[s.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let a=r[t];void 0===a&&(a={},r[t]=a),a[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,o=a[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[i],0===Object.keys(o).length&&delete a[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new Yd(new Float32Array(2),new Float32Array(2),1,Cp),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let a="string"==typeof e?ih.findByName(r,e):e;const o=null!==a?a.uuid:e,s=this._actionsByClip[o];let l=null;if(void 0===n&&(n=null!==a?a.blendMode:Ar),void 0!==s){const e=s.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;l=s.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;const c=new Ap(this,a,t,n);return this._bindAction(c,l),this._addInactiveAction(c,o,i),c}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"==typeof e?ih.findByName(n,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1;for(let o=0;o!==n;++o)t[o]._update(r,e,i,a);const o=this._bindings,s=this._nActiveBindings;for(let e=0;e!==s;++e)o[e].apply(a);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,a=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,a._cacheIndex=i,t[i]=a,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const e in n){const r=n[e].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const e in r){const t=r[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class Pp extends _a{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=n,this.texture=new Ta(null,e,t,n),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class kp{constructor(e){this.value=e}clone(){return new kp(void 0===this.value.clone?this.value:this.value.clone())}}let Ip=0;class Lp extends Vi{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Ip++}),this.name="",this.usage=pi,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let e=0,n=t.length;e<n;e++){const n=Array.isArray(t[e])?t[e]:[t[e]];for(let e=0;e<n.length;e++)this.uniforms.push(n[e].clone())}return this}clone(){return(new this.constructor).copy(this)}}class Np extends al{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Dp{constructor(e,t,n,r,i,a=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.normalized=a,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const Up=new to;class Op{constructor(e,t,n=0,r=1/0){this.ray=new eo(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new po,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):Bi("Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return Up.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Up),this}intersectObject(e,t=!0,n=[]){return zp(e,this,n,t),n.sort(Fp),n}intersectObjects(e,t=!0,n=[]){for(let r=0,i=e.length;r<i;r++)zp(e[r],this,n,t);return n.sort(Fp),n}}function Fp(e,t){return e.distance-t.distance}function zp(e,t,n,r){let i=!0;if(e.layers.test(t.layers)&&!1===e.raycast(t,n)&&(i=!1),!0===i&&!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)zp(r[e],t,n,!0)}}class Bp{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,void 0!==e.hidden&&(this._pageVisibilityHandler=Hp.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){null!==this._pageVisibilityHandler&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return null!==this._pageVisibilityHandler&&!0===this._document.hidden?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(void 0!==e?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function Hp(){!1===this._document.hidden&&this.reset()}class Vp{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Yi(this.phi,e,Math.PI-e),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Yi(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class jp{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}class Wp{constructor(e,t,n,r){Wp.prototype.isMatrix2=!0,this.elements=[1,0,0,1],void 0!==e&&this.set(e,t,n,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,r){const i=this.elements;return i[0]=e,i[2]=t,i[1]=n,i[3]=r,this}}const Gp=new ea;class Xp{constructor(e=new ea(1/0,1/0),t=new ea(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Gp.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Gp).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const qp=new na,Yp=new na,$p=new na,Kp=new na,Zp=new na,Jp=new na,Qp=new na;class ef{constructor(e=new na,t=new na){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){qp.subVectors(e,this.start),Yp.subVectors(this.end,this.start);const n=Yp.dot(Yp);let r=Yp.dot(qp)/n;return t&&(r=Yi(r,0,1)),r}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}distanceSqToLine3(e,t=Jp,n=Qp){const r=1e-8*1e-8;let i,a;const o=this.start,s=e.start,l=this.end,c=e.end;$p.subVectors(l,o),Kp.subVectors(c,s),Zp.subVectors(o,s);const u=$p.dot($p),d=Kp.dot(Kp),h=Kp.dot(Zp);if(u<=r&&d<=r)return t.copy(o),n.copy(s),t.sub(n),t.dot(t);if(u<=r)i=0,a=h/d,a=Yi(a,0,1);else{const e=$p.dot(Zp);if(d<=r)a=0,i=Yi(-e/u,0,1);else{const t=$p.dot(Kp),n=u*d-t*t;i=0!==n?Yi((t*h-e*d)/n,0,1):0,a=(t*i+h)/d,a<0?(a=0,i=Yi(-e/u,0,1)):a>1&&(a=1,i=Yi((t-e)/u,0,1))}}return t.copy(o).add($p.multiplyScalar(i)),n.copy(s).add(Kp.multiplyScalar(a)),t.sub(n),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const tf=new na;class nf extends Ro{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Ss,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1,n=32;e<n;e++,t++){const i=e/n*Math.PI*2,a=t/n*Math.PI*2;r.push(Math.cos(i),Math.sin(i),1,Math.cos(a),Math.sin(a),1)}n.setAttribute("position",new gs(r,3));const i=new Ac({fog:!1,toneMapped:!1});this.cone=new zc(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),tf.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(tf),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const rf=new na,af=new to,of=new to;class sf extends zc{constructor(e){const t=lf(e),n=new Ss,r=[],i=[];for(let e=0;e<t.length;e++){const n=t[e];n.parent&&n.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(0,0,0),i.push(0,0,0))}n.setAttribute("position",new gs(r,3)),n.setAttribute("color",new gs(i,3)),super(n,new Ac({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const a=new Yo(255),o=new Yo(65280);this.setColors(a,o)}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");of.copy(this.root.matrixWorld).invert();for(let e=0,n=0;e<t.length;e++){const i=t[e];i.parent&&i.parent.isBone&&(af.multiplyMatrices(of,i.matrixWorld),rf.setFromMatrixPosition(af),r.setXYZ(n,rf.x,rf.y,rf.z),af.multiplyMatrices(of,i.parent.matrixWorld),rf.setFromMatrixPosition(af),r.setXYZ(n+1,rf.x,rf.y,rf.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const n=this.geometry.getAttribute("color");for(let r=0;r<n.count;r+=2)n.setXYZ(r,e.r,e.g,e.b),n.setXYZ(r+1,t.r,t.g,t.b);return n.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function lf(e){const t=[];!0===e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push(...lf(e.children[n]));return t}class cf extends Us{constructor(e,t,n){super(new xd(t,4,2),new Jo({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const uf=new na,df=new Yo,hf=new Yo;class pf extends Ro{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new gd(t);r.rotateY(.5*Math.PI),this.material=new Jo({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),a=new Float32Array(3*i.count);r.setAttribute("color",new ss(a,3)),this.add(new Us(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");df.copy(this.light.color),hf.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const r=e<n/2?df:hf;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(uf.setFromMatrixPosition(this.light.matrixWorld).negate())}}class ff extends zc{constructor(e=10,t=10,n=4473924,r=8947848){n=new Yo(n),r=new Yo(r);const i=t/2,a=e/t,o=e/2,s=[],l=[];for(let e=0,c=0,u=-o;e<=t;e++,u+=a){s.push(-o,0,u,o,0,u),s.push(u,0,-o,u,0,o);const t=e===i?n:r;t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3}const c=new Ss;c.setAttribute("position",new gs(s,3)),c.setAttribute("color",new gs(l,3)),super(c,new Ac({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class mf extends zc{constructor(e=10,t=16,n=8,r=64,i=4473924,a=8947848){i=new Yo(i),a=new Yo(a);const o=[],s=[];if(t>1)for(let n=0;n<t;n++){const r=n/t*(2*Math.PI),l=Math.sin(r)*e,c=Math.cos(r)*e;o.push(0,0,0),o.push(l,0,c);const u=1&n?i:a;s.push(u.r,u.g,u.b),s.push(u.r,u.g,u.b)}for(let t=0;t<n;t++){const l=1&t?i:a,c=e-e/n*t;for(let e=0;e<r;e++){let t=e/r*(2*Math.PI),n=Math.sin(t)*c,i=Math.cos(t)*c;o.push(n,0,i),s.push(l.r,l.g,l.b),t=(e+1)/r*(2*Math.PI),n=Math.sin(t)*c,i=Math.cos(t)*c,o.push(n,0,i),s.push(l.r,l.g,l.b)}}const l=new Ss;l.setAttribute("position",new gs(o,3)),l.setAttribute("color",new gs(s,3)),super(l,new Ac({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const gf=new na,vf=new na,yf=new na;class bf extends Ro{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let r=new Ss;r.setAttribute("position",new gs([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new Ac({fog:!1,toneMapped:!1});this.lightPlane=new Dc(r,i),this.add(this.lightPlane),r=new Ss,r.setAttribute("position",new gs([0,0,0,0,0,1],3)),this.targetLine=new Dc(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),gf.setFromMatrixPosition(this.light.matrixWorld),vf.setFromMatrixPosition(this.light.target.matrixWorld),yf.subVectors(vf,gf),this.lightPlane.lookAt(vf),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(vf),this.targetLine.scale.z=yf.length()}}const xf=new na,wf=new Ws;class _f extends zc{constructor(e){const t=new Ss,n=new Ac({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],a={};function o(e,t){s(e),s(t)}function s(e){r.push(0,0,0),i.push(0,0,0),void 0===a[e]&&(a[e]=[]),a[e].push(r.length/3-1)}o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4"),t.setAttribute("position",new gs(r,3)),t.setAttribute("color",new gs(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const l=new Yo(16755200),c=new Yo(16711680),u=new Yo(43775),d=new Yo(16777215),h=new Yo(3355443);this.setColors(l,c,u,d,h)}setColors(e,t,n,r,i){const a=this.geometry.getAttribute("color");return a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,i.r,i.g,i.b),a.setXYZ(41,i.r,i.g,i.b),a.setXYZ(42,i.r,i.g,i.b),a.setXYZ(43,i.r,i.g,i.b),a.setXYZ(44,i.r,i.g,i.b),a.setXYZ(45,i.r,i.g,i.b),a.setXYZ(46,i.r,i.g,i.b),a.setXYZ(47,i.r,i.g,i.b),a.setXYZ(48,i.r,i.g,i.b),a.setXYZ(49,i.r,i.g,i.b),a.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap;let n,r;if(wf.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),!0===this.camera.reversedDepth)n=1,r=0;else if(this.camera.coordinateSystem===Si)n=-1,r=1;else{if(this.camera.coordinateSystem!==Mi)throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);n=0,r=1}Ef("c",t,e,wf,0,0,n),Ef("t",t,e,wf,0,0,r),Ef("n1",t,e,wf,-1,-1,n),Ef("n2",t,e,wf,1,-1,n),Ef("n3",t,e,wf,-1,1,n),Ef("n4",t,e,wf,1,1,n),Ef("f1",t,e,wf,-1,-1,r),Ef("f2",t,e,wf,1,-1,r),Ef("f3",t,e,wf,-1,1,r),Ef("f4",t,e,wf,1,1,r),Ef("u1",t,e,wf,.7,1.1,n),Ef("u2",t,e,wf,-.7,1.1,n),Ef("u3",t,e,wf,0,2,n),Ef("cf1",t,e,wf,-1,0,r),Ef("cf2",t,e,wf,1,0,r),Ef("cf3",t,e,wf,0,-1,r),Ef("cf4",t,e,wf,0,1,r),Ef("cn1",t,e,wf,-1,0,n),Ef("cn2",t,e,wf,1,0,n),Ef("cn3",t,e,wf,0,-1,n),Ef("cn4",t,e,wf,0,1,n),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ef(e,t,n,r,i,a,o){xf.set(i,a,o).unproject(r);const s=t[e];if(void 0!==s){const e=n.getAttribute("position");for(let t=0,n=s.length;t<n;t++)e.setXYZ(s[t],xf.x,xf.y,xf.z)}}const Sf=new Ca;class Mf extends zc{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Ss;i.setIndex(new ss(n,1)),i.setAttribute("position",new ss(r,3)),super(i,new Ac({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(void 0!==this.object&&Sf.setFromObject(this.object),Sf.isEmpty())return;const e=Sf.min,t=Sf.max,n=this.geometry.attributes.position,r=n.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Tf extends zc{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Ss;r.setIndex(new ss(n,1)),r.setAttribute("position",new gs([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new Ac({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Af extends Dc{constructor(e,t=1,n=16776960){const r=n,i=new Ss;i.setAttribute("position",new gs([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),i.computeBoundingSphere(),super(i,new Ac({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=new Ss;a.setAttribute("position",new gs([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),a.computeBoundingSphere(),this.add(new Us(a,new Jo({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Cf=new na;let Rf,Pf;class kf extends Ro{constructor(e=new na(0,0,1),t=new na(0,0,0),n=1,r=16776960,i=.2*n,a=.2*i){super(),this.type="ArrowHelper",void 0===Rf&&(Rf=new Ss,Rf.setAttribute("position",new gs([0,0,0,0,1,0],3)),Pf=new ou(.5,1,5,1),Pf.translate(0,-.5,0)),this.position.copy(t),this.line=new Dc(Rf,new Ac({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Us(Pf,new Jo({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Cf.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Cf,t)}}setLength(e,t=.2*e,n=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class If extends zc{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Ss;n.setAttribute("position",new gs(t,3)),n.setAttribute("color",new gs([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(n,new Ac({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const r=new Yo,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Lf{constructor(){this.type="ShapePath",this.color=new Yo,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Du,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,a){return this.currentPath.bezierCurveTo(e,t,n,r,i,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const n=t.length;let r=!1;for(let i=n-1,a=0;a<n;i=a++){let n=t[i],o=t[a],s=o.x-n.x,l=o.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[a],s=-s,o=t[i],l=-l),e.y<n.y||e.y>o.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-s*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(o.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=o.x)return!0}}return r}const n=cd.isClockWise,r=this.subPaths;if(0===r.length)return[];let i,a,o;const s=[];if(1===r.length)return a=r[0],o=new Uu,o.curves=a.curves,s.push(o),s;let l=!n(r[0].getPoints());l=e?!l:l;const c=[],u=[];let d,h,p=[],f=0;u[f]=void 0,p[f]=[];for(let t=0,o=r.length;t<o;t++)a=r[t],d=a.getPoints(),i=n(d),i=e?!i:i,i?(!l&&u[f]&&f++,u[f]={s:new Uu,p:d},u[f].s.curves=a.curves,l&&f++,p[f]=[]):p[f].push({h:a,p:d[0]});if(!u[0])return function(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],i=new Uu;i.curves=r.curves,t.push(i)}return t}(r);if(u.length>1){let e=!1,n=0;for(let e=0,t=u.length;e<t;e++)c[e]=[];for(let r=0,i=u.length;r<i;r++){const i=p[r];for(let a=0;a<i.length;a++){const o=i[a];let s=!0;for(let i=0;i<u.length;i++)t(o.p,u[i].p)&&(r!==i&&n++,s?(s=!1,c[i].push(o)):e=!0);s&&c[r].push(o)}}n>0&&!1===e&&(p=c)}for(let e=0,t=u.length;e<t;e++){o=u[e].s,s.push(o),h=p[e];for(let e=0,t=h.length;e<t;e++)o.holes.push(h[e].h)}return s}}class Nf extends Vi{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){void 0!==e?(null!==this.domElement&&this.disconnect(),this.domElement=e):zi("Controls: connect() now requires an element.")}disconnect(){}dispose(){}update(){}}function Df(e,t,n,r){const i=function(e){switch(e){case gn:case vn:return{byteLength:1,components:1};case bn:case yn:case En:return{byteLength:2,components:1};case Sn:case Mn:return{byteLength:2,components:4};case wn:case xn:case _n:return{byteLength:4,components:1};case An:case Cn:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${e}.`)}(r);switch(n){case Rn:return e*t;case Nn:case Dn:return e*t/i.components*i.byteLength;case Un:case On:return e*t*2/i.components*i.byteLength;case Pn:return e*t*3/i.components*i.byteLength;case kn:case zn:return e*t*4/i.components*i.byteLength;case Bn:case Hn:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case Vn:case jn:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case Gn:case qn:return Math.max(e,16)*Math.max(t,8)/4;case Wn:case Xn:return Math.max(e,8)*Math.max(t,8)/2;case Yn:case $n:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case Kn:case Zn:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case Jn:return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16;case Qn:return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16;case er:return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16;case tr:return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16;case nr:return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16;case rr:return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16;case ir:return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16;case ar:return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16;case or:return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16;case sr:return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16;case lr:return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16;case cr:return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16;case ur:return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16;case dr:case hr:case pr:return Math.ceil(e/4)*Math.ceil(t/4)*16;case fr:case mr:return Math.ceil(e/4)*Math.ceil(t/4)*8;case gr:case vr:return Math.ceil(e/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}class Uf{static contain(e,t){return function(e,t){const n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2):(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0),e}(e,t)}static cover(e,t){return function(e,t){const n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0):(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2),e}(e,t)}static fill(e){return function(e){return e.repeat.x=1,e.repeat.y=1,e.offset.x=0,e.offset.y=0,e}(e)}static getByteLength(e,t,n,r){return Df(e,t,n,r)}}function Of(){let e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Ff(e){const t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);const r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){if(n.isInterleavedBufferAttribute&&(n=n.data),n.isGLBufferAttribute){const e=t.get(n);return void((!e||e.version<n.version)&&t.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version}))}const i=t.get(n);if(void 0===i)t.set(n,function(t,n){const r=t.array,i=t.usage,a=r.byteLength,o=e.createBuffer();let s;if(e.bindBuffer(n,o),e.bufferData(n,r,i),t.onUploadCallback(),r instanceof Float32Array)s=e.FLOAT;else if("undefined"!=typeof Float16Array&&r instanceof Float16Array)s=e.HALF_FLOAT;else if(r instanceof Uint16Array)s=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(r instanceof Int16Array)s=e.SHORT;else if(r instanceof Uint32Array)s=e.UNSIGNED_INT;else if(r instanceof Int32Array)s=e.INT;else if(r instanceof Int8Array)s=e.BYTE;else if(r instanceof Uint8Array)s=e.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);s=e.UNSIGNED_BYTE}return{buffer:o,type:s,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version,size:a}}(n,r));else if(i.version<n.version){if(i.size!==n.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,n,r){const i=n.array,a=n.updateRanges;if(e.bindBuffer(r,t),0===a.length)e.bufferSubData(r,0,i);else{a.sort((e,t)=>e.start-t.start);let t=0;for(let e=1;e<a.length;e++){const n=a[t],r=a[e];r.start<=n.start+n.count+1?n.count=Math.max(n.count,r.start+r.count-n.start):(++t,a[t]=r)}a.length=t+1;for(let t=0,n=a.length;t<n;t++){const n=a[t];e.bufferSubData(r,n.start*i.BYTES_PER_ELEMENT,i,n.start,n.count)}n.clearUpdateRanges()}n.onUploadCallback()}(i.buffer,n,r),i.version=n.version}}}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:je}})),"undefined"!=typeof window&&(window.__THREE__?zi("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=je);const zf={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"uniform sampler2D dfgLUT;\nstruct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transpose( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 uv = vec2( roughness, dotNV );\n\treturn texture2D( dfgLUT, uv ).rg;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nvec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 dfgV = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNV * dotNV), 0.0, dotNV), material.roughness );\n\tvec2 dfgL = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNL * dotNL), 0.0, dotNL), material.roughness );\n\tvec3 FssEss_V = material.specularColor * dfgV.x + material.specularF90 * dfgV.y;\n\tvec3 FssEss_L = material.specularColor * dfgL.x + material.specularF90 * dfgL.y;\n\tfloat Ess_V = dfgV.x + dfgV.y;\n\tfloat Ess_L = dfgL.x + dfgL.y;\n\tfloat Ems_V = 1.0 - Ess_V;\n\tfloat Ems_L = 1.0 - Ess_L;\n\tvec3 Favg = material.specularColor + ( 1.0 - material.specularColor ) * 0.047619;\n\tvec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg * Favg + EPSILON );\n\tfloat compensationFactor = Ems_V * Ems_L;\n\tvec3 multiScatter = Fms * compensationFactor;\n\treturn singleScatter + multiScatter;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\tfloat depth = unpackRGBAToDepth( texture2D( depths, uv ) );\n\t\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\t\treturn step( depth, compare );\n\t\t#else\n\t\t\treturn step( compare, depth );\n\t\t#endif\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow( sampler2D shadow, vec2 uv, float compare ) {\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\t\tfloat hard_shadow = step( distribution.x, compare );\n\t\t#else\n\t\t\tfloat hard_shadow = step( compare, distribution.x );\n\t\t#endif\n\t\tif ( hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\tfloat fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];\n\t#else\n\t\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;\n\t#endif\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},Bf={common:{diffuse:{value:new Yo(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new aa},alphaMap:{value:null},alphaMapTransform:{value:new aa},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new aa}},envmap:{envMap:{value:null},envMapRotation:{value:new aa},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new aa}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new aa}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new aa},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new aa},normalScale:{value:new ea(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new aa},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new aa}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new aa}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new aa}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Yo(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Yo(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new aa},alphaTest:{value:0},uvTransform:{value:new aa}},sprite:{diffuse:{value:new Yo(16777215)},opacity:{value:1},center:{value:new ea(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new aa},alphaMap:{value:null},alphaMapTransform:{value:new aa},alphaTest:{value:0}}},Hf={basic:{uniforms:Bs([Bf.common,Bf.specularmap,Bf.envmap,Bf.aomap,Bf.lightmap,Bf.fog]),vertexShader:zf.meshbasic_vert,fragmentShader:zf.meshbasic_frag},lambert:{uniforms:Bs([Bf.common,Bf.specularmap,Bf.envmap,Bf.aomap,Bf.lightmap,Bf.emissivemap,Bf.bumpmap,Bf.normalmap,Bf.displacementmap,Bf.fog,Bf.lights,{emissive:{value:new Yo(0)}}]),vertexShader:zf.meshlambert_vert,fragmentShader:zf.meshlambert_frag},phong:{uniforms:Bs([Bf.common,Bf.specularmap,Bf.envmap,Bf.aomap,Bf.lightmap,Bf.emissivemap,Bf.bumpmap,Bf.normalmap,Bf.displacementmap,Bf.fog,Bf.lights,{emissive:{value:new Yo(0)},specular:{value:new Yo(1118481)},shininess:{value:30}}]),vertexShader:zf.meshphong_vert,fragmentShader:zf.meshphong_frag},standard:{uniforms:Bs([Bf.common,Bf.envmap,Bf.aomap,Bf.lightmap,Bf.emissivemap,Bf.bumpmap,Bf.normalmap,Bf.displacementmap,Bf.roughnessmap,Bf.metalnessmap,Bf.fog,Bf.lights,{emissive:{value:new Yo(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:zf.meshphysical_vert,fragmentShader:zf.meshphysical_frag},toon:{uniforms:Bs([Bf.common,Bf.aomap,Bf.lightmap,Bf.emissivemap,Bf.bumpmap,Bf.normalmap,Bf.displacementmap,Bf.gradientmap,Bf.fog,Bf.lights,{emissive:{value:new Yo(0)}}]),vertexShader:zf.meshtoon_vert,fragmentShader:zf.meshtoon_frag},matcap:{uniforms:Bs([Bf.common,Bf.bumpmap,Bf.normalmap,Bf.displacementmap,Bf.fog,{matcap:{value:null}}]),vertexShader:zf.meshmatcap_vert,fragmentShader:zf.meshmatcap_frag},points:{uniforms:Bs([Bf.points,Bf.fog]),vertexShader:zf.points_vert,fragmentShader:zf.points_frag},dashed:{uniforms:Bs([Bf.common,Bf.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:zf.linedashed_vert,fragmentShader:zf.linedashed_frag},depth:{uniforms:Bs([Bf.common,Bf.displacementmap]),vertexShader:zf.depth_vert,fragmentShader:zf.depth_frag},normal:{uniforms:Bs([Bf.common,Bf.bumpmap,Bf.normalmap,Bf.displacementmap,{opacity:{value:1}}]),vertexShader:zf.meshnormal_vert,fragmentShader:zf.meshnormal_frag},sprite:{uniforms:Bs([Bf.sprite,Bf.fog]),vertexShader:zf.sprite_vert,fragmentShader:zf.sprite_frag},background:{uniforms:{uvTransform:{value:new aa},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:zf.background_vert,fragmentShader:zf.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new aa}},vertexShader:zf.backgroundCube_vert,fragmentShader:zf.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:zf.cube_vert,fragmentShader:zf.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:zf.equirect_vert,fragmentShader:zf.equirect_frag},distanceRGBA:{uniforms:Bs([Bf.common,Bf.displacementmap,{referencePosition:{value:new na},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:zf.distanceRGBA_vert,fragmentShader:zf.distanceRGBA_frag},shadow:{uniforms:Bs([Bf.lights,Bf.fog,{color:{value:new Yo(0)},opacity:{value:1}}]),vertexShader:zf.shadow_vert,fragmentShader:zf.shadow_frag}};Hf.physical={uniforms:Bs([Hf.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new aa},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new aa},clearcoatNormalScale:{value:new ea(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new aa},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new aa},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new aa},sheen:{value:0},sheenColor:{value:new Yo(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new aa},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new aa},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new aa},transmissionSamplerSize:{value:new ea},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new aa},attenuationDistance:{value:0},attenuationColor:{value:new Yo(0)},specularColor:{value:new Yo(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new aa},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new aa},anisotropyVector:{value:new ea},anisotropyMap:{value:null},anisotropyMapTransform:{value:new aa}}]),vertexShader:zf.meshphysical_vert,fragmentShader:zf.meshphysical_frag};const Vf={r:0,b:0,g:0},jf=new ho,Wf=new to;function Gf(e,t,n,r,i,a,o){const s=new Yo(0);let l,c,u=!0===a?0:1,d=null,h=0,p=null;function f(e){let r=!0===e.isScene?e.background:null;return r&&r.isTexture&&(r=(e.backgroundBlurriness>0?n:t).get(r)),r}function m(t,n){t.getRGB(Vf,Hs(e)),r.buffers.color.setClear(Vf.r,Vf.g,Vf.b,n,o)}return{getClearColor:function(){return s},setClearColor:function(e,t=1){s.set(e),u=t,m(s,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,m(s,u)},render:function(t){let n=!1;const i=f(t);null===i?m(s,u):i&&i.isColor&&(m(i,1),n=!0);const a=e.xr.getEnvironmentBlendMode();"additive"===a?r.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===a&&r.buffers.color.setClear(0,0,0,0,o),(e.autoClear||n)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(t,n){const r=f(n);r&&(r.isCubeTexture||r.mapping===tn)?(void 0===c&&(c=new Us(new Fs(1,1,1),new js({name:"BackgroundCubeMaterial",uniforms:zs(Hf.backgroundCube.uniforms),vertexShader:Hf.backgroundCube.vertexShader,fragmentShader:Hf.backgroundCube.fragmentShader,side:tt,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),jf.copy(n.backgroundRotation),jf.x*=-1,jf.y*=-1,jf.z*=-1,r.isCubeTexture&&!1===r.isRenderTargetTexture&&(jf.y*=-1,jf.z*=-1),c.material.uniforms.envMap.value=r,c.material.uniforms.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(Wf.makeRotationFromEuler(jf)),c.material.toneMapped=ua.getTransfer(r.colorSpace)!==Vr,d===r&&h===r.version&&p===e.toneMapping||(c.material.needsUpdate=!0,d=r,h=r.version,p=e.toneMapping),c.layers.enableAll(),t.unshift(c,c.geometry,c.material,0,0,null)):r&&r.isTexture&&(void 0===l&&(l=new Us(new vd(2,2),new js({name:"BackgroundMaterial",uniforms:zs(Hf.background.uniforms),vertexShader:Hf.background.vertexShader,fragmentShader:Hf.background.fragmentShader,side:et,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=r,l.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,l.material.toneMapped=ua.getTransfer(r.colorSpace)!==Vr,!0===r.matrixAutoUpdate&&r.updateMatrix(),l.material.uniforms.uvTransform.value.copy(r.matrix),d===r&&h===r.version&&p===e.toneMapping||(l.material.needsUpdate=!0,d=r,h=r.version,p=e.toneMapping),l.layers.enableAll(),t.unshift(l,l.geometry,l.material,0,0,null))},dispose:function(){void 0!==c&&(c.geometry.dispose(),c.material.dispose(),c=void 0),void 0!==l&&(l.geometry.dispose(),l.material.dispose(),l=void 0)}}}function Xf(e,t){const n=e.getParameter(e.MAX_VERTEX_ATTRIBS),r={},i=c(null);let a=i,o=!1;function s(t){return e.bindVertexArray(t)}function l(t){return e.deleteVertexArray(t)}function c(e){const t=[],r=[],i=[];for(let e=0;e<n;e++)t[e]=0,r[e]=0,i[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:r,attributeDivisors:i,object:e,attributes:{},index:null}}function u(){const e=a.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function d(e){h(e,0)}function h(t,n){const r=a.newAttributes,i=a.enabledAttributes,o=a.attributeDivisors;r[t]=1,0===i[t]&&(e.enableVertexAttribArray(t),i[t]=1),o[t]!==n&&(e.vertexAttribDivisor(t,n),o[t]=n)}function p(){const t=a.newAttributes,n=a.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function f(t,n,r,i,a,o,s){!0===s?e.vertexAttribIPointer(t,n,r,a,o):e.vertexAttribPointer(t,n,r,i,a,o)}function m(){g(),o=!0,a!==i&&(a=i,s(a.object))}function g(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:function(n,i,l,m,g){let v=!1;const y=function(t,n,i){const a=!0===i.wireframe;let o=r[t.id];void 0===o&&(o={},r[t.id]=o);let s=o[n.id];void 0===s&&(s={},o[n.id]=s);let l=s[a];return void 0===l&&(l=c(e.createVertexArray()),s[a]=l),l}(m,l,i);a!==y&&(a=y,s(a.object)),v=function(e,t,n,r){const i=a.attributes,o=t.attributes;let s=0;const l=n.getAttributes();for(const t in l)if(l[t].location>=0){const n=i[t];let r=o[t];if(void 0===r&&("instanceMatrix"===t&&e.instanceMatrix&&(r=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(r=e.instanceColor)),void 0===n)return!0;if(n.attribute!==r)return!0;if(r&&n.data!==r.data)return!0;s++}return a.attributesNum!==s||a.index!==r}(n,m,l,g),v&&function(e,t,n,r){const i={},o=t.attributes;let s=0;const l=n.getAttributes();for(const t in l)if(l[t].location>=0){let n=o[t];void 0===n&&("instanceMatrix"===t&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(n=e.instanceColor));const r={};r.attribute=n,n&&n.data&&(r.data=n.data),i[t]=r,s++}a.attributes=i,a.attributesNum=s,a.index=r}(n,m,l,g),null!==g&&t.update(g,e.ELEMENT_ARRAY_BUFFER),(v||o)&&(o=!1,function(n,r,i,a){u();const o=a.attributes,s=i.getAttributes(),l=r.defaultAttributeValues;for(const r in s){const i=s[r];if(i.location>=0){let s=o[r];if(void 0===s&&("instanceMatrix"===r&&n.instanceMatrix&&(s=n.instanceMatrix),"instanceColor"===r&&n.instanceColor&&(s=n.instanceColor)),void 0!==s){const r=s.normalized,o=s.itemSize,l=t.get(s);if(void 0===l)continue;const c=l.buffer,u=l.type,p=l.bytesPerElement,m=u===e.INT||u===e.UNSIGNED_INT||s.gpuType===xn;if(s.isInterleavedBufferAttribute){const t=s.data,l=t.stride,g=s.offset;if(t.isInstancedInterleavedBuffer){for(let e=0;e<i.locationSize;e++)h(i.location+e,t.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=t.meshPerAttribute*t.count)}else for(let e=0;e<i.locationSize;e++)d(i.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<i.locationSize;e++)f(i.location+e,o/i.locationSize,u,r,l*p,(g+o/i.locationSize*e)*p,m)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<i.locationSize;e++)h(i.location+e,s.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<i.locationSize;e++)d(i.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<i.locationSize;e++)f(i.location+e,o/i.locationSize,u,r,o*p,o/i.locationSize*e*p,m)}}else if(void 0!==l){const t=l[r];if(void 0!==t)switch(t.length){case 2:e.vertexAttrib2fv(i.location,t);break;case 3:e.vertexAttrib3fv(i.location,t);break;case 4:e.vertexAttrib4fv(i.location,t);break;default:e.vertexAttrib1fv(i.location,t)}}}}p()}(n,i,l,m),null!==g&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(g).buffer))},reset:m,resetDefaultState:g,dispose:function(){m();for(const e in r){const t=r[e];for(const e in t){const n=t[e];for(const e in n)l(n[e].object),delete n[e];delete t[e]}delete r[e]}},releaseStatesOfGeometry:function(e){if(void 0===r[e.id])return;const t=r[e.id];for(const e in t){const n=t[e];for(const e in n)l(n[e].object),delete n[e];delete t[e]}delete r[e.id]},releaseStatesOfProgram:function(e){for(const t in r){const n=r[t];if(void 0===n[e.id])continue;const i=n[e.id];for(const e in i)l(i[e].object),delete i[e];delete n[e.id]}},initAttributes:u,enableAttribute:d,disableUnusedAttributes:p}}function qf(e,t,n){let r;function i(t,i,a){0!==a&&(e.drawArraysInstanced(r,t,i,a),n.update(i,r,a))}this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.update(i,r,1)},this.renderInstances=i,this.renderMultiDraw=function(e,i,a){if(0===a)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,e,0,i,0,a);let o=0;for(let e=0;e<a;e++)o+=i[e];n.update(o,r,1)},this.renderMultiDrawInstances=function(e,a,o,s){if(0===o)return;const l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<e.length;t++)i(e[t],a[t],s[t]);else{l.multiDrawArraysInstancedWEBGL(r,e,0,a,0,s,0,o);let t=0;for(let e=0;e<o;e++)t+=a[e]*s[e];n.update(t,r,1)}}}function Yf(e,t,n,r){let i;function a(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let o=void 0!==n.precision?n.precision:"highp";const s=a(o);s!==o&&(zi("WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);const l=!0===n.logarithmicDepthBuffer,c=!0===n.reversedDepthBuffer&&t.has("EXT_clip_control"),u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:a,textureFormatReadable:function(t){return t===kn||r.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){const i=n===En&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(n!==gn&&r.convert(n)!==e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)&&n!==_n&&!i)},precision:o,logarithmicDepthBuffer:l,reversedDepthBuffer:c,maxTextures:u,maxVertexTextures:d,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:d>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function $f(e){const t=this;let n=null,r=0,i=!1,a=!1;const o=new ec,s=new aa,l={value:null,needsUpdate:!1};function c(e,n,r,i){const a=null!==e?e.length:0;let c=null;if(0!==a){if(c=l.value,!0!==i||null===c){const t=r+4*a,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,n=r;t!==a;++t,n+=4)o.copy(e[t]).applyMatrix4(i,s),o.normal.toArray(c,n),c[n+3]=o.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(o,s,u){const d=o.clippingPlanes,h=o.clipIntersection,p=o.clipShadows,f=e.get(o);if(!i||null===d||0===d.length||a&&!p)a?c(null):(l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0);else{const e=a?0:r,t=4*e;let i=f.clippingState||null;l.value=i,i=c(d,s,t,u);for(let e=0;e!==t;++e)i[e]=n[e];f.clippingState=i,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function Kf(e){let t=new WeakMap;function n(e,t){return t===Qt?e.mapping=Zt:t===en&&(e.mapping=Jt),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const a=i.mapping;if(a===Qt||a===en){if(t.has(i))return n(t.get(i).texture,i.mapping);{const a=i.image;if(a&&a.height>0){const o=new Js(a.height);return o.fromEquirectangularTexture(e,i),t.set(i,o),i.addEventListener("dispose",r),n(o.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}const Zf=[.125,.215,.35,.446,.526,.582],Jf=new Lh,Qf=new Yo;let em=null,tm=0,nm=0,rm=!1;const im=new na;class am{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,n=.1,r=100,i={}){const{size:a=256,position:o=im}=i;em=this._renderer.getRenderTarget(),tm=this._renderer.getActiveCubeFace(),nm=this._renderer.getActiveMipmapLevel(),rm=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,r,s,o),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=cm(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=lm(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose(),null!==this._backgroundBox&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._ggxMaterial&&this._ggxMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(em,tm,nm),this._renderer.xr.enabled=rm,e.scissorTest=!1,sm(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Zt||e.mapping===Jt?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),em=this._renderer.getRenderTarget(),tm=this._renderer.getActiveCubeFace(),nm=this._renderer.getActiveMipmapLevel(),rm=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:dn,minFilter:dn,generateMipmaps:!1,type:En,format:kn,colorSpace:Br,depthBuffer:!1},r=om(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=om(e,t,n);const{_lodMax:r}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let i=e;const a=e-4+1+Zf.length;for(let o=0;o<a;o++){const a=Math.pow(2,i);t.push(a);let s=1/a;o>e-4?s=Zf[o-e+4-1]:0===o&&(s=0),n.push(s);const l=1/(a-2),c=-l,u=1+l,d=[c,c,u,c,u,u,c,c,u,u,c,u],h=6,p=6,f=3,m=2,g=1,v=new Float32Array(f*p*h),y=new Float32Array(m*p*h),b=new Float32Array(g*p*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(r,f*p*e),y.set(d,m*p*e);const i=[e,e,e,e,e,e];b.set(i,g*p*e)}const x=new Ss;x.setAttribute("position",new ss(v,f)),x.setAttribute("uv",new ss(y,m)),x.setAttribute("faceIndex",new ss(b,g)),r.push(new Us(x,null)),i>4&&i--}return{lodMeshes:r,sizeLods:t,sigmas:n}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(20),i=new na(0,1,0);return new js({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:rt,depthTest:!1,depthWrite:!1})}(r,e,t),this._ggxMaterial=function(e,t,n){return new js({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:256,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:'\n\n\t\t\tprecision highp float;\n\t\t\tprecision highp int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform float roughness;\n\t\t\tuniform float mipInt;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\t#define PI 3.14159265359\n\n\t\t\t// Van der Corput radical inverse\n\t\t\tfloat radicalInverse_VdC(uint bits) {\n\t\t\t\tbits = (bits << 16u) | (bits >> 16u);\n\t\t\t\tbits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\n\t\t\t\tbits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\n\t\t\t\tbits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\n\t\t\t\tbits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\n\t\t\t\treturn float(bits) * 2.3283064365386963e-10; // / 0x100000000\n\t\t\t}\n\n\t\t\t// Hammersley sequence\n\t\t\tvec2 hammersley(uint i, uint N) {\n\t\t\t\treturn vec2(float(i) / float(N), radicalInverse_VdC(i));\n\t\t\t}\n\n\t\t\t// GGX VNDF importance sampling (Eric Heitz 2018)\n\t\t\t// "Sampling the GGX Distribution of Visible Normals"\n\t\t\t// https://jcgt.org/published/0007/04/01/\n\t\t\tvec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {\n\t\t\t\tfloat alpha = roughness * roughness;\n\n\t\t\t\t// Section 3.2: Transform view direction to hemisphere configuration\n\t\t\t\tvec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));\n\n\t\t\t\t// Section 4.1: Orthonormal basis\n\t\t\t\tfloat lensq = Vh.x * Vh.x + Vh.y * Vh.y;\n\t\t\t\tvec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);\n\t\t\t\tvec3 T2 = cross(Vh, T1);\n\n\t\t\t\t// Section 4.2: Parameterization of projected area\n\t\t\t\tfloat r = sqrt(Xi.x);\n\t\t\t\tfloat phi = 2.0 * PI * Xi.y;\n\t\t\t\tfloat t1 = r * cos(phi);\n\t\t\t\tfloat t2 = r * sin(phi);\n\t\t\t\tfloat s = 0.5 * (1.0 + Vh.z);\n\t\t\t\tt2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;\n\n\t\t\t\t// Section 4.3: Reprojection onto hemisphere\n\t\t\t\tvec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;\n\n\t\t\t\t// Section 3.4: Transform back to ellipsoid configuration\n\t\t\t\treturn normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));\n\t\t\t}\n\n\t\t\tvoid main() {\n\t\t\t\tvec3 N = normalize(vOutputDirection);\n\t\t\t\tvec3 V = N; // Assume view direction equals normal for pre-filtering\n\n\t\t\t\tvec3 prefilteredColor = vec3(0.0);\n\t\t\t\tfloat totalWeight = 0.0;\n\n\t\t\t\t// For very low roughness, just sample the environment directly\n\t\t\t\tif (roughness < 0.001) {\n\t\t\t\t\tgl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Tangent space basis for VNDF sampling\n\t\t\t\tvec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\n\t\t\t\tvec3 tangent = normalize(cross(up, N));\n\t\t\t\tvec3 bitangent = cross(N, tangent);\n\n\t\t\t\tfor(uint i = 0u; i < uint(GGX_SAMPLES); i++) {\n\t\t\t\t\tvec2 Xi = hammersley(i, uint(GGX_SAMPLES));\n\n\t\t\t\t\t// For PMREM, V = N, so in tangent space V is always (0, 0, 1)\n\t\t\t\t\tvec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);\n\n\t\t\t\t\t// Transform H back to world space\n\t\t\t\t\tvec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);\n\t\t\t\t\tvec3 L = normalize(2.0 * dot(V, H) * H - V);\n\n\t\t\t\t\tfloat NdotL = max(dot(N, L), 0.0);\n\n\t\t\t\t\tif(NdotL > 0.0) {\n\t\t\t\t\t\t// Sample environment at fixed mip level\n\t\t\t\t\t\t// VNDF importance sampling handles the distribution filtering\n\t\t\t\t\t\tvec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);\n\n\t\t\t\t\t\t// Weight by NdotL for the split-sum approximation\n\t\t\t\t\t\t// VNDF PDF naturally accounts for the visible microfacet distribution\n\t\t\t\t\t\tprefilteredColor += sampleColor * NdotL;\n\t\t\t\t\t\ttotalWeight += NdotL;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (totalWeight > 0.0) {\n\t\t\t\t\tprefilteredColor = prefilteredColor / totalWeight;\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = vec4(prefilteredColor, 1.0);\n\t\t\t}\n\t\t',blending:rt,depthTest:!1,depthWrite:!1})}(r,e,t)}return r}_compileMaterial(e){const t=new Us(new Ss,e);this._renderer.compile(t,Jf)}_sceneToCubeUV(e,t,n,r,i){const a=new Ys(90,1,t,n),o=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],l=this._renderer,c=l.autoClear,u=l.toneMapping;l.getClearColor(Qf),l.toneMapping=Bt,l.autoClear=!1,l.state.buffers.depth.getReversed()&&(l.setRenderTarget(r),l.clearDepth(),l.setRenderTarget(null)),null===this._backgroundBox&&(this._backgroundBox=new Us(new Fs,new Jo({name:"PMREM.Background",side:tt,depthWrite:!1,depthTest:!1})));const d=this._backgroundBox,h=d.material;let p=!1;const f=e.background;f?f.isColor&&(h.color.copy(f),e.background=null,p=!0):(h.color.copy(Qf),p=!0);for(let t=0;t<6;t++){const n=t%3;0===n?(a.up.set(0,o[t],0),a.position.set(i.x,i.y,i.z),a.lookAt(i.x+s[t],i.y,i.z)):1===n?(a.up.set(0,0,o[t]),a.position.set(i.x,i.y,i.z),a.lookAt(i.x,i.y+s[t],i.z)):(a.up.set(0,o[t],0),a.position.set(i.x,i.y,i.z),a.lookAt(i.x,i.y,i.z+s[t]));const c=this._cubeSize;sm(r,n*c,t>2?c:0,c,c),l.setRenderTarget(r),p&&l.render(d,a),l.render(e,a)}l.toneMapping=u,l.autoClear=c,e.background=f}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===Zt||e.mapping===Jt;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=cm()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=lm());const i=r?this._cubemapMaterial:this._equirectMaterial,a=this._lodMeshes[0];a.material=i,i.uniforms.envMap.value=e;const o=this._cubeSize;sm(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(a,Jf)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodMeshes.length;for(let t=1;t<r;t++)this._applyGGXFilter(e,t-1,t);t.autoClear=n}_applyGGXFilter(e,t,n){const r=this._renderer,i=this._pingPongRenderTarget,a=this._ggxMaterial,o=this._lodMeshes[n];o.material=a;const s=a.uniforms,l=n/(this._lodMeshes.length-1),c=t/(this._lodMeshes.length-1),u=Math.sqrt(l*l-c*c)*(.05+.95*l),{_lodMax:d}=this,h=this._sizeLods[n],p=3*h*(n>d-4?n-d+4:0),f=4*(this._cubeSize-h);s.envMap.value=e.texture,s.roughness.value=u,s.mipInt.value=d-t,sm(i,p,f,3*h,2*h),r.setRenderTarget(i),r.render(o,Jf),s.envMap.value=i.texture,s.roughness.value=0,s.mipInt.value=d-n,sm(e,p,f,3*h,2*h),r.setRenderTarget(e),r.render(o,Jf)}_blur(e,t,n,r,i){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,a,o){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&Bi("blur direction must be either latitudinal or longitudinal!");const c=this._lodMeshes[r];c.material=l;const u=l.uniforms,d=this._sizeLods[n]-1,h=isFinite(i)?Math.PI/(2*d):2*Math.PI/39,p=i/h,f=isFinite(i)?1+Math.floor(3*p):20;f>20&&zi(`sigmaRadians, ${i}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);const m=[];let g=0;for(let e=0;e<20;++e){const t=e/p,n=Math.exp(-t*t/2);m.push(n),0===e?g+=n:e<f&&(g+=2*n)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===a,o&&(u.poleAxis.value=o);const{_lodMax:v}=this;u.dTheta.value=h,u.mipInt.value=v-n;const y=this._sizeLods[r];sm(t,3*y*(r>v-4?r-v+4:0),4*(this._cubeSize-y),3*y,2*y),s.setRenderTarget(t),s.render(c,Jf)}}function om(e,t,n){const r=new Ea(e,t,n);return r.texture.mapping=tn,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function sm(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function lm(){return new js({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:rt,depthTest:!1,depthWrite:!1})}function cm(){return new js({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:rt,depthTest:!1,depthWrite:!1})}function um(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const a=i.mapping,o=a===Qt||a===en,s=a===Zt||a===Jt;if(o||s){let a=t.get(i);const l=void 0!==a?a.texture.pmremVersion:0;if(i.isRenderTargetTexture&&i.pmremVersion!==l)return null===n&&(n=new am(e)),a=o?n.fromEquirectangular(i,a):n.fromCubemap(i,a),a.texture.pmremVersion=i.pmremVersion,t.set(i,a),a.texture;if(void 0!==a)return a.texture;{const l=i.image;return o&&l&&l.height>0||s&&l&&function(e){let t=0;for(let n=0;n<6;n++)void 0!==e[n]&&t++;return 6===t}(l)?(null===n&&(n=new am(e)),a=o?n.fromEquirectangular(i):n.fromCubemap(i),a.texture.pmremVersion=i.pmremVersion,t.set(i,a),i.addEventListener("dispose",r),a.texture):null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function dm(e){const t={};function n(n){if(void 0!==t[n])return t[n];const r=e.getExtension(n);return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(e){const t=n(e);return null===t&&Hi("WebGLRenderer: "+e+" extension not supported."),t}}}function hm(e,t,n,r){const i={},a=new WeakMap;function o(e){const s=e.target;null!==s.index&&t.remove(s.index);for(const e in s.attributes)t.remove(s.attributes[e]);s.removeEventListener("dispose",o),delete i[s.id];const l=a.get(s);l&&(t.remove(l),a.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],r=e.index,i=e.attributes.position;let o=0;if(null!==r){const e=r.array;o=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],a=e[t+2];n.push(r,i,i,a,a,r)}}else{if(void 0===i)return;{const e=i.array;o=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}}const s=new(Ri(n)?fs:hs)(n,1);s.version=o;const l=a.get(e);l&&t.remove(l),a.set(e,s)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",o),i[t.id]=!0,n.memory.geometries++),t},update:function(n){const r=n.attributes;for(const n in r)t.update(r[n],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){const t=a.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function pm(e,t,n){let r,i,a;function o(t,o,s){0!==s&&(e.drawElementsInstanced(r,o,i,t*a,s),n.update(o,r,s))}this.setMode=function(e){r=e},this.setIndex=function(e){i=e.type,a=e.bytesPerElement},this.render=function(t,o){e.drawElements(r,o,i,t*a),n.update(o,r,1)},this.renderInstances=o,this.renderMultiDraw=function(e,a,o){if(0===o)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,a,0,i,e,0,o);let s=0;for(let e=0;e<o;e++)s+=a[e];n.update(s,r,1)},this.renderMultiDrawInstances=function(e,s,l,c){if(0===l)return;const u=t.get("WEBGL_multi_draw");if(null===u)for(let t=0;t<e.length;t++)o(e[t]/a,s[t],c[t]);else{u.multiDrawElementsInstancedWEBGL(r,s,0,i,e,0,c,0,l);let t=0;for(let e=0;e<l;e++)t+=s[e]*c[e];n.update(t,r,1)}}}function fm(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:Bi("WebGLInfo: Unknown draw mode:",r)}}}}function mm(e,t,n){const r=new WeakMap,i=new wa;return{update:function(a,o,s){const l=a.morphTargetInfluences,c=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,u=void 0!==c?c.length:0;let d=r.get(o);if(void 0===d||d.count!==u){void 0!==d&&d.texture.dispose();const h=void 0!==o.morphAttributes.position,p=void 0!==o.morphAttributes.normal,f=void 0!==o.morphAttributes.color,m=o.morphAttributes.position||[],g=o.morphAttributes.normal||[],v=o.morphAttributes.color||[];let y=0;!0===h&&(y=1),!0===p&&(y=2),!0===f&&(y=3);let b=o.attributes.position.count*y,x=1;b>t.maxTextureSize&&(x=Math.ceil(b/t.maxTextureSize),b=t.maxTextureSize);const w=new Float32Array(b*x*4*u),_=new Sa(w,b,x,u);_.type=_n,_.needsUpdate=!0;const E=4*y;for(let M=0;M<u;M++){const T=m[M],A=g[M],C=v[M],R=b*x*4*M;for(let P=0;P<T.count;P++){const k=P*E;!0===h&&(i.fromBufferAttribute(T,P),w[R+k+0]=i.x,w[R+k+1]=i.y,w[R+k+2]=i.z,w[R+k+3]=0),!0===p&&(i.fromBufferAttribute(A,P),w[R+k+4]=i.x,w[R+k+5]=i.y,w[R+k+6]=i.z,w[R+k+7]=0),!0===f&&(i.fromBufferAttribute(C,P),w[R+k+8]=i.x,w[R+k+9]=i.y,w[R+k+10]=i.z,w[R+k+11]=4===C.itemSize?i.w:1)}}function S(){_.dispose(),r.delete(o),o.removeEventListener("dispose",S)}d={count:u,texture:_,size:new ea(b,x)},r.set(o,d),o.addEventListener("dispose",S)}if(!0===a.isInstancedMesh&&null!==a.morphTexture)s.getUniforms().setValue(e,"morphTexture",a.morphTexture,n);else{let I=0;for(let N=0;N<l.length;N++)I+=l[N];const L=o.morphTargetsRelative?1:1-I;s.getUniforms().setValue(e,"morphTargetBaseInfluence",L),s.getUniforms().setValue(e,"morphTargetInfluences",l)}s.getUniforms().setValue(e,"morphTargetsTexture",d.texture,n),s.getUniforms().setValue(e,"morphTargetsTextureSize",d.size)}}}function gm(e,t,n,r){let i=new WeakMap;function a(e){const t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(o){const s=r.render.frame,l=o.geometry,c=t.get(o,l);if(i.get(c)!==s&&(t.update(c),i.set(c,s)),o.isInstancedMesh&&(!1===o.hasEventListener("dispose",a)&&o.addEventListener("dispose",a),i.get(o)!==s&&(n.update(o.instanceMatrix,e.ARRAY_BUFFER),null!==o.instanceColor&&n.update(o.instanceColor,e.ARRAY_BUFFER),i.set(o,s))),o.isSkinnedMesh){const e=o.skeleton;i.get(e)!==s&&(e.update(),i.set(e,s))}return c},dispose:function(){i=new WeakMap}}}const vm=new xa,ym=new tu(1,1),bm=new Sa,xm=new Ta,wm=new Zs,_m=[],Em=[],Sm=new Float32Array(16),Mm=new Float32Array(9),Tm=new Float32Array(4);function Am(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let a=_m[i];if(void 0===a&&(a=new Float32Array(i),_m[i]=a),0!==t){r.toArray(a,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(a,i)}return a}function Cm(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Rm(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function Pm(e,t){let n=Em[t];void 0===n&&(n=new Int32Array(t),Em[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function km(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Im(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Cm(n,t))return;e.uniform2fv(this.addr,t),Rm(n,t)}}function Lm(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Cm(n,t))return;e.uniform3fv(this.addr,t),Rm(n,t)}}function Nm(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Cm(n,t))return;e.uniform4fv(this.addr,t),Rm(n,t)}}function Dm(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Cm(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Rm(n,t)}else{if(Cm(n,r))return;Tm.set(r),e.uniformMatrix2fv(this.addr,!1,Tm),Rm(n,r)}}function Um(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Cm(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Rm(n,t)}else{if(Cm(n,r))return;Mm.set(r),e.uniformMatrix3fv(this.addr,!1,Mm),Rm(n,r)}}function Om(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Cm(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Rm(n,t)}else{if(Cm(n,r))return;Sm.set(r),e.uniformMatrix4fv(this.addr,!1,Sm),Rm(n,r)}}function Fm(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function zm(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Cm(n,t))return;e.uniform2iv(this.addr,t),Rm(n,t)}}function Bm(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Cm(n,t))return;e.uniform3iv(this.addr,t),Rm(n,t)}}function Hm(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Cm(n,t))return;e.uniform4iv(this.addr,t),Rm(n,t)}}function Vm(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function jm(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Cm(n,t))return;e.uniform2uiv(this.addr,t),Rm(n,t)}}function Wm(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Cm(n,t))return;e.uniform3uiv(this.addr,t),Rm(n,t)}}function Gm(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Cm(n,t))return;e.uniform4uiv(this.addr,t),Rm(n,t)}}function Xm(e,t,n){const r=this.cache,i=n.allocateTextureUnit();let a;r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),this.type===e.SAMPLER_2D_SHADOW?(ym.compareFunction=li,a=ym):a=vm,n.setTexture2D(t||a,i)}function qm(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||xm,i)}function Ym(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||wm,i)}function $m(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||bm,i)}function Km(e,t){e.uniform1fv(this.addr,t)}function Zm(e,t){const n=Am(t,this.size,2);e.uniform2fv(this.addr,n)}function Jm(e,t){const n=Am(t,this.size,3);e.uniform3fv(this.addr,n)}function Qm(e,t){const n=Am(t,this.size,4);e.uniform4fv(this.addr,n)}function eg(e,t){const n=Am(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function tg(e,t){const n=Am(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function ng(e,t){const n=Am(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function rg(e,t){e.uniform1iv(this.addr,t)}function ig(e,t){e.uniform2iv(this.addr,t)}function ag(e,t){e.uniform3iv(this.addr,t)}function og(e,t){e.uniform4iv(this.addr,t)}function sg(e,t){e.uniform1uiv(this.addr,t)}function lg(e,t){e.uniform2uiv(this.addr,t)}function cg(e,t){e.uniform3uiv(this.addr,t)}function ug(e,t){e.uniform4uiv(this.addr,t)}function dg(e,t,n){const r=this.cache,i=t.length,a=Pm(n,i);Cm(r,a)||(e.uniform1iv(this.addr,a),Rm(r,a));for(let e=0;e!==i;++e)n.setTexture2D(t[e]||vm,a[e])}function hg(e,t,n){const r=this.cache,i=t.length,a=Pm(n,i);Cm(r,a)||(e.uniform1iv(this.addr,a),Rm(r,a));for(let e=0;e!==i;++e)n.setTexture3D(t[e]||xm,a[e])}function pg(e,t,n){const r=this.cache,i=t.length,a=Pm(n,i);Cm(r,a)||(e.uniform1iv(this.addr,a),Rm(r,a));for(let e=0;e!==i;++e)n.setTextureCube(t[e]||wm,a[e])}function fg(e,t,n){const r=this.cache,i=t.length,a=Pm(n,i);Cm(r,a)||(e.uniform1iv(this.addr,a),Rm(r,a));for(let e=0;e!==i;++e)n.setTexture2DArray(t[e]||bm,a[e])}class mg{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return km;case 35664:return Im;case 35665:return Lm;case 35666:return Nm;case 35674:return Dm;case 35675:return Um;case 35676:return Om;case 5124:case 35670:return Fm;case 35667:case 35671:return zm;case 35668:case 35672:return Bm;case 35669:case 35673:return Hm;case 5125:return Vm;case 36294:return jm;case 36295:return Wm;case 36296:return Gm;case 35678:case 36198:case 36298:case 36306:case 35682:return Xm;case 35679:case 36299:case 36307:return qm;case 35680:case 36300:case 36308:case 36293:return Ym;case 36289:case 36303:case 36311:case 36292:return $m}}(t.type)}}class gg{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Km;case 35664:return Zm;case 35665:return Jm;case 35666:return Qm;case 35674:return eg;case 35675:return tg;case 35676:return ng;case 5124:case 35670:return rg;case 35667:case 35671:return ig;case 35668:case 35672:return ag;case 35669:case 35673:return og;case 5125:return sg;case 36294:return lg;case 36295:return cg;case 36296:return ug;case 35678:case 36198:case 36298:case 36306:case 35682:return dg;case 35679:case 36299:case 36307:return hg;case 35680:case 36300:case 36308:case 36293:return pg;case 36289:case 36303:case 36311:case 36292:return fg}}(t.type)}}class vg{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,a=r.length;i!==a;++i){const a=r[i];a.setValue(e,t[a.id],n)}}}const yg=/(\w+)(\])?(\[|\.)?/g;function bg(e,t){e.seq.push(t),e.map[t.id]=t}function xg(e,t,n){const r=e.name,i=r.length;for(yg.lastIndex=0;;){const a=yg.exec(r),o=yg.lastIndex;let s=a[1];const l="]"===a[2],c=a[3];if(l&&(s|=0),void 0===c||"["===c&&o+2===i){bg(n,void 0===c?new mg(s,e,t):new gg(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new vg(s),bg(n,e)),n=e}}}class wg{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);xg(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,a=t.length;i!==a;++i){const a=t[i],o=n[a.id];!1!==o.needsUpdate&&a.setValue(e,o.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n}}function _g(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let Eg=0;const Sg=new aa;function Mg(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),i=(e.getShaderInfoLog(t)||"").trim();if(r&&""===i)return"";const a=/ERROR: 0:(\d+)/.exec(i);if(a){const r=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){const n=e.split("\n"),r=[],i=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let e=i;e<a;e++){const i=e+1;r.push(`${i===t?">":" "} ${i}: ${n[e]}`)}return r.join("\n")}(e.getShaderSource(t),r)}return i}function Tg(e,t){const n=function(e){ua._getMatrix(Sg,ua.workingColorSpace,e);const t=`mat3( ${Sg.elements.map(e=>e.toFixed(4))} )`;switch(ua.getTransfer(e)){case Hr:return[t,"LinearTransferOETF"];case Vr:return[t,"sRGBTransferOETF"];default:return zi("WebGLProgram: Unsupported color space: ",e),[t,"LinearTransferOETF"]}}(t);return[`vec4 ${e}( vec4 value ) {`,`\treturn ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join("\n")}function Ag(e,t){let n;switch(t){case Ht:n="Linear";break;case Vt:n="Reinhard";break;case jt:n="Cineon";break;case Wt:n="ACESFilmic";break;case Xt:n="AgX";break;case qt:n="Neutral";break;case Gt:n="Custom";break;default:zi("WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const Cg=new na;function Rg(e){return""!==e}function Pg(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function kg(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Ig=/^[ \t]*#include +<([\w\d./]+)>/gm;function Lg(e){return e.replace(Ig,Dg)}const Ng=new Map;function Dg(e,t){let n=zf[t];if(void 0===n){const e=Ng.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=zf[e],zi('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return Lg(n)}const Ug=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Og(e){return e.replace(Ug,Fg)}function Fg(e,t,n,r){let i="";for(let e=parseInt(t);e<parseInt(n);e++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}function zg(e){let t=`precision ${e.precision} float;\n\tprecision ${e.precision} int;\n\tprecision ${e.precision} sampler2D;\n\tprecision ${e.precision} samplerCube;\n\tprecision ${e.precision} sampler3D;\n\tprecision ${e.precision} sampler2DArray;\n\tprecision ${e.precision} sampler2DShadow;\n\tprecision ${e.precision} samplerCubeShadow;\n\tprecision ${e.precision} sampler2DArrayShadow;\n\tprecision ${e.precision} isampler2D;\n\tprecision ${e.precision} isampler3D;\n\tprecision ${e.precision} isamplerCube;\n\tprecision ${e.precision} isampler2DArray;\n\tprecision ${e.precision} usampler2D;\n\tprecision ${e.precision} usampler3D;\n\tprecision ${e.precision} usamplerCube;\n\tprecision ${e.precision} usampler2DArray;\n\t`;return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Bg(e,t,n,r){const i=e.getContext(),a=n.defines;let o=n.vertexShader,s=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===Ze?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===Je?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===Qe&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Zt:case Jt:t="ENVMAP_TYPE_CUBE";break;case tn:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";return e.envMap&&e.envMapMode===Jt&&(t="ENVMAP_MODE_REFRACTION"),t}(n),d=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case Ot:t="ENVMAP_BLENDING_MULTIPLY";break;case Ft:t="ENVMAP_BLENDING_MIX";break;case zt:t="ENVMAP_BLENDING_ADD"}return t}(n),h=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),p=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Rg).join("\n")}(n),f=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(a),m=i.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f].filter(Rg).join("\n"),g.length>0&&(g+="\n"),v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f].filter(Rg).join("\n"),v.length>0&&(v+="\n")):(g=[zg(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Rg).join("\n"),v=[zg(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Bt?"#define TONE_MAPPING":"",n.toneMapping!==Bt?zf.tonemapping_pars_fragment:"",n.toneMapping!==Bt?Ag("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",zf.colorspace_pars_fragment,Tg("linearToOutputTexel",n.outputColorSpace),(ua.getLuminanceCoefficients(Cg),["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${Cg.x.toFixed(4)}, ${Cg.y.toFixed(4)}, ${Cg.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Rg).join("\n")),o=Lg(o),o=Pg(o,n),o=kg(o,n),s=Lg(s),s=Pg(s,n),s=kg(s,n),o=Og(o),s=Og(s),!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",g=[p,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",n.glslVersion===Ei?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Ei?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const b=y+g+o,x=y+v+s,w=_g(i,i.VERTEX_SHADER,b),_=_g(i,i.FRAGMENT_SHADER,x);function E(t){if(e.debug.checkShaderErrors){const n=i.getProgramInfoLog(m)||"",r=i.getShaderInfoLog(w)||"",a=i.getShaderInfoLog(_)||"",o=n.trim(),s=r.trim(),l=a.trim();let c=!0,u=!0;if(!1===i.getProgramParameter(m,i.LINK_STATUS))if(c=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(i,m,w,_);else{const e=Mg(i,w,"vertex"),n=Mg(i,_,"fragment");Bi("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,i.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+o+"\n"+e+"\n"+n)}else""!==o?zi("WebGLProgram: Program Info Log:",o):""!==s&&""!==l||(u=!1);u&&(t.diagnostics={runnable:c,programLog:o,vertexShader:{log:s,prefix:g},fragmentShader:{log:l,prefix:v}})}i.deleteShader(w),i.deleteShader(_),S=new wg(i,m),M=function(e,t){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),a=r.name;let o=1;r.type===e.FLOAT_MAT2&&(o=2),r.type===e.FLOAT_MAT3&&(o=3),r.type===e.FLOAT_MAT4&&(o=4),n[a]={type:r.type,location:e.getAttribLocation(t,a),locationSize:o}}return n}(i,m)}let S,M;i.attachShader(m,w),i.attachShader(m,_),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),this.getUniforms=function(){return void 0===S&&E(this),S},this.getAttributes=function(){return void 0===M&&E(this),M};let T=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===T&&(T=i.getProgramParameter(m,37297)),T},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Eg++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=w,this.fragmentShader=_,this}let Hg=0;class Vg{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(i)&&(a.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const e of t)e.usedTimes--,0===e.usedTimes&&this.shaderCache.delete(e.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new jg(e),t.set(e,n)),n}}class jg{constructor(e){this.id=Hg++,this.code=e,this.usedTimes=0}}function Wg(e,t,n,r,i,a,o){const s=new po,l=new Vg,c=new Set,u=[],d=i.logarithmicDepthBuffer,h=i.vertexTextures;let p=i.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(e){return c.add(e),0===e?"uv":`uv${e}`}return{getParameters:function(a,s,u,g,v){const y=g.fog,b=v.geometry,x=a.isMeshStandardMaterial?g.environment:null,w=(a.isMeshStandardMaterial?n:t).get(a.envMap||x),_=w&&w.mapping===tn?w.image.height:null,E=f[a.type];null!==a.precision&&(p=i.getMaxPrecision(a.precision),p!==a.precision&&zi("WebGLProgram.getParameters:",a.precision,"not supported, using",p,"instead."));const S=b.morphAttributes.position||b.morphAttributes.normal||b.morphAttributes.color,M=void 0!==S?S.length:0;let T,A,C,R,P=0;if(void 0!==b.morphAttributes.position&&(P=1),void 0!==b.morphAttributes.normal&&(P=2),void 0!==b.morphAttributes.color&&(P=3),E){const e=Hf[E];T=e.vertexShader,A=e.fragmentShader}else T=a.vertexShader,A=a.fragmentShader,l.update(a),C=l.getVertexShaderID(a),R=l.getFragmentShaderID(a);const k=e.getRenderTarget(),I=e.state.buffers.depth.getReversed(),L=!0===v.isInstancedMesh,N=!0===v.isBatchedMesh,D=!!a.map,U=!!a.matcap,O=!!w,F=!!a.aoMap,z=!!a.lightMap,B=!!a.bumpMap,H=!!a.normalMap,V=!!a.displacementMap,j=!!a.emissiveMap,W=!!a.metalnessMap,G=!!a.roughnessMap,X=a.anisotropy>0,q=a.clearcoat>0,Y=a.dispersion>0,$=a.iridescence>0,K=a.sheen>0,Z=a.transmission>0,J=X&&!!a.anisotropyMap,Q=q&&!!a.clearcoatMap,ee=q&&!!a.clearcoatNormalMap,te=q&&!!a.clearcoatRoughnessMap,ne=$&&!!a.iridescenceMap,re=$&&!!a.iridescenceThicknessMap,ie=K&&!!a.sheenColorMap,ae=K&&!!a.sheenRoughnessMap,oe=!!a.specularMap,se=!!a.specularColorMap,le=!!a.specularIntensityMap,ce=Z&&!!a.transmissionMap,ue=Z&&!!a.thicknessMap,de=!!a.gradientMap,he=!!a.alphaMap,pe=a.alphaTest>0,fe=!!a.alphaHash,me=!!a.extensions;let ge=Bt;a.toneMapped&&(null!==k&&!0!==k.isXRRenderTarget||(ge=e.toneMapping));const ve={shaderID:E,shaderType:a.type,shaderName:a.name,vertexShader:T,fragmentShader:A,defines:a.defines,customVertexShaderID:C,customFragmentShaderID:R,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:p,batching:N,batchingColor:N&&null!==v._colorsTexture,instancing:L,instancingColor:L&&null!==v.instanceColor,instancingMorph:L&&null!==v.morphTexture,supportsVertexTextures:h,outputColorSpace:null===k?e.outputColorSpace:!0===k.isXRRenderTarget?k.texture.colorSpace:Br,alphaToCoverage:!!a.alphaToCoverage,map:D,matcap:U,envMap:O,envMapMode:O&&w.mapping,envMapCubeUVHeight:_,aoMap:F,lightMap:z,bumpMap:B,normalMap:H,displacementMap:h&&V,emissiveMap:j,normalMapObjectSpace:H&&a.normalMapType===Or,normalMapTangentSpace:H&&a.normalMapType===Ur,metalnessMap:W,roughnessMap:G,anisotropy:X,anisotropyMap:J,clearcoat:q,clearcoatMap:Q,clearcoatNormalMap:ee,clearcoatRoughnessMap:te,dispersion:Y,iridescence:$,iridescenceMap:ne,iridescenceThicknessMap:re,sheen:K,sheenColorMap:ie,sheenRoughnessMap:ae,specularMap:oe,specularColorMap:se,specularIntensityMap:le,transmission:Z,transmissionMap:ce,thicknessMap:ue,gradientMap:de,opaque:!1===a.transparent&&a.blending===it&&!1===a.alphaToCoverage,alphaMap:he,alphaTest:pe,alphaHash:fe,combine:a.combine,mapUv:D&&m(a.map.channel),aoMapUv:F&&m(a.aoMap.channel),lightMapUv:z&&m(a.lightMap.channel),bumpMapUv:B&&m(a.bumpMap.channel),normalMapUv:H&&m(a.normalMap.channel),displacementMapUv:V&&m(a.displacementMap.channel),emissiveMapUv:j&&m(a.emissiveMap.channel),metalnessMapUv:W&&m(a.metalnessMap.channel),roughnessMapUv:G&&m(a.roughnessMap.channel),anisotropyMapUv:J&&m(a.anisotropyMap.channel),clearcoatMapUv:Q&&m(a.clearcoatMap.channel),clearcoatNormalMapUv:ee&&m(a.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:te&&m(a.clearcoatRoughnessMap.channel),iridescenceMapUv:ne&&m(a.iridescenceMap.channel),iridescenceThicknessMapUv:re&&m(a.iridescenceThicknessMap.channel),sheenColorMapUv:ie&&m(a.sheenColorMap.channel),sheenRoughnessMapUv:ae&&m(a.sheenRoughnessMap.channel),specularMapUv:oe&&m(a.specularMap.channel),specularColorMapUv:se&&m(a.specularColorMap.channel),specularIntensityMapUv:le&&m(a.specularIntensityMap.channel),transmissionMapUv:ce&&m(a.transmissionMap.channel),thicknessMapUv:ue&&m(a.thicknessMap.channel),alphaMapUv:he&&m(a.alphaMap.channel),vertexTangents:!!b.attributes.tangent&&(H||X),vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!b.attributes.color&&4===b.attributes.color.itemSize,pointsUvs:!0===v.isPoints&&!!b.attributes.uv&&(D||he),fog:!!y,useFog:!0===a.fog,fogExp2:!!y&&y.isFogExp2,flatShading:!0===a.flatShading&&!1===a.wireframe,sizeAttenuation:!0===a.sizeAttenuation,logarithmicDepthBuffer:d,reversedDepthBuffer:I,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==b.morphAttributes.position,morphNormals:void 0!==b.morphAttributes.normal,morphColors:void 0!==b.morphAttributes.color,morphTargetsCount:M,morphTextureStride:P,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numLightProbes:s.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:ge,decodeVideoTexture:D&&!0===a.map.isVideoTexture&&ua.getTransfer(a.map.colorSpace)===Vr,decodeVideoTextureEmissive:j&&!0===a.emissiveMap.isVideoTexture&&ua.getTransfer(a.emissiveMap.colorSpace)===Vr,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===nt,flipSided:a.side===tt,useDepthPacking:a.depthPacking>=0,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionClipCullDistance:me&&!0===a.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(me&&!0===a.extensions.multiDraw||N)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:a.customProgramCacheKey()};return ve.vertexUv1s=c.has(1),ve.vertexUv2s=c.has(2),ve.vertexUv3s=c.has(3),c.clear(),ve},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.supportsVertexTextures&&s.enable(0),t.instancing&&s.enable(1),t.instancingColor&&s.enable(2),t.instancingMorph&&s.enable(3),t.matcap&&s.enable(4),t.envMap&&s.enable(5),t.normalMapObjectSpace&&s.enable(6),t.normalMapTangentSpace&&s.enable(7),t.clearcoat&&s.enable(8),t.iridescence&&s.enable(9),t.alphaTest&&s.enable(10),t.vertexColors&&s.enable(11),t.vertexAlphas&&s.enable(12),t.vertexUv1s&&s.enable(13),t.vertexUv2s&&s.enable(14),t.vertexUv3s&&s.enable(15),t.vertexTangents&&s.enable(16),t.anisotropy&&s.enable(17),t.alphaHash&&s.enable(18),t.batching&&s.enable(19),t.dispersion&&s.enable(20),t.batchingColor&&s.enable(21),t.gradientMap&&s.enable(22),e.push(s.mask),s.disableAll(),t.fog&&s.enable(0),t.useFog&&s.enable(1),t.flatShading&&s.enable(2),t.logarithmicDepthBuffer&&s.enable(3),t.reversedDepthBuffer&&s.enable(4),t.skinning&&s.enable(5),t.morphTargets&&s.enable(6),t.morphNormals&&s.enable(7),t.morphColors&&s.enable(8),t.premultipliedAlpha&&s.enable(9),t.shadowMapEnabled&&s.enable(10),t.doubleSided&&s.enable(11),t.flipSided&&s.enable(12),t.useDepthPacking&&s.enable(13),t.dithering&&s.enable(14),t.transmission&&s.enable(15),t.sheen&&s.enable(16),t.opaque&&s.enable(17),t.pointsUvs&&s.enable(18),t.decodeVideoTexture&&s.enable(19),t.decodeVideoTextureEmissive&&s.enable(20),t.alphaToCoverage&&s.enable(21),e.push(s.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=f[e.type];let n;if(t){const e=Hf[t];n=Vs.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,t=u.length;e<t;e++){const t=u[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new Bg(e,n,t,a),u.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){const t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:u,dispose:function(){l.dispose()}}}function Gg(){let e=new WeakMap;return{has:function(t){return e.has(t)},get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function Xg(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function qg(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Yg(){const e=[];let t=0;const n=[],r=[],i=[];function a(n,r,i,a,o,s){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:a,renderOrder:n.renderOrder,z:o,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=o,l.group=s),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,o,s,l,c){const u=a(e,t,o,s,l,c);o.transmission>0?r.push(u):!0===o.transparent?i.push(u):n.push(u)},unshift:function(e,t,o,s,l,c){const u=a(e,t,o,s,l,c);o.transmission>0?r.unshift(u):!0===o.transparent?i.unshift(u):n.unshift(u)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||Xg),r.length>1&&r.sort(t||qg),i.length>1&&i.sort(t||qg)}}}function $g(){let e=new WeakMap;return{get:function(t,n){const r=e.get(t);let i;return void 0===r?(i=new Yg,e.set(t,[i])):n>=r.length?(i=new Yg,r.push(i)):i=r[n],i},dispose:function(){e=new WeakMap}}}function Kg(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new na,color:new Yo};break;case"SpotLight":n={position:new na,direction:new na,color:new Yo,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new na,color:new Yo,distance:0,decay:0};break;case"HemisphereLight":n={direction:new na,skyColor:new Yo,groundColor:new Yo};break;case"RectAreaLight":n={color:new Yo,position:new na,halfWidth:new na,halfHeight:new na}}return e[t.id]=n,n}}}let Zg=0;function Jg(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Qg(e){const t=new Kg,n=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ea};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ea,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let e=0;e<9;e++)r.probe.push(new na);const i=new na,a=new to,o=new to;return{setup:function(i){let a=0,o=0,s=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let l=0,c=0,u=0,d=0,h=0,p=0,f=0,m=0,g=0,v=0,y=0;i.sort(Jg);for(let e=0,b=i.length;e<b;e++){const b=i[e],x=b.color,w=b.intensity,_=b.distance,E=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)a+=x.r*w,o+=x.g*w,s+=x.b*w;else if(b.isLightProbe){for(let e=0;e<9;e++)r.probe[e].addScaledVector(b.sh.coefficients[e],w);y++}else if(b.isDirectionalLight){const e=t.get(b);if(e.color.copy(b.color).multiplyScalar(b.intensity),b.castShadow){const e=b.shadow,t=n.get(b);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,r.directionalShadow[l]=t,r.directionalShadowMap[l]=E,r.directionalShadowMatrix[l]=b.shadow.matrix,p++}r.directional[l]=e,l++}else if(b.isSpotLight){const e=t.get(b);e.position.setFromMatrixPosition(b.matrixWorld),e.color.copy(x).multiplyScalar(w),e.distance=_,e.coneCos=Math.cos(b.angle),e.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),e.decay=b.decay,r.spot[u]=e;const i=b.shadow;if(b.map&&(r.spotLightMap[g]=b.map,g++,i.updateMatrices(b),b.castShadow&&v++),r.spotLightMatrix[u]=i.matrix,b.castShadow){const e=n.get(b);e.shadowIntensity=i.intensity,e.shadowBias=i.bias,e.shadowNormalBias=i.normalBias,e.shadowRadius=i.radius,e.shadowMapSize=i.mapSize,r.spotShadow[u]=e,r.spotShadowMap[u]=E,m++}u++}else if(b.isRectAreaLight){const e=t.get(b);e.color.copy(x).multiplyScalar(w),e.halfWidth.set(.5*b.width,0,0),e.halfHeight.set(0,.5*b.height,0),r.rectArea[d]=e,d++}else if(b.isPointLight){const e=t.get(b);if(e.color.copy(b.color).multiplyScalar(b.intensity),e.distance=b.distance,e.decay=b.decay,b.castShadow){const e=b.shadow,t=n.get(b);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,t.shadowCameraNear=e.camera.near,t.shadowCameraFar=e.camera.far,r.pointShadow[c]=t,r.pointShadowMap[c]=E,r.pointShadowMatrix[c]=b.shadow.matrix,f++}r.point[c]=e,c++}else if(b.isHemisphereLight){const e=t.get(b);e.skyColor.copy(b.color).multiplyScalar(w),e.groundColor.copy(b.groundColor).multiplyScalar(w),r.hemi[h]=e,h++}}d>0&&(!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=Bf.LTC_FLOAT_1,r.rectAreaLTC2=Bf.LTC_FLOAT_2):(r.rectAreaLTC1=Bf.LTC_HALF_1,r.rectAreaLTC2=Bf.LTC_HALF_2)),r.ambient[0]=a,r.ambient[1]=o,r.ambient[2]=s;const b=r.hash;b.directionalLength===l&&b.pointLength===c&&b.spotLength===u&&b.rectAreaLength===d&&b.hemiLength===h&&b.numDirectionalShadows===p&&b.numPointShadows===f&&b.numSpotShadows===m&&b.numSpotMaps===g&&b.numLightProbes===y||(r.directional.length=l,r.spot.length=u,r.rectArea.length=d,r.point.length=c,r.hemi.length=h,r.directionalShadow.length=p,r.directionalShadowMap.length=p,r.pointShadow.length=f,r.pointShadowMap.length=f,r.spotShadow.length=m,r.spotShadowMap.length=m,r.directionalShadowMatrix.length=p,r.pointShadowMatrix.length=f,r.spotLightMatrix.length=m+g-v,r.spotLightMap.length=g,r.numSpotLightShadowsWithMaps=v,r.numLightProbes=y,b.directionalLength=l,b.pointLength=c,b.spotLength=u,b.rectAreaLength=d,b.hemiLength=h,b.numDirectionalShadows=p,b.numPointShadows=f,b.numSpotShadows=m,b.numSpotMaps=g,b.numLightProbes=y,r.version=Zg++)},setupView:function(e,t){let n=0,s=0,l=0,c=0,u=0;const d=t.matrixWorldInverse;for(let t=0,h=e.length;t<h;t++){const h=e[t];if(h.isDirectionalLight){const e=r.directional[n];e.direction.setFromMatrixPosition(h.matrixWorld),i.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(i),e.direction.transformDirection(d),n++}else if(h.isSpotLight){const e=r.spot[l];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(h.matrixWorld),i.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(i),e.direction.transformDirection(d),l++}else if(h.isRectAreaLight){const e=r.rectArea[c];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),o.identity(),a.copy(h.matrixWorld),a.premultiply(d),o.extractRotation(a),e.halfWidth.set(.5*h.width,0,0),e.halfHeight.set(0,.5*h.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),c++}else if(h.isPointLight){const e=r.point[s];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),s++}else if(h.isHemisphereLight){const e=r.hemi[u];e.direction.setFromMatrixPosition(h.matrixWorld),e.direction.transformDirection(d),u++}}},state:r}}function ev(e){const t=new Qg(e),n=[],r=[],i={lightsArray:n,shadowsArray:r,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){i.camera=e,n.length=0,r.length=0},state:i,setupLights:function(){t.setup(n)},setupLightsView:function(e){t.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){r.push(e)}}}function tv(e){let t=new WeakMap;return{get:function(n,r=0){const i=t.get(n);let a;return void 0===i?(a=new ev(e),t.set(n,[a])):r>=i.length?(a=new ev(e),i.push(a)):a=i[r],a},dispose:function(){t=new WeakMap}}}function nv(e,t,n){let r=new ic;const i=new ea,a=new ea,o=new wa,s=new Ud({depthPacking:Lr}),l=new Od,c={},u=n.maxTextureSize,d={[et]:tt,[tt]:et,[nt]:nt},h=new js({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ea},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const f=new Ss;f.setAttribute("position",new ss(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Us(f,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Ze;let v=this.type;function y(n,r){const a=t.update(m);h.defines.VSM_SAMPLES!==n.blurSamples&&(h.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Ea(i.x,i.y)),h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,a,h,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,a,p,m,null)}function b(t,n,r,i){let a=null;const o=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==o)a=o;else if(a=!0===r.isPointLight?l:s,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0||!0===n.alphaToCoverage){const e=a.uuid,t=n.uuid;let r=c[e];void 0===r&&(r={},c[e]=r);let i=r[t];void 0===i&&(i=a.clone(),r[t]=i,n.addEventListener("dispose",w)),a=i}return a.visible=n.visible,a.wireframe=n.wireframe,a.side=i===Qe?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:d[n.side],a.alphaMap=n.alphaMap,a.alphaTest=!0===n.alphaToCoverage?.5:n.alphaTest,a.map=n.map,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.clipIntersection=n.clipIntersection,a.displacementMap=n.displacementMap,a.displacementScale=n.displacementScale,a.displacementBias=n.displacementBias,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,!0===r.isPointLight&&!0===a.isMeshDistanceMaterial&&(e.properties.get(a).light=r),a}function x(n,i,a,o,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===Qe)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);const r=t.update(n),l=n.material;if(Array.isArray(l)){const t=r.groups;for(let c=0,u=t.length;c<u;c++){const u=t[c],d=l[u.materialIndex];if(d&&d.visible){const t=b(n,d,o,s);n.onBeforeShadow(e,n,i,a,r,t,u),e.renderBufferDirect(a,null,r,t,n,u),n.onAfterShadow(e,n,i,a,r,t,u)}}}else if(l.visible){const t=b(n,l,o,s);n.onBeforeShadow(e,n,i,a,r,t,null),e.renderBufferDirect(a,null,r,t,n,null),n.onAfterShadow(e,n,i,a,r,t,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)x(l[e],i,a,o,s)}function w(e){e.target.removeEventListener("dispose",w);for(const t in c){const n=c[t],r=e.target.uuid;r in n&&(n[r].dispose(),delete n[r])}}this.render=function(t,n,s){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),h=e.state;h.setBlending(rt),!0===h.buffers.depth.getReversed()?h.buffers.color.setClear(0,0,0,0):h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);const p=v!==Qe&&this.type===Qe,f=v===Qe&&this.type!==Qe;for(let l=0,c=t.length;l<c;l++){const c=t[l],d=c.shadow;if(void 0===d){zi("WebGLShadowMap:",c,"has no shadow.");continue}if(!1===d.autoUpdate&&!1===d.needsUpdate)continue;i.copy(d.mapSize);const m=d.getFrameExtents();if(i.multiply(m),a.copy(d.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(a.x=Math.floor(u/m.x),i.x=a.x*m.x,d.mapSize.x=a.x),i.y>u&&(a.y=Math.floor(u/m.y),i.y=a.y*m.y,d.mapSize.y=a.y)),null===d.map||!0===p||!0===f){const e=this.type!==Qe?{minFilter:on,magFilter:on}:{};null!==d.map&&d.map.dispose(),d.map=new Ea(i.x,i.y,e),d.map.texture.name=c.name+".shadowMap",d.camera.updateProjectionMatrix()}e.setRenderTarget(d.map),e.clear();const g=d.getViewportCount();for(let e=0;e<g;e++){const t=d.getViewport(e);o.set(a.x*t.x,a.y*t.y,a.x*t.z,a.y*t.w),h.viewport(o),d.updateMatrices(c,e),r=d.getFrustum(),x(n,s,d.camera,c,this.type)}!0!==d.isPointLightShadow&&this.type===Qe&&y(d,s),d.needsUpdate=!1}v=this.type,g.needsUpdate=!1,e.setRenderTarget(l,c,d)}}const rv={[Rt]:Pt,[kt]:Dt,[Lt]:Ut,[It]:Nt,[Pt]:Rt,[Dt]:kt,[Ut]:Lt,[Nt]:It};function iv(e,t){const n=new function(){let t=!1;const n=new wa;let r=null;const i=new wa(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){!0===s&&(t*=o,r*=o,a*=o),n.set(t,r,a,o),!1===i.equals(n)&&(e.clearColor(t,r,a,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},r=new function(){let n=!1,r=!1,i=null,a=null,o=null;return{setReversed:function(e){if(r!==e){const n=t.get("EXT_clip_control");e?n.clipControlEXT(n.LOWER_LEFT_EXT,n.ZERO_TO_ONE_EXT):n.clipControlEXT(n.LOWER_LEFT_EXT,n.NEGATIVE_ONE_TO_ONE_EXT),r=e;const i=o;o=null,this.setClear(i)}},getReversed:function(){return r},setTest:function(t){t?B(e.DEPTH_TEST):H(e.DEPTH_TEST)},setMask:function(t){i===t||n||(e.depthMask(t),i=t)},setFunc:function(t){if(r&&(t=rv[t]),a!==t){switch(t){case Rt:e.depthFunc(e.NEVER);break;case Pt:e.depthFunc(e.ALWAYS);break;case kt:e.depthFunc(e.LESS);break;case It:e.depthFunc(e.LEQUAL);break;case Lt:e.depthFunc(e.EQUAL);break;case Nt:e.depthFunc(e.GEQUAL);break;case Dt:e.depthFunc(e.GREATER);break;case Ut:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}a=t}},setLocked:function(e){n=e},setClear:function(t){o!==t&&(r&&(t=1-t),e.clearDepth(t),o=t)},reset:function(){n=!1,i=null,a=null,o=null,r=!1}}},i=new function(){let t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,c=null;return{setTest:function(n){t||(n?B(e.STENCIL_TEST):H(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&a===o||(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){o===t&&s===n&&l===r||(e.stencilOp(t,n,r),o=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,c=null}}},a=new WeakMap,o=new WeakMap;let s={},l={},c=new WeakMap,u=[],d=null,h=!1,p=null,f=null,m=null,g=null,v=null,y=null,b=null,x=new Yo(0,0,0),w=0,_=!1,E=null,S=null,M=null,T=null,A=null;const C=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let R=!1,P=0;const k=e.getParameter(e.VERSION);-1!==k.indexOf("WebGL")?(P=parseFloat(/^WebGL (\d)/.exec(k)[1]),R=P>=1):-1!==k.indexOf("OpenGL ES")&&(P=parseFloat(/^OpenGL ES (\d)/.exec(k)[1]),R=P>=2);let I=null,L={};const N=e.getParameter(e.SCISSOR_BOX),D=e.getParameter(e.VIEWPORT),U=(new wa).fromArray(N),O=(new wa).fromArray(D);function F(t,n,r,i){const a=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let o=0;o<r;o++)t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,i,0,e.RGBA,e.UNSIGNED_BYTE,a):e.texImage2D(n+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,a);return o}const z={};function B(t){!0!==s[t]&&(e.enable(t),s[t]=!0)}function H(t){!1!==s[t]&&(e.disable(t),s[t]=!1)}z[e.TEXTURE_2D]=F(e.TEXTURE_2D,e.TEXTURE_2D,1),z[e.TEXTURE_CUBE_MAP]=F(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),z[e.TEXTURE_2D_ARRAY]=F(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),z[e.TEXTURE_3D]=F(e.TEXTURE_3D,e.TEXTURE_3D,1,1),n.setClear(0,0,0,1),r.setClear(1),i.setClear(0),B(e.DEPTH_TEST),r.setFunc(It),G(!1),X(qe),B(e.CULL_FACE),W(rt);const V={[ct]:e.FUNC_ADD,[ut]:e.FUNC_SUBTRACT,[dt]:e.FUNC_REVERSE_SUBTRACT};V[ht]=e.MIN,V[pt]=e.MAX;const j={[ft]:e.ZERO,[mt]:e.ONE,[gt]:e.SRC_COLOR,[yt]:e.SRC_ALPHA,[St]:e.SRC_ALPHA_SATURATE,[_t]:e.DST_COLOR,[xt]:e.DST_ALPHA,[vt]:e.ONE_MINUS_SRC_COLOR,[bt]:e.ONE_MINUS_SRC_ALPHA,[Et]:e.ONE_MINUS_DST_COLOR,[wt]:e.ONE_MINUS_DST_ALPHA,[Mt]:e.CONSTANT_COLOR,[Tt]:e.ONE_MINUS_CONSTANT_COLOR,[At]:e.CONSTANT_ALPHA,[Ct]:e.ONE_MINUS_CONSTANT_ALPHA};function W(t,n,r,i,a,o,s,l,c,u){if(t!==rt){if(!1===h&&(B(e.BLEND),h=!0),t===lt)a=a||n,o=o||r,s=s||i,n===f&&a===v||(e.blendEquationSeparate(V[n],V[a]),f=n,v=a),r===m&&i===g&&o===y&&s===b||(e.blendFuncSeparate(j[r],j[i],j[o],j[s]),m=r,g=i,y=o,b=s),!1!==l.equals(x)&&c===w||(e.blendColor(l.r,l.g,l.b,c),x.copy(l),w=c),p=t,_=!1;else if(t!==p||u!==_){if(f===ct&&v===ct||(e.blendEquation(e.FUNC_ADD),f=ct,v=ct),u)switch(t){case it:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case at:e.blendFunc(e.ONE,e.ONE);break;case ot:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case st:e.blendFuncSeparate(e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ZERO,e.ONE);break;default:Bi("WebGLState: Invalid blending: ",t)}else switch(t){case it:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case at:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE,e.ONE,e.ONE);break;case ot:Bi("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case st:Bi("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:Bi("WebGLState: Invalid blending: ",t)}m=null,g=null,y=null,b=null,x.set(0,0,0),w=0,p=t,_=u}}else!0===h&&(H(e.BLEND),h=!1)}function G(t){E!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),E=t)}function X(t){t!==Xe?(B(e.CULL_FACE),t!==S&&(t===qe?e.cullFace(e.BACK):t===Ye?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):H(e.CULL_FACE),S=t}function q(t,n,r){t?(B(e.POLYGON_OFFSET_FILL),T===n&&A===r||(e.polygonOffset(n,r),T=n,A=r)):H(e.POLYGON_OFFSET_FILL)}return{buffers:{color:n,depth:r,stencil:i},enable:B,disable:H,bindFramebuffer:function(t,n){return l[t]!==n&&(e.bindFramebuffer(t,n),l[t]=n,t===e.DRAW_FRAMEBUFFER&&(l[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(l[e.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(t,n){let r=u,i=!1;if(t){r=c.get(n),void 0===r&&(r=[],c.set(n,r));const a=t.textures;if(r.length!==a.length||r[0]!==e.COLOR_ATTACHMENT0){for(let t=0,n=a.length;t<n;t++)r[t]=e.COLOR_ATTACHMENT0+t;r.length=a.length,i=!0}}else r[0]!==e.BACK&&(r[0]=e.BACK,i=!0);i&&e.drawBuffers(r)},useProgram:function(t){return d!==t&&(e.useProgram(t),d=t,!0)},setBlending:W,setMaterial:function(t,a){t.side===nt?H(e.CULL_FACE):B(e.CULL_FACE);let o=t.side===tt;a&&(o=!o),G(o),t.blending===it&&!1===t.transparent?W(rt):W(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),r.setFunc(t.depthFunc),r.setTest(t.depthTest),r.setMask(t.depthWrite),n.setMask(t.colorWrite);const s=t.stencilWrite;i.setTest(s),s&&(i.setMask(t.stencilWriteMask),i.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),i.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),q(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?B(e.SAMPLE_ALPHA_TO_COVERAGE):H(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:G,setCullFace:X,setLineWidth:function(t){t!==M&&(R&&e.lineWidth(t),M=t)},setPolygonOffset:q,setScissorTest:function(t){t?B(e.SCISSOR_TEST):H(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+C-1),I!==t&&(e.activeTexture(t),I=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===I?e.TEXTURE0+C-1:I);let i=L[r];void 0===i&&(i={type:void 0,texture:void 0},L[r]=i),i.type===t&&i.texture===n||(I!==r&&(e.activeTexture(r),I=r),e.bindTexture(t,n||z[t]),i.type=t,i.texture=n)},unbindTexture:function(){const t=L[I];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D(...arguments)}catch(e){e("WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D(...arguments)}catch(e){e("WebGLState:",e)}},texImage2D:function(){try{e.texImage2D(...arguments)}catch(e){e("WebGLState:",e)}},texImage3D:function(){try{e.texImage3D(...arguments)}catch(e){e("WebGLState:",e)}},updateUBOMapping:function(t,n){let r=o.get(n);void 0===r&&(r=new WeakMap,o.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){const r=o.get(n).get(t);a.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),a.set(n,r))},texStorage2D:function(){try{e.texStorage2D(...arguments)}catch(e){e("WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D(...arguments)}catch(e){e("WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D(...arguments)}catch(e){e("WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D(...arguments)}catch(e){e("WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D(...arguments)}catch(e){e("WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D(...arguments)}catch(e){e("WebGLState:",e)}},scissor:function(t){!1===U.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),U.copy(t))},viewport:function(t){!1===O.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),O.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),r.setReversed(!1),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),s={},I=null,L={},l={},c=new WeakMap,u=[],d=null,h=!1,p=null,f=null,m=null,g=null,v=null,y=null,b=null,x=new Yo(0,0,0),w=0,_=!1,E=null,S=null,M=null,T=null,A=null,U.set(0,0,e.canvas.width,e.canvas.height),O.set(0,0,e.canvas.width,e.canvas.height),n.reset(),r.reset(),i.reset()}}}function av(e,t,n,r,i,a,o){const s=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),c=new ea,u=new WeakMap;let d;const h=new WeakMap;let p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function f(e,t){return p?new OffscreenCanvas(e,t):Ii("canvas")}function m(e,t,n){let r=1;const i=j(e);if((i.width>n||i.height>n)&&(r=n/Math.max(i.width,i.height)),r<1){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof VideoFrame&&e instanceof VideoFrame){const n=Math.floor(r*i.width),a=Math.floor(r*i.height);void 0===d&&(d=f(n,a));const o=t?f(n,a):d;return o.width=n,o.height=a,o.getContext("2d").drawImage(e,0,0,n,a),zi("WebGLRenderer: Texture has been resized from ("+i.width+"x"+i.height+") to ("+n+"x"+a+")."),o}return"data"in e&&zi("WebGLRenderer: Image in DataTexture is too big ("+i.width+"x"+i.height+")."),e}return e}function g(e){return e.generateMipmaps}function v(t){e.generateMipmap(t)}function y(t){return t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:t.isWebGL3DRenderTarget?e.TEXTURE_3D:t.isWebGLArrayRenderTarget||t.isCompressedArrayTexture?e.TEXTURE_2D_ARRAY:e.TEXTURE_2D}function b(n,r,i,a,o=!1){if(null!==n){if(void 0!==e[n])return e[n];zi("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let s=r;if(r===e.RED&&(i===e.FLOAT&&(s=e.R32F),i===e.HALF_FLOAT&&(s=e.R16F),i===e.UNSIGNED_BYTE&&(s=e.R8)),r===e.RED_INTEGER&&(i===e.UNSIGNED_BYTE&&(s=e.R8UI),i===e.UNSIGNED_SHORT&&(s=e.R16UI),i===e.UNSIGNED_INT&&(s=e.R32UI),i===e.BYTE&&(s=e.R8I),i===e.SHORT&&(s=e.R16I),i===e.INT&&(s=e.R32I)),r===e.RG&&(i===e.FLOAT&&(s=e.RG32F),i===e.HALF_FLOAT&&(s=e.RG16F),i===e.UNSIGNED_BYTE&&(s=e.RG8)),r===e.RG_INTEGER&&(i===e.UNSIGNED_BYTE&&(s=e.RG8UI),i===e.UNSIGNED_SHORT&&(s=e.RG16UI),i===e.UNSIGNED_INT&&(s=e.RG32UI),i===e.BYTE&&(s=e.RG8I),i===e.SHORT&&(s=e.RG16I),i===e.INT&&(s=e.RG32I)),r===e.RGB_INTEGER&&(i===e.UNSIGNED_BYTE&&(s=e.RGB8UI),i===e.UNSIGNED_SHORT&&(s=e.RGB16UI),i===e.UNSIGNED_INT&&(s=e.RGB32UI),i===e.BYTE&&(s=e.RGB8I),i===e.SHORT&&(s=e.RGB16I),i===e.INT&&(s=e.RGB32I)),r===e.RGBA_INTEGER&&(i===e.UNSIGNED_BYTE&&(s=e.RGBA8UI),i===e.UNSIGNED_SHORT&&(s=e.RGBA16UI),i===e.UNSIGNED_INT&&(s=e.RGBA32UI),i===e.BYTE&&(s=e.RGBA8I),i===e.SHORT&&(s=e.RGBA16I),i===e.INT&&(s=e.RGBA32I)),r===e.RGB&&(i===e.UNSIGNED_INT_5_9_9_9_REV&&(s=e.RGB9_E5),i===e.UNSIGNED_INT_10F_11F_11F_REV&&(s=e.R11F_G11F_B10F)),r===e.RGBA){const t=o?Hr:ua.getTransfer(a);i===e.FLOAT&&(s=e.RGBA32F),i===e.HALF_FLOAT&&(s=e.RGBA16F),i===e.UNSIGNED_BYTE&&(s=t===Vr?e.SRGB8_ALPHA8:e.RGBA8),i===e.UNSIGNED_SHORT_4_4_4_4&&(s=e.RGBA4),i===e.UNSIGNED_SHORT_5_5_5_1&&(s=e.RGB5_A1)}return s!==e.R16F&&s!==e.R32F&&s!==e.RG16F&&s!==e.RG32F&&s!==e.RGBA16F&&s!==e.RGBA32F||t.get("EXT_color_buffer_float"),s}function x(t,n){let r;return t?null===n||n===wn||n===Tn?r=e.DEPTH24_STENCIL8:n===_n?r=e.DEPTH32F_STENCIL8:n===bn&&(r=e.DEPTH24_STENCIL8,zi("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===n||n===wn||n===Tn?r=e.DEPTH_COMPONENT24:n===_n?r=e.DEPTH_COMPONENT32F:n===bn&&(r=e.DEPTH_COMPONENT16),r}function w(e,t){return!0===g(e)||e.isFramebufferTexture&&e.minFilter!==on&&e.minFilter!==dn?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function _(e){const t=e.target;t.removeEventListener("dispose",_),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=h.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&S(e),0===Object.keys(i).length&&h.delete(n)}r.remove(e)}(t),t.isVideoTexture&&u.delete(t)}function E(t){const n=t.target;n.removeEventListener("dispose",E),function(t){const n=r.get(t);if(t.depthTexture&&(t.depthTexture.dispose(),r.remove(t.depthTexture)),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++){if(Array.isArray(n.__webglFramebuffer[t]))for(let r=0;r<n.__webglFramebuffer[t].length;r++)e.deleteFramebuffer(n.__webglFramebuffer[t][r]);else e.deleteFramebuffer(n.__webglFramebuffer[t]);n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[t])}else{if(Array.isArray(n.__webglFramebuffer))for(let t=0;t<n.__webglFramebuffer.length;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let t=0;t<n.__webglColorRenderbuffer.length;t++)n.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(n.__webglColorRenderbuffer[t]);n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer)}const i=t.textures;for(let t=0,n=i.length;t<n;t++){const n=r.get(i[t]);n.__webglTexture&&(e.deleteTexture(n.__webglTexture),o.memory.textures--),r.remove(i[t])}r.remove(t)}(n)}function S(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const i=t.source;delete h.get(i)[n.__cacheKey],o.memory.textures--}let M=0;function T(t,i){const a=r.get(t);if(t.isVideoTexture&&function(e){const t=o.render.frame;u.get(e)!==t&&(u.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&!0!==t.isExternalTexture&&t.version>0&&a.__version!==t.version){const e=t.image;if(null===e)zi("WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void L(a,t,i);zi("WebGLRenderer: Texture marked for update but image is incomplete")}}else t.isExternalTexture&&(a.__webglTexture=t.sourceTexture?t.sourceTexture:null);n.bindTexture(e.TEXTURE_2D,a.__webglTexture,e.TEXTURE0+i)}const A={[nn]:e.REPEAT,[rn]:e.CLAMP_TO_EDGE,[an]:e.MIRRORED_REPEAT},C={[on]:e.NEAREST,[sn]:e.NEAREST_MIPMAP_NEAREST,[cn]:e.NEAREST_MIPMAP_LINEAR,[dn]:e.LINEAR,[hn]:e.LINEAR_MIPMAP_NEAREST,[fn]:e.LINEAR_MIPMAP_LINEAR},R={[ai]:e.NEVER,[hi]:e.ALWAYS,[oi]:e.LESS,[li]:e.LEQUAL,[si]:e.EQUAL,[di]:e.GEQUAL,[ci]:e.GREATER,[ui]:e.NOTEQUAL};function P(n,a){if(a.type!==_n||!1!==t.has("OES_texture_float_linear")||a.magFilter!==dn&&a.magFilter!==hn&&a.magFilter!==cn&&a.magFilter!==fn&&a.minFilter!==dn&&a.minFilter!==hn&&a.minFilter!==cn&&a.minFilter!==fn||zi("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),e.texParameteri(n,e.TEXTURE_WRAP_S,A[a.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,A[a.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,A[a.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,C[a.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,C[a.minFilter]),a.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,R[a.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(a.magFilter===on)return;if(a.minFilter!==cn&&a.minFilter!==fn)return;if(a.type===_n&&!1===t.has("OES_texture_float_linear"))return;if(a.anisotropy>1||r.get(a).__currentAnisotropy){const o=t.get("EXT_texture_filter_anisotropic");e.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy}}}function k(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",_));const i=n.source;let a=h.get(i);void 0===a&&(a={},h.set(i,a));const s=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(s!==t.__cacheKey){void 0===a[s]&&(a[s]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,r=!0),a[s].usedTimes++;const i=a[t.__cacheKey];void 0!==i&&(a[t.__cacheKey].usedTimes--,0===i.usedTimes&&S(n)),t.__cacheKey=s,t.__webglTexture=a[s].texture}return r}function I(e,t,n){return Math.floor(Math.floor(e/n)/t)}function L(t,o,s){let l=e.TEXTURE_2D;(o.isDataArrayTexture||o.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),o.isData3DTexture&&(l=e.TEXTURE_3D);const c=k(t,o),u=o.source;n.bindTexture(l,t.__webglTexture,e.TEXTURE0+s);const d=r.get(u);if(u.version!==d.__version||!0===c){n.activeTexture(e.TEXTURE0+s);const t=ua.getPrimaries(ua.workingColorSpace),r=o.colorSpace===Fr?null:ua.getPrimaries(o.colorSpace),h=o.colorSpace===Fr||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,o.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,o.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);let p=m(o.image,!1,i.maxTextureSize);p=V(o,p);const f=a.convert(o.format,o.colorSpace),y=a.convert(o.type);let _,E=b(o.internalFormat,f,y,o.colorSpace,o.isVideoTexture);P(l,o);const S=o.mipmaps,M=!0!==o.isVideoTexture,T=void 0===d.__version||!0===c,A=u.dataReady,C=w(o,p);if(o.isDepthTexture)E=x(o.format===Ln,o.type),T&&(M?n.texStorage2D(e.TEXTURE_2D,1,E,p.width,p.height):n.texImage2D(e.TEXTURE_2D,0,E,p.width,p.height,0,f,y,null));else if(o.isDataTexture)if(S.length>0){M&&T&&n.texStorage2D(e.TEXTURE_2D,C,E,S[0].width,S[0].height);for(let t=0,r=S.length;t<r;t++)_=S[t],M?A&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,_.width,_.height,f,y,_.data):n.texImage2D(e.TEXTURE_2D,t,E,_.width,_.height,0,f,y,_.data);o.generateMipmaps=!1}else M?(T&&n.texStorage2D(e.TEXTURE_2D,C,E,p.width,p.height),A&&function(t,r,i,a){const o=t.updateRanges;if(0===o.length)n.texSubImage2D(e.TEXTURE_2D,0,0,0,r.width,r.height,i,a,r.data);else{o.sort((e,t)=>e.start-t.start);let s=0;for(let e=1;e<o.length;e++){const t=o[s],n=o[e],i=t.start+t.count,a=I(n.start,r.width,4),l=I(t.start,r.width,4);n.start<=i+1&&a===l&&I(n.start+n.count-1,r.width,4)===a?t.count=Math.max(t.count,n.start+n.count-t.start):(++s,o[s]=n)}o.length=s+1;const l=e.getParameter(e.UNPACK_ROW_LENGTH),c=e.getParameter(e.UNPACK_SKIP_PIXELS),u=e.getParameter(e.UNPACK_SKIP_ROWS);e.pixelStorei(e.UNPACK_ROW_LENGTH,r.width);for(let t=0,s=o.length;t<s;t++){const s=o[t],l=Math.floor(s.start/4),c=Math.ceil(s.count/4),u=l%r.width,d=Math.floor(l/r.width),h=c,p=1;e.pixelStorei(e.UNPACK_SKIP_PIXELS,u),e.pixelStorei(e.UNPACK_SKIP_ROWS,d),n.texSubImage2D(e.TEXTURE_2D,0,u,d,h,p,i,a,r.data)}t.clearUpdateRanges(),e.pixelStorei(e.UNPACK_ROW_LENGTH,l),e.pixelStorei(e.UNPACK_SKIP_PIXELS,c),e.pixelStorei(e.UNPACK_SKIP_ROWS,u)}}(o,p,f,y)):n.texImage2D(e.TEXTURE_2D,0,E,p.width,p.height,0,f,y,p.data);else if(o.isCompressedTexture)if(o.isCompressedArrayTexture){M&&T&&n.texStorage3D(e.TEXTURE_2D_ARRAY,C,E,S[0].width,S[0].height,p.depth);for(let t=0,r=S.length;t<r;t++)if(_=S[t],o.format!==kn)if(null!==f)if(M){if(A)if(o.layerUpdates.size>0){const r=Df(_.width,_.height,o.format,o.type);for(const i of o.layerUpdates){const a=_.data.subarray(i*r/_.data.BYTES_PER_ELEMENT,(i+1)*r/_.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,i,_.width,_.height,1,f,a)}o.clearLayerUpdates()}else n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,_.width,_.height,p.depth,f,_.data)}else n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,E,_.width,_.height,p.depth,0,_.data,0,0);else zi("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else M?A&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,_.width,_.height,p.depth,f,y,_.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,E,_.width,_.height,p.depth,0,f,y,_.data)}else{M&&T&&n.texStorage2D(e.TEXTURE_2D,C,E,S[0].width,S[0].height);for(let t=0,r=S.length;t<r;t++)_=S[t],o.format!==kn?null!==f?M?A&&n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,_.width,_.height,f,_.data):n.compressedTexImage2D(e.TEXTURE_2D,t,E,_.width,_.height,0,_.data):zi("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):M?A&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,_.width,_.height,f,y,_.data):n.texImage2D(e.TEXTURE_2D,t,E,_.width,_.height,0,f,y,_.data)}else if(o.isDataArrayTexture)if(M){if(T&&n.texStorage3D(e.TEXTURE_2D_ARRAY,C,E,p.width,p.height,p.depth),A)if(o.layerUpdates.size>0){const t=Df(p.width,p.height,o.format,o.type);for(const r of o.layerUpdates){const i=p.data.subarray(r*t/p.data.BYTES_PER_ELEMENT,(r+1)*t/p.data.BYTES_PER_ELEMENT);n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,r,p.width,p.height,1,f,y,i)}o.clearLayerUpdates()}else n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,p.width,p.height,p.depth,f,y,p.data)}else n.texImage3D(e.TEXTURE_2D_ARRAY,0,E,p.width,p.height,p.depth,0,f,y,p.data);else if(o.isData3DTexture)M?(T&&n.texStorage3D(e.TEXTURE_3D,C,E,p.width,p.height,p.depth),A&&n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,p.width,p.height,p.depth,f,y,p.data)):n.texImage3D(e.TEXTURE_3D,0,E,p.width,p.height,p.depth,0,f,y,p.data);else if(o.isFramebufferTexture){if(T)if(M)n.texStorage2D(e.TEXTURE_2D,C,E,p.width,p.height);else{let t=p.width,r=p.height;for(let i=0;i<C;i++)n.texImage2D(e.TEXTURE_2D,i,E,t,r,0,f,y,null),t>>=1,r>>=1}}else if(S.length>0){if(M&&T){const t=j(S[0]);n.texStorage2D(e.TEXTURE_2D,C,E,t.width,t.height)}for(let t=0,r=S.length;t<r;t++)_=S[t],M?A&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,f,y,_):n.texImage2D(e.TEXTURE_2D,t,E,f,y,_);o.generateMipmaps=!1}else if(M){if(T){const t=j(p);n.texStorage2D(e.TEXTURE_2D,C,E,t.width,t.height)}A&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,f,y,p)}else n.texImage2D(e.TEXTURE_2D,0,E,f,y,p);g(o)&&v(l),d.__version=u.version,o.onUpdate&&o.onUpdate(o)}t.__version=o.version}function N(t,i,o,l,c,u){const d=a.convert(o.format,o.colorSpace),h=a.convert(o.type),p=b(o.internalFormat,d,h,o.colorSpace),f=r.get(i),m=r.get(o);if(m.__renderTarget=i,!f.__hasExternalTextures){const t=Math.max(1,i.width>>u),r=Math.max(1,i.height>>u);c===e.TEXTURE_3D||c===e.TEXTURE_2D_ARRAY?n.texImage3D(c,u,p,t,r,i.depth,0,d,h,null):n.texImage2D(c,u,p,t,r,0,d,h,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),H(i)?s.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,l,c,m.__webglTexture,0,B(i)):(c===e.TEXTURE_2D||c>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&c<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,l,c,m.__webglTexture,u),n.bindFramebuffer(e.FRAMEBUFFER,null)}function D(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer){const i=n.depthTexture,a=i&&i.isDepthTexture?i.type:null,o=x(n.stencilBuffer,a),l=n.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,c=B(n);H(n)?s.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,c,o,n.width,n.height):r?e.renderbufferStorageMultisample(e.RENDERBUFFER,c,o,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,o,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,l,e.RENDERBUFFER,t)}else{const t=n.textures;for(let i=0;i<t.length;i++){const o=t[i],l=a.convert(o.format,o.colorSpace),c=a.convert(o.type),u=b(o.internalFormat,l,c,o.colorSpace),d=B(n);r&&!1===H(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,d,u,n.width,n.height):H(n)?s.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,d,u,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,u,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function U(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const a=r.get(i.depthTexture);a.__renderTarget=i,a.__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),T(i.depthTexture,0);const o=a.__webglTexture,l=B(i);if(i.depthTexture.format===In)H(i)?s.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0);else{if(i.depthTexture.format!==Ln)throw new Error("Unknown depthTexture format");H(i)?s.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0)}}function O(t){const i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(i.__boundDepthTexture!==t.depthTexture){const e=t.depthTexture;if(i.__depthDisposeCallback&&i.__depthDisposeCallback(),e){const t=()=>{delete i.__boundDepthTexture,delete i.__depthDisposeCallback,e.removeEventListener("dispose",t)};e.addEventListener("dispose",t),i.__depthDisposeCallback=t}i.__boundDepthTexture=e}if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");const e=t.texture.mipmaps;e&&e.length>0?U(i.__webglFramebuffer[0],t):U(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)if(n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[r]),void 0===i.__webglDepthbuffer[r])i.__webglDepthbuffer[r]=e.createRenderbuffer(),D(i.__webglDepthbuffer[r],t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,a=i.__webglDepthbuffer[r];e.bindRenderbuffer(e.RENDERBUFFER,a),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,a)}}else{const r=t.texture.mipmaps;if(r&&r.length>0?n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[0]):n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),void 0===i.__webglDepthbuffer)i.__webglDepthbuffer=e.createRenderbuffer(),D(i.__webglDepthbuffer,t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,r=i.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,r),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,r)}}n.bindFramebuffer(e.FRAMEBUFFER,null)}const F=[],z=[];function B(e){return Math.min(i.maxSamples,e.samples)}function H(e){const n=r.get(e);return e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function V(e,t){const n=e.colorSpace,r=e.format,i=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||n!==Br&&n!==Fr&&(ua.getTransfer(n)===Vr?r===kn&&i===gn||zi("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):Bi("WebGLTextures: Unsupported texture color space:",n)),t}function j(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?(c.width=e.naturalWidth||e.width,c.height=e.naturalHeight||e.height):"undefined"!=typeof VideoFrame&&e instanceof VideoFrame?(c.width=e.displayWidth,c.height=e.displayHeight):(c.width=e.width,c.height=e.height),c}this.allocateTextureUnit=function(){const e=M;return e>=i.maxTextures&&zi("WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+i.maxTextures),M+=1,e},this.resetTextureUnits=function(){M=0},this.setTexture2D=T,this.setTexture2DArray=function(t,i){const a=r.get(t);!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version?L(a,t,i):(t.isExternalTexture&&(a.__webglTexture=t.sourceTexture?t.sourceTexture:null),n.bindTexture(e.TEXTURE_2D_ARRAY,a.__webglTexture,e.TEXTURE0+i))},this.setTexture3D=function(t,i){const a=r.get(t);!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version?L(a,t,i):n.bindTexture(e.TEXTURE_3D,a.__webglTexture,e.TEXTURE0+i)},this.setTextureCube=function(t,o){const s=r.get(t);t.version>0&&s.__version!==t.version?function(t,o,s){if(6!==o.image.length)return;const l=k(t,o),c=o.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+s);const u=r.get(c);if(c.version!==u.__version||!0===l){n.activeTexture(e.TEXTURE0+s);const t=ua.getPrimaries(ua.workingColorSpace),r=o.colorSpace===Fr?null:ua.getPrimaries(o.colorSpace),d=o.colorSpace===Fr||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,o.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,o.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);const h=o.isCompressedTexture||o.image[0].isCompressedTexture,p=o.image[0]&&o.image[0].isDataTexture,f=[];for(let e=0;e<6;e++)f[e]=h||p?p?o.image[e].image:o.image[e]:m(o.image[e],!0,i.maxCubemapSize),f[e]=V(o,f[e]);const y=f[0],x=a.convert(o.format,o.colorSpace),_=a.convert(o.type),E=b(o.internalFormat,x,_,o.colorSpace),S=!0!==o.isVideoTexture,M=void 0===u.__version||!0===l,T=c.dataReady;let A,C=w(o,y);if(P(e.TEXTURE_CUBE_MAP,o),h){S&&M&&n.texStorage2D(e.TEXTURE_CUBE_MAP,C,E,y.width,y.height);for(let t=0;t<6;t++){A=f[t].mipmaps;for(let r=0;r<A.length;r++){const i=A[r];o.format!==kn?null!==x?S?T&&n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,i.width,i.height,x,i.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,E,i.width,i.height,0,i.data):zi("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):S?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,i.width,i.height,x,_,i.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,E,i.width,i.height,0,x,_,i.data)}}}else{if(A=o.mipmaps,S&&M){A.length>0&&C++;const t=j(f[0]);n.texStorage2D(e.TEXTURE_CUBE_MAP,C,E,t.width,t.height)}for(let t=0;t<6;t++)if(p){S?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,f[t].width,f[t].height,x,_,f[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,E,f[t].width,f[t].height,0,x,_,f[t].data);for(let r=0;r<A.length;r++){const i=A[r].image[t].image;S?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,i.width,i.height,x,_,i.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,E,i.width,i.height,0,x,_,i.data)}}else{S?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,x,_,f[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,E,x,_,f[t]);for(let r=0;r<A.length;r++){const i=A[r];S?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,x,_,i.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,E,x,_,i.image[t])}}}g(o)&&v(e.TEXTURE_CUBE_MAP),u.__version=c.version,o.onUpdate&&o.onUpdate(o)}t.__version=o.version}(s,t,o):n.bindTexture(e.TEXTURE_CUBE_MAP,s.__webglTexture,e.TEXTURE0+o)},this.rebindTextures=function(t,n,i){const a=r.get(t);void 0!==n&&N(a.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==i&&O(t)},this.setupRenderTarget=function(t){const i=t.texture,s=r.get(t),l=r.get(i);t.addEventListener("dispose",E);const c=t.textures,u=!0===t.isWebGLCubeRenderTarget,d=c.length>1;if(d||(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=i.version,o.memory.textures++),u){s.__webglFramebuffer=[];for(let t=0;t<6;t++)if(i.mipmaps&&i.mipmaps.length>0){s.__webglFramebuffer[t]=[];for(let n=0;n<i.mipmaps.length;n++)s.__webglFramebuffer[t][n]=e.createFramebuffer()}else s.__webglFramebuffer[t]=e.createFramebuffer()}else{if(i.mipmaps&&i.mipmaps.length>0){s.__webglFramebuffer=[];for(let t=0;t<i.mipmaps.length;t++)s.__webglFramebuffer[t]=e.createFramebuffer()}else s.__webglFramebuffer=e.createFramebuffer();if(d)for(let t=0,n=c.length;t<n;t++){const n=r.get(c[t]);void 0===n.__webglTexture&&(n.__webglTexture=e.createTexture(),o.memory.textures++)}if(t.samples>0&&!1===H(t)){s.__webglMultisampledFramebuffer=e.createFramebuffer(),s.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,s.__webglMultisampledFramebuffer);for(let n=0;n<c.length;n++){const r=c[n];s.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,s.__webglColorRenderbuffer[n]);const i=a.convert(r.format,r.colorSpace),o=a.convert(r.type),l=b(r.internalFormat,i,o,r.colorSpace,!0===t.isXRRenderTarget),u=B(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,s.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(s.__webglDepthRenderbuffer=e.createRenderbuffer(),D(s.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(u){n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture),P(e.TEXTURE_CUBE_MAP,i);for(let n=0;n<6;n++)if(i.mipmaps&&i.mipmaps.length>0)for(let r=0;r<i.mipmaps.length;r++)N(s.__webglFramebuffer[n][r],t,i,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r);else N(s.__webglFramebuffer[n],t,i,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);g(i)&&v(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(d){for(let i=0,a=c.length;i<a;i++){const a=c[i],o=r.get(a);let l=e.TEXTURE_2D;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(l=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(l,o.__webglTexture),P(l,a),N(s.__webglFramebuffer,t,a,e.COLOR_ATTACHMENT0+i,l,0),g(a)&&v(l)}n.unbindTexture()}else{let r=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(r=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(r,l.__webglTexture),P(r,i),i.mipmaps&&i.mipmaps.length>0)for(let n=0;n<i.mipmaps.length;n++)N(s.__webglFramebuffer[n],t,i,e.COLOR_ATTACHMENT0,r,n);else N(s.__webglFramebuffer,t,i,e.COLOR_ATTACHMENT0,r,0);g(i)&&v(r),n.unbindTexture()}t.depthBuffer&&O(t)},this.updateRenderTargetMipmap=function(e){const t=e.textures;for(let i=0,a=t.length;i<a;i++){const a=t[i];if(g(a)){const t=y(e),i=r.get(a).__webglTexture;n.bindTexture(t,i),v(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0)if(!1===H(t)){const i=t.textures,a=t.width,o=t.height;let s=e.COLOR_BUFFER_BIT;const c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=r.get(t),d=i.length>1;if(d)for(let t=0;t<i.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer);const h=t.texture.mipmaps;h&&h.length>0?n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer[0]):n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<i.length;n++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(s|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(s|=e.STENCIL_BUFFER_BIT)),d){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer[n]);const t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,a,o,0,0,a,o,s,e.NEAREST),!0===l&&(F.length=0,z.length=0,F.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&!1===t.resolveDepthBuffer&&(F.push(c),z.push(c),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,z)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,F))}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),d)for(let t=0;t<i.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,u.__webglColorRenderbuffer[t]);const a=r.get(i[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,a,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&l){const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[n])}},this.setupDepthRenderbuffer=O,this.setupFrameBufferTexture=N,this.useMultisampledRTT=H}function ov(e,t){return{convert:function(n,r=Fr){let i;const a=ua.getTransfer(r);if(n===gn)return e.UNSIGNED_BYTE;if(n===Sn)return e.UNSIGNED_SHORT_4_4_4_4;if(n===Mn)return e.UNSIGNED_SHORT_5_5_5_1;if(n===An)return e.UNSIGNED_INT_5_9_9_9_REV;if(n===Cn)return e.UNSIGNED_INT_10F_11F_11F_REV;if(n===vn)return e.BYTE;if(n===yn)return e.SHORT;if(n===bn)return e.UNSIGNED_SHORT;if(n===xn)return e.INT;if(n===wn)return e.UNSIGNED_INT;if(n===_n)return e.FLOAT;if(n===En)return e.HALF_FLOAT;if(n===Rn)return e.ALPHA;if(n===Pn)return e.RGB;if(n===kn)return e.RGBA;if(n===In)return e.DEPTH_COMPONENT;if(n===Ln)return e.DEPTH_STENCIL;if(n===Nn)return e.RED;if(n===Dn)return e.RED_INTEGER;if(n===Un)return e.RG;if(n===On)return e.RG_INTEGER;if(n===zn)return e.RGBA_INTEGER;if(n===Bn||n===Hn||n===Vn||n===jn)if(a===Vr){if(i=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===i)return null;if(n===Bn)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Hn)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Vn)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===jn)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(i=t.get("WEBGL_compressed_texture_s3tc"),null===i)return null;if(n===Bn)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Hn)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Vn)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===jn)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===Wn||n===Gn||n===Xn||n===qn){if(i=t.get("WEBGL_compressed_texture_pvrtc"),null===i)return null;if(n===Wn)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Gn)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Xn)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===qn)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Yn||n===$n||n===Kn){if(i=t.get("WEBGL_compressed_texture_etc"),null===i)return null;if(n===Yn||n===$n)return a===Vr?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(n===Kn)return a===Vr?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}if(n===Zn||n===Jn||n===Qn||n===er||n===tr||n===nr||n===rr||n===ir||n===ar||n===or||n===sr||n===lr||n===cr||n===ur){if(i=t.get("WEBGL_compressed_texture_astc"),null===i)return null;if(n===Zn)return a===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Jn)return a===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Qn)return a===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===er)return a===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===tr)return a===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===nr)return a===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===rr)return a===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===ir)return a===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===ar)return a===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===or)return a===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===sr)return a===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===lr)return a===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===cr)return a===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===ur)return a===Vr?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===dr||n===hr||n===pr){if(i=t.get("EXT_texture_compression_bptc"),null===i)return null;if(n===dr)return a===Vr?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===hr)return i.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===pr)return i.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===fr||n===mr||n===gr||n===vr){if(i=t.get("EXT_texture_compression_rgtc"),null===i)return null;if(n===fr)return i.COMPRESSED_RED_RGTC1_EXT;if(n===mr)return i.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===gr)return i.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===vr)return i.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Tn?e.UNSIGNED_INT_24_8:void 0!==e[n]?e[n]:null}}}class sv{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(null===this.texture){const n=new nu(e.texture);e.depthNear===t.depthNear&&e.depthFar===t.depthFar||(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,n=new js({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Us(new vd(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class lv extends Vi{constructor(e,t){super();const n=this;let r=null,i=1,a=null,o="local-floor",s=1,l=null,c=null,u=null,d=null,h=null,p=null;const f="undefined"!=typeof XRWebGLBinding,m=new sv,g={},v=t.getContextAttributes();let y=null,b=null;const x=[],w=[],_=new ea;let E=null;const S=new Ys;S.viewport=new wa;const M=new Ys;M.viewport=new wa;const T=[S,M],A=new rp;let C=null,R=null;function P(e){const t=w.indexOf(e.inputSource);if(-1===t)return;const n=x[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||a),n.dispatchEvent({type:e.type,data:e.inputSource}))}function k(){r.removeEventListener("select",P),r.removeEventListener("selectstart",P),r.removeEventListener("selectend",P),r.removeEventListener("squeeze",P),r.removeEventListener("squeezestart",P),r.removeEventListener("squeezeend",P),r.removeEventListener("end",k),r.removeEventListener("inputsourceschange",I);for(let e=0;e<x.length;e++){const t=w[e];null!==t&&(w[e]=null,x[e].disconnect(t))}C=null,R=null,m.reset();for(const e in g)delete g[e];e.setRenderTarget(y),h=null,d=null,u=null,r=null,b=null,O.stop(),n.isPresenting=!1,e.setPixelRatio(E),e.setSize(_.width,_.height,!1),n.dispatchEvent({type:"sessionend"})}function I(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=w.indexOf(n);r>=0&&(w[r]=null,x[r].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=w.indexOf(n);if(-1===r){for(let e=0;e<x.length;e++){if(e>=w.length){w.push(n),r=e;break}if(null===w[e]){w[e]=n,r=e;break}}if(-1===r)break}const i=x[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=x[e];return void 0===t&&(t=new tl,x[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=x[e];return void 0===t&&(t=new tl,x[e]=t),t.getGripSpace()},this.getHand=function(e){let t=x[e];return void 0===t&&(t=new tl,x[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&zi("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){o=e,!0===n.isPresenting&&zi("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return null===u&&f&&(u=new XRWebGLBinding(r,t)),u},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(c){if(r=c,null!==r){if(y=e.getRenderTarget(),r.addEventListener("select",P),r.addEventListener("selectstart",P),r.addEventListener("selectend",P),r.addEventListener("squeeze",P),r.addEventListener("squeezestart",P),r.addEventListener("squeezeend",P),r.addEventListener("end",k),r.addEventListener("inputsourceschange",I),!0!==v.xrCompatible&&await t.makeXRCompatible(),E=e.getPixelRatio(),e.getSize(_),f&&"createProjectionLayer"in XRWebGLBinding.prototype){let n=null,a=null,o=null;v.depth&&(o=v.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=v.stencil?Ln:In,a=v.stencil?Tn:wn);const s={colorFormat:t.RGBA8,depthFormat:o,scaleFactor:i};u=this.getBinding(),d=u.createProjectionLayer(s),r.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),b=new Ea(d.textureWidth,d.textureHeight,{format:kn,type:gn,depthTexture:new tu(d.textureWidth,d.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:!1===d.ignoreDepthValues,resolveStencilBuffer:!1===d.ignoreDepthValues})}else{const n={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:i};h=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),b=new Ea(h.framebufferWidth,h.framebufferHeight,{format:kn,type:gn,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil,resolveDepthBuffer:!1===h.ignoreDepthValues,resolveStencilBuffer:!1===h.ignoreDepthValues})}b.isXRRenderTarget=!0,this.setFoveation(s),l=null,a=await r.requestReferenceSpace(o),O.setContext(r),O.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode},this.getDepthTexture=function(){return m.getDepthTexture()};const L=new na,N=new na;function D(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;let t=e.near,n=e.far;null!==m.texture&&(m.depthNear>0&&(t=m.depthNear),m.depthFar>0&&(n=m.depthFar)),A.near=M.near=S.near=t,A.far=M.far=S.far=n,C===A.near&&R===A.far||(r.updateRenderState({depthNear:A.near,depthFar:A.far}),C=A.near,R=A.far),A.layers.mask=6|e.layers.mask,S.layers.mask=3&A.layers.mask,M.layers.mask=5&A.layers.mask;const i=e.parent,a=A.cameras;D(A,i);for(let e=0;e<a.length;e++)D(a[e],i);2===a.length?function(e,t,n){L.setFromMatrixPosition(t.matrixWorld),N.setFromMatrixPosition(n.matrixWorld);const r=L.distanceTo(N),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],d=(a[8]+1)/a[0],h=o*u,p=o*d,f=r/(-u+d),m=f*-u;if(t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===i[10])e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse);else{const t=o+f,n=s+f,i=h-m,a=p+(r-m),u=l*s/n*t,d=c*s/n*t;e.projectionMatrix.makePerspective(i,a,u,d,t,n),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}(A,S,M):A.projectionMatrix.copy(S.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld)),e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*Xi*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,A,i)},this.getCamera=function(){return A},this.getFoveation=function(){if(null!==d||null!==h)return s},this.setFoveation=function(e){s=e,null!==d&&(d.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==m.texture},this.getDepthSensingMesh=function(){return m.getMesh(A)},this.getCameraTexture=function(e){return g[e]};let U=null;const O=new Of;O.setAnimationLoop(function(t,i){if(c=i.getViewerPose(l||a),p=i,null!==c){const t=c.views;null!==h&&(e.setRenderTargetFramebuffer(b,h.framebuffer),e.setRenderTarget(b));let i=!1;t.length!==A.cameras.length&&(A.cameras.length=0,i=!0);for(let n=0;n<t.length;n++){const r=t[n];let a=null;if(null!==h)a=h.getViewport(r);else{const t=u.getViewSubImage(d,r);a=t.viewport,0===n&&(e.setRenderTargetTextures(b,t.colorTexture,t.depthStencilTexture),e.setRenderTarget(b))}let o=T[n];void 0===o&&(o=new Ys,o.layers.enable(n),o.viewport=new wa,T[n]=o),o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.quaternion,o.scale),o.projectionMatrix.fromArray(r.projectionMatrix),o.projectionMatrixInverse.copy(o.projectionMatrix).invert(),o.viewport.set(a.x,a.y,a.width,a.height),0===n&&(A.matrix.copy(o.matrix),A.matrix.decompose(A.position,A.quaternion,A.scale)),!0===i&&A.cameras.push(o)}const a=r.enabledFeatures;if(a&&a.includes("depth-sensing")&&"gpu-optimized"==r.depthUsage&&f){u=n.getBinding();const e=u.getDepthInformation(t[0]);e&&e.isValid&&e.texture&&m.init(e,r.renderState)}if(a&&a.includes("camera-access")&&f){e.state.unbindTexture(),u=n.getBinding();for(let e=0;e<t.length;e++){const n=t[e].camera;if(n){let e=g[n];e||(e=new nu,g[n]=e);const t=u.getCameraImage(n);e.sourceTexture=t}}}}for(let e=0;e<x.length;e++){const t=w[e],n=x[e];null!==t&&void 0!==n&&n.update(t,i,l||a)}U&&U(t,i),i.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:i}),p=null}),this.setAnimationLoop=function(e){U=e},this.dispose=function(){}}}const cv=new ho,uv=new to;function dv(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(e,r){e.opacity.value=r.opacity,r.color&&e.diffuse.value.copy(r.color),r.emissive&&e.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(e.map.value=r.map,n(r.map,e.mapTransform)),r.alphaMap&&(e.alphaMap.value=r.alphaMap,n(r.alphaMap,e.alphaMapTransform)),r.bumpMap&&(e.bumpMap.value=r.bumpMap,n(r.bumpMap,e.bumpMapTransform),e.bumpScale.value=r.bumpScale,r.side===tt&&(e.bumpScale.value*=-1)),r.normalMap&&(e.normalMap.value=r.normalMap,n(r.normalMap,e.normalMapTransform),e.normalScale.value.copy(r.normalScale),r.side===tt&&e.normalScale.value.negate()),r.displacementMap&&(e.displacementMap.value=r.displacementMap,n(r.displacementMap,e.displacementMapTransform),e.displacementScale.value=r.displacementScale,e.displacementBias.value=r.displacementBias),r.emissiveMap&&(e.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,e.emissiveMapTransform)),r.specularMap&&(e.specularMap.value=r.specularMap,n(r.specularMap,e.specularMapTransform)),r.alphaTest>0&&(e.alphaTest.value=r.alphaTest);const i=t.get(r),a=i.envMap,o=i.envMapRotation;a&&(e.envMap.value=a,cv.copy(o),cv.x*=-1,cv.y*=-1,cv.z*=-1,a.isCubeTexture&&!1===a.isRenderTargetTexture&&(cv.y*=-1,cv.z*=-1),e.envMapRotation.value.setFromMatrix4(uv.makeRotationFromEuler(cv)),e.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,e.reflectivity.value=r.reflectivity,e.ior.value=r.ior,e.refractionRatio.value=r.refractionRatio),r.lightMap&&(e.lightMap.value=r.lightMap,e.lightMapIntensity.value=r.lightMapIntensity,n(r.lightMap,e.lightMapTransform)),r.aoMap&&(e.aoMap.value=r.aoMap,e.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,Hs(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,i,a,o,s){i.isMeshBasicMaterial||i.isMeshLambertMaterial?r(e,i):i.isMeshToonMaterial?(r(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,i)):i.isMeshPhongMaterial?(r(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,i)):i.isMeshStandardMaterial?(r(e,i),function(e,t){e.metalness.value=t.metalness,t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap,n(t.metalnessMap,e.metalnessMapTransform)),e.roughness.value=t.roughness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap,n(t.roughnessMap,e.roughnessMapTransform)),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&function(e,t,r){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform))),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===tt&&e.clearcoatNormalScale.value.negate())),t.dispersion>0&&(e.dispersion.value=t.dispersion),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform))),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform))),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform)),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,i,s)):i.isMeshMatcapMaterial?(r(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,i)):i.isMeshDepthMaterial?r(e,i):i.isMeshDistanceMaterial?(r(e,i),function(e,n){const r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,i)):i.isMeshNormalMaterial?r(e,i):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,r,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*r,e.scale.value=.5*i,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform)),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i,a,o):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform)),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function hv(e,t,n,r){let i={},a={},o=[];const s=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function l(e,t,n,r){const i=e.value,a=t+"_"+n;if(void 0===r[a])return r[a]="number"==typeof i||"boolean"==typeof i?i:i.clone(),!0;{const e=r[a];if("number"==typeof i||"boolean"==typeof i){if(e!==i)return r[a]=i,!0}else if(!1===e.equals(i))return e.copy(i),!0}return!1}function c(e){const t={boundary:0,storage:0};return"number"==typeof e||"boolean"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?zi("WebGLRenderer: Texture samplers can not be part of an uniforms group."):zi("WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const n=t.target;n.removeEventListener("dispose",u);const r=o.indexOf(n.__bindingPointIndex);o.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete a[n.id]}return{bind:function(e,t){const n=t.program;r.uniformBlockBinding(e,n)},update:function(n,d){let h=i[n.id];void 0===h&&(function(e){const t=e.uniforms;let n=0;for(let e=0,r=t.length;e<r;e++){const r=Array.isArray(t[e])?t[e]:[t[e]];for(let e=0,t=r.length;e<t;e++){const t=r[e],i=Array.isArray(t.value)?t.value:[t.value];for(let e=0,r=i.length;e<r;e++){const r=c(i[e]),a=n%16,o=a%r.boundary,s=a+o;n+=o,0!==s&&16-s<r.storage&&(n+=16-s),t.__data=new Float32Array(r.storage/Float32Array.BYTES_PER_ELEMENT),t.__offset=n,n+=r.storage}}}const r=n%16;r>0&&(n+=16-r),e.__size=n,e.__cache={}}(n),h=function(t){const n=function(){for(let e=0;e<s;e++)if(-1===o.indexOf(e))return o.push(e),e;return Bi("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const r=e.createBuffer(),i=t.__size,a=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,i,a),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=h,n.addEventListener("dispose",u));const p=d.program;r.updateUBOMapping(n,p);const f=t.render.frame;a[n.id]!==f&&(function(t){const n=i[t.id],r=t.uniforms,a=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let t=0,n=r.length;t<n;t++){const n=Array.isArray(r[t])?r[t]:[r[t]];for(let r=0,i=n.length;r<i;r++){const i=n[r];if(!0===l(i,t,r,a)){const t=i.__offset,n=Array.isArray(i.value)?i.value:[i.value];let r=0;for(let a=0;a<n.length;a++){const o=n[a],s=c(o);"number"==typeof o||"boolean"==typeof o?(i.__data[0]=o,e.bufferSubData(e.UNIFORM_BUFFER,t+r,i.__data)):o.isMatrix3?(i.__data[0]=o.elements[0],i.__data[1]=o.elements[1],i.__data[2]=o.elements[2],i.__data[3]=0,i.__data[4]=o.elements[3],i.__data[5]=o.elements[4],i.__data[6]=o.elements[5],i.__data[7]=0,i.__data[8]=o.elements[6],i.__data[9]=o.elements[7],i.__data[10]=o.elements[8],i.__data[11]=0):(o.toArray(i.__data,r),r+=s.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,i.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),a[n.id]=f)},dispose:function(){for(const t in i)e.deleteBuffer(i[t]);o=[],i={},a={}}}}const pv=new Uint16Array([11481,15204,11534,15171,11808,15015,12385,14843,12894,14716,13396,14600,13693,14483,13976,14366,14237,14171,14405,13961,14511,13770,14605,13598,14687,13444,14760,13305,14822,13066,14876,12857,14923,12675,14963,12517,14997,12379,15025,12230,15049,12023,15070,11843,15086,11687,15100,11551,15111,11433,15120,11330,15127,11217,15132,11060,15135,10922,15138,10801,15139,10695,15139,10600,13012,14923,13020,14917,13064,14886,13176,14800,13349,14666,13513,14526,13724,14398,13960,14230,14200,14020,14383,13827,14488,13651,14583,13491,14667,13348,14740,13132,14803,12908,14856,12713,14901,12542,14938,12394,14968,12241,14992,12017,15010,11822,15024,11654,15034,11507,15041,11380,15044,11269,15044,11081,15042,10913,15037,10764,15031,10635,15023,10520,15014,10419,15003,10330,13657,14676,13658,14673,13670,14660,13698,14622,13750,14547,13834,14442,13956,14317,14112,14093,14291,13889,14407,13704,14499,13538,14586,13389,14664,13201,14733,12966,14792,12758,14842,12577,14882,12418,14915,12272,14940,12033,14959,11826,14972,11646,14980,11490,14983,11355,14983,11212,14979,11008,14971,10830,14961,10675,14950,10540,14936,10420,14923,10315,14909,10204,14894,10041,14089,14460,14090,14459,14096,14452,14112,14431,14141,14388,14186,14305,14252,14130,14341,13941,14399,13756,14467,13585,14539,13430,14610,13272,14677,13026,14737,12808,14790,12617,14833,12449,14869,12303,14896,12065,14916,11845,14929,11655,14937,11490,14939,11347,14936,11184,14930,10970,14921,10783,14912,10621,14900,10480,14885,10356,14867,10247,14848,10062,14827,9894,14805,9745,14400,14208,14400,14206,14402,14198,14406,14174,14415,14122,14427,14035,14444,13913,14469,13767,14504,13613,14548,13463,14598,13324,14651,13082,14704,12858,14752,12658,14795,12483,14831,12330,14860,12106,14881,11875,14895,11675,14903,11501,14905,11351,14903,11178,14900,10953,14892,10757,14880,10589,14865,10442,14847,10313,14827,10162,14805,9965,14782,9792,14757,9642,14731,9507,14562,13883,14562,13883,14563,13877,14566,13862,14570,13830,14576,13773,14584,13689,14595,13582,14613,13461,14637,13336,14668,13120,14704,12897,14741,12695,14776,12516,14808,12358,14835,12150,14856,11910,14870,11701,14878,11519,14882,11361,14884,11187,14880,10951,14871,10748,14858,10572,14842,10418,14823,10286,14801,10099,14777,9897,14751,9722,14725,9567,14696,9430,14666,9309,14702,13604,14702,13604,14702,13600,14703,13591,14705,13570,14707,13533,14709,13477,14712,13400,14718,13305,14727,13106,14743,12907,14762,12716,14784,12539,14807,12380,14827,12190,14844,11943,14855,11727,14863,11539,14870,11376,14871,11204,14868,10960,14858,10748,14845,10565,14829,10406,14809,10269,14786,10058,14761,9852,14734,9671,14705,9512,14674,9374,14641,9253,14608,9076,14821,13366,14821,13365,14821,13364,14821,13358,14821,13344,14821,13320,14819,13252,14817,13145,14815,13011,14814,12858,14817,12698,14823,12539,14832,12389,14841,12214,14850,11968,14856,11750,14861,11558,14866,11390,14867,11226,14862,10972,14853,10754,14840,10565,14823,10401,14803,10259,14780,10032,14754,9820,14725,9635,14694,9473,14661,9333,14627,9203,14593,8988,14557,8798,14923,13014,14922,13014,14922,13012,14922,13004,14920,12987,14919,12957,14915,12907,14909,12834,14902,12738,14894,12623,14888,12498,14883,12370,14880,12203,14878,11970,14875,11759,14873,11569,14874,11401,14872,11243,14865,10986,14855,10762,14842,10568,14825,10401,14804,10255,14781,10017,14754,9799,14725,9611,14692,9445,14658,9301,14623,9139,14587,8920,14548,8729,14509,8562,15008,12672,15008,12672,15008,12671,15007,12667,15005,12656,15001,12637,14997,12605,14989,12556,14978,12490,14966,12407,14953,12313,14940,12136,14927,11934,14914,11742,14903,11563,14896,11401,14889,11247,14879,10992,14866,10767,14851,10570,14833,10400,14812,10252,14789,10007,14761,9784,14731,9592,14698,9424,14663,9279,14627,9088,14588,8868,14548,8676,14508,8508,14467,8360,15080,12386,15080,12386,15079,12385,15078,12383,15076,12378,15072,12367,15066,12347,15057,12315,15045,12253,15030,12138,15012,11998,14993,11845,14972,11685,14951,11530,14935,11383,14920,11228,14904,10981,14887,10762,14870,10567,14850,10397,14827,10248,14803,9997,14774,9771,14743,9578,14710,9407,14674,9259,14637,9048,14596,8826,14555,8632,14514,8464,14471,8317,14427,8182,15139,12008,15139,12008,15138,12008,15137,12007,15135,12003,15130,11990,15124,11969,15115,11929,15102,11872,15086,11794,15064,11693,15041,11581,15013,11459,14987,11336,14966,11170,14944,10944,14921,10738,14898,10552,14875,10387,14850,10239,14824,9983,14794,9758,14762,9563,14728,9392,14692,9244,14653,9014,14611,8791,14569,8597,14526,8427,14481,8281,14436,8110,14391,7885,15188,11617,15188,11617,15187,11617,15186,11618,15183,11617,15179,11612,15173,11601,15163,11581,15150,11546,15133,11495,15110,11427,15083,11346,15051,11246,15024,11057,14996,10868,14967,10687,14938,10517,14911,10362,14882,10206,14853,9956,14821,9737,14787,9543,14752,9375,14715,9228,14675,8980,14632,8760,14589,8565,14544,8395,14498,8248,14451,8049,14404,7824,14357,7630,15228,11298,15228,11298,15227,11299,15226,11301,15223,11303,15219,11302,15213,11299,15204,11290,15191,11271,15174,11217,15150,11129,15119,11015,15087,10886,15057,10744,15024,10599,14990,10455,14957,10318,14924,10143,14891,9911,14856,9701,14820,9516,14782,9352,14744,9200,14703,8946,14659,8725,14615,8533,14568,8366,14521,8220,14472,7992,14423,7770,14374,7578,14315,7408,15260,10819,15260,10819,15259,10822,15258,10826,15256,10832,15251,10836,15246,10841,15237,10838,15225,10821,15207,10788,15183,10734,15151,10660,15120,10571,15087,10469,15049,10359,15012,10249,14974,10041,14937,9837,14900,9647,14860,9475,14820,9320,14779,9147,14736,8902,14691,8688,14646,8499,14598,8335,14549,8189,14499,7940,14448,7720,14397,7529,14347,7363,14256,7218,15285,10410,15285,10411,15285,10413,15284,10418,15282,10425,15278,10434,15272,10442,15264,10449,15252,10445,15235,10433,15210,10403,15179,10358,15149,10301,15113,10218,15073,10059,15033,9894,14991,9726,14951,9565,14909,9413,14865,9273,14822,9073,14777,8845,14730,8641,14682,8459,14633,8300,14583,8129,14531,7883,14479,7670,14426,7482,14373,7321,14305,7176,14201,6939,15305,9939,15305,9940,15305,9945,15304,9955,15302,9967,15298,9989,15293,10010,15286,10033,15274,10044,15258,10045,15233,10022,15205,9975,15174,9903,15136,9808,15095,9697,15053,9578,15009,9451,14965,9327,14918,9198,14871,8973,14825,8766,14775,8579,14725,8408,14675,8259,14622,8058,14569,7821,14515,7615,14460,7435,14405,7276,14350,7108,14256,6866,14149,6653,15321,9444,15321,9445,15321,9448,15320,9458,15317,9470,15314,9490,15310,9515,15302,9540,15292,9562,15276,9579,15251,9577,15226,9559,15195,9519,15156,9463,15116,9389,15071,9304,15025,9208,14978,9023,14927,8838,14878,8661,14827,8496,14774,8344,14722,8206,14667,7973,14612,7749,14556,7555,14499,7382,14443,7229,14385,7025,14322,6791,14210,6588,14100,6409,15333,8920,15333,8921,15332,8927,15332,8943,15329,8965,15326,9002,15322,9048,15316,9106,15307,9162,15291,9204,15267,9221,15244,9221,15212,9196,15175,9134,15133,9043,15088,8930,15040,8801,14990,8665,14938,8526,14886,8391,14830,8261,14775,8087,14719,7866,14661,7664,14603,7482,14544,7322,14485,7178,14426,6936,14367,6713,14281,6517,14166,6348,14054,6198,15341,8360,15341,8361,15341,8366,15341,8379,15339,8399,15336,8431,15332,8473,15326,8527,15318,8585,15302,8632,15281,8670,15258,8690,15227,8690,15191,8664,15149,8612,15104,8543,15055,8456,15001,8360,14948,8259,14892,8122,14834,7923,14776,7734,14716,7558,14656,7397,14595,7250,14534,7070,14472,6835,14410,6628,14350,6443,14243,6283,14125,6135,14010,5889,15348,7715,15348,7717,15348,7725,15347,7745,15345,7780,15343,7836,15339,7905,15334,8e3,15326,8103,15310,8193,15293,8239,15270,8270,15240,8287,15204,8283,15163,8260,15118,8223,15067,8143,15014,8014,14958,7873,14899,7723,14839,7573,14778,7430,14715,7293,14652,7164,14588,6931,14524,6720,14460,6531,14396,6362,14330,6210,14207,6015,14086,5781,13969,5576,15352,7114,15352,7116,15352,7128,15352,7159,15350,7195,15348,7237,15345,7299,15340,7374,15332,7457,15317,7544,15301,7633,15280,7703,15251,7754,15216,7775,15176,7767,15131,7733,15079,7670,15026,7588,14967,7492,14906,7387,14844,7278,14779,7171,14714,6965,14648,6770,14581,6587,14515,6420,14448,6269,14382,6123,14299,5881,14172,5665,14049,5477,13929,5310,15355,6329,15355,6330,15355,6339,15355,6362,15353,6410,15351,6472,15349,6572,15344,6688,15337,6835,15323,6985,15309,7142,15287,7220,15260,7277,15226,7310,15188,7326,15142,7318,15090,7285,15036,7239,14976,7177,14914,7045,14849,6892,14782,6736,14714,6581,14645,6433,14576,6293,14506,6164,14438,5946,14369,5733,14270,5540,14140,5369,14014,5216,13892,5043,15357,5483,15357,5484,15357,5496,15357,5528,15356,5597,15354,5692,15351,5835,15347,6011,15339,6195,15328,6317,15314,6446,15293,6566,15268,6668,15235,6746,15197,6796,15152,6811,15101,6790,15046,6748,14985,6673,14921,6583,14854,6479,14785,6371,14714,6259,14643,6149,14571,5946,14499,5750,14428,5567,14358,5401,14242,5250,14109,5111,13980,4870,13856,4657,15359,4555,15359,4557,15358,4573,15358,4633,15357,4715,15355,4841,15353,5061,15349,5216,15342,5391,15331,5577,15318,5770,15299,5967,15274,6150,15243,6223,15206,6280,15161,6310,15111,6317,15055,6300,14994,6262,14928,6208,14860,6141,14788,5994,14715,5838,14641,5684,14566,5529,14492,5384,14418,5247,14346,5121,14216,4892,14079,4682,13948,4496,13822,4330,15359,3498,15359,3501,15359,3520,15359,3598,15358,3719,15356,3860,15355,4137,15351,4305,15344,4563,15334,4809,15321,5116,15303,5273,15280,5418,15250,5547,15214,5653,15170,5722,15120,5761,15064,5763,15002,5733,14935,5673,14865,5597,14792,5504,14716,5400,14640,5294,14563,5185,14486,5041,14410,4841,14335,4655,14191,4482,14051,4325,13918,4183,13790,4012,15360,2282,15360,2285,15360,2306,15360,2401,15359,2547,15357,2748,15355,3103,15352,3349,15345,3675,15336,4020,15324,4272,15307,4496,15285,4716,15255,4908,15220,5086,15178,5170,15128,5214,15072,5234,15010,5231,14943,5206,14871,5166,14796,5102,14718,4971,14639,4833,14559,4687,14480,4541,14402,4401,14315,4268,14167,4142,14025,3958,13888,3747,13759,3556,15360,923,15360,925,15360,946,15360,1052,15359,1214,15357,1494,15356,1892,15352,2274,15346,2663,15338,3099,15326,3393,15309,3679,15288,3980,15260,4183,15226,4325,15185,4437,15136,4517,15080,4570,15018,4591,14950,4581,14877,4545,14800,4485,14720,4411,14638,4325,14556,4231,14475,4136,14395,3988,14297,3803,14145,3628,13999,3465,13861,3314,13729,3177,15360,263,15360,264,15360,272,15360,325,15359,407,15358,548,15356,780,15352,1144,15347,1580,15339,2099,15328,2425,15312,2795,15292,3133,15264,3329,15232,3517,15191,3689,15143,3819,15088,3923,15025,3978,14956,3999,14882,3979,14804,3931,14722,3855,14639,3756,14554,3645,14470,3529,14388,3409,14279,3289,14124,3173,13975,3055,13834,2848,13701,2658,15360,49,15360,49,15360,52,15360,75,15359,111,15358,201,15356,283,15353,519,15348,726,15340,1045,15329,1415,15314,1795,15295,2173,15269,2410,15237,2649,15197,2866,15150,3054,15095,3140,15032,3196,14963,3228,14888,3236,14808,3224,14725,3191,14639,3146,14553,3088,14466,2976,14382,2836,14262,2692,14103,2549,13952,2409,13808,2278,13674,2154,15360,4,15360,4,15360,4,15360,13,15359,33,15358,59,15357,112,15353,199,15348,302,15341,456,15331,628,15316,827,15297,1082,15272,1332,15241,1601,15202,1851,15156,2069,15101,2172,15039,2256,14970,2314,14894,2348,14813,2358,14728,2344,14640,2311,14551,2263,14463,2203,14376,2133,14247,2059,14084,1915,13930,1761,13784,1609,13648,1464,15360,0,15360,0,15360,0,15360,3,15359,18,15358,26,15357,53,15354,80,15348,97,15341,165,15332,238,15318,326,15299,427,15275,529,15245,654,15207,771,15161,885,15108,994,15046,1089,14976,1170,14900,1229,14817,1266,14731,1284,14641,1282,14550,1260,14460,1223,14370,1174,14232,1116,14066,1050,13909,981,13761,910,13623,839]);let fv=null;class mv{constructor(e={}){const{canvas:t=Li(),context:n=null,depth:r=!0,stencil:i=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:s=!0,preserveDrawingBuffer:l=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:u=!1,reversedDepthBuffer:d=!1}=e;let h;if(this.isWebGLRenderer=!0,null!==n){if("undefined"!=typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=n.getContextAttributes().alpha}else h=a;const p=new Set([zn,On,Dn]),f=new Set([gn,wn,bn,Tn,Sn,Mn]),m=new Uint32Array(4),g=new Int32Array(4);let v=null,y=null;const b=[],x=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Bt,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const w=this;let _=!1;this._outputColorSpace=zr;let E=0,S=0,M=null,T=-1,A=null;const C=new wa,R=new wa;let P=null;const k=new Yo(0);let I=0,L=t.width,N=t.height,D=1,U=null,O=null;const F=new wa(0,0,L,N),z=new wa(0,0,L,N);let B=!1;const H=new ic;let V=!1,j=!1;const W=new to,G=new na,X=new wa,q={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Y=!1;function $(){return null===M?D:1}let K,Z,J,Q,ee,te,ne,re,ie,ae,oe,se,le,ce,ue,de,he,pe,fe,me,ge,ve,ye,be,xe=n;function we(e,n){return t.getContext(e,n)}try{const e={alpha:!0,depth:r,stencil:i,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${je}`),t.addEventListener("webglcontextlost",Se,!1),t.addEventListener("webglcontextrestored",Me,!1),t.addEventListener("webglcontextcreationerror",Te,!1),null===xe){const t="webgl2";if(xe=we(t,e),null===xe)throw we(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(e){throw e("WebGLRenderer: "+e.message),e}function _e(){K=new dm(xe),K.init(),ve=new ov(xe,K),Z=new Yf(xe,K,e,ve),J=new iv(xe,K),Z.reversedDepthBuffer&&d&&J.buffers.depth.setReversed(!0),Q=new fm(xe),ee=new Gg,te=new av(xe,K,J,ee,Z,ve,Q),ne=new Kf(w),re=new um(w),ie=new Ff(xe),ye=new Xf(xe,ie),ae=new hm(xe,ie,Q,ye),oe=new gm(xe,ae,ie,Q),fe=new mm(xe,Z,te),de=new $f(ee),se=new Wg(w,ne,re,K,Z,ye,de),le=new dv(w,ee),ce=new $g,ue=new tv(K),pe=new Gf(w,ne,re,J,oe,h,s),he=new nv(w,oe,Z),be=new hv(xe,Q,Z,J),me=new qf(xe,K,Q),ge=new pm(xe,K,Q),Q.programs=se.programs,w.capabilities=Z,w.extensions=K,w.properties=ee,w.renderLists=ce,w.shadowMap=he,w.state=J,w.info=Q}_e();const Ee=new lv(w,xe);function Se(e){e.preventDefault(),Fi("WebGLRenderer: Context Lost."),_=!0}function Me(){Fi("WebGLRenderer: Context Restored."),_=!1;const e=Q.autoReset,t=he.enabled,n=he.autoUpdate,r=he.needsUpdate,i=he.type;_e(),Q.autoReset=e,he.enabled=t,he.autoUpdate=n,he.needsUpdate=r,he.type=i}function Te(e){Bi("WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Ae(e){const t=e.target;t.removeEventListener("dispose",Ae),function(e){(function(e){const t=ee.get(e).programs;void 0!==t&&(t.forEach(function(e){se.releaseProgram(e)}),e.isShaderMaterial&&se.releaseShaderCache(e))})(e),ee.remove(e)}(t)}function Ce(e,t,n){!0===e.transparent&&e.side===nt&&!1===e.forceSinglePass?(e.side=tt,e.needsUpdate=!0,Fe(e,t,n),e.side=et,e.needsUpdate=!0,Fe(e,t,n),e.side=nt):Fe(e,t,n)}this.xr=Ee,this.getContext=function(){return xe},this.getContextAttributes=function(){return xe.getContextAttributes()},this.forceContextLoss=function(){const e=K.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=K.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return D},this.setPixelRatio=function(e){void 0!==e&&(D=e,this.setSize(L,N,!1))},this.getSize=function(e){return e.set(L,N)},this.setSize=function(e,n,r=!0){Ee.isPresenting?zi("WebGLRenderer: Can't change size while VR device is presenting."):(L=e,N=n,t.width=Math.floor(e*D),t.height=Math.floor(n*D),!0===r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(L*D,N*D).floor()},this.setDrawingBufferSize=function(e,n,r){L=e,N=n,D=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(C)},this.getViewport=function(e){return e.copy(F)},this.setViewport=function(e,t,n,r){e.isVector4?F.set(e.x,e.y,e.z,e.w):F.set(e,t,n,r),J.viewport(C.copy(F).multiplyScalar(D).round())},this.getScissor=function(e){return e.copy(z)},this.setScissor=function(e,t,n,r){e.isVector4?z.set(e.x,e.y,e.z,e.w):z.set(e,t,n,r),J.scissor(R.copy(z).multiplyScalar(D).round())},this.getScissorTest=function(){return B},this.setScissorTest=function(e){J.setScissorTest(B=e)},this.setOpaqueSort=function(e){U=e},this.setTransparentSort=function(e){O=e},this.getClearColor=function(e){return e.copy(pe.getClearColor())},this.setClearColor=function(){pe.setClearColor(...arguments)},this.getClearAlpha=function(){return pe.getClearAlpha()},this.setClearAlpha=function(){pe.setClearAlpha(...arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;if(e){let e=!1;if(null!==M){const t=M.texture.format;e=p.has(t)}if(e){const e=M.texture.type,t=f.has(e),n=pe.getClearColor(),r=pe.getClearAlpha(),i=n.r,a=n.g,o=n.b;t?(m[0]=i,m[1]=a,m[2]=o,m[3]=r,xe.clearBufferuiv(xe.COLOR,0,m)):(g[0]=i,g[1]=a,g[2]=o,g[3]=r,xe.clearBufferiv(xe.COLOR,0,g))}else r|=xe.COLOR_BUFFER_BIT}t&&(r|=xe.DEPTH_BUFFER_BIT),n&&(r|=xe.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),xe.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Se,!1),t.removeEventListener("webglcontextrestored",Me,!1),t.removeEventListener("webglcontextcreationerror",Te,!1),pe.dispose(),ce.dispose(),ue.dispose(),ee.dispose(),ne.dispose(),re.dispose(),oe.dispose(),ye.dispose(),be.dispose(),se.dispose(),Ee.dispose(),Ee.removeEventListener("sessionstart",Pe),Ee.removeEventListener("sessionend",ke),Ie.stop()},this.renderBufferDirect=function(e,t,n,r,i,a){null===t&&(t=q);const o=i.isMesh&&i.matrixWorld.determinant()<0,s=function(e,t,n,r,i){!0!==t.isScene&&(t=q),te.resetTextureUnits();const a=t.fog,o=r.isMeshStandardMaterial?t.environment:null,s=null===M?w.outputColorSpace:!0===M.isXRRenderTarget?M.texture.colorSpace:Br,l=(r.isMeshStandardMaterial?re:ne).get(r.envMap||o),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),d=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,p=!!n.morphAttributes.color;let f=Bt;r.toneMapped&&(null!==M&&!0!==M.isXRRenderTarget||(f=w.toneMapping));const m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,g=void 0!==m?m.length:0,v=ee.get(r),b=y.state.lights;if(!0===V&&(!0===j||e!==A)){const t=e===A&&r.id===T;de.setState(r,e,t)}let x=!1;r.version===v.__version?v.needsLights&&v.lightsStateVersion!==b.state.version||v.outputColorSpace!==s||i.isBatchedMesh&&!1===v.batching?x=!0:i.isBatchedMesh||!0!==v.batching?i.isBatchedMesh&&!0===v.batchingColor&&null===i.colorTexture||i.isBatchedMesh&&!1===v.batchingColor&&null!==i.colorTexture||i.isInstancedMesh&&!1===v.instancing?x=!0:i.isInstancedMesh||!0!==v.instancing?i.isSkinnedMesh&&!1===v.skinning?x=!0:i.isSkinnedMesh||!0!==v.skinning?i.isInstancedMesh&&!0===v.instancingColor&&null===i.instanceColor||i.isInstancedMesh&&!1===v.instancingColor&&null!==i.instanceColor||i.isInstancedMesh&&!0===v.instancingMorph&&null===i.morphTexture||i.isInstancedMesh&&!1===v.instancingMorph&&null!==i.morphTexture||v.envMap!==l||!0===r.fog&&v.fog!==a?x=!0:void 0===v.numClippingPlanes||v.numClippingPlanes===de.numPlanes&&v.numIntersection===de.numIntersection?(v.vertexAlphas!==c||v.vertexTangents!==u||v.morphTargets!==d||v.morphNormals!==h||v.morphColors!==p||v.toneMapping!==f||v.morphTargetsCount!==g)&&(x=!0):x=!0:x=!0:x=!0:x=!0:(x=!0,v.__version=r.version);let _=v.currentProgram;!0===x&&(_=Fe(r,t,i));let E=!1,S=!1,C=!1;const R=_.getUniforms(),P=v.uniforms;if(J.useProgram(_.program)&&(E=!0,S=!0,C=!0),r.id!==T&&(T=r.id,S=!0),E||A!==e){J.buffers.depth.getReversed()&&!0!==e.reversedDepth&&(e._reversedDepth=!0,e.updateProjectionMatrix()),R.setValue(xe,"projectionMatrix",e.projectionMatrix),R.setValue(xe,"viewMatrix",e.matrixWorldInverse);const t=R.map.cameraPosition;void 0!==t&&t.setValue(xe,G.setFromMatrixPosition(e.matrixWorld)),Z.logarithmicDepthBuffer&&R.setValue(xe,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&R.setValue(xe,"isOrthographic",!0===e.isOrthographicCamera),A!==e&&(A=e,S=!0,C=!0)}if(i.isSkinnedMesh){R.setOptional(xe,i,"bindMatrix"),R.setOptional(xe,i,"bindMatrixInverse");const e=i.skeleton;e&&(null===e.boneTexture&&e.computeBoneTexture(),R.setValue(xe,"boneTexture",e.boneTexture,te))}i.isBatchedMesh&&(R.setOptional(xe,i,"batchingTexture"),R.setValue(xe,"batchingTexture",i._matricesTexture,te),R.setOptional(xe,i,"batchingIdTexture"),R.setValue(xe,"batchingIdTexture",i._indirectTexture,te),R.setOptional(xe,i,"batchingColorTexture"),null!==i._colorsTexture&&R.setValue(xe,"batchingColorTexture",i._colorsTexture,te));const k=n.morphAttributes;var I,L;if(void 0===k.position&&void 0===k.normal&&void 0===k.color||fe.update(i,n,_),(S||v.receiveShadow!==i.receiveShadow)&&(v.receiveShadow=i.receiveShadow,R.setValue(xe,"receiveShadow",i.receiveShadow)),r.isMeshGouraudMaterial&&null!==r.envMap&&(P.envMap.value=l,P.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),r.isMeshStandardMaterial&&null===r.envMap&&null!==t.environment&&(P.envMapIntensity.value=t.environmentIntensity),void 0!==P.dfgLUT&&(P.dfgLUT.value=(null===fv&&(fv=new Fl(pv,32,32,Un,En),fv.minFilter=dn,fv.magFilter=dn,fv.wrapS=rn,fv.wrapT=rn,fv.generateMipmaps=!1,fv.needsUpdate=!0),fv)),S&&(R.setValue(xe,"toneMappingExposure",w.toneMappingExposure),v.needsLights&&(L=C,(I=P).ambientLightColor.needsUpdate=L,I.lightProbe.needsUpdate=L,I.directionalLights.needsUpdate=L,I.directionalLightShadows.needsUpdate=L,I.pointLights.needsUpdate=L,I.pointLightShadows.needsUpdate=L,I.spotLights.needsUpdate=L,I.spotLightShadows.needsUpdate=L,I.rectAreaLights.needsUpdate=L,I.hemisphereLights.needsUpdate=L),a&&!0===r.fog&&le.refreshFogUniforms(P,a),le.refreshMaterialUniforms(P,r,D,N,y.state.transmissionRenderTarget[e.id]),wg.upload(xe,ze(v),P,te)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(wg.upload(xe,ze(v),P,te),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&R.setValue(xe,"center",i.center),R.setValue(xe,"modelViewMatrix",i.modelViewMatrix),R.setValue(xe,"normalMatrix",i.normalMatrix),R.setValue(xe,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++){const n=e[t];be.update(n,_),be.bind(n,_)}}return _}(e,t,n,r,i);J.setMaterial(r,o);let l=n.index,c=1;if(!0===r.wireframe){if(l=ae.getWireframeAttribute(n),void 0===l)return;c=2}const u=n.drawRange,d=n.attributes.position;let h=u.start*c,p=(u.start+u.count)*c;null!==a&&(h=Math.max(h,a.start*c),p=Math.min(p,(a.start+a.count)*c)),null!==l?(h=Math.max(h,0),p=Math.min(p,l.count)):null!=d&&(h=Math.max(h,0),p=Math.min(p,d.count));const f=p-h;if(f<0||f===1/0)return;let m;ye.setup(i,r,s,n,l);let g=me;if(null!==l&&(m=ie.get(l),g=ge,g.setIndex(m)),i.isMesh)!0===r.wireframe?(J.setLineWidth(r.wireframeLinewidth*$()),g.setMode(xe.LINES)):g.setMode(xe.TRIANGLES);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),J.setLineWidth(e*$()),i.isLineSegments?g.setMode(xe.LINES):i.isLineLoop?g.setMode(xe.LINE_LOOP):g.setMode(xe.LINE_STRIP)}else i.isPoints?g.setMode(xe.POINTS):i.isSprite&&g.setMode(xe.TRIANGLES);if(i.isBatchedMesh)if(null!==i._multiDrawInstances)Hi("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),g.renderMultiDrawInstances(i._multiDrawStarts,i._multiDrawCounts,i._multiDrawCount,i._multiDrawInstances);else if(K.get("WEBGL_multi_draw"))g.renderMultiDraw(i._multiDrawStarts,i._multiDrawCounts,i._multiDrawCount);else{const e=i._multiDrawStarts,t=i._multiDrawCounts,n=i._multiDrawCount,a=l?ie.get(l).bytesPerElement:1,o=ee.get(r).currentProgram.getUniforms();for(let r=0;r<n;r++)o.setValue(xe,"_gl_DrawID",r),g.render(e[r]/a,t[r])}else if(i.isInstancedMesh)g.renderInstances(h,f,i.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);g.renderInstances(h,f,t)}else g.render(h,f)},this.compile=function(e,t,n=null){null===n&&(n=e),y=ue.get(n),y.init(t),x.push(y),n.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(y.pushLight(e),e.castShadow&&y.pushShadow(e))}),e!==n&&e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(y.pushLight(e),e.castShadow&&y.pushShadow(e))}),y.setupLights();const r=new Set;return e.traverse(function(e){if(!(e.isMesh||e.isPoints||e.isLine||e.isSprite))return;const t=e.material;if(t)if(Array.isArray(t))for(let i=0;i<t.length;i++){const a=t[i];Ce(a,n,e),r.add(a)}else Ce(t,n,e),r.add(t)}),y=x.pop(),r},this.compileAsync=function(e,t,n=null){const r=this.compile(e,t,n);return new Promise(t=>{function n(){r.forEach(function(e){ee.get(e).currentProgram.isReady()&&r.delete(e)}),0!==r.size?setTimeout(n,10):t(e)}null!==K.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)})};let Re=null;function Pe(){Ie.stop()}function ke(){Ie.start()}const Ie=new Of;function Le(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)y.pushLight(e),e.castShadow&&y.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||H.intersectsSprite(e)){r&&X.setFromMatrixPosition(e.matrixWorld).applyMatrix4(W);const t=oe.update(e),i=e.material;i.visible&&v.push(e,t,i,n,X.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||H.intersectsObject(e))){const t=oe.update(e),i=e.material;if(r&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),X.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),X.copy(t.boundingSphere.center)),X.applyMatrix4(e.matrixWorld).applyMatrix4(W)),Array.isArray(i)){const r=t.groups;for(let a=0,o=r.length;a<o;a++){const o=r[a],s=i[o.materialIndex];s&&s.visible&&v.push(e,t,s,n,X.z,o)}}else i.visible&&v.push(e,t,i,n,X.z,null)}const i=e.children;for(let e=0,a=i.length;e<a;e++)Le(i[e],t,n,r)}function Ne(e,t,n,r){const{opaque:i,transmissive:a,transparent:o}=e;y.setupLightsView(n),!0===V&&de.setGlobalState(w.clippingPlanes,n),r&&J.viewport(C.copy(r)),i.length>0&&Ue(i,t,n),a.length>0&&Ue(a,t,n),o.length>0&&Ue(o,t,n),J.buffers.depth.setTest(!0),J.buffers.depth.setMask(!0),J.buffers.color.setMask(!0),J.setPolygonOffset(!1)}function De(e,t,n,r){if(null!==(!0===n.isScene?n.overrideMaterial:null))return;void 0===y.state.transmissionRenderTarget[r.id]&&(y.state.transmissionRenderTarget[r.id]=new Ea(1,1,{generateMipmaps:!0,type:K.has("EXT_color_buffer_half_float")||K.has("EXT_color_buffer_float")?En:gn,minFilter:fn,samples:4,stencilBuffer:i,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ua.workingColorSpace}));const a=y.state.transmissionRenderTarget[r.id],o=r.viewport||C;a.setSize(o.z*w.transmissionResolutionScale,o.w*w.transmissionResolutionScale);const s=w.getRenderTarget(),l=w.getActiveCubeFace(),c=w.getActiveMipmapLevel();w.setRenderTarget(a),w.getClearColor(k),I=w.getClearAlpha(),I<1&&w.setClearColor(16777215,.5),w.clear(),Y&&pe.render(n);const u=w.toneMapping;w.toneMapping=Bt;const d=r.viewport;if(void 0!==r.viewport&&(r.viewport=void 0),y.setupLightsView(r),!0===V&&de.setGlobalState(w.clippingPlanes,r),Ue(e,n,r),te.updateMultisampleRenderTarget(a),te.updateRenderTargetMipmap(a),!1===K.has("WEBGL_multisampled_render_to_texture")){let e=!1;for(let i=0,a=t.length;i<a;i++){const a=t[i],{object:o,geometry:s,material:l,group:c}=a;if(l.side===nt&&o.layers.test(r.layers)){const t=l.side;l.side=tt,l.needsUpdate=!0,Oe(o,n,r,s,l,c),l.side=t,l.needsUpdate=!0,e=!0}}!0===e&&(te.updateMultisampleRenderTarget(a),te.updateRenderTargetMipmap(a))}w.setRenderTarget(s,l,c),w.setClearColor(k,I),void 0!==d&&(r.viewport=d),w.toneMapping=u}function Ue(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,a=e.length;i<a;i++){const a=e[i],{object:o,geometry:s,group:l}=a;let c=a.material;!0===c.allowOverride&&null!==r&&(c=r),o.layers.test(n.layers)&&Oe(o,t,n,s,c,l)}}function Oe(e,t,n,r,i,a){e.onBeforeRender(w,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(w,t,n,r,e,a),!0===i.transparent&&i.side===nt&&!1===i.forceSinglePass?(i.side=tt,i.needsUpdate=!0,w.renderBufferDirect(n,t,r,i,e,a),i.side=et,i.needsUpdate=!0,w.renderBufferDirect(n,t,r,i,e,a),i.side=nt):w.renderBufferDirect(n,t,r,i,e,a),e.onAfterRender(w,t,n,r,i,a)}function Fe(e,t,n){!0!==t.isScene&&(t=q);const r=ee.get(e),i=y.state.lights,a=y.state.shadowsArray,o=i.state.version,s=se.getParameters(e,i.state,a,t,n),l=se.getProgramCacheKey(s);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?re:ne).get(e.envMap||r.environment),r.envMapRotation=null!==r.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===c&&(e.addEventListener("dispose",Ae),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===o)return Be(e,s),u}else s.uniforms=se.getUniforms(e),e.onBeforeCompile(s,w),u=se.acquireProgram(s,l),c.set(l,u),r.uniforms=s.uniforms;const d=r.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(d.clippingPlanes=de.uniform),Be(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=o,r.needsLights&&(d.ambientLightColor.value=i.state.ambient,d.lightProbe.value=i.state.probe,d.directionalLights.value=i.state.directional,d.directionalLightShadows.value=i.state.directionalShadow,d.spotLights.value=i.state.spot,d.spotLightShadows.value=i.state.spotShadow,d.rectAreaLights.value=i.state.rectArea,d.ltc_1.value=i.state.rectAreaLTC1,d.ltc_2.value=i.state.rectAreaLTC2,d.pointLights.value=i.state.point,d.pointLightShadows.value=i.state.pointShadow,d.hemisphereLights.value=i.state.hemi,d.directionalShadowMap.value=i.state.directionalShadowMap,d.directionalShadowMatrix.value=i.state.directionalShadowMatrix,d.spotShadowMap.value=i.state.spotShadowMap,d.spotLightMatrix.value=i.state.spotLightMatrix,d.spotLightMap.value=i.state.spotLightMap,d.pointShadowMap.value=i.state.pointShadowMap,d.pointShadowMatrix.value=i.state.pointShadowMatrix),r.currentProgram=u,r.uniformsList=null,u}function ze(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=wg.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function Be(e,t){const n=ee.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.batchingColor=t.batchingColor,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.instancingMorph=t.instancingMorph,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Ie.setAnimationLoop(function(e){Re&&Re(e)}),"undefined"!=typeof self&&Ie.setContext(self),this.setAnimationLoop=function(e){Re=e,Ee.setAnimationLoop(e),null===e?Ie.stop():Ie.start()},Ee.addEventListener("sessionstart",Pe),Ee.addEventListener("sessionend",ke),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void Bi("WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===_)return;if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===Ee.enabled&&!0===Ee.isPresenting&&(!0===Ee.cameraAutoUpdate&&Ee.updateCamera(t),t=Ee.getCamera()),!0===e.isScene&&e.onBeforeRender(w,e,t,M),y=ue.get(e,x.length),y.init(t),x.push(y),W.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),H.setFromProjectionMatrix(W,Si,t.reversedDepth),j=this.localClippingEnabled,V=de.init(this.clippingPlanes,j),v=ce.get(e,b.length),v.init(),b.push(v),!0===Ee.enabled&&!0===Ee.isPresenting){const e=w.xr.getDepthSensingMesh();null!==e&&Le(e,t,-1/0,w.sortObjects)}Le(e,t,0,w.sortObjects),v.finish(),!0===w.sortObjects&&v.sort(U,O),Y=!1===Ee.enabled||!1===Ee.isPresenting||!1===Ee.hasDepthSensing(),Y&&pe.addToRenderList(v,e),this.info.render.frame++,!0===V&&de.beginShadows();const n=y.state.shadowsArray;he.render(n,e,t),!0===V&&de.endShadows(),!0===this.info.autoReset&&this.info.reset();const r=v.opaque,i=v.transmissive;if(y.setupLights(),t.isArrayCamera){const n=t.cameras;if(i.length>0)for(let t=0,a=n.length;t<a;t++)De(r,i,e,n[t]);Y&&pe.render(e);for(let t=0,r=n.length;t<r;t++){const r=n[t];Ne(v,e,r,r.viewport)}}else i.length>0&&De(r,i,e,t),Y&&pe.render(e),Ne(v,e,t);null!==M&&0===S&&(te.updateMultisampleRenderTarget(M),te.updateRenderTargetMipmap(M)),!0===e.isScene&&e.onAfterRender(w,e,t),ye.resetDefaultState(),T=-1,A=null,x.pop(),x.length>0?(y=x[x.length-1],!0===V&&de.setGlobalState(w.clippingPlanes,y.state.camera)):y=null,b.pop(),v=b.length>0?b[b.length-1]:null},this.getActiveCubeFace=function(){return E},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(e,t,n){const r=ee.get(e);r.__autoAllocateDepthBuffer=!1===e.resolveDepthBuffer,!1===r.__autoAllocateDepthBuffer&&(r.__useRenderToTexture=!1),ee.get(e.texture).__webglTexture=t,ee.get(e.depthTexture).__webglTexture=r.__autoAllocateDepthBuffer?void 0:n,r.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(e,t){const n=ee.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t};const He=xe.createFramebuffer();this.setRenderTarget=function(e,t=0,n=0){M=e,E=t,S=n;let r=!0,i=null,a=!1,o=!1;if(e){const s=ee.get(e);if(void 0!==s.__useDefaultFramebuffer)J.bindFramebuffer(xe.FRAMEBUFFER,null),r=!1;else if(void 0===s.__webglFramebuffer)te.setupRenderTarget(e);else if(s.__hasExternalTextures)te.rebindTextures(e,ee.get(e.texture).__webglTexture,ee.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){const t=e.depthTexture;if(s.__boundDepthTexture!==t){if(null!==t&&ee.has(t)&&(e.width!==t.image.width||e.height!==t.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");te.setupDepthRenderbuffer(e)}}const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(o=!0);const c=ee.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=Array.isArray(c[t])?c[t][n]:c[t],a=!0):i=e.samples>0&&!1===te.useMultisampledRTT(e)?ee.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,C.copy(e.viewport),R.copy(e.scissor),P=e.scissorTest}else C.copy(F).multiplyScalar(D).floor(),R.copy(z).multiplyScalar(D).floor(),P=B;if(0!==n&&(i=He),J.bindFramebuffer(xe.FRAMEBUFFER,i)&&r&&J.drawBuffers(e,i),J.viewport(C),J.scissor(R),J.setScissorTest(P),a){const r=ee.get(e.texture);xe.framebufferTexture2D(xe.FRAMEBUFFER,xe.COLOR_ATTACHMENT0,xe.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,n)}else if(o){const r=t;for(let t=0;t<e.textures.length;t++){const i=ee.get(e.textures[t]);xe.framebufferTextureLayer(xe.FRAMEBUFFER,xe.COLOR_ATTACHMENT0+t,i.__webglTexture,n,r)}}else if(null!==e&&0!==n){const t=ee.get(e.texture);xe.framebufferTexture2D(xe.FRAMEBUFFER,xe.COLOR_ATTACHMENT0,xe.TEXTURE_2D,t.__webglTexture,n)}T=-1},this.readRenderTargetPixels=function(e,t,n,r,i,a,o,s=0){if(!e||!e.isWebGLRenderTarget)return void Bi("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let l=ee.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(l=l[o]),l){J.bindFramebuffer(xe.FRAMEBUFFER,l);try{const o=e.textures[s],l=o.format,c=o.type;if(!Z.textureFormatReadable(l))return void Bi("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!Z.textureTypeReadable(c))return void Bi("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&(e.textures.length>1&&xe.readBuffer(xe.COLOR_ATTACHMENT0+s),xe.readPixels(t,n,r,i,ve.convert(l),ve.convert(c),a))}finally{const e=null!==M?ee.get(M).__webglFramebuffer:null;J.bindFramebuffer(xe.FRAMEBUFFER,e)}}},this.readRenderTargetPixelsAsync=async function(e,t,n,r,i,a,o,s=0){if(!e||!e.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let l=ee.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(l=l[o]),l){if(t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i){J.bindFramebuffer(xe.FRAMEBUFFER,l);const o=e.textures[s],c=o.format,u=o.type;if(!Z.textureFormatReadable(c))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Z.textureTypeReadable(u))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const d=xe.createBuffer();xe.bindBuffer(xe.PIXEL_PACK_BUFFER,d),xe.bufferData(xe.PIXEL_PACK_BUFFER,a.byteLength,xe.STREAM_READ),e.textures.length>1&&xe.readBuffer(xe.COLOR_ATTACHMENT0+s),xe.readPixels(t,n,r,i,ve.convert(c),ve.convert(u),0);const h=null!==M?ee.get(M).__webglFramebuffer:null;J.bindFramebuffer(xe.FRAMEBUFFER,h);const p=xe.fenceSync(xe.SYNC_GPU_COMMANDS_COMPLETE,0);return xe.flush(),await function(e,t){return new Promise(function(n,r){setTimeout(function i(){switch(e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:r();break;case e.TIMEOUT_EXPIRED:setTimeout(i,4);break;default:n()}},4)})}(xe,p),xe.bindBuffer(xe.PIXEL_PACK_BUFFER,d),xe.getBufferSubData(xe.PIXEL_PACK_BUFFER,0,a),xe.deleteBuffer(d),xe.deleteSync(p),a}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(e,t=null,n=0){const r=Math.pow(2,-n),i=Math.floor(e.image.width*r),a=Math.floor(e.image.height*r),o=null!==t?t.x:0,s=null!==t?t.y:0;te.setTexture2D(e,0),xe.copyTexSubImage2D(xe.TEXTURE_2D,n,0,0,o,s,i,a),J.unbindTexture()};const Ve=xe.createFramebuffer(),We=xe.createFramebuffer();this.copyTextureToTexture=function(e,t,n=null,r=null,i=0,a=null){let o,s,l,c,u,d,h,p,f;null===a&&(0!==i?(Hi("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),a=i,i=0):a=0);const m=e.isCompressedTexture?e.mipmaps[a]:e.image;if(null!==n)o=n.max.x-n.min.x,s=n.max.y-n.min.y,l=n.isBox3?n.max.z-n.min.z:1,c=n.min.x,u=n.min.y,d=n.isBox3?n.min.z:0;else{const t=Math.pow(2,-i);o=Math.floor(m.width*t),s=Math.floor(m.height*t),l=e.isDataArrayTexture?m.depth:e.isData3DTexture?Math.floor(m.depth*t):1,c=0,u=0,d=0}null!==r?(h=r.x,p=r.y,f=r.z):(h=0,p=0,f=0);const g=ve.convert(t.format),v=ve.convert(t.type);let y;t.isData3DTexture?(te.setTexture3D(t,0),y=xe.TEXTURE_3D):t.isDataArrayTexture||t.isCompressedArrayTexture?(te.setTexture2DArray(t,0),y=xe.TEXTURE_2D_ARRAY):(te.setTexture2D(t,0),y=xe.TEXTURE_2D),xe.pixelStorei(xe.UNPACK_FLIP_Y_WEBGL,t.flipY),xe.pixelStorei(xe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),xe.pixelStorei(xe.UNPACK_ALIGNMENT,t.unpackAlignment);const b=xe.getParameter(xe.UNPACK_ROW_LENGTH),x=xe.getParameter(xe.UNPACK_IMAGE_HEIGHT),w=xe.getParameter(xe.UNPACK_SKIP_PIXELS),_=xe.getParameter(xe.UNPACK_SKIP_ROWS),E=xe.getParameter(xe.UNPACK_SKIP_IMAGES);xe.pixelStorei(xe.UNPACK_ROW_LENGTH,m.width),xe.pixelStorei(xe.UNPACK_IMAGE_HEIGHT,m.height),xe.pixelStorei(xe.UNPACK_SKIP_PIXELS,c),xe.pixelStorei(xe.UNPACK_SKIP_ROWS,u),xe.pixelStorei(xe.UNPACK_SKIP_IMAGES,d);const S=e.isDataArrayTexture||e.isData3DTexture,M=t.isDataArrayTexture||t.isData3DTexture;if(e.isDepthTexture){const n=ee.get(e),r=ee.get(t),m=ee.get(n.__renderTarget),g=ee.get(r.__renderTarget);J.bindFramebuffer(xe.READ_FRAMEBUFFER,m.__webglFramebuffer),J.bindFramebuffer(xe.DRAW_FRAMEBUFFER,g.__webglFramebuffer);for(let n=0;n<l;n++)S&&(xe.framebufferTextureLayer(xe.READ_FRAMEBUFFER,xe.COLOR_ATTACHMENT0,ee.get(e).__webglTexture,i,d+n),xe.framebufferTextureLayer(xe.DRAW_FRAMEBUFFER,xe.COLOR_ATTACHMENT0,ee.get(t).__webglTexture,a,f+n)),xe.blitFramebuffer(c,u,o,s,h,p,o,s,xe.DEPTH_BUFFER_BIT,xe.NEAREST);J.bindFramebuffer(xe.READ_FRAMEBUFFER,null),J.bindFramebuffer(xe.DRAW_FRAMEBUFFER,null)}else if(0!==i||e.isRenderTargetTexture||ee.has(e)){const n=ee.get(e),r=ee.get(t);J.bindFramebuffer(xe.READ_FRAMEBUFFER,Ve),J.bindFramebuffer(xe.DRAW_FRAMEBUFFER,We);for(let e=0;e<l;e++)S?xe.framebufferTextureLayer(xe.READ_FRAMEBUFFER,xe.COLOR_ATTACHMENT0,n.__webglTexture,i,d+e):xe.framebufferTexture2D(xe.READ_FRAMEBUFFER,xe.COLOR_ATTACHMENT0,xe.TEXTURE_2D,n.__webglTexture,i),M?xe.framebufferTextureLayer(xe.DRAW_FRAMEBUFFER,xe.COLOR_ATTACHMENT0,r.__webglTexture,a,f+e):xe.framebufferTexture2D(xe.DRAW_FRAMEBUFFER,xe.COLOR_ATTACHMENT0,xe.TEXTURE_2D,r.__webglTexture,a),0!==i?xe.blitFramebuffer(c,u,o,s,h,p,o,s,xe.COLOR_BUFFER_BIT,xe.NEAREST):M?xe.copyTexSubImage3D(y,a,h,p,f+e,c,u,o,s):xe.copyTexSubImage2D(y,a,h,p,c,u,o,s);J.bindFramebuffer(xe.READ_FRAMEBUFFER,null),J.bindFramebuffer(xe.DRAW_FRAMEBUFFER,null)}else M?e.isDataTexture||e.isData3DTexture?xe.texSubImage3D(y,a,h,p,f,o,s,l,g,v,m.data):t.isCompressedArrayTexture?xe.compressedTexSubImage3D(y,a,h,p,f,o,s,l,g,m.data):xe.texSubImage3D(y,a,h,p,f,o,s,l,g,v,m):e.isDataTexture?xe.texSubImage2D(xe.TEXTURE_2D,a,h,p,o,s,g,v,m.data):e.isCompressedTexture?xe.compressedTexSubImage2D(xe.TEXTURE_2D,a,h,p,m.width,m.height,g,m.data):xe.texSubImage2D(xe.TEXTURE_2D,a,h,p,o,s,g,v,m);xe.pixelStorei(xe.UNPACK_ROW_LENGTH,b),xe.pixelStorei(xe.UNPACK_IMAGE_HEIGHT,x),xe.pixelStorei(xe.UNPACK_SKIP_PIXELS,w),xe.pixelStorei(xe.UNPACK_SKIP_ROWS,_),xe.pixelStorei(xe.UNPACK_SKIP_IMAGES,E),0===a&&t.generateMipmaps&&xe.generateMipmap(y),J.unbindTexture()},this.initRenderTarget=function(e){void 0===ee.get(e).__webglFramebuffer&&te.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?te.setTextureCube(e,0):e.isData3DTexture?te.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?te.setTexture2DArray(e,0):te.setTexture2D(e,0),J.unbindTexture()},this.resetState=function(){E=0,S=0,M=null,J.reset(),ye.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Si}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=ua._getDrawingBufferColorSpace(e),t.unpackColorSpace=ua._getUnpackColorSpace()}}var gv=Object.defineProperty;class vv{constructor(){var e,t;((e,t,n)=>{t in e?gv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(e="_listeners")?e+"":e,t)}addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}var yv=Object.defineProperty,bv=(e,t,n)=>(((e,t,n)=>{t in e?yv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const xv=new eo,wv=new ec,_v=Math.cos(Math.PI/180*70),Ev=(e,t)=>(e%t+t)%t;class Sv extends vv{constructor(e,t){super(),bv(this,"object"),bv(this,"domElement"),bv(this,"enabled",!0),bv(this,"target",new na),bv(this,"minDistance",0),bv(this,"maxDistance",1/0),bv(this,"minZoom",0),bv(this,"maxZoom",1/0),bv(this,"minPolarAngle",0),bv(this,"maxPolarAngle",Math.PI),bv(this,"minAzimuthAngle",-1/0),bv(this,"maxAzimuthAngle",1/0),bv(this,"enableDamping",!1),bv(this,"dampingFactor",.05),bv(this,"enableZoom",!0),bv(this,"zoomSpeed",1),bv(this,"enableRotate",!0),bv(this,"rotateSpeed",1),bv(this,"enablePan",!0),bv(this,"panSpeed",1),bv(this,"screenSpacePanning",!0),bv(this,"keyPanSpeed",7),bv(this,"zoomToCursor",!1),bv(this,"autoRotate",!1),bv(this,"autoRotateSpeed",2),bv(this,"reverseOrbit",!1),bv(this,"reverseHorizontalOrbit",!1),bv(this,"reverseVerticalOrbit",!1),bv(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),bv(this,"mouseButtons",{LEFT:We.ROTATE,MIDDLE:We.DOLLY,RIGHT:We.PAN}),bv(this,"touches",{ONE:Ge.ROTATE,TWO:Ge.DOLLY_PAN}),bv(this,"target0"),bv(this,"position0"),bv(this,"zoom0"),bv(this,"_domElementKeyEvents",null),bv(this,"getPolarAngle"),bv(this,"getAzimuthalAngle"),bv(this,"setPolarAngle"),bv(this,"setAzimuthalAngle"),bv(this,"getDistance"),bv(this,"getZoomScale"),bv(this,"listenToKeyEvents"),bv(this,"stopListenToKeyEvents"),bv(this,"saveState"),bv(this,"reset"),bv(this,"update"),bv(this,"connect"),bv(this,"dispose"),bv(this,"dollyIn"),bv(this,"dollyOut"),bv(this,"getScale"),bv(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=e=>{let t=Ev(e,2*Math.PI),r=c.phi;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let i=Math.abs(t-r);2*Math.PI-i<i&&(t<r?t+=2*Math.PI:r+=2*Math.PI),u.phi=t-r,n.update()},this.setAzimuthalAngle=e=>{let t=Ev(e,2*Math.PI),r=c.theta;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let i=Math.abs(t-r);2*Math.PI-i<i&&(t<r?t+=2*Math.PI:r+=2*Math.PI),u.theta=t-r,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=e=>{e.addEventListener("keydown",K),this._domElementKeyEvents=e},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",K),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),s=o.NONE},this.update=(()=>{const t=new na,i=new na(0,1,0),a=(new ta).setFromUnitVectors(e.up,i),p=a.clone().invert(),f=new na,m=new ta,g=2*Math.PI;return function(){const v=n.object.position;a.setFromUnitVectors(e.up,i),p.copy(a).invert(),t.copy(v).sub(n.target),t.applyQuaternion(a),c.setFromVector3(t),n.autoRotate&&s===o.NONE&&C(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(c.theta+=u.theta*n.dampingFactor,c.phi+=u.phi*n.dampingFactor):(c.theta+=u.theta,c.phi+=u.phi);let y=n.minAzimuthAngle,b=n.maxAzimuthAngle;isFinite(y)&&isFinite(b)&&(y<-Math.PI?y+=g:y>Math.PI&&(y-=g),b<-Math.PI?b+=g:b>Math.PI&&(b-=g),c.theta=y<=b?Math.max(y,Math.min(b,c.theta)):c.theta>(y+b)/2?Math.max(y,c.theta):Math.min(b,c.theta)),c.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,c.phi)),c.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(h,n.dampingFactor):n.target.add(h),n.zoomToCursor&&S||n.object.isOrthographicCamera?c.radius=O(c.radius):c.radius=O(c.radius*d),t.setFromSpherical(c),t.applyQuaternion(p),v.copy(n.target).add(t),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),!0===n.enableDamping?(u.theta*=1-n.dampingFactor,u.phi*=1-n.dampingFactor,h.multiplyScalar(1-n.dampingFactor)):(u.set(0,0,0),h.set(0,0,0));let x=!1;if(n.zoomToCursor&&S){let r=null;if(n.object instanceof Ys&&n.object.isPerspectiveCamera){const e=t.length();r=O(e*d);const i=e-r;n.object.position.addScaledVector(_,i),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const e=new na(E.x,E.y,0);e.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/d)),n.object.updateProjectionMatrix(),x=!0;const i=new na(E.x,E.y,0);i.unproject(n.object),n.object.position.sub(i).add(e),n.object.updateMatrixWorld(),r=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;null!==r&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(r).add(n.object.position):(xv.origin.copy(n.object.position),xv.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(xv.direction))<_v?e.lookAt(n.target):(wv.setFromNormalAndCoplanarPoint(n.object.up,n.target),xv.intersectPlane(wv,n.target))))}else n.object instanceof Lh&&n.object.isOrthographicCamera&&(x=1!==d,x&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/d)),n.object.updateProjectionMatrix()));return d=1,S=!1,!!(x||f.distanceToSquared(n.object.position)>l||8*(1-m.dot(n.object.quaternion))>l)&&(n.dispatchEvent(r),f.copy(n.object.position),m.copy(n.object.quaternion),x=!1,!0)}})(),this.connect=e=>{n.domElement=e,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",Z),n.domElement.addEventListener("pointerdown",X),n.domElement.addEventListener("pointercancel",Y),n.domElement.addEventListener("wheel",$)},this.dispose=()=>{var e,t,r,i,a,o;n.domElement&&(n.domElement.style.touchAction="auto"),null==(e=n.domElement)||e.removeEventListener("contextmenu",Z),null==(t=n.domElement)||t.removeEventListener("pointerdown",X),null==(r=n.domElement)||r.removeEventListener("pointercancel",Y),null==(i=n.domElement)||i.removeEventListener("wheel",$),null==(a=n.domElement)||a.ownerDocument.removeEventListener("pointermove",q),null==(o=n.domElement)||o.ownerDocument.removeEventListener("pointerup",Y),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",K)};const n=this,r={type:"change"},i={type:"start"},a={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=o.NONE;const l=1e-6,c=new Vp,u=new Vp;let d=1;const h=new na,p=new ea,f=new ea,m=new ea,g=new ea,v=new ea,y=new ea,b=new ea,x=new ea,w=new ea,_=new na,E=new ea;let S=!1;const M=[],T={};function A(){return Math.pow(.95,n.zoomSpeed)}function C(e){n.reverseOrbit||n.reverseHorizontalOrbit?u.theta+=e:u.theta-=e}function R(e){n.reverseOrbit||n.reverseVerticalOrbit?u.phi+=e:u.phi-=e}const P=(()=>{const e=new na;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),h.add(e)}})(),k=(()=>{const e=new na;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),h.add(e)}})(),I=(()=>{const e=new na;return function(t,r){const i=n.domElement;if(i&&n.object instanceof Ys&&n.object.isPerspectiveCamera){const a=n.object.position;e.copy(a).sub(n.target);let o=e.length();o*=Math.tan(n.object.fov/2*Math.PI/180),P(2*t*o/i.clientHeight,n.object.matrix),k(2*r*o/i.clientHeight,n.object.matrix)}else i&&n.object instanceof Lh&&n.object.isOrthographicCamera?(P(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),k(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function L(e){n.object instanceof Ys&&n.object.isPerspectiveCamera||n.object instanceof Lh&&n.object.isOrthographicCamera?d=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function N(e){L(d/e)}function D(e){L(d*e)}function U(e){if(!n.zoomToCursor||!n.domElement)return;S=!0;const t=n.domElement.getBoundingClientRect(),r=e.clientX-t.left,i=e.clientY-t.top,a=t.width,o=t.height;E.x=r/a*2-1,E.y=-i/o*2+1,_.set(E.x,E.y,1).unproject(n.object).sub(n.object.position).normalize()}function O(e){return Math.max(n.minDistance,Math.min(n.maxDistance,e))}function F(e){p.set(e.clientX,e.clientY)}function z(e){g.set(e.clientX,e.clientY)}function B(){if(1==M.length)p.set(M[0].pageX,M[0].pageY);else{const e=.5*(M[0].pageX+M[1].pageX),t=.5*(M[0].pageY+M[1].pageY);p.set(e,t)}}function H(){if(1==M.length)g.set(M[0].pageX,M[0].pageY);else{const e=.5*(M[0].pageX+M[1].pageX),t=.5*(M[0].pageY+M[1].pageY);g.set(e,t)}}function V(){const e=M[0].pageX-M[1].pageX,t=M[0].pageY-M[1].pageY,n=Math.sqrt(e*e+t*t);b.set(0,n)}function j(e){if(1==M.length)f.set(e.pageX,e.pageY);else{const t=Q(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);f.set(n,r)}m.subVectors(f,p).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(C(2*Math.PI*m.x/t.clientHeight),R(2*Math.PI*m.y/t.clientHeight)),p.copy(f)}function W(e){if(1==M.length)v.set(e.pageX,e.pageY);else{const t=Q(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);v.set(n,r)}y.subVectors(v,g).multiplyScalar(n.panSpeed),I(y.x,y.y),g.copy(v)}function G(e){const t=Q(e),r=e.pageX-t.x,i=e.pageY-t.y,a=Math.sqrt(r*r+i*i);x.set(0,a),w.set(0,Math.pow(x.y/b.y,n.zoomSpeed)),N(w.y),b.copy(x)}function X(e){var t,r;!1!==n.enabled&&(0===M.length&&(null==(t=n.domElement)||t.ownerDocument.addEventListener("pointermove",q),null==(r=n.domElement)||r.ownerDocument.addEventListener("pointerup",Y)),function(e){M.push(e)}(e),"touch"===e.pointerType?function(e){switch(J(e),M.length){case 1:switch(n.touches.ONE){case Ge.ROTATE:if(!1===n.enableRotate)return;B(),s=o.TOUCH_ROTATE;break;case Ge.PAN:if(!1===n.enablePan)return;H(),s=o.TOUCH_PAN;break;default:s=o.NONE}break;case 2:switch(n.touches.TWO){case Ge.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&V(),n.enablePan&&H(),s=o.TOUCH_DOLLY_PAN;break;case Ge.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&V(),n.enableRotate&&B(),s=o.TOUCH_DOLLY_ROTATE;break;default:s=o.NONE}break;default:s=o.NONE}s!==o.NONE&&n.dispatchEvent(i)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case We.DOLLY:if(!1===n.enableZoom)return;!function(e){U(e),b.set(e.clientX,e.clientY)}(e),s=o.DOLLY;break;case We.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;z(e),s=o.PAN}else{if(!1===n.enableRotate)return;F(e),s=o.ROTATE}break;case We.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;F(e),s=o.ROTATE}else{if(!1===n.enablePan)return;z(e),s=o.PAN}break;default:s=o.NONE}s!==o.NONE&&n.dispatchEvent(i)}(e))}function q(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(J(e),s){case o.TOUCH_ROTATE:if(!1===n.enableRotate)return;j(e),n.update();break;case o.TOUCH_PAN:if(!1===n.enablePan)return;W(e),n.update();break;case o.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&G(e),n.enablePan&&W(e)}(e),n.update();break;case o.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&G(e),n.enableRotate&&j(e)}(e),n.update();break;default:s=o.NONE}}(e):function(e){if(!1!==n.enabled)switch(s){case o.ROTATE:if(!1===n.enableRotate)return;!function(e){f.set(e.clientX,e.clientY),m.subVectors(f,p).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(C(2*Math.PI*m.x/t.clientHeight),R(2*Math.PI*m.y/t.clientHeight)),p.copy(f),n.update()}(e);break;case o.DOLLY:if(!1===n.enableZoom)return;!function(e){x.set(e.clientX,e.clientY),w.subVectors(x,b),w.y>0?N(A()):w.y<0&&D(A()),b.copy(x),n.update()}(e);break;case o.PAN:if(!1===n.enablePan)return;!function(e){v.set(e.clientX,e.clientY),y.subVectors(v,g).multiplyScalar(n.panSpeed),I(y.x,y.y),g.copy(v),n.update()}(e)}}(e))}function Y(e){var t,r,i;!function(e){delete T[e.pointerId];for(let t=0;t<M.length;t++)if(M[t].pointerId==e.pointerId)return void M.splice(t,1)}(e),0===M.length&&(null==(t=n.domElement)||t.releasePointerCapture(e.pointerId),null==(r=n.domElement)||r.ownerDocument.removeEventListener("pointermove",q),null==(i=n.domElement)||i.ownerDocument.removeEventListener("pointerup",Y)),n.dispatchEvent(a),s=o.NONE}function $(e){!1===n.enabled||!1===n.enableZoom||s!==o.NONE&&s!==o.ROTATE||(e.preventDefault(),n.dispatchEvent(i),function(e){U(e),e.deltaY<0?D(A()):e.deltaY>0&&N(A()),n.update()}(e),n.dispatchEvent(a))}function K(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:I(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:I(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:I(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:I(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function Z(e){!1!==n.enabled&&e.preventDefault()}function J(e){let t=T[e.pointerId];void 0===t&&(t=new ea,T[e.pointerId]=t),t.set(e.pageX,e.pageY)}function Q(e){const t=e.pointerId===M[0].pointerId?M[1]:M[0];return T[t.pointerId]}this.dollyIn=(e=A())=>{D(e),n.update()},this.dollyOut=(e=A())=>{N(e),n.update()},this.getScale=()=>d,this.setScale=e=>{L(e),n.update()},this.getZoomScale=()=>A(),void 0!==t&&this.connect(t),this.update()}}const Mv=i.p+"src/assets/images/node-bump-map.png";function Tv(e){return Tv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tv(e)}function Av(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Cv(r.key),r)}}function Cv(e){var t=function(e){if("object"!=Tv(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Tv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Tv(t)?t:t+""}var Rv=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.startHeight=2,this.orbitingNodeData=[{id:"strivr",title:'Strivr: "Immersive Lobby" Upgrade',titleMobile:"Work: Strivr",nodeRadius:.4,finalRadius:3.5,color:2964700},{id:"spaceship",title:'"Scavenger\'s Gain": From Hotel Room to Spaceship Adventure',titleMobile:'Personal: "Scavenger\'s Gain"',nodeRadius:.35,finalRadius:3.5,color:12789062},{id:"local-hive",title:'"Local Hive": A Human-Centered AI Project',titleMobile:'Stanford: "Local Hive"',nodeRadius:.3,finalRadius:3.5,color:15125630},{id:"hifi",title:"High Fidelity: Content Prototyping",titleMobile:"Work: High Fidelity",nodeRadius:.25,finalRadius:3.5,color:2346751},{id:"orgasmr",title:'"orgASMR": A Head-Scratching Musical Interface',titleMobile:'Stanford: "orgASMR"',nodeRadius:.35,finalRadius:6,color:15114339},{id:"immersive-media",title:"Immersive Media: An Exploration of 360Â° Video Experiences",titleMobile:"Stanford: 360Â° Videos",nodeRadius:.3,finalRadius:6,color:8102263},{id:"window",title:'"Window": An AR Clothes Shopping App',titleMobile:'Stanford: "Window"',nodeRadius:.25,finalRadius:6,color:6644192}],this.staticNodeData=[{id:"who-am-i",title:"Who am I?",titleMobile:"Who am I?",nodeRadius:.2,finalRadius:0,color:16777215,position:new na(0,this.startHeight,0)}],this.orbitingNodes=[],this.allNodes=[],this.startRadius=0,this.radiusIncrement=3.2,this.numNodes=this.orbitingNodeData.length,this.nodesPerLevel=4,this.baseRotationSpeed=.3,this.mobileRotationSpeed=.05,this.slowRotationSpeed=0,this.targetRotationSpeed=this.baseRotationSpeed,this.rotationSpeed=this.baseRotationSpeed,this.lerpSpeed=.02,this.rotationStartDelay=.2,this.hoverTimeout=null,this.hovered=!1,this.hoverDelay=200,this.hoveredNode=null,this.clock=new ip,this.levelOffsetAngle=Math.PI/this.nodesPerLevel,this.heightMultiplier=-2,this.raycaster=new Op,this.mouse=new ea,this.shouldBlockMouseUpClick=!1,this.lastNodeClicked=null,this.isMobile=null,this.clickCallback=null,this.cleanupMouseEvents=null},t=[{key:"createNode",value:function(e,t,n){var r=new xd(e.nodeRadius,32,32),i=(new bh).load(Mv),a=.2*Math.random()+.1,o=new Id({color:e.color,shininess:30,specular:16777215,bumpMap:i,bumpScale:a}),s=new Us(r,o);return s.position.copy(t),s.userData={id:e.id,currentRadius:this.startRadius,finalRadius:e.finalRadius,angle:n},s}},{key:"createNodes",value:function(e,t){var n=this;this.isMobile=t,t&&(this.rotationSpeed=this.mobileRotationSpeed,this.targetRotationSpeed=this.mobileRotationSpeed,this.baseRotationSpeed=this.mobileRotationSpeed),this.staticNodeData.forEach(function(t){var r=n.createNode(t,t.position,0);n.allNodes.push(r),e.add(r)}),this.orbitingNodeData.forEach(function(t,r){var i=Math.floor(r/n.nodesPerLevel),a=Math.min(n.nodesPerLevel,n.numNodes-i*n.nodesPerLevel),o=r%n.nodesPerLevel*(2*Math.PI/a)+i*n.levelOffsetAngle,s=new na(0,n.startHeight,0),l=n.createNode(t,s,o);n.orbitingNodes.push(l),e.add(l)}),this.allNodes=this.allNodes.concat(this.orbitingNodes)}},{key:"getNodeInfoArray",value:function(){var e=this,t=[],n=this.orbitingNodeData.concat(this.staticNodeData);return this.allNodes.forEach(function(r){var i=n.find(function(e){return e.id===r.userData.id}),a=e.isMobile?i.titleMobile:i.title;t.push({node:r,nodeTitle:a})}),t}},{key:"getHoveredNode",value:function(){return this.hoveredNode}},{key:"enableMouseEvents",value:function(e,t,n){var r=this;this.clickCallback=n;var i=function(){r.handleClick(t,!1)},a=function(e){r.mouse.x=e.clientX/window.innerWidth*2-1,r.mouse.y=-e.clientY/window.innerHeight*2+1},o=function(){r.handleClick(t,!0)};e.domElement.addEventListener("mousedown",i),e.domElement.addEventListener("mousemove",a),e.domElement.addEventListener("mouseup",o),this.cleanupMouseEvents=function(){e.domElement.removeEventListener("mousedown",i),e.domElement.removeEventListener("mousemove",a),e.domElement.removeEventListener("mouseup",o)}}},{key:"handleClick",value:function(e,t){this.raycaster.setFromCamera(this.mouse,e);var n=this.raycaster.intersectObjects(this.allNodes);if(0!=n.length||t)if(n.length>0&&!t)this.lastNodeClicked=n[0].object;else if(n.length>0&&t&&!this.shouldBlockMouseUpClick){var r=n[0].object,i=r.userData.id;this.lastNodeClicked==r&&this.clickCallback&&this.clickCallback(i),this.lastNodeClicked=null}else this.shouldBlockMouseUpClick=!1;else this.shouldBlockMouseUpClick=!0}},{key:"updateNodes",value:function(e){var t=this,n=this.clock.getDelta(),r=this.clock.getElapsedTime()-this.rotationStartDelay;this.raycaster.setFromCamera(this.mouse,e);var i=this.raycaster.intersectObjects(this.allNodes);i.length>0?(this.hoveredNode=i[0].object,this.isMobile||this.hovered||(this.hovered=!0,clearTimeout(this.hoverTimeout),this.hoverTimeout=setTimeout(function(){t.targetRotationSpeed=t.slowRotationSpeed},this.hoverDelay))):(this.hoveredNode=null,!this.isMobile&&this.hovered&&(this.hovered=!1,clearTimeout(this.hoverTimeout),this.hoverTimeout=setTimeout(function(){t.targetRotationSpeed=t.baseRotationSpeed},this.hoverDelay))),this.rotationSpeed=Qi.lerp(this.rotationSpeed,this.targetRotationSpeed,this.lerpSpeed),this.orbitingNodes.forEach(function(e,i){var a=1/Math.floor(i/t.nodesPerLevel+1);e.userData.angle+=t.rotationSpeed*n*a,e.userData.angle=e.userData.angle%(2*Math.PI);var o=e.userData.currentRadius,s=e.userData.finalRadius;o=t.startRadius+(s-t.startRadius)*(2/(1+Math.pow(2,-3*Math.max(0,r-t.rotationStartDelay)))-1),e.position.x=o*Math.cos(e.userData.angle),e.position.z=o*Math.sin(e.userData.angle),e.userData.currentRadius=o;var l=o/s;e.position.y=t.startHeight+l*t.heightMultiplier})}}],t&&Av(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const Pv=Rv;function kv(e,t){if(t===Rr)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===kr||t===Pr){let n=e.getIndex();if(null===n){const t=[],r=e.getAttribute("position");if(void 0===r)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<r.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const r=n.count-2,i=[];if(n)if(t===kr)for(let e=1;e<=r;e++)i.push(n.getX(0)),i.push(n.getX(e)),i.push(n.getX(e+1));else for(let e=0;e<r;e++)e%2==0?(i.push(n.getX(e)),i.push(n.getX(e+1)),i.push(n.getX(e+2))):(i.push(n.getX(e+2)),i.push(n.getX(e+1)),i.push(n.getX(e)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=e.clone();return a.setIndex(i),a.clearGroups(),a}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}const Iv=(()=>parseInt(je.replace(/\D+/g,"")))();function Lv(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}const Nv="srgb",Dv="srgb-linear";class Uv extends ch{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new Vv(e)}),this.register(function(e){return new jv(e)}),this.register(function(e){return new Jv(e)}),this.register(function(e){return new Qv(e)}),this.register(function(e){return new ey(e)}),this.register(function(e){return new Gv(e)}),this.register(function(e){return new Xv(e)}),this.register(function(e){return new qv(e)}),this.register(function(e){return new Yv(e)}),this.register(function(e){return new Hv(e)}),this.register(function(e){return new $v(e)}),this.register(function(e){return new Wv(e)}),this.register(function(e){return new Zv(e)}),this.register(function(e){return new Kv(e)}),this.register(function(e){return new zv(e)}),this.register(function(e){return new ty(e)}),this.register(function(e){return new ny(e)})}load(e,t,n,r){const i=this;let a;if(""!==this.resourcePath)a=this.resourcePath;else if(""!==this.path){const t=Hh.extractUrlBase(e);a=Hh.resolveURL(t,this.path)}else a=Hh.extractUrlBase(e);this.manager.itemStart(e);const o=function(t){r?r(t):console.error(t),i.manager.itemError(e),i.manager.itemEnd(e)},s=new hh(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(n){try{i.parse(n,a,function(n){t(n),i.manager.itemEnd(e)},o)}catch(e){o(e)}},n,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let i;const a={},o={};if("string"==typeof e)i=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Lv(new Uint8Array(e.slice(0,4)))===ry){try{a[Fv.KHR_BINARY_GLTF]=new iy(e)}catch(e){return void(r&&r(e))}i=JSON.parse(a[Fv.KHR_BINARY_GLTF].content)}else i=JSON.parse(Lv(new Uint8Array(e)));else i=e;if(void 0===i.asset||i.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const s=new Ay(i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});s.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){const t=this.pluginCallbacks[e](s);t.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[t.name]=t,a[t.name]=!0}if(i.extensionsUsed)for(let e=0;e<i.extensionsUsed.length;++e){const t=i.extensionsUsed[e],n=i.extensionsRequired||[];switch(t){case Fv.KHR_MATERIALS_UNLIT:a[t]=new Bv;break;case Fv.KHR_DRACO_MESH_COMPRESSION:a[t]=new ay(i,this.dracoLoader);break;case Fv.KHR_TEXTURE_TRANSFORM:a[t]=new oy;break;case Fv.KHR_MESH_QUANTIZATION:a[t]=new sy;break;default:n.indexOf(t)>=0&&void 0===o[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}s.setExtensions(a),s.setPlugins(o),s.parse(n,r)}parseAsync(e,t){const n=this;return new Promise(function(r,i){n.parse(e,t,r,i)})}}function Ov(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const Fv={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class zv{constructor(e){this.parser=e,this.name=Fv.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const i=t.json,a=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e];let o;const s=new Yo(16777215);void 0!==a.color&&s.setRGB(a.color[0],a.color[1],a.color[2],Dv);const l=void 0!==a.range?a.range:0;switch(a.type){case"directional":o=new Dh(s),o.target.position.set(0,0,-1),o.add(o.target);break;case"point":o=new Ih(s),o.distance=l;break;case"spot":o=new Ah(s),o.distance=l,a.spot=a.spot||{},a.spot.innerConeAngle=void 0!==a.spot.innerConeAngle?a.spot.innerConeAngle:0,a.spot.outerConeAngle=void 0!==a.spot.outerConeAngle?a.spot.outerConeAngle:Math.PI/4,o.angle=a.spot.outerConeAngle,o.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,o.target.position.set(0,0,-1),o.add(o.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return o.position.set(0,0,0),o.decay=2,wy(o,a),void 0!==a.intensity&&(o.intensity=a.intensity),o.name=t.createUniqueName(a.name||"light_"+e),r=Promise.resolve(o),t.cache.add(n,r),r}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then(function(e){return n._getNodeRef(t.cache,i,e)})}}class Bv{constructor(){this.name=Fv.KHR_MATERIALS_UNLIT}getMaterialType(){return Jo}extendParams(e,t,n){const r=[];e.color=new Yo(1,1,1),e.opacity=1;const i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const t=i.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],Dv),e.opacity=t[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture,Nv))}return Promise.all(r)}}class Hv{constructor(e){this.parser=e,this.name=Fv.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}class Vv{constructor(e){this.parser=e,this.name=Fv.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?kd:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){const e=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ea(e,e)}return Promise.all(i)}}class jv{constructor(e){this.parser=e,this.name=Fv.KHR_MATERIALS_DISPERSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?kd:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.dispersion=void 0!==r.dispersion?r.dispersion:0,Promise.resolve()}}class Wv{constructor(e){this.parser=e,this.name=Fv.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?kd:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];return void 0!==a.iridescenceFactor&&(t.iridescence=a.iridescenceFactor),void 0!==a.iridescenceTexture&&i.push(n.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),void 0!==a.iridescenceIor&&(t.iridescenceIOR=a.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==a.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),void 0!==a.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),void 0!==a.iridescenceThicknessTexture&&i.push(n.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(i)}}class Gv{constructor(e){this.parser=e,this.name=Fv.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?kd:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[];t.sheenColor=new Yo(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=r.extensions[this.name];if(void 0!==a.sheenColorFactor){const e=a.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],Dv)}return void 0!==a.sheenRoughnessFactor&&(t.sheenRoughness=a.sheenRoughnessFactor),void 0!==a.sheenColorTexture&&i.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture,Nv)),void 0!==a.sheenRoughnessTexture&&i.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(i)}}class Xv{constructor(e){this.parser=e,this.name=Fv.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?kd:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(i)}}class qv{constructor(e){this.parser=e,this.name=Fv.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?kd:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&i.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const o=a.attenuationColor||[1,1,1];return t.attenuationColor=(new Yo).setRGB(o[0],o[1],o[2],Dv),Promise.all(i)}}class Yv{constructor(e){this.parser=e,this.name=Fv.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?kd:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class $v{constructor(e){this.parser=e,this.name=Fv.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?kd:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&i.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));const o=a.specularColorFactor||[1,1,1];return t.specularColor=(new Yo).setRGB(o[0],o[1],o[2],Dv),void 0!==a.specularColorTexture&&i.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture,Nv)),Promise.all(i)}}class Kv{constructor(e){this.parser=e,this.name=Fv.EXT_MATERIALS_BUMP}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?kd:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];return t.bumpScale=void 0!==a.bumpFactor?a.bumpFactor:1,void 0!==a.bumpTexture&&i.push(n.assignTexture(t,"bumpMap",a.bumpTexture)),Promise.all(i)}}class Zv{constructor(e){this.parser=e,this.name=Fv.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?kd:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];return void 0!==a.anisotropyStrength&&(t.anisotropy=a.anisotropyStrength),void 0!==a.anisotropyRotation&&(t.anisotropyRotation=a.anisotropyRotation),void 0!==a.anisotropyTexture&&i.push(n.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(i)}}class Jv{constructor(e){this.parser=e,this.name=Fv.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i.source,a)}}class Qv{constructor(e){this.parser=e,this.name=Fv.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const a=i.extensions[t],o=r.images[a.source];let s=n.textureLoader;if(o.uri){const e=n.options.manager.getHandler(o.uri);null!==e&&(s=e)}return this.detectSupport().then(function(i){if(i)return n.loadTextureImage(e,a.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class ey{constructor(e){this.parser=e,this.name=Fv.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const a=i.extensions[t],o=r.images[a.source];let s=n.textureLoader;if(o.uri){const e=n.options.manager.getHandler(o.uri);null!==e&&(s=e)}return this.detectSupport().then(function(i){if(i)return n.loadTextureImage(e,a.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class ty{constructor(e){this.name=Fv.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],r=this.parser.getDependency("buffer",e.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(t){const n=e.byteOffset||0,r=e.byteLength||0,a=e.count,o=e.byteStride,s=new Uint8Array(t,n,r);return i.decodeGltfBufferAsync?i.decodeGltfBufferAsync(a,o,s,e.mode,e.filter).then(function(e){return e.buffer}):i.ready.then(function(){const t=new ArrayBuffer(a*o);return i.decodeGltfBuffer(new Uint8Array(t),a,o,s,e.mode,e.filter),t})})}return null}}class ny{constructor(e){this.name=Fv.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const r=t.meshes[n.mesh];for(const e of r.primitives)if(e.mode!==dy.TRIANGLES&&e.mode!==dy.TRIANGLE_STRIP&&e.mode!==dy.TRIANGLE_FAN&&void 0!==e.mode)return null;const i=n.extensions[this.name].attributes,a=[],o={};for(const e in i)a.push(this.parser.getDependency("accessor",i[e]).then(t=>(o[e]=t,o[e])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(e=>{const t=e.pop(),n=t.isGroup?t.children:[t],r=e[0].count,i=[];for(const e of n){const t=new to,n=new na,a=new ta,s=new na(1,1,1),l=new Kl(e.geometry,e.material,r);for(let e=0;e<r;e++)o.TRANSLATION&&n.fromBufferAttribute(o.TRANSLATION,e),o.ROTATION&&a.fromBufferAttribute(o.ROTATION,e),o.SCALE&&s.fromBufferAttribute(o.SCALE,e),l.setMatrixAt(e,t.compose(n,a,s));for(const t in o)if("_COLOR_0"===t){const e=o[t];l.instanceColor=new Vl(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==t&&"ROTATION"!==t&&"SCALE"!==t&&e.geometry.setAttribute(t,o[t]);Ro.prototype.copy.call(l,e),this.parser.assignFinalMaterial(l),i.push(l)}return t.isGroup?(t.clear(),t.add(...i),t):i[0]}))}}const ry="glTF";class iy{constructor(e){this.name=Fv.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:Lv(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==ry)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,r=new DataView(e,12);let i=0;for(;i<n;){const t=r.getUint32(i,!0);i+=4;const n=r.getUint32(i,!0);if(i+=4,1313821514===n){const n=new Uint8Array(e,12+i,t);this.content=Lv(n)}else if(5130562===n){const n=12+i;this.body=e.slice(n,n+t)}i+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class ay{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Fv.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},s={},l={};for(const e in a){const t=gy[e]||e.toLowerCase();o[t]=a[e]}for(const t in e.attributes){const r=gy[t]||t.toLowerCase();if(void 0!==a[t]){const i=n.accessors[e.attributes[t]],a=hy[i.componentType];l[r]=a.name,s[r]=!0===i.normalized}}return t.getDependency("bufferView",i).then(function(e){return new Promise(function(t,n){r.decodeDracoFile(e,function(e){for(const t in e.attributes){const n=e.attributes[t],r=s[t];void 0!==r&&(n.normalized=r)}t(e)},o,l,Dv,n)})})}}class oy{constructor(){this.name=Fv.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class sy{constructor(){this.name=Fv.KHR_MESH_QUANTIZATION}}class ly extends Xd{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let e=0;e!==r;e++)t[e]=n[i+e];return t}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=2*o,l=3*o,c=r-t,u=(n-t)/c,d=u*u,h=d*u,p=e*l,f=p-l,m=-2*h+3*d,g=h-d,v=1-m,y=g-d+u;for(let e=0;e!==o;e++){const t=a[f+e+o],n=a[f+e+s]*c,r=a[p+e+o],l=a[p+e]*c;i[e]=v*t+y*n+m*r+g*l}return i}}const cy=new ta;class uy extends ly{interpolate_(e,t,n,r){const i=super.interpolate_(e,t,n,r);return cy.fromArray(i).normalize().toArray(i),i}}const dy={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},hy={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},py={9728:on,9729:dn,9984:sn,9985:hn,9986:cn,9987:fn},fy={33071:rn,33648:an,10497:nn},my={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},gy={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...Iv>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},vy={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},yy={CUBICSPLINE:void 0,LINEAR:_r,STEP:wr};function by(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new Pd({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:et})),e.DefaultMaterial}function xy(e,t,n){for(const r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function wy(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function _y(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,r=n.length;t<r;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Ey(e){let t;const n=e.extensions&&e.extensions[Fv.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+Sy(n.attributes):e.indices+":"+Sy(e.attributes)+":"+e.mode,void 0!==e.targets)for(let n=0,r=e.targets.length;n<r;n++)t+=":"+Sy(e.targets[n]);return t}function Sy(e){let t="";const n=Object.keys(e).sort();for(let r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function My(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const Ty=new to;class Ay{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Ov,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,i=-1;"undefined"!=typeof navigator&&void 0!==navigator.userAgent&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,i=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"==typeof createImageBitmap||n||r&&i<98?this.textureLoader=new bh(this.options.manager):this.textureLoader=new $h(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new hh(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(e){return e._markDefs&&e._markDefs()}),Promise.all(this._invokeAll(function(e){return e.beforeRoot&&e.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(t){const a={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};return xy(i,a,r),wy(a,r),Promise.all(n._invokeAll(function(e){return e.afterRoot&&e.afterRoot(a)})).then(function(){for(const e of a.scenes)e.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n].joints;for(let t=0,n=r.length;t<n;t++)e[r[t]].isBone=!0}for(let t=0,r=e.length;t<r;t++){const r=e[t];void 0!==r.mesh&&(this._addNodeRef(this.meshCache,r.mesh),void 0!==r.skin&&(n[r.mesh].isSkinnedMesh=!0)),void 0!==r.camera&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),i=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[n,r]of e.children.entries())i(r,t.children[n])};return i(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const i=e(t[r]);i&&n.push(i)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(e){return e.loadNode&&e.loadNode(t)});break;case"mesh":r=this._invokeOne(function(e){return e.loadMesh&&e.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(e){return e.loadBufferView&&e.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(e){return e.loadMaterial&&e.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(e){return e.loadTexture&&e.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(e){return e.loadAnimation&&e.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map(function(t,r){return n.getDependency(e,r)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Fv.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(e,i){n.load(Hh.resolveURL(t.uri,r.path),e,void 0,function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){const n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){const e=my[r.type],t=hy[r.componentType],n=!0===r.normalized,i=new t(r.count*e);return Promise.resolve(new ss(i,e,n))}const i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then(function(e){const i=e[0],a=my[r.type],o=hy[r.componentType],s=o.BYTES_PER_ELEMENT,l=s*a,c=r.byteOffset||0,u=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,d=!0===r.normalized;let h,p;if(u&&u!==l){const e=Math.floor(c/u),n="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+e+":"+r.count;let l=t.cache.get(n);l||(h=new o(i,e*u,r.count*u/s),l=new al(h,u/s),t.cache.add(n,l)),p=new sl(l,a,c%u/s,d)}else h=null===i?new o(r.count*a):new o(i,c,r.count*a),p=new ss(h,a,d);if(void 0!==r.sparse){const t=my.SCALAR,n=hy[r.sparse.indices.componentType],s=r.sparse.indices.byteOffset||0,l=r.sparse.values.byteOffset||0,c=new n(e[1],s,r.sparse.count*t),u=new o(e[2],l,r.sparse.count*a);null!==i&&(p=new ss(p.array.slice(),p.itemSize,p.normalized));for(let e=0,t=c.length;e<t;e++){const t=c[e];if(p.setX(t,u[e*a]),a>=2&&p.setY(t,u[e*a+1]),a>=3&&p.setZ(t,u[e*a+2]),a>=4&&p.setW(t,u[e*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p})}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e].source,i=t.images[r];let a=this.textureLoader;if(i.uri){const e=n.manager.getHandler(i.uri);null!==e&&(a=e)}return this.loadTextureImage(e,r,a)}loadTextureImage(e,t,n){const r=this,i=this.json,a=i.textures[e],o=i.images[t],s=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[s])return this.textureCache[s];const l=this.loadImageSource(t,n).then(function(t){t.flipY=!1,t.name=a.name||o.name||"",""===t.name&&"string"==typeof o.uri&&!1===o.uri.startsWith("data:image/")&&(t.name=o.uri);const n=(i.samplers||{})[a.sampler]||{};return t.magFilter=py[n.magFilter]||dn,t.minFilter=py[n.minFilter]||fn,t.wrapS=fy[n.wrapS]||nn,t.wrapT=fy[n.wrapT]||nn,r.associations.set(t,{textures:e}),t}).catch(function(){return null});return this.textureCache[s]=l,l}loadImageSource(e,t){const n=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(e=>e.clone());const i=n.images[e],a=self.URL||self.webkitURL;let o=i.uri||"",s=!1;if(void 0!==i.bufferView)o=this.getDependency("bufferView",i.bufferView).then(function(e){s=!0;const t=new Blob([e],{type:i.mimeType});return o=a.createObjectURL(t),o});else if(void 0===i.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const l=Promise.resolve(o).then(function(e){return new Promise(function(n,i){let a=n;!0===t.isImageBitmapLoader&&(a=function(e){const t=new xa(e);t.needsUpdate=!0,n(t)}),t.load(Hh.resolveURL(e,r.path),a,void 0,i)})}).then(function(e){var t;return!0===s&&a.revokeObjectURL(o),wy(e,i),e.userData.mimeType=i.mimeType||((t=i.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e}).catch(function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",o),e});return this.sourceCache[e]=l,l}assignTexture(e,t,n,r){const i=this;return this.getDependency("texture",n.index).then(function(a){if(!a)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((a=a.clone()).channel=n.texCoord),i.extensions[Fv.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[Fv.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=i.associations.get(a);a=i.extensions[Fv.KHR_TEXTURE_TRANSFORM].extendTexture(a,e),i.associations.set(a,t)}}return void 0!==r&&("number"==typeof r&&(r=3001===r?Nv:Dv),"colorSpace"in a?a.colorSpace=r:a.encoding=r===Nv?3001:3e3),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=void 0===t.attributes.tangent,i=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new Hc,Zo.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new Ac,Zo.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,this.cache.add(e,t)),n=t}if(r||i||a){let e="ClonedMaterial:"+n.uuid+":";r&&(e+="derivative-tangents:"),i&&(e+="vertex-colors:"),a&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),i&&(t.vertexColors=!0),a&&(t.flatShading=!0),r&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}e.material=n}getMaterialType(){return Pd}loadMaterial(e){const t=this,n=this.json,r=this.extensions,i=n.materials[e];let a;const o={},s=[];if((i.extensions||{})[Fv.KHR_MATERIALS_UNLIT]){const e=r[Fv.KHR_MATERIALS_UNLIT];a=e.getMaterialType(),s.push(e.extendParams(o,i,t))}else{const n=i.pbrMetallicRoughness||{};if(o.color=new Yo(1,1,1),o.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;o.color.setRGB(e[0],e[1],e[2],Dv),o.opacity=e[3]}void 0!==n.baseColorTexture&&s.push(t.assignTexture(o,"map",n.baseColorTexture,Nv)),o.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,o.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(s.push(t.assignTexture(o,"metalnessMap",n.metallicRoughnessTexture)),s.push(t.assignTexture(o,"roughnessMap",n.metallicRoughnessTexture))),a=this._invokeOne(function(t){return t.getMaterialType&&t.getMaterialType(e)}),s.push(Promise.all(this._invokeAll(function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,o)})))}!0===i.doubleSided&&(o.side=nt);const l=i.alphaMode||"OPAQUE";if("BLEND"===l?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,"MASK"===l&&(o.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&a!==Jo&&(s.push(t.assignTexture(o,"normalMap",i.normalTexture)),o.normalScale=new ea(1,1),void 0!==i.normalTexture.scale)){const e=i.normalTexture.scale;o.normalScale.set(e,e)}if(void 0!==i.occlusionTexture&&a!==Jo&&(s.push(t.assignTexture(o,"aoMap",i.occlusionTexture)),void 0!==i.occlusionTexture.strength&&(o.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&a!==Jo){const e=i.emissiveFactor;o.emissive=(new Yo).setRGB(e[0],e[1],e[2],Dv)}return void 0!==i.emissiveTexture&&a!==Jo&&s.push(t.assignTexture(o,"emissiveMap",i.emissiveTexture,Nv)),Promise.all(s).then(function(){const n=new a(o);return i.name&&(n.name=i.name),wy(n,i),t.associations.set(n,{materials:e}),i.extensions&&xy(r,n,i),n})}createUniqueName(e){const t=Mp.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function i(e){return n[Fv.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(n){return Cy(n,e,t)})}const a=[];for(let n=0,o=e.length;n<o;n++){const o=e[n],s=Ey(o),l=r[s];if(l)a.push(l.promise);else{let e;e=o.extensions&&o.extensions[Fv.KHR_DRACO_MESH_COMPRESSION]?i(o):Cy(new Ss,o,t),r[s]={primitive:o,promise:e},a.push(e)}}return Promise.all(a)}loadMesh(e){const t=this,n=this.json,r=this.extensions,i=n.meshes[e],a=i.primitives,o=[];for(let e=0,t=a.length;e<t;e++){const t=void 0===a[e].material?by(this.cache):this.getDependency("material",a[e].material);o.push(t)}return o.push(t.loadGeometries(a)),Promise.all(o).then(function(n){const o=n.slice(0,n.length-1),s=n[n.length-1],l=[];for(let n=0,c=s.length;n<c;n++){const c=s[n],u=a[n];let d;const h=o[n];if(u.mode===dy.TRIANGLES||u.mode===dy.TRIANGLE_STRIP||u.mode===dy.TRIANGLE_FAN||void 0===u.mode)d=!0===i.isSkinnedMesh?new Ul(c,h):new Us(c,h),!0===d.isSkinnedMesh&&d.normalizeSkinWeights(),u.mode===dy.TRIANGLE_STRIP?d.geometry=kv(d.geometry,Pr):u.mode===dy.TRIANGLE_FAN&&(d.geometry=kv(d.geometry,kr));else if(u.mode===dy.LINES)d=new zc(c,h);else if(u.mode===dy.LINE_STRIP)d=new Dc(c,h);else if(u.mode===dy.LINE_LOOP)d=new Bc(c,h);else{if(u.mode!==dy.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+u.mode);d=new Xc(c,h)}Object.keys(d.geometry.morphAttributes).length>0&&_y(d,i),d.name=t.createUniqueName(i.name||"mesh_"+e),wy(d,i),u.extensions&&xy(r,d,u),t.assignFinalMaterial(d),l.push(d)}for(let n=0,r=l.length;n<r;n++)t.associations.set(l[n],{meshes:e,primitives:n});if(1===l.length)return i.extensions&&xy(r,l[0],i),l[0];const c=new Qs;i.extensions&&xy(r,c,i),t.associations.set(c,{meshes:e});for(let e=0,t=l.length;e<t;e++)c.add(l[e]);return c})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new Ys(Qi.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new Lh(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),wy(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n=[];for(let e=0,r=t.joints.length;e<r;e++)n.push(this._loadNodeShallow(t.joints[e]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(e){const n=e.pop(),r=e,i=[],a=[];for(let e=0,o=r.length;e<o;e++){const o=r[e];if(o){i.push(o);const t=new to;null!==n&&t.fromArray(n.array,16*e),a.push(t)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[e])}return new Hl(i,a)})}loadAnimation(e){const t=this.json,n=this,r=t.animations[e],i=r.name?r.name:"animation_"+e,a=[],o=[],s=[],l=[],c=[];for(let e=0,t=r.channels.length;e<t;e++){const t=r.channels[e],n=r.samplers[t.sampler],i=t.target,u=i.node,d=void 0!==r.parameters?r.parameters[n.input]:n.input,h=void 0!==r.parameters?r.parameters[n.output]:n.output;void 0!==i.node&&(a.push(this.getDependency("node",u)),o.push(this.getDependency("accessor",d)),s.push(this.getDependency("accessor",h)),l.push(n),c.push(i))}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(s),Promise.all(l),Promise.all(c)]).then(function(e){const t=e[0],r=e[1],a=e[2],o=e[3],s=e[4],l=[];for(let e=0,i=t.length;e<i;e++){const i=t[e],c=r[e],u=a[e],d=o[e],h=s[e];if(void 0===i)continue;i.updateMatrix&&i.updateMatrix();const p=n._createAnimationTracks(i,c,u,d,h);if(p)for(let e=0;e<p.length;e++)l.push(p[e])}return new ih(i,void 0,l)})}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then(function(e){const t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse(function(e){if(e.isMesh)for(let t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]}),t})}loadNode(e){const t=this,n=this.json.nodes[e],r=t._loadNodeShallow(e),i=[],a=n.children||[];for(let e=0,n=a.length;e<n;e++)i.push(t.getDependency("node",a[e]));const o=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([r,Promise.all(i),o]).then(function(e){const t=e[0],n=e[1],r=e[2];null!==r&&t.traverse(function(e){e.isSkinnedMesh&&e.bind(r,Ty)});for(let e=0,r=n.length;e<r;e++)t.add(n[e]);return t})}_loadNodeShallow(e){const t=this.json,n=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const i=t.nodes[e],a=i.name?r.createUniqueName(i.name):"",o=[],s=r._invokeOne(function(t){return t.createNodeMesh&&t.createNodeMesh(e)});return s&&o.push(s),void 0!==i.camera&&o.push(r.getDependency("camera",i.camera).then(function(e){return r._getNodeRef(r.cameraCache,i.camera,e)})),r._invokeAll(function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)}).forEach(function(e){o.push(e)}),this.nodeCache[e]=Promise.all(o).then(function(t){let o;if(o=!0===i.isBone?new Ol:t.length>1?new Qs:1===t.length?t[0]:new Ro,o!==t[0])for(let e=0,n=t.length;e<n;e++)o.add(t[e]);if(i.name&&(o.userData.name=i.name,o.name=a),wy(o,i),i.extensions&&xy(n,o,i),void 0!==i.matrix){const e=new to;e.fromArray(i.matrix),o.applyMatrix4(e)}else void 0!==i.translation&&o.position.fromArray(i.translation),void 0!==i.rotation&&o.quaternion.fromArray(i.rotation),void 0!==i.scale&&o.scale.fromArray(i.scale);return r.associations.has(o)||r.associations.set(o,{}),r.associations.get(o).nodes=e,o}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,i=new Qs;n.name&&(i.name=r.createUniqueName(n.name)),wy(i,n),n.extensions&&xy(t,i,n);const a=n.nodes||[],o=[];for(let e=0,t=a.length;e<t;e++)o.push(r.getDependency("node",a[e]));return Promise.all(o).then(function(e){for(let t=0,n=e.length;t<n;t++)i.add(e[t]);return r.associations=(e=>{const t=new Map;for(const[e,n]of r.associations)(e instanceof Zo||e instanceof xa)&&t.set(e,n);return e.traverse(e=>{const n=r.associations.get(e);null!=n&&t.set(e,n)}),t})(i),i})}_createAnimationTracks(e,t,n,r,i){const a=[],o=e.name?e.name:e.uuid,s=[];let l;switch(vy[i.path]===vy.weights?e.traverse(function(e){e.morphTargetInfluences&&s.push(e.name?e.name:e.uuid)}):s.push(o),vy[i.path]){case vy.weights:l=Qd;break;case vy.rotation:l=th;break;case vy.position:case vy.scale:l=rh;break;default:l=1===n.itemSize?Qd:rh}const c=void 0!==r.interpolation?yy[r.interpolation]:_r,u=this._getArrayFromAccessor(n);for(let e=0,n=s.length;e<n;e++){const n=new l(s[e]+"."+vy[i.path],t.array,u,c);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(n),a.push(n)}return a}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const e=My(t.constructor),n=new Float32Array(t.length);for(let r=0,i=t.length;r<i;r++)n[r]=t[r]*e;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof th?uy:ly)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Cy(e,t,n){const r=t.attributes,i=[];function a(t,r){return n.getDependency("accessor",t).then(function(t){e.setAttribute(r,t)})}for(const t in r){const n=gy[t]||t.toLowerCase();n in e.attributes||i.push(a(r[t],n))}if(void 0!==t.indices&&!e.index){const r=n.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});i.push(r)}return wy(e,t),function(e,t,n){const r=t.attributes,i=new Ca;if(void 0===r.POSITION)return;{const e=n.json.accessors[r.POSITION],t=e.min,a=e.max;if(void 0===t||void 0===a)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(i.set(new na(t[0],t[1],t[2]),new na(a[0],a[1],a[2])),e.normalized){const t=My(hy[e.componentType]);i.min.multiplyScalar(t),i.max.multiplyScalar(t)}}const a=t.targets;if(void 0!==a){const e=new na,t=new na;for(let r=0,i=a.length;r<i;r++){const i=a[r];if(void 0!==i.POSITION){const r=n.json.accessors[i.POSITION],a=r.min,o=r.max;if(void 0!==a&&void 0!==o){if(t.setX(Math.max(Math.abs(a[0]),Math.abs(o[0]))),t.setY(Math.max(Math.abs(a[1]),Math.abs(o[1]))),t.setZ(Math.max(Math.abs(a[2]),Math.abs(o[2]))),r.normalized){const e=My(hy[r.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(e)}e.boundingBox=i;const o=new Xa;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=o}(e,t,n),Promise.all(i).then(function(){return void 0!==t.targets?function(e,t,n){let r=!1,i=!1,a=!1;for(let e=0,n=t.length;e<n;e++){const n=t[e];if(void 0!==n.POSITION&&(r=!0),void 0!==n.NORMAL&&(i=!0),void 0!==n.COLOR_0&&(a=!0),r&&i&&a)break}if(!r&&!i&&!a)return Promise.resolve(e);const o=[],s=[],l=[];for(let c=0,u=t.length;c<u;c++){const u=t[c];if(r){const t=void 0!==u.POSITION?n.getDependency("accessor",u.POSITION):e.attributes.position;o.push(t)}if(i){const t=void 0!==u.NORMAL?n.getDependency("accessor",u.NORMAL):e.attributes.normal;s.push(t)}if(a){const t=void 0!==u.COLOR_0?n.getDependency("accessor",u.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(o),Promise.all(s),Promise.all(l)]).then(function(t){const n=t[0],o=t[1],s=t[2];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=o),a&&(e.morphAttributes.color=s),e.morphTargetsRelative=!0,e})}(e,t.targets,n):e})}function Ry(e){return Ry="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ry(e)}function Py(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ky(r.key),r)}}function ky(e){var t=function(e){if("object"!=Ry(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ry(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ry(t)?t:t+""}var Iy=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modelName=t,this.model=null,this.scale=n,this.mixer=null,this.speed=1,this.clock=new ip},(t=[{key:"loadModel",value:function(e,t,n){var r=this;(new Uv).load(this.modelName,function(i){r.model=i.scene,r.model.scale.set(r.scale,r.scale,r.scale),r.model.rotation.copy(t),e.add(r.model);var a=i.animations;a&&a.length>0&&(r.mixer=new Rp(r.model),r.mixer.clipAction(a[0]).play()),n&&n()})}},{key:"updateAnimations",value:function(){if(this.mixer){var e=this.clock.getDelta()*this.speed;this.mixer.update(e)}}},{key:"setSpeed",value:function(e){this.speed=e}},{key:"getModel",value:function(){return this.model}}])&&Py(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const Ly=Iy;var Ny=i(72),Dy=i.n(Ny),Uy=i(825),Oy=i.n(Uy),Fy=i(659),zy=i.n(Fy),By=i(56),Hy=i.n(By),Vy=i(159),jy=i.n(Vy),Wy=i(113),Gy=i.n(Wy),Xy=i(910),qy={};qy.styleTagTransform=Gy(),qy.setAttributes=Hy(),qy.insert=zy().bind(null,"head"),qy.domAPI=Oy(),qy.insertStyleElement=jy(),Dy()(Xy.A,qy),Xy.A&&Xy.A.locals&&Xy.A.locals;const Yy=i.p+"src/assets/images/owl-in-space.png",$y=i.p+"src/assets/models/galaxy_HD.glb",Ky=i.p+"src/assets/models/milkyway.glb",Zy=i.p+"src/assets/images/rocketship-cursor.png";function Jy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Qy=new Op,eb=new ea,tb=function(e,t){var n=window.innerWidth,r=window.innerHeight;e.setSize(n,r),t.aspect=n/r,t.updateProjectionMatrix()},nb=function(e){eb.x=e.clientX/window.innerWidth*2-1,eb.y=-e.clientY/window.innerHeight*2+1},rb=!1,ib=function(e){rb=!0},ab=function(e){rb=!1},ob=new Map;const sb=function(){var e,t,n,r,i,a=(0,o.useRef)(null),s=(0,o.useRef)(null),l=new Ly($y,2.8),c=new Ly(Ky,100),u=new Pv,d=(r=(0,o.useState)(!0),i=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(r,i)||function(e,t){if(e){if("string"==typeof e)return Jy(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jy(e,t):void 0}}(r,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=d[0],p=d[1],f=te(),m=function(){document.body.style.cursor="url(".concat(Zy,"), auto"),f("/accessible")},g=new na(4.42,2.64,.21),v=new na(5.93,6.35,.22),y=!1,b=0,x=0,w=function(e,t,n){var r=new na;e.getWorldPosition(r),r.project(t);var i=n.domElement.clientWidth/2,a=n.domElement.clientHeight/2;return{x:r.x*i+i,y:-r.y*a+a}},_=function(t,n){y&&(n.target.lerp(new na(0,0,0),.1),t.position.lerp(e,.05),t.zoom=Qi.lerp(t.zoom,1,.1),t.updateProjectionMatrix(),t.position.distanceTo(e)<.1&&Math.abs(t.zoom-1)<.1&&n.target.distanceTo(new na(0,0,0))<.1&&(y=!1,n.minAzimuthAngle=-1/0,n.maxAzimuthAngle=1/0,n.minPolarAngle=0,n.maxPolarAngle=Math.PI),n.update())},E=function(e){"Space"===e.code&&(y=!0)},S=function(e){var t=(new Date).getTime();t-x<300?b++:b=1,3===b&&(y=!0,b=0),x=t},M=function(){!y||0===b&&n||(y=!1)};return(0,o.useEffect)(function(){var e=document.querySelector(".black-overlay"),t=document.getElementById("instruction-text"),n=function(){e.style.opacity<"0.1"&&t.classList.add("fade-in")};return e.addEventListener("transitionend",n),function(){e.removeEventListener("transitionend",n)}},[]),(0,o.useEffect)(function(){document.body.style.zoom=1,window.scrollTo(0,0);var r=new il,i=new Ys(75,window.innerWidth/window.innerHeight,.1,1e3),o=new mv({antialias:!0});o.setSize(window.innerWidth,window.innerHeight),a.current.appendChild(o.domElement),document.body.style.cursor="url(".concat(Zy,"), auto"),n=window.matchMedia("(pointer:none), (pointer:coarse)").matches,e=n?v:g,i.position.copy(e),function(e){var t=new Uh(13022709,4);e.add(t);var n=new Ih(16443030,5);n.position.set(0,-2,0),e.add(n)}(r);var d=new Sv(i,o.domElement);return d.minDistance=3,d.maxDistance=20,d.enableDamping=!0,Promise.all([new Promise(function(e){l.loadModel(r,new ho,function(){l.setSpeed(-.3),e()})}),new Promise(function(e){c.loadModel(r,new ho(0,-1,0),function(){e()})}),new Promise(function(e){u.createNodes(r,n),s.current=u,u.enableMouseEvents(o,i,function(e){document.body.style.cursor="url(".concat(Zy,"), auto"),f("/".concat(e))}),e()})]).then(function(){var e=document.getElementById("loading-overlay");e&&(e.style.display="none"),function(e,r,i,a,o){var s=u.getNodeInfoArray(r,a),l=function(){t=requestAnimationFrame(l),u.updateNodes(r),s.forEach(function(e){var t,i=e.node,s=e.nodeTitle,l=ob.get(i.userData.id);l||((t=l=document.createElement("div")).style.position="absolute",t.style.color="white",t.style.backgroundColor="rgba(0, 0, 0, 0.7)",t.style.padding="5px",t.style.borderRadius="3px",t.style.pointerEvents="none",t.style.display="none",document.body.appendChild(t),ob.set(i.userData.id,l)),"who-am-i"===i.userData.id&&(l.style.fontWeight="bold",l.style.color="#db13bd",l.style.zIndex="100");var c=w(i,r,a),d=c.x,h=c.y;l.style.left="".concat(d,"px"),l.style.top="".concat(h,"px"),l.textContent=s,l.style.display="block";var p=u.getHoveredNode();Qy.setFromCamera(eb,r);var f=Qy.intersectObject(o.model);n||(p?(document.body.style.cursor="pointer",l.style.display="block"):(f.length>0?document.body.style.cursor=rb?"grabbing":"grab":document.body.style.cursor="url(".concat(Zy,"), auto"),l.style.display="none"))}),o.updateAnimations(),y&&_(r,i),i.update(),a.render(e,r)};l(),p(!1)}(r,i,d,o,l)}).catch(function(e){}),window.addEventListener("resize",function(){return tb(o,i)}),document.addEventListener("keyup",E),document.addEventListener("touchstart",S),document.addEventListener("touchstart",M),document.addEventListener("mousedown",M),document.addEventListener("wheel",M),document.addEventListener("mousemove",nb),document.addEventListener("mousedown",ib),document.addEventListener("mouseup",ab),function(){rb=!1,cancelAnimationFrame(t),window.removeEventListener("resize",tb),document.removeEventListener("keyup",E),document.removeEventListener("touchstart",S),document.removeEventListener("touchstart",M),document.removeEventListener("mousedown",M),document.removeEventListener("wheel",M),document.removeEventListener("mousemove",nb),document.removeEventListener("mousedown",ib),document.removeEventListener("mouseup",ab),s.current&&s.current.cleanupMouseEvents&&s.current.cleanupMouseEvents(),r.traverse(function(e){e.isMesh&&(e.geometry&&e.geometry.dispose(),e.material&&(Array.isArray(e.material)?e.material.forEach(function(e){e.map&&e.map.dispose(),e.dispose()}):(e.material.map&&e.material.map.dispose(),e.material.dispose())))}),o.dispose(),d.dispose(),ob.forEach(function(e,t){document.body.removeChild(e)}),ob.clear(),a.current&&a.current.removeChild(o.domElement)}},[]),o.createElement("div",{ref:a,className:"scene-container"},o.createElement("div",{className:"loading-overlay",id:"loading-overlay"},o.createElement("img",{src:Yy,alt:"Owl",className:"spinner-image"}),o.createElement("div",{className:"spinner"}),o.createElement("p",null,"Blasting off..."),o.createElement("div",{className:"accessible-link",style:{fontSize:"16px"}},o.createElement("span",{className:"span-link",onClick:m},'"Elisa\'s space" accessible view'))),o.createElement("div",{className:"black-overlay ".concat(h?"fade-in":"fade-out")}),o.createElement("div",{id:"title"},o.createElement("p",null,"You have warped to ",o.createElement("b",null,"Elisa's space")),o.createElement("div",{className:"accessible-link"},o.createElement("span",{className:"span-link",onClick:m},"Accessible view"))),o.createElement("div",{id:"title-mobile"},o.createElement("p",null,"You have warped to ",o.createElement("br",null),o.createElement("b",null,"Elisa's space"))),o.createElement("div",{id:"instruction-text"},o.createElement("p",null,"> Click a celestial body to explore projects",o.createElement("br",null),"> Drag and scroll to navigate the space",o.createElement("br",null),'> Press the "Space" key to reset the view',o.createElement("br",null))),o.createElement("div",{id:"instruction-text-mobile"},o.createElement("p",null,o.createElement("span",{className:"span-link",onClick:m},"> Accessible view"),o.createElement("br",null),"> Click a celestial body to explore projects",o.createElement("br",null),"> Drag and pinch-to-zoom to navigate the space",o.createElement("br",null),"> Triple-tap to reset the view")))};var lb=i(212),cb={};cb.styleTagTransform=Gy(),cb.setAttributes=Hy(),cb.insert=zy().bind(null,"head"),cb.domAPI=Oy(),cb.insertStyleElement=jy(),Dy()(lb.A,cb),lb.A&&lb.A.locals&&lb.A.locals;const ub=i.p+"src/assets/images/galaxy.png";function db(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return hb(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hb(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const pb=function(e){var t=e.refs,n=e.setRefs,r=e.children,i=e.generateRefsFromDOM,a=te(),s=db((0,o.useState)(""),2),l=s[0],c=s[1],u=db((0,o.useState)(!1),2),d=u[0],h=u[1],p=window.location.hash.split("#/")[1].split("#")[0],f=function(){var e=document.querySelectorAll("div.section"),t=Array.from(e).map(function(e){var t=e.querySelector("h2");return{id:e.id,label:t?t.textContent:e.id}});n(t)};(0,o.useEffect)(function(){i&&i(f)},[]);var m=function(e){var t=document.getElementById(e);t?(h(!0),t.scrollIntoView({behavior:"smooth"}),window.history.replaceState(null,"","".concat("/","#/").concat(p,"#").concat(e)),c(e),setTimeout(function(){return h(!1)},800)):window.history.replaceState(null,"","".concat("/","#/").concat(p))};return(0,o.useEffect)(function(){var e=new IntersectionObserver(function(e){var t=e.filter(function(e){return e.isIntersecting});if(t.length>0){var n=t[0].target.id;c(n),window.history.replaceState(null,"","".concat("/","#/").concat(p,"#").concat(n))}},{root:null,rootMargin:"0px 0px -10% 0px",threshold:[.1]});return t.forEach(function(t){var n=document.getElementById(t.id);n&&e.observe(n)}),function(){t.forEach(function(t){var n=document.getElementById(t.id);n&&e.unobserve(n)}),e.disconnect()}},[t,d]),(0,o.useEffect)(function(){var e=window.location.hash.split("#").pop();e&&m(e)},[]),o.createElement("div",{className:"page-template",style:{cursor:"url(".concat(Zy,"), auto")}},o.createElement("header",null,o.createElement("button",{className:"home",onClick:function(){a("/")}},"<",o.createElement("img",{src:ub,className:"galaxy-image",width:"40px"}),o.createElement("span",null,"Go back to space")),o.createElement("div",{className:"dropdown"},o.createElement("select",{onChange:function(e){var t=e.target.value;t&&m(t)},value:l||""},o.createElement("option",{value:"",disabled:!0},"Warp to a section"),t.map(function(e){return o.createElement("option",{key:e.id,value:e.id},e.label)})))),o.createElement("main",null,o.createElement("div",{className:"content"},r," ")),o.createElement("footer",null))},fb=i.p+"src/assets/images/strivr/immersive-lobby-thumbnail.png",mb=i.p+"src/assets/images/strivr/immersive-lobby.mp4",gb=i.p+"src/assets/images/strivr/old-acclimation.png",vb=i.p+"src/assets/images/strivr/old-lobby-1.png",yb=i.p+"src/assets/images/strivr/old-button-interaction.gif",bb=i.p+"src/assets/images/strivr/experience-prototype-1.png",xb=i.p+"src/assets/images/strivr/experience-prototype-2.png",wb=i.p+"src/assets/images/strivr/experience-prototype-3.png",_b=i.p+"src/assets/images/strivr/new-acclimation-environment.png",Eb=i.p+"src/assets/images/strivr/lobby-layout.png",Sb=i.p+"src/assets/images/strivr/x-layout.png",Mb=i.p+"src/assets/images/strivr/wireframes.png",Tb=i.p+"src/assets/images/strivr/figma-clickthrough.png",Ab=i.p+"src/assets/images/strivr/new-acclimation.png",Cb=i.p+"src/assets/images/strivr/lobby-menu-toolbar.png",Rb=i.p+"src/assets/images/strivr/lobby-teleport-hotspot-1.png",Pb=i.p+"src/assets/images/strivr/lobby-teleport-hotspot-2.png",kb=i.p+"src/assets/images/strivr/lobby-teleport-hotspot-3.png",Ib=i.p+"src/assets/images/strivr/lobby-teleport-hotspot-4.png";function Lb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Nb=function(){var e,t,n=(e=(0,o.useState)([]),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Lb(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lb(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],i=n[1];return o.createElement(pb,{refs:r,setRefs:i,generateRefsFromDOM:function(e){e()}},o.createElement("div",{className:"section",id:"overview"},o.createElement("h2",{style:{display:"none"}},"Overview"),o.createElement("h1",null,'Strivr: "Immersive Lobby" Upgrade'),o.createElement("div",{className:"video",style:{height:"auto",width:"100%"}},o.createElement("video",{controls:!0,poster:fb,className:"responsive-video"},o.createElement("source",{src:mb,type:"video/mp4"}))),o.createElement("p",{style:{textAlign:"center"}},o.createElement("a",{target:"_blank",rel:"noopener noreferrer",style:{fontSize:"20px"},href:"https://app.strivr.com/demo"},'Try out the interactive "Immersive Lobby" demo')),o.createElement("i",null,o.createElement("p",null,"A couple of notes:"),o.createElement("ul",null,o.createElement("li",null,"I've included information on this page that Strivr has approved for public sharing, but certain details have been omitted due to their protection as intellectual property."),o.createElement("li",null,'Throughout the development of this feature, there were distinct divisions of labor between product, design, and engineering. While I had many opportunities to provide feedback at various stages of the iterative design process, I may not have "owned" certain aspects as an engineer. Therefore, I will use "we" to refer to the team\'s collective efforts and "I" to highlight my contributions.'))),o.createElement("p",null,"As a software engineer on the Immersive Experiences team at ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.strivr.com/"},"Strivr"),", an extended reality training platform for enterprises, I collaborated closely with designers to deliver best-in-class virtual reality experiences for workers from diverse industries."),o.createElement("p",null,'One of our most ambitious projects was revamping the acclimation flowâ€”the initial set of guiding screens users see when they first put on a VR headset and start the applicationâ€”and the main menu, which serves as the home screen linking to all training programs, modules, and activities. Our goal was to create a more modern aesthetic that aligned with the immersive "landing lobby" home stage style, now standard in many VR applications.')),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"problem"},o.createElement("h2",null,"The Problem"),o.createElement("p",null,"At a high level, we wanted our onboarding/landing experience to cater to our user base, which comprised workers who typically had little to no experience in VR but were excited to learn in VR instead of a run-of-the-mill monitor-based application."),o.createElement("p",null,"We noted three major UX issues to address in our old UI system:"),o.createElement("ol",{type:"1"},o.createElement("li",null,o.createElement("b",null,"Floating text and images"),o.createElement("ul",null,o.createElement("li",null,"Since these were not encapsulated in a neat container, our users lacked visual direction."))),o.createElement("li",null,o.createElement("b",null,"The monotone gray environment throughout the application"),o.createElement("ul",null,o.createElement("li",null,"The gray environment was not particularly enticing for users who expected to have a more engaging learning experience by using VR."))),o.createElement("li",null,o.createElement("b",null,"Reactive tilt-shifting buttons"),o.createElement("ul",null,o.createElement("li",null,'This "neat" effect was more of a distraction than an addition to the user experience.')))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:gb,alt:"Old Acclimation",style:{width:"70%",display:"inline-block"}}),o.createElement("figcaption",null,"Floating text and images"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:vb,alt:"Old Lobby",style:{width:"70%",display:"inline-block"}}),o.createElement("figcaption",null,"Gray environment throughout the platform"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:yb,alt:"Old Button Interaction",style:{width:"60%",display:"inline-block"}}),o.createElement("figcaption",null,"Reactive tilt-shifting buttons"))),o.createElement("p",null,'Extrapolating outward from these concrete issues, we broke our problem down into three "How Might We" (HMW) statements:'),o.createElement("ol",{type:"1"},o.createElement("b",null,o.createElement("li",null,"How might we create an intuitive UI system for users with minimal VR experience?"),o.createElement("li",null,"How might we create a clean and effective flow that leads users from the acclimation steps into the home lobby?"),o.createElement("li",null,"How might we create an enticing 3D environment for our users?"))),o.createElement("p",null,"From these three HMW statements, we developed our problem statement:"),o.createElement("p",null,o.createElement("b",null,"Novice VR users often feel disoriented in a new and unfamiliar virtual environment. This inhibits their ability to feel immersion and makes it harder for them to engage with the training content on our platform."))),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"research"},o.createElement("h2",null,"Research"),o.createElement("p",null,"Before we implemented an acclimation/lobby upgrade, we identified three tenets of a good VR user experience:"),o.createElement("ul",null,o.createElement("li",null,o.createElement("b",null,"Trust"),o.createElement("ul",null,o.createElement("li",null,"We must establish trust with users, especially if it's their first time using a headset. We want to ensure they feel safe with our VR application and the device to encourage them to return for more training."))),o.createElement("li",null,o.createElement("b",null,"Control"),o.createElement("ul",null,o.createElement("li",null,"After building trust with our users, we aim to give them a sense of agency, even in a virtual environment. When users feel confident navigating the platform, they're more likely to achieve strong learning outcomes from our training programs."))),o.createElement("li",null,o.createElement("b",null,"Delight"),o.createElement("ul",null,o.createElement("li",null,"Why stop at trust and control? We want our users to be excited about using our product. By creating a positive link between immersive learning and enjoyment, we can boost user retention and leave a lasting impression on how transformative VR learning technology can be.")))),o.createElement("p",null,"Through these three tenets, we investigated the state of landing screen UI/UX in a competitive analysis of similar VR applications with content libraries. Our takeaways from this market research were to implement the following:"),o.createElement("ul",null,o.createElement("li",null,o.createElement("b",null,"Floating interactive tablet"),o.createElement("ul",null,o.createElement("li",null,"Modern menu selection UI in virtual environments is accomplished by rendering an interactive tablet with buttons embedded within its display. This aligns with the real-world expectations of users navigating content on physical touch screens like phones or tablets. This would address our ",o.createElement("b",null,"HMW #1")," and ",o.createElement("b",null,"HMW #2")," statements from our problem assessment above."))),o.createElement("li",null,o.createElement("b",null,'Virtual "home" environment'),o.createElement("ul",null,o.createElement("li",null,"We discovered that these comfortable virtual spacesâ€”CG representations of a lobby with furniture and decorationsâ€”fostered a sense of ease in users new to virtual environments. This would address our ",o.createElement("b",null,"HMW #3")," statement from above.")))),o.createElement("p",null,"With these discoveries in mind, we were ready to explore solutions to our problems.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"experience-prototypes"},o.createElement("h2",null,"Experience Prototypes"),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:bb,alt:"Experience Prototype 1",style:{width:"70%",display:"inline-block",marginRight:"2%"}}),o.createElement("figcaption",null,'EP #1: "Free Roam"')),o.createElement("figure",null,o.createElement("img",{src:xb,alt:"Experience Prototype 2",style:{width:"70%",display:"inline-block"}}),o.createElement("figcaption",null,'EP #2: "Rotate"'))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:wb,alt:"Experience Prototype 3",style:{width:"60%",display:"inline-block"}}),o.createElement("figcaption",null,'EP #3: "Teleport"'))),o.createElement("p",null,"We investigated three experience prototypes for the environment:"),o.createElement("ol",{type:"1"},o.createElement("li",null,o.createElement("b",null,"Free roam"),o.createElement("ul",null,o.createElement("li",null,"(+) Users can freely roam throughout the environment by translating across the virtual space with their controllers.")),o.createElement("ul",null,o.createElement("li",null,"(-) Encouraging virtual translation can inadvertently cause users to bump into real-world obstacles."))),o.createElement("li",null,o.createElement("b",null,"Rotate"),o.createElement("ul",null,o.createElement("li",null,"(+) We surround users with content in a 360Â° circle.")),o.createElement("ul",null,o.createElement("li",null,"(-) Forcing users to rotate their heads beyond a 180Â° field of view may force them to get up from their chairsâ€”they would likely be seated for the majority of our immersive experiencesâ€”to view all of the interactable content."))),o.createElement("li",null,o.createElement("b",null,"Teleport"),o.createElement("ul",null,o.createElement("li",null,"(+) There is minimal barrier to entry for new VR users.")),o.createElement("ul",null,o.createElement("li",null,"(-) Freedom of movement is restricted for more advanced VR users.")))),o.createElement("p",null,"Between our options for our new virtual environment, we landed on our ",o.createElement("b",null,"Teleport")," experience prototype. Our rationale was that our users often had little to no experience in VR, so we wanted to prioritize their safety and comfort while reducing friction as much as possible between users putting on the headset and launching their first activity. By not overwhelming users with too much freedom of movement, they would have more bandwidth to focus on the training content while still enjoying the novelty of being in a virtual environment (",o.createElement("b",null,"HMW #3"),")."),o.createElement("p",null,"This design also lent itself to our previous discovery that we should display related content in a single container (",o.createElement("b",null,"HMWs #1 and #2"),'). Since our users would be constrained to their field of view, the content should be contained to a central "screen" in front of them.')),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"low-fi-prototypes"},o.createElement("h2",null,"Low-Fidelity Prototypes"),o.createElement("p",null,"We worked on two prototypes: one for the new UI and one for the virtual environment."),o.createElement("h3",null,"New UI"),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:Mb,alt:"Wireframes",style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,"UI wireframes"))),o.createElement("p",null,"We created wireframes of the UI components, which included a new set of buttons, placards, and menu containers to present learning content (",o.createElement("b",null,"HMW #1"),")."),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:Tb,alt:"Figma Clickthrough",style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,"Figma clickthrough"))),o.createElement("p",null,"We also created a Figma clickthrough to test the user flows during the acclimation scene, the home scene, the transitions between both scenes, and the transition into the learning content. We wanted to validate that our users could navigate through the acclimation and the lobby into an activity, all while only using the trigger button on their VR controller (",o.createElement("b",null,"HMW #2"),")."),o.createElement("h3",null,"Virtual Environment"),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:_b,alt:"New Acclimation Environment",style:{width:"50%",display:"inline-block"}}),o.createElement("figcaption",null,"New acclimation environment"))),o.createElement("p",null,"We imagined our users entering the lobby from the acclimation flow, which would take place in a dark environment so that they would not be distracted while receiving important usage instructions (",o.createElement("b",null,"HMW #2"),")."),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:Eb,alt:"Lobby Layout Prototype",style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,"Lobby layout prototype"))),o.createElement("p",null,"Our vision for the virtual lobby environment was a CG-designed home with an open lobby where users could interact with our main menu and content."),o.createElement("p",null,"Once they completed the acclimation flow, they would enter a warm, inviting space where they could feel relaxed and ready to engage with immersive content. We designed the open layout of the lobby to create the illusion of being in a bigger space. Poorly designed VR can feel constricting, especially with heavy hardware and limited freedom of movement, so we wanted to alleviate that discomfort by bringing users into an open area (",o.createElement("b",null,"HMW #3"),")."),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:Sb,alt:"X-shape for lobby",style:{width:"50%",display:"inline-block"}}),o.createElement("figcaption",null,"X-shape for lobby"))),o.createElement("p",null,'We also designed the layout of the virtual home to have visible and distinct destinations (pinpointed by the pink dots in the "X" diagram from the lobby layout prototype). Each of these areas in the virtual home was designed with a unique ambiance to match the content accessible to users when they teleport to that hotspot. This would enable us to categorize different information displays within the lobby while leaning into existing mental models of compartmentalization by location.'),o.createElement("p",null,"After validating our prototypes, we were finally ready to implement the new acclimation and lobby.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"implementation"},o.createElement("h2",null,"Engineering Implementation"),o.createElement("p",null,'The UI upgrade invoked an extra layer of complexity in my work as an engineer: I wasn\'t just responsible for implementing the design of our new UI system as specified in the prototypes, but I was also tasked with building the UI so that designers could visit a "sandbox" scene in Unity and iterate on existing designs by modifying their sources directly. In essence, I needed to build modular UI components that could be stacked on top of each other to create new UI objects, and these UI components needed to have their visual properties exposed in a way that designers without Unity programming knowledge could easily tweak values to update the appearance of the UI objects.'),o.createElement("p",null,"To expose a set of properties for a given UI component, I utilized the ",o.createElement("a",{href:"https://docs.unity3d.com/Manual/class-ScriptableObject.html"},"Scriptable Object"),' class provided by Unity to define a custom set of values to assign to the same set of property fields. By modularizing these property sets, I enabled designers to "plug and chug" a wide variety of aesthetic permutations into the same UI component templates, reducing their design iteration time to one-tenth of what it previously took to test different styles.'),o.createElement("p",null,"The modularized component scheme and sandbox development proved to be a meta-design challenge within our pre-existing design problem. I needed to ensure the designs were optimized for both our VR users and our internal design team. By keeping our HMW statements in mind as I programmed the functionality for our new UI and environment, I successfully implemented our new acclimation and lobby.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"launch"},o.createElement("h2",null,"Feature Launch"),o.createElement("div",{className:"video-youtube"},o.createElement("iframe",{className:"responsive-iframe",src:"https://www.youtube.com/embed/_ipX7W_qqlY?si=IoZpJrL_k_sMHjqM&mute=1&end=13",title:"Strivr Lobby Demo",frameBorder:"0",allow:"autoplay; encrypted-media;",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})),o.createElement("br",null),o.createElement("i",{style:{display:"flex",justifyContent:"center"}},'New acclimation and lobby featured in Strivr\'s "Get Started" demo'),o.createElement("p",null,"Once we finalized the development of our new acclimation and lobby, we were able to answer our three HMW statements from before:"),o.createElement("ol",null,o.createElement("li",null,"We created an intuitive UI system for users with minimal VR experience by:",o.createElement("ul",null,o.createElement("li",null,o.createElement("b",null,"Developing a new UI system that is inspired by everyday real-world screen interactions.")))),o.createElement("li",null,"We created a clean and effective flow that leads users from the acclimation steps into the home lobby by:",o.createElement("ul",null,o.createElement("b",null,o.createElement("li",null,"Leaning on our new UI to provide visual direction for users."),o.createElement("li",null,"Simplifying interactions to one button."),o.createElement("li",null,"Starting users in a minimally distracting environment and moving them to a brighter lobby environment when they are ready to learn.")))),o.createElement("li",null,"We created an enticing 3D environment for our users by:",o.createElement("ul",null,o.createElement("li",null,o.createElement("b",null,"Designing an open-walled virtual lobby that uses environmental cues, directing user attention to important interactive elements."))))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:Ab,alt:"New Acclimation",style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,"New acclimation with encapsulated text and images"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:Cb,alt:"Lobby menu and toolbar",style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,"Lobby with encapsulated content menu and toolbar"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:Rb,alt:"Lobby teleport hotspot",style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,"Teleport hotspot to the left of the user"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:Pb,alt:"Patio hot spot",style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,"Teleport hotspot on the patio"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:kb,alt:"Entryway hotspot",style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,"Teleport hotspot by the entryway"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:Ib,alt:"Behind the user hotspot",style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,"Teleport hotspot behind the user"))),o.createElement("p",null,"In future iterations of our lobby, we would easily be able to instantiate new UI to provide users with even more content diversity in these teleport hotspots, thanks to our intentional design and component-based implementation.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"reflections"},o.createElement("h2",null,"Reflections"),o.createElement("ul",null,o.createElement("li",null,o.createElement("b",null,"Scope creep is real."),o.createElement("ul",null,o.createElement("li",null,'As we made significant changes to the functionality and aesthetics of our home page, it was easy to get caught up in various small design tweaks and UX improvements that could be added to our original plans. We had to stay focused and avoid getting sidetracked by "What if we did this instead?" questions, especially with an MVP deadline looming.'))),o.createElement("li",null,o.createElement("b",null,"Documentation, documentation, documentation."),o.createElement("ul",null,o.createElement("li",null,"For a project of this scale, it was crucial to keep our design and engineering decisions well-organized and easily accessible. With hundreds of design and engineering specs to manage, we needed to improve efficiency by tracking where files were stored, identifying finalized versus living documents, and clarifying ownership of specific feature subsets."))),o.createElement("li",null,o.createElement("b",null,"Step up beyond the role."),o.createElement("ul",null,o.createElement("li",null,"As an engineer at a startup, I often had to take on responsibilities beyond my defined role. When I recognized potential issues with how features might function due to the technical constraints of our virtual environment, it was my responsibility to raise these concerns and suggest design alternatives. This not only contributed to a better final product but also allowed me to think like both a designer and an engineer."))))))};var Db=i(772),Ub=i(242);const Ob=e=>{let t;const n=new Set,r=(e,r)=>{const i="function"==typeof e?e(t):e;if(!Object.is(i,t)){const e=t;t=(null!=r?r:"object"!=typeof i||null===i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,a={setState:r,getState:i,getInitialState:()=>o,subscribe:e=>(n.add(e),()=>n.delete(e))},o=t=e(r,i,a);return a},{useSyncExternalStoreWithSelector:Fb}=Ub,zb=e=>e,Bb=(e,t)=>{const n=(e=>e?Ob(e):Ob)(e),r=(e,r=t)=>function(e,t=zb,n){const r=Fb(e.subscribe,e.getState,e.getInitialState,t,n);return o.useDebugValue(r),r}(n,e,r);return Object.assign(r,n),r},Hb=[];function Vb(e,t,n=(e,t)=>e===t){if(e===t)return!0;if(!e||!t)return!1;const r=e.length;if(t.length!==r)return!1;for(let i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}function jb(e,t=null,n=!1,r={}){null===t&&(t=[e]);for(const e of Hb)if(Vb(t,e.keys,e.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(e,"error"))throw e.error;if(Object.prototype.hasOwnProperty.call(e,"response"))return r.lifespan&&r.lifespan>0&&(e.timeout&&clearTimeout(e.timeout),e.timeout=setTimeout(e.remove,r.lifespan)),e.response;if(!n)throw e.promise}const i={keys:t,equal:r.equal,remove:()=>{const e=Hb.indexOf(i);-1!==e&&Hb.splice(e,1)},promise:(a=e,"object"==typeof a&&"function"==typeof a.then?e:e(...t)).then(e=>{i.response=e,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(e=>i.error=e)};var a;if(Hb.push(i),!n)throw i.promise}var Wb=i(845),Gb=i.n(Wb),Xb=i(982),qb=i(848);function Yb(e,t,n){if(!e)return;if(!0===n(e))return e;let r=t?e.return:e.child;for(;r;){const e=Yb(r,t,n);if(e)return e;r=t?null:r.sibling}}function $b(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(t){return e}}(()=>{var e,t;return"undefined"!=typeof window&&((null==(e=window.document)?void 0:e.createElement)||"ReactNative"===(null==(t=window.navigator)?void 0:t.product))})()?o.useLayoutEffect:o.useEffect;const Kb=$b(o.createContext(null));class Zb extends o.Component{render(){return o.createElement(Kb.Provider,{value:this._reactInternals},this.props.children)}}function Jb(){const e=o.useContext(Kb);if(null===e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=o.useId();return o.useMemo(()=>{for(const n of[e,null==e?void 0:e.alternate]){if(!n)continue;const e=Yb(n,!1,e=>{let n=e.memoizedState;for(;n;){if(n.memoizedState===t)return!0;n=n.next}});if(e)return e}},[e,t])}const Qb=Symbol.for("react.context"),ex=e=>null!==e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===Qb;function tx(e){let t=e.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}s.act;const nx=e=>e&&e.isOrthographicCamera,rx=e=>null!=e&&("string"==typeof e||"number"==typeof e||e.isColor),ix=((e,t)=>"undefined"!=typeof window&&((null==(e=window.document)?void 0:e.createElement)||"ReactNative"===(null==(t=window.navigator)?void 0:t.product)))()?o.useLayoutEffect:o.useEffect;function ax(e){const t=o.useRef(e);return ix(()=>{t.current=e},[e]),t}function ox({set:e}){return ix(()=>(e(new Promise(()=>null)),()=>e(!1)),[e]),null}const sx=(e=>((e=class extends o.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}).getDerivedStateFromError=()=>({error:!0}),e))();function lx(e){var t;const n="undefined"!=typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}function cx(e){var t;return null==(t=e.__r3f)?void 0:t.root.getState()}const ux={obj:e=>e===Object(e)&&!ux.arr(e)&&"function"!=typeof e,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,boo:e=>"boolean"==typeof e,und:e=>void 0===e,nul:e=>null===e,arr:e=>Array.isArray(e),equ(e,t,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof e!=typeof t||!!e!=!!t)return!1;if(ux.str(e)||ux.num(e)||ux.boo(e))return e===t;const a=ux.obj(e);if(a&&"reference"===r)return e===t;const o=ux.arr(e);if(o&&"reference"===n)return e===t;if((o||a)&&e===t)return!0;let s;for(s in e)if(!(s in t))return!1;if(a&&"shallow"===n&&"shallow"===r){for(s in i?t:e)if(!ux.equ(e[s],t[s],{strict:i,objects:"reference"}))return!1}else for(s in i?t:e)if(e[s]!==t[s])return!1;if(ux.und(s)){if(o&&0===e.length&&0===t.length)return!0;if(a&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};const dx=["children","key","ref"];function hx(e){const t={};for(const n in e)dx.includes(n)||(t[n]=e[n]);return t}function px(e,t,n,r){const i=e;let a=null==i?void 0:i.__r3f;return a||(a={root:t,type:n,parent:null,children:[],props:hx(r),object:i,eventCount:0,handlers:{},isHidden:!1},i&&(i.__r3f=a)),a}function fx(e,t){if(!t.includes("-"))return{root:e,key:t,target:e[t]};if(t in e)return{root:e,key:t,target:e[t]};let n=e;const r=t.split("-");for(const i of r){if("object"!=typeof n||null===n)return void 0!==n?{root:n,key:r.slice(r.indexOf(i)).join("-"),target:void 0}:{root:e,key:t,target:void 0};e=n,n=n[t=i]}return{root:e,key:t,target:n}}const mx=/-\d+$/;function gx(e,t){if(ux.str(t.props.attach)){if(mx.test(t.props.attach)){const n=t.props.attach.replace(mx,""),{root:r,key:i}=fx(e.object,n);Array.isArray(r[i])||(r[i]=[])}const{root:n,key:r}=fx(e.object,t.props.attach);t.previousAttach=n[r],n[r]=t.object}else ux.fun(t.props.attach)&&(t.previousAttach=t.props.attach(e.object,t.object))}function vx(e,t){if(ux.str(t.props.attach)){const{root:n,key:r}=fx(e.object,t.props.attach),i=t.previousAttach;void 0===i?delete n[r]:n[r]=i}else null==t.previousAttach||t.previousAttach(e.object,t.object);delete t.previousAttach}const yx=[...dx,"args","dispose","attach","object","onUpdate","dispose"],bx=new Map;function xx(e){let t=bx.get(e.constructor);try{t||(t=new e.constructor,bx.set(e.constructor,t))}catch(e){}return t}const wx=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],_x=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Ex(e,t){var n;const r=e.__r3f,i=r&&tx(r).getState(),a=null==r?void 0:r.eventCount;for(const n in t){let a=t[n];if(yx.includes(n))continue;if(r&&_x.test(n)){"function"==typeof a?r.handlers[n]=a:delete r.handlers[n],r.eventCount=Object.keys(r.handlers).length;continue}if(void 0===a)continue;let{root:s,key:l,target:c}=fx(e,n);if(void 0===c&&("object"!=typeof s||null===s))throw Error(`R3F: Cannot set "${n}". Ensure it is an object before setting "${l}".`);if(c instanceof po&&a instanceof po)c.mask=a.mask;else if(c instanceof Yo&&rx(a))c.set(a);else if(null!==c&&"object"==typeof c&&"function"==typeof c.set&&"function"==typeof c.copy&&null!=a&&a.constructor&&c.constructor===a.constructor)c.copy(a);else if(null!==c&&"object"==typeof c&&"function"==typeof c.set&&Array.isArray(a))"function"==typeof c.fromArray?c.fromArray(a):c.set(...a);else if(null!==c&&"object"==typeof c&&"function"==typeof c.set&&"number"==typeof a)"function"==typeof c.setScalar?c.setScalar(a):c.set(a);else{var o;s[l]=a,i&&!i.linear&&wx.includes(l)&&null!=(o=s[l])&&o.isTexture&&s[l].format===kn&&s[l].type===gn&&(s[l].colorSpace=zr)}}if(null!=r&&r.parent&&null!=i&&i.internal&&null!=(n=r.object)&&n.isObject3D&&a!==r.eventCount){const e=r.object,t=i.internal.interaction.indexOf(e);t>-1&&i.internal.interaction.splice(t,1),r.eventCount&&null!==e.raycast&&i.internal.interaction.push(e)}return r&&void 0===r.props.attach&&(r.object.isBufferGeometry?r.props.attach="geometry":r.object.isMaterial&&(r.props.attach="material")),r&&Sx(r),e}function Sx(e){var t;if(!e.parent)return;null==e.props.onUpdate||e.props.onUpdate(e.object);const n=null==(t=e.root)||null==t.getState?void 0:t.getState();n&&0===n.internal.frames&&n.invalidate()}const Mx=e=>null==e?void 0:e.isObject3D;function Tx(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function Ax(e,t,n,r){const i=n.get(t);i&&(n.delete(t),0===n.size&&(e.delete(r),i.target.releasePointerCapture(r)))}const Cx=e=>!(null==e||!e.render),Rx=o.createContext(null),Px=(e,t)=>{const n=(r=(n,r)=>{const i=new na,a=new na,s=new na;function l(e=r().camera,t=a,n=r().size){const{width:o,height:l,top:c,left:u}=n,d=o/l;t.isVector3?s.copy(t):s.set(...t);const h=e.getWorldPosition(i).distanceTo(s);if(nx(e))return{width:o/e.zoom,height:l/e.zoom,top:c,left:u,factor:1,distance:h,aspect:d};{const t=e.fov*Math.PI/180,n=2*Math.tan(t/2)*h,r=n*(o/l);return{width:r,height:n,top:c,left:u,factor:o/r,distance:h,aspect:d}}}let c;const u=e=>n(t=>({performance:{...t.performance,current:e}})),d=new ea,h={set:n,get:r,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(t=1)=>e(r(),t),advance:(e,n)=>t(e,n,r()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new ip,pointer:d,mouse:d,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const e=r();c&&clearTimeout(c),e.performance.current!==e.performance.min&&u(e.performance.min),c=setTimeout(()=>u(r().performance.max),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:e=>n(t=>({...t,events:{...t.events,...e}})),setSize:(e,t,i=0,o=0)=>{const s=r().camera,c={width:e,height:t,top:i,left:o};n(e=>({size:c,viewport:{...e.viewport,...l(s,a,c)}}))},setDpr:e=>n(t=>{const n=lx(e);return{viewport:{...t.viewport,dpr:n,initialDpr:t.viewport.initialDpr||n}}}),setFrameloop:(e="always")=>{const t=r().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),n(()=>({frameloop:e}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:o.createRef(),active:!1,frames:0,priority:0,subscribe:(e,t,n)=>{const i=r().internal;return i.priority=i.priority+(t>0?1:0),i.subscribers.push({ref:e,priority:t,store:n}),i.subscribers=i.subscribers.sort((e,t)=>e.priority-t.priority),()=>{const n=r().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter(t=>t.ref!==e))}}}};return h},r?Bb(r,undefined):Bb);var r;const i=n.getState();let a=i.size,s=i.viewport.dpr,l=i.camera;return n.subscribe(()=>{const{camera:e,size:t,viewport:r,gl:i,set:o}=n.getState();if(t.width!==a.width||t.height!==a.height||r.dpr!==s){a=t,s=r.dpr,function(e,t){e.manual||(nx(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix())}(e,t),r.dpr>0&&i.setPixelRatio(r.dpr);const n="undefined"!=typeof HTMLCanvasElement&&i.domElement instanceof HTMLCanvasElement;i.setSize(t.width,t.height,n)}e!==l&&(l=e,o(t=>({viewport:{...t.viewport,...t.viewport.getCurrentViewport(e)}})))}),n.subscribe(t=>e(t)),n};function kx(){const e=o.useContext(Rx);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function Ix(e=e=>e,t){return kx()(e,t)}const Lx=new WeakMap;function Nx(e,t){return function(n,...r){let i;var a,o;return"function"==typeof(a=n)&&(null==a||null==(o=a.prototype)?void 0:o.constructor)===a?(i=Lx.get(n),i||(i=new n,Lx.set(n,i))):i=n,e&&e(i),Promise.all(r.map(e=>new Promise((n,r)=>i.load(e,e=>{Mx(null==e?void 0:e.scene)&&Object.assign(e,function(e){const t={nodes:{},materials:{},meshes:{}};return e&&e.traverse(e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material),e.isMesh&&!t.meshes[e.name]&&(t.meshes[e.name]=e)}),t}(e.scene)),n(e)},t,t=>r(new Error(`Could not load ${e}: ${null==t?void 0:t.message}`))))))}}function Dx(e,t,n,r){const i=Array.isArray(t)?t:[t],a=((e,t,n)=>jb(e,t,!1,n))(Nx(n,r),[e,...i],{equal:ux.equ});return Array.isArray(t)?a:a[0]}function Ux(e){const t=Gb()(e);return t.injectIntoDevTools(),t}Dx.preload=function(e,t,n){const r=Array.isArray(t)?t:[t];return((e,t)=>{jb(e,t,!0,void 0)})(Nx(n),[e,...r])},Dx.clear=function(e,t){return(e=>{if(void 0===e||0===e.length)Hb.splice(0,Hb.length);else{const t=Hb.find(t=>Vb(e,t.keys,t.equal));t&&t.remove()}})([e,...Array.isArray(t)?t:[t]])};const Ox={},Fx=/^three(?=[A-Z])/,zx=e=>`${e[0].toUpperCase()}${e.slice(1)}`;let Bx=0;function Hx(e,t){const n=zx(e),r=Ox[n];if("primitive"!==e&&!r)throw new Error(`R3F: ${n} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if("primitive"===e&&!t.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(void 0!==t.args&&!Array.isArray(t.args))throw new Error("R3F: The args prop must be an array!")}function Vx(e){var t;e.isHidden&&(e.props.attach&&null!=(t=e.parent)&&t.object?gx(e.parent,e):Mx(e.object)&&!1!==e.props.visible&&(e.object.visible=!0),e.isHidden=!1,Sx(e))}function jx(e,t,n){const r=t.root.getState();if(e.parent||e.object===r.scene){if(!t.object){var i,a;const e=Ox[zx(t.type)];t.object=null!=(i=t.props.object)?i:new e(...null!=(a=t.props.args)?a:[]),t.object.__r3f=t}if(Ex(t.object,t.props),t.props.attach)gx(e,t);else if(Mx(t.object)&&Mx(e.object)){const r=e.object.children.indexOf(null==n?void 0:n.object);if(n&&-1!==r){const n=e.object.children.indexOf(t.object);if(-1!==n){e.object.children.splice(n,1);const i=n<r?r-1:r;e.object.children.splice(i,0,t.object)}else t.object.parent=e.object,e.object.children.splice(r,0,t.object),t.object.dispatchEvent({type:"added"}),e.object.dispatchEvent({type:"childadded",child:t.object})}else e.object.add(t.object)}for(const e of t.children)jx(t,e);Sx(t)}}function Wx(e,t){t&&(t.parent=e,e.children.push(t),jx(e,t))}function Gx(e,t,n){if(!t||!n)return;t.parent=e;const r=e.children.indexOf(n);-1!==r?e.children.splice(r,0,t):e.children.push(t),jx(e,t,n)}function Xx(e){if("function"==typeof e.dispose){const t=()=>{try{e.dispose()}catch{}};"undefined"!=typeof IS_REACT_ACT_ENVIRONMENT?t():(0,Xb.unstable_scheduleCallback)(Xb.unstable_IdlePriority,t)}}function qx(e,t,n){if(!t)return;t.parent=null;const r=e.children.indexOf(t);-1!==r&&e.children.splice(r,1),t.props.attach?vx(e,t):Mx(t.object)&&Mx(e.object)&&(e.object.remove(t.object),function(e,t){const{internal:n}=e.getState();n.interaction=n.interaction.filter(e=>e!==t),n.initialHits=n.initialHits.filter(e=>e!==t),n.hovered.forEach((e,r)=>{e.eventObject!==t&&e.object!==t||n.hovered.delete(r)}),n.capturedMap.forEach((e,r)=>{Ax(n.capturedMap,t,e,r)})}(tx(t),t.object));const i=null!==t.props.dispose&&!1!==n;for(let e=t.children.length-1;e>=0;e--)qx(t,t.children[e],i);t.children.length=0,delete t.object.__r3f,i&&"primitive"!==t.type&&"Scene"!==t.object.type&&Xx(t.object),void 0===n&&Sx(t)}function Yx(e,t){for(const n of[e,e.alternate])if(null!==n)if("function"==typeof n.ref){null==n.refCleanup||n.refCleanup();const e=n.ref(t);"function"==typeof e&&(n.refCleanup=e)}else n.ref&&(n.ref.current=t)}const $x=[],Kx=()=>{},Zx={};let Jx=0;const Qx=Ux({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:function(e,t,n){var r;return Hx(e=zx(e)in Ox?e:e.replace(Fx,""),t),"primitive"===e&&null!=(r=t.object)&&r.__r3f&&delete t.object.__r3f,px(t.object,n,e,t)},removeChild:qx,appendChild:Wx,appendInitialChild:Wx,insertBefore:Gx,appendChildToContainer(e,t){const n=e.getState().scene.__r3f;t&&n&&Wx(n,t)},removeChildFromContainer(e,t){const n=e.getState().scene.__r3f;t&&n&&qx(n,t)},insertInContainerBefore(e,t,n){const r=e.getState().scene.__r3f;t&&n&&r&&Gx(r,t,n)},getRootHostContext:()=>Zx,getChildHostContext:()=>Zx,commitUpdate(e,t,n,r,i){var a,o,s;Hx(t,r);let l=!1;if(("primitive"===e.type&&n.object!==r.object||(null==(a=r.args)?void 0:a.length)!==(null==(o=n.args)?void 0:o.length)||null!=(s=r.args)&&s.some((e,t)=>{var r;return e!==(null==(r=n.args)?void 0:r[t])}))&&(l=!0),l)$x.push([e,{...r},i]);else{const t=function(e,t){const n={};for(const r in t)if(!yx.includes(r)&&!ux.equ(t[r],e.props[r])){n[r]=t[r];for(const e in t)e.startsWith(`${r}-`)&&(n[e]=t[e])}for(const r in e.props){if(yx.includes(r)||t.hasOwnProperty(r))continue;const{root:i,key:a}=fx(e.object,r);if(i.constructor&&0===i.constructor.length){const e=xx(i);ux.und(e)||(n[a]=e[a])}else n[a]=0}return n}(e,r);Object.keys(t).length&&(Object.assign(e.props,t),Ex(e.object,t))}(null===i.sibling||!(4&i.flags))&&function(){for(const[e]of $x){const t=e.parent;if(t){e.props.attach?vx(t,e):Mx(e.object)&&Mx(t.object)&&t.object.remove(e.object);for(const t of e.children)t.props.attach?vx(e,t):Mx(t.object)&&Mx(e.object)&&e.object.remove(t.object)}e.isHidden&&Vx(e),e.object.__r3f&&delete e.object.__r3f,"primitive"!==e.type&&Xx(e.object)}for(const[n,r,i]of $x){n.props=r;const a=n.parent;if(a){var e,t;const r=Ox[zx(n.type)];n.object=null!=(e=n.props.object)?e:new r(...null!=(t=n.props.args)?t:[]),n.object.__r3f=n,Yx(i,n.object),Ex(n.object,n.props),n.props.attach?gx(a,n):Mx(n.object)&&Mx(a.object)&&a.object.add(n.object);for(const e of n.children)e.props.attach?gx(n,e):Mx(e.object)&&Mx(n.object)&&n.object.add(e.object);Sx(n)}}$x.length=0}()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:e=>null==e?void 0:e.object,prepareForCommit:()=>null,preparePortalMount:e=>px(e.getState().scene,e,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:function(e){var t;e.isHidden||(e.props.attach&&null!=(t=e.parent)&&t.object?vx(e.parent,e):Mx(e.object)&&(e.object.visible=!1),e.isHidden=!0,Sx(e))},unhideInstance:Vx,createTextInstance:Kx,hideTextInstance:Kx,unhideTextInstance:Kx,scheduleTimeout:"function"==typeof setTimeout?setTimeout:void 0,cancelTimeout:"function"==typeof clearTimeout?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:o.createContext(null),setCurrentUpdatePriority(e){Jx=e},getCurrentUpdatePriority:()=>Jx,resolveUpdatePriority(){var e;if(0!==Jx)return Jx;switch("undefined"!=typeof window&&(null==(e=window.event)?void 0:e.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Db.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Db.ContinuousEventPriority;default:return Db.DefaultEventPriority}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:"9.4.2"}),ew=new Map,tw={objects:"shallow",strict:!1};function nw({store:e,children:t,onCreated:n,rootElement:r}){return ix(()=>{const t=e.getState();t.set(e=>({internal:{...e.internal,active:!0}})),n&&n(t),e.getState().events.connected||null==t.events.connect||t.events.connect(r)},[]),(0,qb.jsx)(Rx.Provider,{value:e,children:t})}function rw(e,t){const n=ew.get(e),r=null==n?void 0:n.fiber;if(r){const i=null==n?void 0:n.store.getState();i&&(i.internal.active=!1),Qx.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var n,r,a,o;null==i.events.disconnect||i.events.disconnect(),null==(n=i.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(a=i.gl)||null==a.forceContextLoss||a.forceContextLoss(),null!=(o=i.gl)&&o.xr&&i.xr.disconnect(),function(e){"Scene"!==e.type&&(null==e.dispose||e.dispose());for(const t in e){const n=e[t];"Scene"!==(null==n?void 0:n.type)&&(null==n||null==n.dispose||n.dispose())}}(i.scene),ew.delete(e),t&&t(e)}catch(e){}},500)})}}const iw=new Set,aw=new Set,ow=new Set;function sw(e,t){if(e.size)for(const{callback:n}of e.values())n(t)}function lw(e,t){switch(e){case"before":return sw(iw,t);case"after":return sw(aw,t);case"tail":return sw(ow,t)}}let cw,uw;function dw(e,t,n){let r=t.clock.getDelta();"never"===t.frameloop&&"number"==typeof e&&(r=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),cw=t.internal.subscribers;for(let e=0;e<cw.length;e++)uw=cw[e],uw.ref.current(uw.store.getState(),r,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}let hw,pw,fw,mw=!1,gw=!1;function vw(e){pw=requestAnimationFrame(vw),mw=!0,hw=0,lw("before",e),gw=!0;for(const n of ew.values()){var t;fw=n.store.getState(),!fw.internal.active||!("always"===fw.frameloop||fw.internal.frames>0)||null!=(t=fw.gl.xr)&&t.isPresenting||(hw+=dw(e,fw))}if(gw=!1,lw("after",e),0===hw)return lw("tail",e),mw=!1,cancelAnimationFrame(pw)}function yw(e,t=1){var n;if(!e)return ew.forEach(e=>yw(e.store.getState(),t));null!=(n=e.gl.xr)&&n.isPresenting||!e.internal.active||"never"===e.frameloop||(e.internal.frames=t>1?Math.min(60,e.internal.frames+t):gw?2:1,mw||(mw=!0,requestAnimationFrame(vw)))}function bw(e,t=!0,n,r){if(t&&lw("before",e),n)dw(e,n,r);else for(const t of ew.values())dw(e,t.store.getState());t&&lw("after",e)}const xw={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function ww(e){const{handlePointer:t}=function(e){function t(e){return e.filter(e=>["Move","Over","Enter","Out","Leave"].some(t=>{var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))}function n(t){const{internal:n}=e.getState();for(const e of n.hovered.values())if(!t.length||!t.find(t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId)){const r=e.eventObject.__r3f;if(n.hovered.delete(Tx(e)),null!=r&&r.eventCount){const n=r.handlers,i={...e,intersections:t};null==n.onPointerOut||n.onPointerOut(i),null==n.onPointerLeave||n.onPointerLeave(i)}}}function r(e,t){for(let n=0;n<t.length;n++){const r=t[n].__r3f;null==r||null==r.handlers.onPointerMissed||r.handlers.onPointerMissed(e)}}return{handlePointer:function(i){switch(i){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return t=>{const{internal:r}=e.getState();"pointerId"in t&&r.capturedMap.has(t.pointerId)&&requestAnimationFrame(()=>{r.capturedMap.has(t.pointerId)&&(r.capturedMap.delete(t.pointerId),n([]))})}}return function(a){const{onPointerMissed:o,internal:s}=e.getState();s.lastEvent.current=a;const l="onPointerMove"===i,c="onClick"===i||"onContextMenu"===i||"onDoubleClick"===i,u=function(t,n){const r=e.getState(),i=new Set,a=[],o=n?n(r.internal.interaction):r.internal.interaction;for(let e=0;e<o.length;e++){const t=cx(o[e]);t&&(t.raycaster.camera=void 0)}r.previousRoot||null==r.events.compute||r.events.compute(t,r);let s=o.flatMap(function(e){const n=cx(e);return n&&n.events.enabled&&null!==n.raycaster.camera?(void 0===n.raycaster.camera&&(null==n.events.compute||n.events.compute(t,n,null==(r=n.previousRoot)?void 0:r.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)),n.raycaster.camera?n.raycaster.intersectObject(e,!0):[]):[];var r}).sort((e,t)=>{const n=cx(e.object),r=cx(t.object);return n&&r&&r.events.priority-n.events.priority||e.distance-t.distance}).filter(e=>{const t=Tx(e);return!i.has(t)&&(i.add(t),!0)});r.events.filter&&(s=r.events.filter(s,r));for(const e of s){let t=e.object;for(;t;){var l;null!=(l=t.__r3f)&&l.eventCount&&a.push({...e,eventObject:t}),t=t.parent}}if("pointerId"in t&&r.internal.capturedMap.has(t.pointerId))for(let e of r.internal.capturedMap.get(t.pointerId).values())i.has(Tx(e.intersection))||a.push(e.intersection);return a}(a,l?t:void 0),d=c?function(t){const{internal:n}=e.getState(),r=t.offsetX-n.initialClick[0],i=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+i*i))}(a):0;"onPointerDown"===i&&(s.initialClick=[a.offsetX,a.offsetY],s.initialHits=u.map(e=>e.eventObject)),c&&!u.length&&d<=2&&(r(a,s.interaction),o&&o(a)),l&&n(u),function(e,t,r,i){if(e.length){const a={stopped:!1};for(const o of e){let s=cx(o.object);if(s||o.object.traverseAncestors(e=>{const t=cx(e);if(t)return s=t,!1}),s){const{raycaster:l,pointer:c,camera:u,internal:d}=s,h=new na(c.x,c.y,0).unproject(u),p=e=>{var t,n;return null!=(t=null==(n=d.capturedMap.get(e))?void 0:n.has(o.eventObject))&&t},f=e=>{const n={intersection:o,target:t.target};d.capturedMap.has(e)?d.capturedMap.get(e).set(o.eventObject,n):d.capturedMap.set(e,new Map([[o.eventObject,n]])),t.target.setPointerCapture(e)},m=e=>{const t=d.capturedMap.get(e);t&&Ax(d.capturedMap,o.eventObject,t,e)};let g={};for(let e in t){let n=t[e];"function"!=typeof n&&(g[e]=n)}let v={...o,...g,pointer:c,intersections:e,stopped:a.stopped,delta:r,unprojectedPoint:h,ray:l.ray,camera:u,stopPropagation(){const r="pointerId"in t&&d.capturedMap.get(t.pointerId);(!r||r.has(o.eventObject))&&(v.stopped=a.stopped=!0,d.hovered.size&&Array.from(d.hovered.values()).find(e=>e.eventObject===o.eventObject))&&n([...e.slice(0,e.indexOf(o)),o])},target:{hasPointerCapture:p,setPointerCapture:f,releasePointerCapture:m},currentTarget:{hasPointerCapture:p,setPointerCapture:f,releasePointerCapture:m},nativeEvent:t};if(i(v),!0===a.stopped)break}}}}(u,a,d,function(e){const t=e.eventObject,n=t.__r3f;if(null==n||!n.eventCount)return;const o=n.handlers;if(l){if(o.onPointerOver||o.onPointerEnter||o.onPointerOut||o.onPointerLeave){const t=Tx(e),n=s.hovered.get(t);n?n.stopped&&e.stopPropagation():(s.hovered.set(t,e),null==o.onPointerOver||o.onPointerOver(e),null==o.onPointerEnter||o.onPointerEnter(e))}null==o.onPointerMove||o.onPointerMove(e)}else{const n=o[i];n?c&&!s.initialHits.includes(t)||(r(a,s.interaction.filter(e=>!s.initialHits.includes(e))),n(e)):c&&s.initialHits.includes(t)&&r(a,s.interaction.filter(e=>!s.initialHits.includes(e)))}})}}}}(e);return{priority:1,enabled:!0,compute(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(xw).reduce((e,n)=>({...e,[n]:t(n)}),{}),update:()=>{var t;const{events:n,internal:r}=e.getState();null!=(t=r.lastEvent)&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{const{set:n,events:r}=e.getState();if(null==r.disconnect||r.disconnect(),n(e=>({events:{...e.events,connected:t}})),r.handlers)for(const e in r.handlers){const n=r.handlers[e],[i,a]=xw[e];t.addEventListener(i,n,{passive:a})}},disconnect:()=>{const{set:t,events:n}=e.getState();if(n.connected){if(n.handlers)for(const e in n.handlers){const t=n.handlers[e],[r]=xw[e];n.connected.removeEventListener(r,t)}t(e=>({events:{...e.events,connected:void 0}}))}}}}function _w(e,t){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>e(...r),t)}}function Ew({debounce:e,scroll:t,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=n||("undefined"==typeof window?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,s]=(0,o.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=(0,o.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),c=e?"number"==typeof e?e:e.scroll:null,u=e?"number"==typeof e?e:e.resize:null,d=(0,o.useRef)(!1);(0,o.useEffect)(()=>(d.current=!0,()=>{d.current=!1}));const[h,p,f]=(0,o.useMemo)(()=>{const e=()=>{if(!l.current.element)return;const{left:e,top:t,width:n,height:i,bottom:a,right:o,x:c,y:u}=l.current.element.getBoundingClientRect(),h={left:e,top:t,width:n,height:i,bottom:a,right:o,x:c,y:u};l.current.element instanceof HTMLElement&&r&&(h.height=l.current.element.offsetHeight,h.width=l.current.element.offsetWidth),Object.freeze(h),d.current&&!Tw(l.current.lastBounds,h)&&s(l.current.lastBounds=h)};return[e,u?_w(e,u):e,c?_w(e,c):e]},[s,r,c,u]);function m(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(e=>e.removeEventListener("scroll",f,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function g(){l.current.element&&(l.current.resizeObserver=new i(f),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(e=>e.addEventListener("scroll",f,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{f()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}return function(e,t){(0,o.useEffect)(()=>{if(t){const t=e;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}},[e,t])}(f,!!t),function(e){(0,o.useEffect)(()=>{const t=e;return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[e])}(p),(0,o.useEffect)(()=>{m(),g()},[t,f,p]),(0,o.useEffect)(()=>m,[]),[e=>{!e||e===l.current.element||(m(),l.current.element=e,l.current.scrollContainers=Sw(e),g())},a,h]}function Sw(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(e);return[n,r,i].some(e=>"auto"===e||"scroll"===e)&&t.push(e),[...t,...Sw(e.parentElement)]}const Mw=["x","y","top","bottom","left","right","width","height"],Tw=(e,t)=>Mw.every(n=>e[n]===t[n]);function Aw({ref:e,children:t,fallback:n,resize:r,style:i,gl:s,events:l=ww,eventSource:c,eventPrefix:u,shadows:d,linear:h,flat:p,legacy:f,orthographic:m,frameloop:g,dpr:v,performance:y,raycaster:b,camera:x,scene:w,onPointerMissed:_,onCreated:E,...S}){o.useMemo(()=>function(e){if("function"==typeof e){const t=""+Bx++;return Ox[t]=e,t}Object.assign(Ox,e)}(a),[]);const M=function(){const e=Jb(),t=function(){const e=function(){const e=Jb(),[t]=o.useState(()=>new Map);t.clear();let n=e;for(;n;){const e=n.type;ex(e)&&e!==Kb&&!t.has(e)&&t.set(e,o.use($b(e))),n=n.return}return t}();return o.useMemo(()=>Array.from(e.keys()).reduce((t,n)=>r=>o.createElement(t,null,o.createElement(n.Provider,{...r,value:e.get(n)})),e=>o.createElement(Zb,{...e})),[e])}();return o.useMemo(()=>({children:n})=>{const r=Yb(e,!0,e=>e.type===o.StrictMode)?o.StrictMode:o.Fragment;return(0,qb.jsx)(r,{children:(0,qb.jsx)(t,{children:n})})},[e,t])}(),[T,A]=Ew({scroll:!0,debounce:{scroll:50,resize:0},...r}),C=o.useRef(null),R=o.useRef(null);o.useImperativeHandle(e,()=>C.current);const P=ax(_),[k,I]=o.useState(!1),[L,N]=o.useState(!1);if(k)throw k;if(L)throw L;const D=o.useRef(null);ix(()=>{const e=C.current;if(A.width>0&&A.height>0&&e){async function n(){await D.current.configure({gl:s,scene:w,events:l,shadows:d,linear:h,flat:p,legacy:f,orthographic:m,frameloop:g,dpr:v,performance:y,raycaster:b,camera:x,size:A,onPointerMissed:(...e)=>null==P.current?void 0:P.current(...e),onCreated:e=>{var t;null==e.events.connect||e.events.connect(c?(t=c)&&t.hasOwnProperty("current")?c.current:c:R.current),u&&e.setEvents({compute:(e,t)=>{const n=e[u+"X"],r=e[u+"Y"];t.pointer.set(n/t.size.width*2-1,-r/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==E||E(e)}}),D.current.render((0,qb.jsx)(M,{children:(0,qb.jsx)(sx,{set:N,children:(0,qb.jsx)(o.Suspense,{fallback:(0,qb.jsx)(ox,{set:I}),children:null!=t?t:null})})}))}D.current||(D.current=function(e){const t=ew.get(e),n=null==t?void 0:t.fiber,r=null==t?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const i="function"==typeof reportError?reportError:console.error,a=r||Px(yw,bw),o=n||Qx.createContainer(a,Db.ConcurrentRoot,null,!1,null,"",i,i,i,null);let s,l;t||ew.set(e,{fiber:o,store:a});let c=!1,u=null;return{async configure(t={}){let n;u=new Promise(e=>n=e);let{gl:r,size:i,scene:o,events:d,onCreated:h,shadows:p=!1,linear:f=!1,flat:m=!1,legacy:g=!1,orthographic:v=!1,frameloop:y="always",dpr:b=[1,2],performance:x,raycaster:w,camera:_,onPointerMissed:E}=t,S=a.getState(),M=S.gl;if(!S.gl){const t={canvas:e,powerPreference:"high-performance",antialias:!0,alpha:!0},n="function"==typeof r?await r(t):r;M=Cx(n)?n:new mv({...t,...r}),S.set({gl:M})}let T=S.raycaster;T||S.set({raycaster:T=new Op});const{params:A,...C}=w||{};if(ux.equ(C,T,tw)||Ex(T,{...C}),ux.equ(A,T.params,tw)||Ex(T,{params:{...T.params,...A}}),!S.camera||S.camera===l&&!ux.equ(l,_,tw)){l=_;const e=null==_?void 0:_.isCamera,t=e?_:v?new Lh(0,0,0,0,.1,1e3):new Ys(75,0,.1,1e3);e||(t.position.z=5,_&&(Ex(t,_),t.manual||("aspect"in _||"left"in _||"right"in _||"bottom"in _||"top"in _)&&(t.manual=!0,t.updateProjectionMatrix())),S.camera||null!=_&&_.rotation||t.lookAt(0,0,0)),S.set({camera:t}),T.camera=t}if(!S.scene){let e;null!=o&&o.isScene?(e=o,px(e,a,"",{})):(e=new il,px(e,a,"",{}),o&&Ex(e,o)),S.set({scene:e})}d&&!S.events.handlers&&S.set({events:d(a)});const R=function(e,t){if(!t&&"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:t,height:n,top:r,left:i}=e.parentElement.getBoundingClientRect();return{width:t,height:n,top:r,left:i}}return!t&&"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0}:{width:0,height:0,top:0,left:0,...t}}(e,i);if(ux.equ(R,S.size,tw)||S.setSize(R.width,R.height,R.top,R.left),b&&S.viewport.dpr!==lx(b)&&S.setDpr(b),S.frameloop!==y&&S.setFrameloop(y),S.onPointerMissed||S.set({onPointerMissed:E}),x&&!ux.equ(x,S.performance,tw)&&S.set(e=>({performance:{...e.performance,...x}})),!S.xr){var P;const e=(e,t)=>{const n=a.getState();"never"!==n.frameloop&&bw(e,!0,n,t)},t=()=>{const t=a.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||yw(t)},n={connect(){const e=a.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){const e=a.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};"function"==typeof(null==(P=M.xr)?void 0:P.addEventListener)&&n.connect(),S.set({xr:n})}if(M.shadowMap){const e=M.shadowMap.enabled,t=M.shadowMap.type;if(M.shadowMap.enabled=!!p,ux.boo(p))M.shadowMap.type=Je;else if(ux.str(p)){var k;const e={basic:Ke,percentage:Ze,soft:Je,variance:Qe};M.shadowMap.type=null!=(k=e[p])?k:Je}else ux.obj(p)&&Object.assign(M.shadowMap,p);e===M.shadowMap.enabled&&t===M.shadowMap.type||(M.shadowMap.needsUpdate=!0)}return ua.enabled=!g,c||(M.outputColorSpace=f?Br:zr,M.toneMapping=m?Bt:Wt),S.legacy!==g&&S.set(()=>({legacy:g})),S.linear!==f&&S.set(()=>({linear:f})),S.flat!==m&&S.set(()=>({flat:m})),!r||ux.fun(r)||Cx(r)||ux.equ(r,M,tw)||Ex(M,r),s=h,c=!0,n(),this},render(t){return c||u||this.configure(),u.then(()=>{Qx.updateContainer((0,qb.jsx)(nw,{store:a,children:t,onCreated:s,rootElement:e}),o,null,()=>{})}),a},unmount(){rw(e)}}}(e)),n()}}),o.useEffect(()=>{const e=C.current;if(e)return()=>rw(e)},[]);const U=c?"none":"auto";return(0,qb.jsx)("div",{ref:R,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:U,...i},...S,children:(0,qb.jsx)("div",{ref:T,style:{width:"100%",height:"100%"},children:(0,qb.jsx)("canvas",{ref:C,style:{display:"block"},children:n})})})}function Cw(e){return(0,qb.jsx)(Zb,{children:(0,qb.jsx)(Aw,{...e})})}function Rw(){return Rw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rw.apply(null,arguments)}const Pw=o.forwardRef(({makeDefault:e,camera:t,regress:n,domElement:r,enableDamping:i=!0,keyEvents:a=!1,onChange:s,onStart:l,onEnd:c,...u},d)=>{const h=Ix(e=>e.invalidate),p=Ix(e=>e.camera),f=Ix(e=>e.gl),m=Ix(e=>e.events),g=Ix(e=>e.setEvents),v=Ix(e=>e.set),y=Ix(e=>e.get),b=Ix(e=>e.performance),x=t||p,w=r||m.connected||f.domElement,_=o.useMemo(()=>new Sv(x),[x]);return function(e,t=0){const n=kx(),r=n.getState().internal.subscribe,i=ax(e);ix(()=>r(i,t,n),[t,r,n])}(()=>{_.enabled&&_.update()},-1),o.useEffect(()=>(a&&_.connect(!0===a?w:a),_.connect(w),()=>{_.dispose()}),[a,w,n,_,h]),o.useEffect(()=>{const e=e=>{h(),n&&b.regress(),s&&s(e)},t=e=>{l&&l(e)},r=e=>{c&&c(e)};return _.addEventListener("change",e),_.addEventListener("start",t),_.addEventListener("end",r),()=>{_.removeEventListener("start",t),_.removeEventListener("end",r),_.removeEventListener("change",e)}},[s,l,c,_,h,g]),o.useEffect(()=>{if(e){const e=y().controls;return v({controls:_}),()=>v({controls:e})}},[e,_]),o.createElement("primitive",Rw({ref:d,object:_,enableDamping:i},u))});var kw=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).state={hasError:!1,error:null},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.getDerivedStateFromError=function(e){return{hasError:!0,error:e}};var i=r.prototype;return i.componentDidCatch=function(e,t){return this.props.onDidCatch(e,t)},i.render=function(){var e=this.state,t=this.props,n=t.render,r=t.children,i=t.renderError;return e.hasError?i?i({error:e.error}):null:n?n():r||null},r}(o.PureComponent),Iw=function(e,t){switch(t.type){case"catch":return{didCatch:!0,error:t.error};case"reset":return{didCatch:!1,error:null};default:return e}};function Lw(e){var t=(0,o.useReducer)(Iw,{didCatch:!1,error:null}),n=t[0],r=t[1],i=(0,o.useRef)(null);function a(){return t=function(t,n){r({type:"catch",error:t}),e&&e.onDidCatch&&e.onDidCatch(t,n)},function(e){return o.createElement(kw,{onDidCatch:t,children:e.children,render:e.render,renderError:e.renderError})};var t}var s,l=(0,o.useCallback)(function(){i.current=a(),r({type:"reset"})},[]);return{ErrorBoundary:(s=i.current,null!==s?s:(i.current=a(),i.current)),didCatch:n.didCatch,error:n.error,reset:l}}class Nw extends ch{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new hh(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(n){try{t(i.parse(n))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}},n,r)}parse(e){function t(e,t,n){for(let r=0,i=e.length;r<i;r++)if(e[r]!==t.getUint8(n+r))return!1;return!0}const n=function(e){if("string"==typeof e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=255&e.charCodeAt(n);return t.buffer||t}return e}(e);return function(e){const n=new DataView(e);if(84+50*n.getUint32(80,!0)===n.byteLength)return!0;const r=[115,111,108,105,100];for(let e=0;e<5;e++)if(t(r,n,e))return!1;return!0}(n)?function(e){const t=new DataView(e),n=t.getUint32(80,!0);let r,i,a,o,s,l,c,u,d=!1;for(let e=0;e<70;e++)1129270351==t.getUint32(e,!1)&&82==t.getUint8(e+4)&&61==t.getUint8(e+5)&&(d=!0,o=new Float32Array(3*n*3),s=t.getUint8(e+6)/255,l=t.getUint8(e+7)/255,c=t.getUint8(e+8)/255,u=t.getUint8(e+9)/255);const h=new Ss,p=new Float32Array(3*n*3),f=new Float32Array(3*n*3),m=new Yo;for(let e=0;e<n;e++){const n=84+50*e,u=t.getFloat32(n,!0),h=t.getFloat32(n+4,!0),g=t.getFloat32(n+8,!0);if(d){const e=t.getUint16(n+48,!0);32768&e?(r=s,i=l,a=c):(r=(31&e)/31,i=(e>>5&31)/31,a=(e>>10&31)/31)}for(let s=1;s<=3;s++){const l=n+12*s,c=3*e*3+3*(s-1);p[c]=t.getFloat32(l,!0),p[c+1]=t.getFloat32(l+4,!0),p[c+2]=t.getFloat32(l+8,!0),f[c]=u,f[c+1]=h,f[c+2]=g,d&&(m.setRGB(r,i,a,zr),o[c]=m.r,o[c+1]=m.g,o[c+2]=m.b)}}return h.setAttribute("position",new ss(p,3)),h.setAttribute("normal",new ss(f,3)),d&&(h.setAttribute("color",new ss(o,3)),h.hasColors=!0,h.alpha=u),h}(n):function(e){const t=new Ss,n=/solid([\s\S]*?)endsolid/g,r=/facet([\s\S]*?)endfacet/g,i=/solid\s(.+)/;let a=0;const o=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,s=new RegExp("vertex"+o+o+o,"g"),l=new RegExp("normal"+o+o+o,"g"),c=[],u=[],d=[],h=new na;let p,f=0,m=0,g=0;for(;null!==(p=n.exec(e));){m=g;const e=p[0],n=null!==(p=i.exec(e))?p[1]:"";for(d.push(n);null!==(p=r.exec(e));){let e=0,t=0;const n=p[0];for(;null!==(p=l.exec(n));)h.x=parseFloat(p[1]),h.y=parseFloat(p[2]),h.z=parseFloat(p[3]),t++;for(;null!==(p=s.exec(n));)c.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])),u.push(h.x,h.y,h.z),e++,g++;1!==t&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+a),3!==e&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+a),a++}const o=m,v=g-m;t.userData.groupNames=d,t.addGroup(o,v,f),f++}return t.setAttribute("position",new gs(c,3)),t.setAttribute("normal",new gs(u,3)),t}("string"!=typeof(r=e)?(new TextDecoder).decode(r):r);var r}}const Dw=function(e){var t=e.modelPath,n=e.scale,r=void 0===n?[1,1,1]:n,i=e.position,a=void 0===i?[0,0,0]:i,s=e.rotation,l=void 0===s?[0,0,0]:s,c=(0,o.useRef)(),u=(0,o.useRef)(),d=Dx(Nw,t);c.current=d;var h=new Pd({color:"lightgray"});return u.current=h,(0,o.useEffect)(function(){return function(){c.current&&c.current.dispose(),u.current&&u.current.dispose()}},[]),o.createElement("mesh",{geometry:d,material:h,scale:r,position:a,rotation:l})},Uw=i.p+"src/assets/images/spaceship/full-command-setup-thumbnail.png",Ow=i.p+"src/assets/images/spaceship/full-command-setup.mp4",Fw=i.p+"src/assets/images/spaceship/environment-ideation.png",zw=i.p+"src/assets/images/spaceship/room-wireframe.png",Bw=i.p+"src/assets/images/spaceship/room-interactions-wireframe.png",Hw=i.p+"src/assets/images/spaceship/command-deck-wireframe.png",Vw=i.p+"src/assets/images/spaceship/command-deck-concept.jpeg",jw=i.p+"src/assets/images/spaceship/unity-yoke-test.png",Ww=i.p+"src/assets/images/spaceship/unity-yoke-test.mp4",Gw=i.p+"src/assets/images/spaceship/command-deck-labels.png",Xw=i.p+"src/assets/images/spaceship/component-list.png",qw=i.p+"src/assets/images/spaceship/command-deck-low-fi-prototype.jpg",Yw=i.p+"src/assets/images/spaceship/command-deck-cad-model.png",$w=i.p+"src/assets/images/spaceship/command-deck-laser-cut.jpeg",Kw=i.p+"src/assets/images/spaceship/command-deck-acrylic.png",Zw=i.p+"src/assets/images/spaceship/orb-arduino.jpg",Jw=i.p+"src/assets/images/spaceship/orb-dock.jpg",Qw=i.p+"src/assets/images/spaceship/solder.png",e_=i.p+"src/assets/images/spaceship/component-placement.png",t_=i.p+"src/assets/images/spaceship/teensy-wiring.png",n_=i.p+"src/assets/images/spaceship/light-strip-thumbnail.png",r_=i.p+"src/assets/images/spaceship/light-strip.mp4",i_=i.p+"src/assets/images/spaceship/room-setup.jpg",a_=i.p+"src/assets/images/spaceship/full-command-deck.jpg",o_=i.p+"src/assets/images/spaceship/full-command-deck-lit.jpg",s_=i.p+"src/assets/images/spaceship/room-placard.png",l_=i.p+"src/assets/images/spaceship/flight-in-action-thumbnail.png",c_=i.p+"src/assets/images/spaceship/flight-in-action.mp4",u_=i.p+"src/assets/models/sg-command-deck.stl";function d_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const h_=function(){var e,t,n=(e=(0,o.useState)([]),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d_(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],i=n[1],a=(0,o.useRef)(),s=Lw(),l=s.ErrorBoundary,c=s.didCatch;s.error,(0,o.useEffect)(function(){var e=function(t){t.preventDefault(),console.warn("WebGL context lost");var n=a.current;n&&n.removeEventListener("webglcontextlost",e),window.location.reload()},t=a.current;return t&&t.addEventListener("webglcontextlost",e),function(){t&&t.removeEventListener("webglcontextlost",e)}},[]);var u=o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:Yw,alt:"Command deck CAD model",style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,"Command deck CAD model")));return o.createElement(pb,{refs:r,setRefs:i,generateRefsFromDOM:function(e){e()}},o.createElement("div",{className:"section",id:"overview"},o.createElement("h2",{style:{display:"none"}},"Overview"),o.createElement("h1",null,'"Scavenger\'s Gain": From Hotel Room to Spaceship Adventure'),o.createElement("div",{className:"video",style:{height:"auto",width:"100%"}},o.createElement("video",{controls:!0,poster:Uw,muted:!0,className:"responsive-video"},o.createElement("source",{src:Ow,type:"video/mp4"}))),o.createElement("p",null,'"Scavenger\'s Gain" is a physically immersive experience that transports visitors from an ordinary hotel room to a magical alien planet they crash-landed on in their spaceship. The experience features a full command deck and an interactable Unity-based program that projects the "view" of the planet just outside the cockpit. The experience was developed over eight weeks and culminated in a weekend installation, attracting thousands of delighted visitors. The installation captivated our "scavengers," offering them an unforgettable adventure that seamlessly blended physical interaction with a vividly immersive alien world.'),o.createElement("p",null,"I collaborated with one other teammate to design and implement the Unity program that powered the virtual viewport experience, and I contributed to the design and development of the physical command deck that fed input into the Unity program.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"background"},o.createElement("h2",null,"Background"),o.createElement("p",null,'Inspired by themes of climate change and sustainability, our team of 25 makers received a grant for a private event to create a surreal mixed-reality experience that could engage visitors while also encouraging them to consider the real-world impact of waste production on our environment. We were given a standard hotel room as a "blank canvas," and it was up to us to decide how we wanted to transform the space. Since we would only have access to the hotel room when the experience was ready to be installed, we had to carefully plan and prototype our ideas to ensure everything would fit and work as intended.')),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"ideation"},o.createElement("h2",null,"Ideation"),o.createElement("img",{src:Fw,alt:"Environment ideation",width:"80%"}),o.createElement("p",null,'In our experience storyboard sessions, we brainstormed ideas that could incorporate the sustainability theme while also providing a fun and memorable experience for visitors. We landed on the concept of an alien planet expedition since it would allow us to create a visually stunning environment that starkly contrasts with a traditional hotel room, repurpose old junk to appear "extraterrestrial," and, on a more personal note for the lead artist and crew, propel our vision for the sci-fi future as a place where queer and BIPOC folx can express themselves freely and power innovation. We crafted the following story as the backdrop to the experience:'),o.createElement("div",{style:{display:"flex",justifyContent:"center"}},o.createElement("i",{style:{marginLeft:"10%",marginRight:"10%",textAlign:"justify"}},"You are an intergalactic scavenger who has crash-landed on a toxic alien planet. Your spaceship is low on fuel, and you need to alchemize the planet's (and your own) toxicity into energy that will power your spaceship to return home.")),o.createElement("p",null,'Since the hotel room we were assigned was quite large, we divided the room into nine different sections (see wireframes below), each with its own "toxicity alchemization" tasks.'),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:zw,alt:"Hotel room blueprint",style:{width:"90%",display:"inline-block"}}),o.createElement("figcaption",null,"Hotel room blueprint"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:Bw,alt:"Interactions wireframe",style:{width:"75%",display:"inline-block"}}),o.createElement("figcaption",null,"Interactions wireframe"))),o.createElement("p",null,"We then split into smaller teams to focus on each section, with the command deck (team of 7) and Unity program (team of 2) being the two areas I worked on."),o.createElement("h3",null,"Command Deck Ideation"),o.createElement("p",null,"We planned to use the living room as the primary space for our spaceship experience, as it was the largest and most open area that would permit multiple visitors to interact concurrently with our command deck. Then, we identified the components that our spaceship would need to operateâ€”a control console, an inner hull, a backdrop material, and a projectorâ€”and mapped them to the physical space of the living room."),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:Hw,alt:"Command deck wireframe",style:{width:"90%",display:"inline-block"}}),o.createElement("figcaption",null,"Command deck wireframe"))),o.createElement("p",null,"We then sketched out the command deck, which would be the primary interface for visitors to interact with our spaceship. The command deck would feature a plane yoke to control the spaceship's pitch and roll, embedded screens to display the ship's status, a projector to display the virtual alien planet that would eventually be rendered by the Unity program, and a series of buttons to change the appearance of the alien environment. We designed the command deck to wrap slightly around the pilot so that multiple visitors could be in the cockpit at once and introduce an element of chaos by smashing random buttons to see what would happen."),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:Vw,alt:"Command deck wireframe",style:{width:"90%",display:"inline-block"}}),o.createElement("figcaption",null,"Command deck concept"))),o.createElement("h3",null,"Unity Program Ideation"),o.createElement("p",null,"Since we expected to have hundreds of visitors pass through our room each day, we decided to constrain the spaceship-flying experience to around two minutes. We also wanted to promote the storyline that we needed to escape the planet, so we broke the flying experience into four stages:"),o.createElement("ol",null,o.createElement("li",null,o.createElement("b",null,"Pre-Launch"),o.createElement("ul",null,o.createElement("li",null,"The spaceship is grounded on the alien planet and awaiting launch."))),o.createElement("li",null,o.createElement("b",null,"Launch"),o.createElement("ul",null,o.createElement("li",null,"The spaceship enters autopilot mode and takes off (10 seconds)."))),o.createElement("li",null,o.createElement("b",null,"Manual Flight"),o.createElement("ul",null,o.createElement("li",null,'The spaceship hits a maximum altitude before visitors encounter a "Low on Fuel" warning then starts descending slowly, and the pilot must manually fly the spaceship to crash-land (2 minutes).'))),o.createElement("li",null,o.createElement("b",null,"Crash"),o.createElement("ul",null,o.createElement("li",null,'The spaceship crashes after the time-out, and the experience restarts at the "Pre-Launch" stage (5 seconds).')))),o.createElement("p",null,"We identified our MVP for the Unity program as a looping spaceflight experience that would receive input from an externally connected plane yoke. We also came up with a list of cool environmental effects that we could add to the program:"),o.createElement("ul",null,o.createElement("li",null,"Weather manipulation (e.g., lightning, ocean turbulence, etc.)"),o.createElement("li",null,"Daylight control/sun positioning"),o.createElement("li",null,"Terrain alterations (e.g., removing mountains, plants, etc.)"),o.createElement("li",null,"Visual glitch effect overlays"),o.createElement("li",null,"Trash dumps from the sky"),o.createElement("li",null,"Sound effects"))),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"unity-dev"},o.createElement("h2",null,"Unity Development"),o.createElement("div",{className:"video-youtube"},o.createElement("iframe",{className:"responsive-iframe",src:"https://www.youtube.com/embed/agH22ejwzK4?si=c_UQcTQsZM8kMmQ6",title:"Unity Flight Experience",frameBorder:"0",allow:"autoplay; encrypted-media;",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})),o.createElement("br",null),o.createElement("i",{style:{display:"flex",justifyContent:"center"}},"Unity flight experience run-through"),o.createElement("p",null,"We purchased the ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://assetstore.unity.com/packages/3d/environments/sci-fi/alien-planet-fantasy-environment-jungle-plants-258132"},'"Alien Planet" asset bundle')," from the Unity Asset Store. The bundle included the alien planet's environment, terrain, plants, mountains, and lighting. Because many properties of the environment were easily accessible via script (e.g., the sun's position, groups of objects, colors, etc.), we could map these customizable components to the buttons on the command deck, allowing visitors to change the environment in real time."),o.createElement("p",null,"To add visual glitch effects to the experience, we used the ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://assetstore.unity.com/packages/vfx/shaders/fullscreen-camera-effects/limitless-glitch-effects-148376"},'"Limitless Glitch Effects" asset'),", which provided us with dozens of post-processing effects that we could apply to the rendered scene."),o.createElement("p",null,'To power the "Autopilot Launch" stage of the experience, we used the ',o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://assetstore.unity.com/packages/tools/physics/controlled-flight-177439"},'"Controlled Flight" asset')," which provided us with guided missile scripts that we applied to our in-scene camera to guide it along custom-specified waypoints that spiral upwards into the sky."),o.createElement("p",null,'To enable "Manual Flight" mode, we used a custom script to translate input from the plane yoke into pitch and roll values that we applied to the camera. We simulated the spaceship\'s descent by applying a constant downward speed to the camera until the flight timed out.'),o.createElement("div",{className:"video",style:{height:"auto",width:"100%"}},o.createElement("video",{controls:!0,poster:jw,muted:!0,className:"responsive-video"},o.createElement("source",{src:Ww,type:"video/mp4"}))),o.createElement("p",null,"We also used Unity's Input System to process button and potentiometer/slider inputs from the command deck and trigger the various environmental effects we had planned. For testing purposes, we mapped the flight controls and effects to a keyboard and mouse, which allowed us to quickly iterate on the experience while the physical components were still being built."),o.createElement("p",null,'We controlled the sequence of stages through a custom script that transitioned between the "Pre-Launch," "Launch," "Manual Flight," and "Crash" stages based on user input and experience timing. If visitors drop below a certain altitude during the "Manual Flight" stage, the experience will automatically transition to the "Crash" stage (this is possible if they accidentally engage the "Gravity" toggle switch).'),o.createElement("p",null,"We created a custom text overlay that cued visitors to the current stage of the experience. Additionally, we added a jungle-like background soundtrack and triggerable sound effects to enhance immersion."),o.createElement("p",null,"Once we were ready to test the Unity program with the physical command deck, we built it into an executable application and ran it on a desktop connected to the projector and the command deck.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"deck-prototypes"},o.createElement("h2",null,"Command Deck Prototypes"),o.createElement("h3",null,"Low-Fidelity Prototype"),o.createElement("p",null,"We took our initial command deck sketch and modified it to include various components we wanted to incorporate into the final design. Below is a partial list of components that we wanted to match to the diagram of the command deck. We picked out components that we thought would be fun to interact with and straightforward to process through a Teensy microcontroller or MIDI input."),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:Gw,alt:"Labeled command deck",style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,"Command deck diagram"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:Xw,alt:"Component list",style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,"Partial list of components to match to labels"))),o.createElement("p",null,"From this schematic, we built a low-fidelity prototype of the command deck with cardboard. This prototype allowed us to test the deck's ergonomics and adjust the design before moving on to the high-fidelity prototype."),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:qw,alt:"Command deck low-fidelity prototype",style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,"Command deck low-fidelity prototype"))),o.createElement("h3",null,"High-Fidelity Prototype"),o.createElement("p",null,"Once we verified our low-fidelity prototype could accommodate all of our components, we moved on to building the high-fidelity prototype. We modeled the command deck in Fusion 360, laser-cut the panels out of half-inch plywood, and surfaced the deck with a white vinyl wrap and laser-cut acrylic."),c?u:o.createElement(o.Fragment,null,o.createElement("div",{className:"interaction-instructions"},"Drag and zoom to interact with the model below"),o.createElement("div",{style:{border:"2px solid #706EF5",padding:"10px",borderRadius:"5px",margin:"20px 0"}},o.createElement(l,null,o.createElement(Cw,{ref:a,camera:{position:[5,5,5],fov:50},style:{height:"50vh",width:"100%"},gl:{antialias:!0,powerPreference:"high-performance"},fallback:u,onCreated:function(e){var t=e.gl;return t.setPixelRatio(window.devicePixelRatio),function(){scene.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&(Array.isArray(e.material)?e.material.forEach(function(e){return e.dispose()}):e.material.dispose())}),t.dispose()}}},o.createElement("ambientLight",{intensity:1}),o.createElement("directionalLight",{position:[3,5,0],intensity:1}),o.createElement(o.Suspense,{fallback:null},o.createElement(Dw,{modelPath:u_,scale:[1,1,1],rotation:[0,-.75,2]})),o.createElement(Pw,null))))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:$w,alt:"Laser-cut command deck based on model",style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,"Laser-cut command deck based on model"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:Kw,alt:"Acrylic surface on the command deck",style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,"Vinyl wrap and acrylic surface on the command deck"))),o.createElement("p",null,"When the command deck frame was assembled, we placed the components into their corresponding slots. We used the following components in the final design:"),o.createElement("ul",null,o.createElement("li",null,"Plane yoke"),o.createElement("li",null,"MIDI controller"),o.createElement("li",null,"Toggle switches"),o.createElement("li",null,"Sliders"),o.createElement("li",null,"Buttons"),o.createElement("li",null,"Dials"),o.createElement("li",null,"Jog wheels"),o.createElement("li",null,"Lever"),o.createElement("li",null,"NeoTrellis"),o.createElement("li",null,"Programmable LED strips"),o.createElement("li",null,"Custom 3D-printed orb and orb dock")),o.createElement("p",null,"The orb dock component was custom-designed to initiate the spaceship's launch sequence when an orb was placed in the dock. The orb and the dock were 3D-printed and fitted with Arduinos, NeoPixel LED rings, and near-field communication transmitters."),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:Zw,alt:"Orb with Arduinos",style:{width:"90%",display:"inline-block",marginRight:"2%"}}),o.createElement("figcaption",null,"Orb with Arduinos")),o.createElement("figure",null,o.createElement("img",{src:Jw,alt:"Orb with dock",style:{width:"90%",display:"inline-block"}}),o.createElement("figcaption",null,"Orb with dock"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:Qw,alt:"Soldering components together",style:{width:"40%",display:"inline-block"}}),o.createElement("figcaption",null,"Soldering components together"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:e_,alt:"Component placement",style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,"Component placement"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:t_,alt:"Teensy wiring",style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,"Teensy wiring"))),o.createElement("p",null,"We powered the components using a multiplexer hooked into a 5-volt power supply. We processed the analog input through three Teensy microcontrollers (one for each command deck section) connected to the desktop running the Unity program. Some components (e.g., LED strips, NeoTrellis, and sliders) were directly processed by the Teensy, which had Arduino code flashed onto it to handle more of the simple input processing."),o.createElement("div",{className:"video",style:{height:"auto",width:"100%"}},o.createElement("video",{controls:!0,poster:n_,muted:!0,className:"responsive-video"},o.createElement("source",{src:r_,type:"video/mp4"}))),o.createElement("br",null),o.createElement("i",{style:{display:"flex",justifyContent:"center"}},"Light strip controlled by sliders"),o.createElement("p",null,"For the components that would be processed within the Unity program, such as the jog wheels, we converted the analog signals into digital signals through the Teensy, then we passed those signals along to Unity as human interface device (HID) inputs (e.g., keyboard, mouse, and joystick). We initially wanted to set up these components to send MIDI signals. Due to unexpected platform compatibility issues and time constraints, we opted for the alternative HID input method via USB. The Unity program had mappings for each Teensy input, which allowed us to trigger the various environmental effects within the experience.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"installation"},o.createElement("h2",null,"Installation"),o.createElement("p",null,'The setup of "Scavenger\'s Gain" took place over three days. The experience remained open for three more days, during which we had a constant stream of visitors eager to try out the spaceship experience among other "toxicity alchemization" activities.'),o.createElement("div",{className:"video",style:{height:"auto",width:"100%"}},o.createElement("video",{controls:!0,poster:l_,className:"responsive-video"},o.createElement("source",{src:c_,type:"video/mp4"}))),o.createElement("br",null),o.createElement("i",{style:{display:"flex",justifyContent:"center"}},"Flight in action!"),o.createElement("br",null),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:i_,alt:"Full experience setup",style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,"Full experience setup"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:a_,alt:"Full command deck setup",style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,"Full command deck setup"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:o_,alt:"Full command deck setup (low lighting)",style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,"Full command deck setup (low lighting)"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:s_,alt:"Experience placard",style:{width:"90%",display:"inline-block"}}),o.createElement("figcaption",null,"Experience placard")))),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"reflections"},o.createElement("h2",null,"Reflections"),o.createElement("ul",null,o.createElement("li",null,o.createElement("b",null,"Aim for the moon, settle for the skies."),o.createElement("ul",null,o.createElement("li",null,"We were extremely ambitious with our project, so it was essential that we prioritized our MVP features, such as the flying functionality within Unity, and then built out additional features as time allowed. By focusing on the core experience first, we ensured we would have a fun, working experience even if we ran out of time to implement all of our stretch goals."))),o.createElement("li",null,o.createElement("b",null,"Improvisation is part of the creative process."),o.createElement("ul",null,o.createElement("li",null,"We stumbled over many roadblocks during the creation of this experience, such as platform compatibility issues, component failures, and model measurement discrepancies. By being flexible and keeping morale high, we could quickly pivot and find alternative solutions to our problems (e.g., using keyboard inputs instead of MIDI inputs, hot-gluing sensors onto jog wheels, and drilling our laser-cut plywood). This allowed us to stay on track and deliver a successful experience."))),o.createElement("li",null,o.createElement("b",null,"Experimenting is half the fun."),o.createElement("ul",null,o.createElement("li",null,"One of the best parts of working on a huge art project with a large team is that I got to experiment with so many different technologies that I had not worked with professionally, such as the hardware components used in the command deck. I learned a lot from my teammates who all brought different areas of expertise to the project, and I was grateful to contribute my knowledge as a resident Unity expert."))))))},p_=i.p+"src/assets/images/local-hive/needfinding-interviews.png",f_=i.p+"src/assets/images/local-hive/initial-synthesis.jpg",m_=i.p+"src/assets/images/local-hive/affinity-map.jpg",g_=i.p+"src/assets/images/local-hive/community-leader-empathy-map.png",v_=i.p+"src/assets/images/local-hive/community-member-empathy-map.png",y_=i.p+"src/assets/images/local-hive/2-by-2-journey-map-sticky-notes.png",b_=i.p+"src/assets/images/local-hive/2-by-2-journey-map-condensed.png",x_=i.p+"src/assets/images/local-hive/hmw-ideation.jpg",w_=i.p+"src/assets/images/local-hive/hmw-affinity-grouping.jpg",__=i.p+"src/assets/images/local-hive/hmw-solution-brainstorm.png",E_=i.p+"src/assets/images/local-hive/hmw-solution-final-ideas.png",S_=i.p+"src/assets/images/local-hive/e1-prototype-1.png",M_=i.p+"src/assets/images/local-hive/e1-prototype-2.png",T_=i.p+"src/assets/images/local-hive/concept-sketches.png",A_=i.p+"src/assets/images/local-hive/ui-sketch-1.jpg",C_=i.p+"src/assets/images/local-hive/ui-sketch-2.jpg",R_=i.p+"src/assets/images/local-hive/ui-sketch-3.jpg",P_=i.p+"src/assets/images/local-hive/easy-task-flow.png",k_=i.p+"src/assets/images/local-hive/medium-task-flow.png",I_=i.p+"src/assets/images/local-hive/complex-task-flow.png",L_=i.p+"src/assets/images/local-hive/low-fi-overview.jpg",N_=i.p+"src/assets/images/local-hive/med-fi-1-figma-overview.png",D_=i.p+"src/assets/images/local-hive/med-fi-1-join-task-flow.png",U_=i.p+"src/assets/images/local-hive/med-fi-1-create-task-flow.png",O_=i.p+"src/assets/images/local-hive/med-fi-1-monitor-task-flow.png",F_=i.p+"src/assets/images/local-hive/med-fi-2-figma-overview.png",z_=i.p+"src/assets/images/local-hive/heuristic-violations.png",B_=i.p+"src/assets/images/local-hive/med-fi-1-home.png",H_=i.p+"src/assets/images/local-hive/med-fi-2-home.png",V_=i.p+"src/assets/images/local-hive/med-fi-3-home.png",j_=i.p+"src/assets/images/local-hive/full-app-thumbnail.png",W_=i.p+"src/assets/images/local-hive/full-app.mp4",G_=i.p+"src/assets/images/local-hive/app-website.png",X_=i.p+"src/assets/images/local-hive/poster.png";function q_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Y_=function(){var e,t,n=(e=(0,o.useState)([]),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return q_(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],i=n[1];return o.createElement(pb,{refs:r,setRefs:i,generateRefsFromDOM:function(e){e()}},o.createElement("div",{className:"section",id:"overview"},o.createElement("h2",{style:{display:"none"}},"Overview"),o.createElement("h1",null,'"Local Hive": A Human-Centered AI Project'),o.createElement("div",{className:"interaction-instructions"},"Interact with the Figma prototype below"),o.createElement("br",null),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"}},o.createElement("iframe",{style:{border:"1px solid rgba(0, 0, 0, 0.1)"},width:"400px",height:"800px",src:"https://embed.figma.com/proto/buMWRU5wtJCUicu4OEGfRn/Local-Hive?scaling=scale-down&content-scaling=fixed&page-id=0%3A1&node-id=7-8&embed-host=share&client-id=W0bOyp7s8UCjcCHJYXANQr",allowFullScreen:!0},"This Figma prototype does not support embedding."))),o.createElement("br",null),o.createElement("p",null,'"Local Hive" is an app-hosted platform designed to strengthen community cohesion by enabling users to create and join projects, volunteer, and exchange skills.'),o.createElement("p",null,'In my Stanford undergraduate studies, I took "',o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://hci.stanford.edu/courses/cs377e/2019/sp/"},"CS 377E"),': Designing Solutions to Global Grand Challenges: Human-Centered AI," where my team of four applied design thinking to a quarter-long project at the intersection of healthcare and smart technology. Over ten weeks, we progressed from ideation to prototyping, ultimately presenting our award-winning product at a public fair.'),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"background-research"},o.createElement("h2",null,"Background Research"),o.createElement("p",null,"We focused on applying human-centered AI for social good. One team member, from Colombia, directed our attention to issues in Buenaventura, a seaport city affected by poverty, violence, and unemployment. Research showed that enhancing social infrastructureâ€”trust, collaboration, and self-organizationâ€”was crucial for community resilience in conflict-affected areas (Aldrich & Meyer, 2015). Based on these insights, we developed a solution that utilized time banking, AI, and blockchain to reinforce social ties and promote economic self-sufficiency. We then moved to the needfinding phase to ensure our design aligned with community goals.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"needfinding"},o.createElement("h2",null,"Needfinding"),o.createElement("p",null,"We interviewed eight peopleâ€”two from Buenaventura, Colombia, and six from Palo Alto, California, including self-identified community leaders and members. We wanted to understand the differences between the two communities and break out of our Palo Alto bubble."),o.createElement("p",null,"We explored five topics:"),o.createElement("ol",null,o.createElement("li",null,o.createElement("b",null,"Community Description:")," Characteristics, demographics, and culture."),o.createElement("li",null,o.createElement("b",null,"Community Problems:")," Challenges like poverty, violence, and resource scarcity."),o.createElement("li",null,o.createElement("b",null,"Interconnectivity:")," Social cohesion and relationships with other communities."),o.createElement("li",null,o.createElement("b",null,"Outstanding Members/Projects:")," Key figures or initiatives driving positive change."),o.createElement("li",null,o.createElement("b",null,"Applying Social Capital:")," Interest in time banking for community improvement.")),o.createElement("p",null,'After conducting the interviews, we compiled the responses into a spreadsheet and synthesized the insights using sticky notes. We grouped them by interviewer and were guided by the question, "How might we help communities overcome crises?"'),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:p_,alt:"Needfinding Interviews",style:{width:"90%",display:"inline-block"}}),o.createElement("figcaption",null,"Combined needfinding interviews"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:f_,alt:"Initial Synthesis",style:{width:"50%",display:"inline-block"}}),o.createElement("figcaption",null,"Interview synthesis"))),o.createElement("p",null,'Using an affinity map, we categorized insights into themes like leadership qualities, community obstacles, and infrastructure issues, identifying "super-members" who demonstrated leadership. This helped us distill our findings into two empathy mapsâ€”one for community leaders and one for community members.'),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:m_,alt:"Affinity Map",style:{width:"70%",display:"inline-block"}}),o.createElement("figcaption",null,"Affinity map"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:g_,alt:"Community Leader Empathy Map",style:{width:"70%",display:"inline-block",marginRight:"2%"}}),o.createElement("figcaption",null,"Community leader empathy map")),o.createElement("figure",null,o.createElement("img",{src:v_,alt:"Community Member Empathy Map",style:{width:"70%",display:"inline-block"}}),o.createElement("figcaption",null,"Community member empathy map"))),o.createElement("p",null,"We also created a 2x2 journey map contrasting community cohesion (low vs. high) with leadership (leaders vs. members). This revealed that self-organization occurs when leadership and membership roles blur into equal collaboration."),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:y_,alt:"Initial 2x2 Journey Map",style:{width:"90%",display:"inline-block",marginRight:"2%"}}),o.createElement("figcaption",null,"Initial 2x2 journey map using sticky notes from past exercises")),o.createElement("figure",null,o.createElement("img",{src:b_,alt:"Condensed 2x2 Journey Map",style:{width:"70%",display:"inline-block"}}),o.createElement("figcaption",null,"Condensed 2x2 journey map"))),o.createElement("br",null),o.createElement("p",null,"Key insights:"),o.createElement("ol",null,o.createElement("li",null,"Communities vary in cohesion levels."),o.createElement("li",null,"Low-cohesion communities have clear leaders."),o.createElement("li",null,"Medium-cohesion communities see members taking on larger roles."),o.createElement("li",null,"High-cohesion communities operate by consensus, with little distinction between leaders and members."),o.createElement("li",null,"As cohesion increases, learned leadership skills influence members and empower new leaders."),o.createElement("li",null,"Technology use varies: communication in low-cohesion and collaboration in high-cohesion groups."),o.createElement("li",null,"Helping is essential in low-cohesion communities, while it's voluntary in high-cohesion ones."),o.createElement("li",null,"Leaders demand recognition in low-cohesion settings but are more understated in high-cohesion communities.")),o.createElement("p",null,'With these insights, we felt prepared to move on to generating "Point of View" and "How Might We" statements.')),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"pov-hmw"},o.createElement("h2",null,'"POV"s and "HMW"s'),o.createElement("p",null,"From our interviews, we identified three key points of view:"),o.createElement("ol",null,o.createElement("li",null,'"Leonard" (community leader): He connects external resources with internal needs but often overlooks local talent, highlighting a need to shift leaders\' focus to leveraging internal resources first.'),o.createElement("li",null,'"Ashley" (aspiring social worker in Buenaventura): She feels exclusionary leadership prevents her from stepping up. Dismantling existing structures could empower new leaders and foster inclusivity.'),o.createElement("li",null,"Palo Alto cooperative living members: They have a knowledge-sharing network, but unequal voice distribution indicates a need for a more balanced and collaborative environment.")),o.createElement("p",null,'These POVs led us to brainstorm 53 "How Might We" (HMW) statements, which we organized into affinity groups. After voting, we focused on three themes:'),o.createElement("ul",null,o.createElement("li",null,"Members Speak Up"),o.createElement("li",null,"Searching for Resources"),o.createElement("li",null,"Teaching Skills")),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:x_,alt:"HMW Ideation",style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,"HMW ideation"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:w_,alt:"HMW Affinity Grouping",style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,"HMW affinity grouping"))),o.createElement("p",null,"From these themes, we generated the following HMW statements:"),o.createElement("ol",null,o.createElement("li",null,o.createElement("b",null,"How might we break down hierarchical community structures that prevent new leaders from speaking up?")),o.createElement("li",null,o.createElement("b",null,"How might we advertise a community member's skills more broadly?")),o.createElement("li",null,o.createElement("b",null,"How might we encourage skill sharing and recruitment within the community?"))),o.createElement("p",null,"With our finalized HMWs, we proceeded to the solution ideation phase.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"solution-ideation"},o.createElement("h2",null,"Solution Ideation"),o.createElement("p",null,"We held another sticky note brainstorming session, generating 48 ideas for our three HMW groups. After voting, we narrowed it down to 34 options."),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:__,alt:"HMW Solution Brainstorm",style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,"HMW solution brainstorm"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:E_,alt:"HMW Solution Final Ideas",style:{width:"60%",display:"inline-block"}}),o.createElement("figcaption",null,"HMW solution final ideas"))),o.createElement("p",null,"In a final voting round, we selected four ideas:"),o.createElement("ul",null,o.createElement("li",null,"Matching/apprenticeship program connecting learners with mentors"),o.createElement("li",null,"A platform for leaders and community members to post and find needed skills"),o.createElement("li",null,"Pop-up classes/skill teach-ins"),o.createElement("li",null,"(Darkhorse idea) Hackathon")),o.createElement("p",null,"Next, we moved into an experimental phase to determine the best candidate for our project.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"experience-prototypes"},o.createElement("h2",null,"Experience Prototypes"),o.createElement("p",null,"We developed three experience prototypes based on our solution ideation exercise. Each prototype was designed to test a specific hypothesis over the course of a week, after which we analyzed the testing results."),o.createElement("h3",null,"EP #1: Skills and Services Marketplace"),o.createElement("img",{src:S_,alt:"EP 1 Prototype 1",width:"100%"}),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:M_,alt:"EP 1 Prototype 2",style:{width:"40%",display:"inline-block"}}),o.createElement("figcaption",null,"Matching members to tasks based on their listed skills"))),o.createElement("p",null,o.createElement("b",null,"Hypothesis:")," Members are more motivated to seek help if they know their neighbors' skills."),o.createElement("p",null,o.createElement("b",null,"Method:")," We presented a spreadsheet of skilled community members and tasks to a Palo Alto co-op member."),o.createElement("span",null,o.createElement("b",null,"Results:")),o.createElement("ul",null,o.createElement("li",null,"(+) Task matching was intuitive."),o.createElement("li",null,"(+) The table of people with skills was easy to read."),o.createElement("li",null,"(-) Projects may stagnate without appropriate skills."),o.createElement("li",null,"(-) Funding is essential for some projects.")),o.createElement("span",null,o.createElement("b",null,"Validity:")),o.createElement("ul",null,o.createElement("li",null,"Our hypothesis was valid, as the visibility of each member's skills enabled more effective collaboration to complete tasks."),o.createElement("li",null,"A new assumption emerged that some members need to start with social capital to post tasks.")),o.createElement("h3",null,'EP #2: Hold a "Hackathon" of Community Service'),o.createElement("p",null,o.createElement("b",null,"Hypothesis:")," Shared activities enhance social connections and understanding of individual skills."),o.createElement("p",null,o.createElement("b",null,"Method:")," Conducted a group chat ideation session with a leader and member from Buenaventura."),o.createElement("span",null,o.createElement("b",null,"Results:")),o.createElement("ul",null,o.createElement("li",null,"(+) Social goals effectively recruited people."),o.createElement("li",null,"(-) Activities highlighted skills, but users wanted to know others' intentions.")),o.createElement("span",null,o.createElement("b",null,"Validity:")),o.createElement("ul",null,o.createElement("li",null,"The hypothesis was not valid; low-cohesion communities struggle to identify available help and lack knowledge of others' skills.")),o.createElement("h3",null,"EP #3: Creating More Leaders"),o.createElement("p",null,o.createElement("b",null,"Hypothesis:")," Taking ownership fosters leadership development."),o.createElement("p",null,o.createElement("b",null,"Method:")," Developed a chatbot for a gardening simulation."),o.createElement("span",null,o.createElement("b",null,"Results:")),o.createElement("ul",null,o.createElement("li",null,"(+) Participation was easy, and the storyline engaged users."),o.createElement("li",null,"(-) Texting in person felt awkward, and knowledgeable participants were less interested.")),o.createElement("span",null,o.createElement("b",null,"Validity:")),o.createElement("ul",null,o.createElement("li",null,"The hypothesis was valid as the simulation allowed participants to make quick judgments under stress, but the results did not indicate long-term leadership success.")),o.createElement("h3",null,"EP Outcomes: Analysis"),o.createElement("p",null,'After testing the prototypes, we moved forward with EP #1, the "Skills and Services Marketplace," as it showed the most promise for fostering community cohesion. We were ready for the initial prototyping stages.')),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"low-fi-prototype"},o.createElement("h2",null,"Low-Fidelity Prototype"),o.createElement("p",null,"We branded ourselves as ",o.createElement("b",null,"Local Hive"),", defining our mission/problem/solution/value proposition:"),o.createElement("ul",null,o.createElement("li",null,o.createElement("b",null,"Mission:")," Boost projects and build skills through community support."),o.createElement("li",null,o.createElement("b",null,"Problem:")," How can community members support each other at a distance?"),o.createElement("li",null,o.createElement("b",null,"Solution:")," Create a marketplace for projects and skills using volunteering time as currency."),o.createElement("li",null,o.createElement("b",null,"Value Proposition:")," Foster community cohesion and social capital.")),o.createElement("h3",null,"Concept Sketches"),o.createElement("img",{src:T_,alt:"Concept Sketches",width:"100%"}),o.createElement("p",null,"We sketched concepts focusing on four input modalities: web, mobile, AR, and existing platforms (Slack, iMessage, etc.). After voting, we chose web and mobile for further UI sketches."),o.createElement("h3",null,"UI Sketches"),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:A_,alt:"Mobile UI Sketch 1",style:{width:"90%",display:"inline-block",marginRight:"2%"}}),o.createElement("figcaption",null,"Mobile UI sketch 1")),o.createElement("figure",null,o.createElement("img",{src:C_,alt:"Mobile UI Sketch 2",style:{width:"90%",display:"inline-block"}}),o.createElement("figcaption",null,"Mobile UI sketch 2"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:R_,alt:"Web UI Sketch",style:{width:"40%",display:"inline-block"}}),o.createElement("figcaption",null,"Web UI sketch"))),o.createElement("p",null,"Once we completed our UI sketches, we determined that a ",o.createElement("b",null,"mobile app")," was the best option because:"),o.createElement("ol",null,o.createElement("li",null,"Users commonly use phones to organize information."),o.createElement("li",null,"Push notifications appeal to users for immediate community connections."),o.createElement("li",null,"Existing social networking mental models are linked to mobile devices.")),o.createElement("p",null,"With this decision, we defined task flows to guide our low-fidelity prototype design."),o.createElement("h3",null,"Task Flows"),o.createElement("p",null,"We structured screens around tasks of varying difficulty:"),o.createElement("ol",null,o.createElement("li",null,o.createElement("b",null,"Easy Task: Joining a project"),"â€”signing up, exploring projects, finding a fit, and optionally contacting the leader."),o.createElement("li",null,o.createElement("b",null,"Medium Task: Creating a project"),"â€”specifying details, recruiting users, and posting."),o.createElement("li",null,o.createElement("b",null,"Complex Task: Monitoring community involvement"),"â€”project leaders tracking contributions and users monitoring their engagement.")),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:P_,alt:"Easy Task Flow",style:{width:"70%",display:"inline-block"}}),o.createElement("figcaption",null,"Easy task flow"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:k_,alt:"Medium Task Flow",style:{width:"70%",display:"inline-block"}}),o.createElement("figcaption",null,"Medium task flow"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:I_,alt:"Complex Task Flow",style:{width:"70%",display:"inline-block"}}),o.createElement("figcaption",null,"Complex task flow"))),o.createElement("h3",null,"Low-Fi Prototype Screens"),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:L_,alt:"Low-Fi Overview",style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,"Low-fi prototype"))),o.createElement("p",null,"With task flows in place, we sketched 17 screens for our low-fi prototype, utilizing plastic film to simulate buttons. Design decisions emphasized:"),o.createElement("ul",null,o.createElement("li",null,"Encouraging users to engage in projects beyond their skillset."),o.createElement("li",null,"Valuing connections as much as the work."),o.createElement("li",null,"Influencing AI recommendations based on user goals.")),o.createElement("h3",null,"User Testing"),o.createElement("p",null,"We conducted 20-minute tests with three participants of different ages and backgrounds, guiding them through tasks using our paper prototype. Our team alternated roles as facilitator, â€œcomputer,â€ and notetaker."),o.createElement("p",null,"Critical Incidents:"),o.createElement("ul",null,o.createElement("li",null,"The attitudinal screen confused users."),o.createElement("li",null,"Participants wanted specific project screens."),o.createElement("li",null,"Users focused more on personal projects than community status.")),o.createElement("p",null,"Critical Successes:"),o.createElement("ul",null,o.createElement("li",null,"Positive responses to creating projects."),o.createElement("li",null,"The combined presence of people and projects was helpful."),o.createElement("li",null,"Tree visualization symbolizing community growth was appreciated.")),o.createElement("p",null,"Takeaways:"),o.createElement("ul",null,o.createElement("li",null,"(+) The social network aspect was intuitive."),o.createElement("li",null,"(+) Joining a community was straightforward."),o.createElement("li",null,"(-) The point system needs clarity."),o.createElement("li",null,"(-) Screen navigation requires streamlining.")),o.createElement("p",null,"Following this evaluation, we began developing our medium-fidelity prototype using insights from our user testing.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"med-fi-prototype"},o.createElement("h2",null,"Medium-Fidelity Prototype"),o.createElement("p",null,"In developing our med-fi prototype, we incorporated feedback from low-fi testing, including:"),o.createElement("ul",null,o.createElement("li",null,"Gifting users an initial amount of points (Honey Money) upon signup."),o.createElement("li",null,"Adding due dates and locations for tasks."),o.createElement("li",null,"Displaying experience gained from community involvement.")),o.createElement("p",null,'We aimed to test the "Honey Money" time banking system, where users begin with 50 Honey Money (10 equaling one hour of work) to create projects or join others. Users could view their balance, experience, and transaction history on a Wallet Page.'),o.createElement("p",null,"We also developed a taxonomy of skills for users' profiles and project listings. AI would recommend projects based on users' qualifications and interests."),o.createElement("p",null,"Using Figma, we built our ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.figma.com/proto/TbrcDULHQr9qFZoErKRLgp/Local-Hive-Med-Fi-1?t=rVYiSmG48lrdt6XP-1&scaling=scale-down&content-scaling=fixed&page-id=0%3A1&node-id=46-8"},"first med-fi prototype"),"."),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:N_,alt:"Med-Fi #1 Figma overview",style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,"Med-fi #1 Figma overview"))),o.createElement("p",null,"Our prototype included our three task flows:"),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:D_,alt:'"Join a Project" Task Flow',style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,'Med-fi "Join a Project" task flow'))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:U_,alt:'"Create a Project" Task Flow',style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,'Med-fi "Create a Project" task flow'))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:O_,alt:'"Monitor a Community" Task Flow',style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,'Med-fi "Monitor a Community" task flow'))),o.createElement("p",null,"We tested four participants for ten minutes each as they navigated the tasks. Our test plan aimed to assess:"),o.createElement("ol",null,o.createElement("li",null,"Task completion likability and excitement without guidance."),o.createElement("li",null,"The order of actions taken."),o.createElement("li",null,"Preferences for joining versus creating projects."),o.createElement("li",null,"Language adjustments for participation encouragement.")),o.createElement("p",null,"Results indicated the need to:"),o.createElement("ul",null,o.createElement("li",null,'Simplify the "Honey Money" concept.'),o.createElement("li",null,"Rephrase onboarding instructions."),o.createElement("li",null,"Add a sub-task list above the join button."),o.createElement("li",null,"Include a social media button for recruiting."),o.createElement("li",null,"List required skills on tasks.")),o.createElement("p",null,"Based on these insights, we iterated our design for a ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.figma.com/proto/zsqCeA8iudrpugVS2L78DH/Local-Hive-Med-Fi-2?t=mSTQmXJW3jnYlprY-1&scaling=scale-down&content-scaling=fixed&page-id=0%3A1&node-id=153-90"},"second med-fi Figma prototype")," before moving to the heuristic evaluation phase."),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:F_,alt:"Med-Fi 2 Figma Overview",style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,"Med-Fi #2 Figma overview"))),o.createElement("h3",null,"Heuristic Evaluation"),o.createElement("p",null,"In this phase, four evaluators tested our Figma prototype, identifying 46 heuristic violations across ten categories:"),o.createElement("ol",null,o.createElement("li",null,"Visibility of Status"),o.createElement("li",null,"Match System & World"),o.createElement("li",null,"User Control"),o.createElement("li",null,"Consistency"),o.createElement("li",null,"Error Prevention"),o.createElement("li",null,"Recognition not Recall"),o.createElement("li",null,"Efficiency of Use"),o.createElement("li",null,"Minimalist Design"),o.createElement("li",null,"Help Users with Errors"),o.createElement("li",null,"Documentation")),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:z_,alt:"Heuristic Violations Summary",style:{width:"100%",display:"inline-block"}}),o.createElement("figcaption",null,"Heuristic violations summary"))),o.createElement("p",null,"An example of feedback received:"),o.createElement("div",{style:{display:"flex",justifyContent:"center"}},o.createElement("p",{style:{marginLeft:"10%",marginRight:"10%",textAlign:"justify"}},o.createElement("b",null,"[H6: Recognition not Recall][Severity: 3]"),o.createElement("br",null),o.createElement("i",null,"Evaluators: 1, 2, 3, 4"),o.createElement("br",null),o.createElement("br",null),"What is the difference between the buzz page and the projects page? It's not intuitive that the buzz page includes projects that you are not currently â€œenrolledâ€ in. I think that searching for new projects and looking at the ones that you are already signed up for should just all be in the same place. It makes it confusing to need to remember where the different things regarding the projects are.",o.createElement("br",null),o.createElement("br",null),'Fix: Make them one category and have subcategories for searching through projects easily or, on the project page, have a "Buzz Someone Else" button in addition to a "Join Project" button.')),o.createElement("p",null,"We carefully considered each of the 46 violations and designated action items to incorporate into our ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.figma.com/proto/PUgA7RSwxzDfS2i21OMHYR/Local-Hive-Med-Fi-3?node-id=153-90&p=f&t=ybFCAQlF88cWjT8M-1&scaling=scale-down&content-scaling=fixed&page-id=0%3A1"},"third med-fi prototype")," iteration. We categorized violations into four areas for action:"),o.createElement("ul",null,o.createElement("li",null,o.createElement("b",null,"Conceptual Clarification:")," Simplify onboarding with concise explanations of app concepts."),o.createElement("li",null,o.createElement("b",null,"Content Sizing:")," Declutter pages for relevance."),o.createElement("li",null,o.createElement("b",null,"Information Consistency:")," Standardize key details across screens."),o.createElement("li",null,o.createElement("b",null,"Task Prioritization:")," Emphasize actionable tasks on the home screen.")),o.createElement("p",null,"The progression between our three med-fi prototypes:"),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:B_,alt:"First Med-Fi Prototype Home Screen",style:{width:"90%",display:"inline-block",marginRight:"2%"}}),o.createElement("figcaption",null,"First med-fi prototype home screen")),o.createElement("figure",null,o.createElement("img",{src:H_,alt:"Second Med-Fi Prototype Home Screen",style:{width:"90%",display:"inline-block",marginRight:"2%"}}),o.createElement("figcaption",null,"Second med-fi prototype home screen")),o.createElement("figure",null,o.createElement("img",{src:V_,alt:"Third Med-Fi Prototype Home Screen",style:{width:"90%",display:"inline-block"}}),o.createElement("figcaption",null,"Third med-fi prototype home screen"))),o.createElement("p",null,"We were prepared to conduct one final round of user research before creating our final prototype.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"user-research"},o.createElement("h2",null,"User Research"),o.createElement("p",null,"Our user research aimed to assess the prototype's effectiveness in addressing issues with creating and joining community projects while ensuring the app's concepts (Hive, Honey Money, Buzz, etc.) were clear and visually appealing."),o.createElement("p",null,"We recruited volunteers from four key groups identified in our needfinding stage for testing:"),o.createElement("ol",null,o.createElement("li",null,o.createElement("b",null,"Community members:")," Regular members to see how the app encourages project creation and recruitment."),o.createElement("li",null,o.createElement("b",null,"Community leaders:")," Potential power users to evaluate how the app enhances their organizing efforts."),o.createElement("li",null,o.createElement("b",null,"Low cohesion/motivation:")," Less engaged members to determine if the app motivates involvement."),o.createElement("li",null,o.createElement("b",null,"High cohesion/motivation:")," Highly engaged users to assess the app's usefulness for well-functioning communities.")),o.createElement("p",null,"We conducted tests with four volunteers and summarized their feedback:"),o.createElement("ul",null,o.createElement("li",null,"The design and Hive theme were well-received, but some onboarding colors felt out of place."),o.createElement("li",null,'Users were confused about the intended project scale (large vs. small) and the "buzzing" feature.'),o.createElement("li",null,"There was appreciation for organizing personal and community goals, but concerns about small community engagement."),o.createElement("li",null,"Suggestions included adding realistic project images and interactive features for tracking progress."),o.createElement("li",null,"The Honey Money system was well-liked, but users wanted clearer ways to track involvement.")),o.createElement("p",null,"Based on this feedback, we prioritized the following changes for our final prototype:"),o.createElement("ul",null,o.createElement("li",null,"Enhance fidelity for better immersion."),o.createElement("li",null,"Include real images for profiles and projects."),o.createElement("li",null,"Sort tasks by category on a separate screen."),o.createElement("li",null,"Declutter by prioritizing tasks."),o.createElement("li",null,'Ensure consistency of key terms like "buzz" across the app.')),o.createElement("p",null,"With this final user study, we were ready to develop and launch our final prototype.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"final-prototype"},o.createElement("h2",null,"Final Prototype"),o.createElement("div",{className:"video-vertical",style:{height:"auto",width:"100%"}},o.createElement("video",{controls:!0,poster:j_,muted:!0,className:"responsive-video"},o.createElement("source",{src:W_,type:"video/mp4"}))),o.createElement("p",null,"We launched our ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.figma.com/proto/buMWRU5wtJCUicu4OEGfRn/Local-Hive?node-id=7-8&p=f&t=MyNiNauoxxTkwMSH-1&scaling=scale-down&content-scaling=fixed&page-id=0%3A1"},"final Figma prototype")," (also embedded at the beginning of this page) at an end-of-quarter project fair, accompanied by a website detailing our app's functionality and design process."),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:G_,alt:"App Website",style:{width:"60%",display:"inline-block"}}),o.createElement("figcaption",null,o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://hci.stanford.edu/courses/cs377e/2019/sp/projects/ResQ/"},"App website")))),o.createElement("p",null,'At the fair, we presented our app\'s evolution in a 15-minute presentation and showcased a project poster that won "Best Poster" among six teams.'),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:X_,alt:"Poster",style:{width:"70%",display:"inline-block"}}),o.createElement("figcaption",null,"Local Hive poster"))),o.createElement("p",null,"I was proud that in just ten weeks, we transformed a vague idea of strengthening communities into a robust prototype that many people tried out. With more time, we would have liked to pilot the app in a real community for ecological validity and develop a minimum viable product for an international launch. Nevertheless, we were pleased with our progress in such a short timeframe.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"reflections"},o.createElement("h2",null,"Reflections"),o.createElement("ul",null,o.createElement("li",null,o.createElement("b",null,"Listen first, design second."),o.createElement("ul",null,o.createElement("li",null,"Needfinding is a crucial step in product development, often overlooked if you focus too much on your initial solution. To apply human-centered design effectively, it's essential to step outside your perspective and listen objectively to your target users before making assumptions."))),o.createElement("li",null,o.createElement("b",null,"User feedback drives better design."),o.createElement("ul",null,o.createElement("li",null,"Avoid getting attached to early design iterations; user testing will reveal areas for improvement, often highlighting conflicting preferences among users. Refining a design requires balancing the needs of the majority without neglecting the minority."))),o.createElement("li",null,o.createElement("b",null,"Trust your instincts, but validate with users."),o.createElement("ul",null,o.createElement("li",null,'While humility is important, it\'s gratifying to recognize when your instincts are correct. We believed in leveraging social capital for community growth, and user tests consistently validated our approach of using volunteer time as a currency for supporting community projects, despite numerous adjustments to the specifics of "Honey Money."'))))),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"works-cited"},o.createElement("h2",null,"Works Cited"),o.createElement("ul",null,o.createElement("li",null,"Aldrich, D. P., & Meyer, M. A. (2015). Social Capital and Community Resilience. ",o.createElement("i",null,"American Behavioral Scientist, 59(2)"),", 254-269."))))},$_=i.p+"src/assets/images/hifi/hifi-overview.jpg",K_=i.p+"src/assets/images/hifi/clara-io-hifi.jpg",Z_=i.p+"src/assets/images/hifi/pill-thumbnail.png",J_=i.p+"src/assets/images/hifi/pill.mp4";function Q_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const eE=function(){var e,t,n=(e=(0,o.useState)([]),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Q_(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],i=n[1];return o.createElement(pb,{refs:r,setRefs:i,generateRefsFromDOM:function(e){e()}},o.createElement("div",{className:"section",id:"overview"},o.createElement("h2",{style:{display:"none"}},"Overview"),o.createElement("h1",null,"High Fidelity: Content Prototyping"),o.createElement("img",{src:$_,alt:"Hifi Overview",width:"100%"}),o.createElement("br",null),o.createElement("p",null,"I worked as an intern and later as a software engineer at ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://en.wikipedia.org/wiki/High_Fidelity,_Inc."},"High Fidelity"),", a startup that formerly focused on social virtual reality. I was part of the Content Prototyping team, where we created new experiences to showcase the potential of the metaverse. Our goal was to inspire users with engaging content while empowering developers through accessible APIs that allowed them to integrate their own creations easily."),o.createElement("p",null,"I've included a selection of my projects below.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"clara"},o.createElement("h2",null,"Clara.io Integration"),o.createElement("img",{src:K_,alt:"Clara.io in Hifi",width:"100%"}),o.createElement("p",null,"I developed an integration to download 3D entities from an external asset library directly through High Fidelity's interface. My project allowed users to access ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://clara.io/"},"Clara.io")," from in-world to pick a model and directly add it to their domain without leaving the application."),o.createElement("h3",null,"Background"),o.createElement("p",null,"During my onboarding at High Fidelity, I noticed the friction that users experienced when trying to upload 3D assets into the metaverse. For an application so reliant on content, this process should have been seamless."),o.createElement("p",null,"I took the initiative to address this area for improvement and proposed a solution: an asset database accessible directly within the application. By reducing the time required for asset search, download, and import, users would be empowered to create a more dynamic and vibrant virtual world."),o.createElement("h3",null,"Development"),o.createElement("p",null,"After researching what asset databases were widely available, I decided to move forward with a Clara.io integration because they maintained a huge database of 3D assets while enforcing certain texture and model format requirements that meshed well with High Fidelity's system."),o.createElement("p",null,"The development of this feature posed several challenges:"),o.createElement("ul",null,o.createElement("li",null,"Formatting the Clara.io page within High Fidelity to only show actions that our users could take"),o.createElement("li",null,"Streamlining the process of downloading a zip folder with 3D assets, unzipping the assets, and uploading the contents of the asset folder into High Fidelity"),o.createElement("li",null,"Building in automatic quality control on models (i.e., preventing users from uploading models that aren't supported in High Fidelity)")),o.createElement("p",null,"I navigated these challenges by breaking down the development process into milestones and thoroughly documenting each step. I designed the system to be scalable with other asset databases so that the Clara.io integration would serve as a proof of concept for a more streamlined asset upload process that could host multiple databases."),o.createElement("h3",null,"Use Case"),o.createElement("ol",null,o.createElement("li",null,"Launch High Fidelity and enter the virtual world"),o.createElement("li",null,'Open "Marketplace" within High Fidelity'),o.createElement("li",null,"Use the status bar to switch between Marketplace and Clara.io via the â€œmarketplaceâ€ of marketplaces"),o.createElement("li",null,"Log onto Clara.io within High Fidelity"),o.createElement("li",null,"Select a featured model or search for a specific model through Clara's interface"),o.createElement("li",null,"Download the .fbx format of the model"),o.createElement("li",null,"Save with a searchable filename to High Fidelity's built-in Asset Browser"),o.createElement("li",null,"Upload to the virtual world from the Asset Browser")),o.createElement("p",null,"The Clara.io integration script is available on my ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/elisa-lj11/hifi/blob/aca261af3e4343cb51635963d31ddb7c8d236461/libraries/script-engine/src/FileScriptingInterface.cpp#L5"},"GitHub"),".")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"google-poly"},o.createElement("h2",null,"Google Poly Integration"),o.createElement("div",{className:"video-youtube"},o.createElement("iframe",{className:"responsive-iframe",src:"https://www.youtube.com/embed/SbPHn4p9g3c?si=J9TiZNbwc8qba_SV",title:"Google Poly Integration",frameBorder:"0",allow:"autoplay; encrypted-media;",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})),o.createElement("br",null),o.createElement("i",{style:{display:"flex",justifyContent:"center"}},"High Fidelity featured at 1:20"),o.createElement("p",null,"After the success of the Clara.io integration, I integrated an API that surfaced asset import functionality from ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://blog.google/products/google-ar-vr/poly-browse-discover-and-download-3d-objects-and-scenes/"},"Google Poly"),", a 3D object and scene website. The integration of this asset library to High Fidelity was significantly streamlined by the foundation established through the Clara.io integration. With direct access to Google Poly's extensive collection of user-generated models, High Fidelity users could create a wide variety of environments and virtual worlds to share."),o.createElement("p",null,"The Google Poly integration script is available on my ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/elisa-lj11/hifi/blob/aca261af3e4343cb51635963d31ddb7c8d236461/interface/src/scripting/GooglePolyScriptingInterface.cpp#L5"},"GitHub"),".")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"other-content"},o.createElement("h2",null,"Other Content"),o.createElement("div",{className:"video",style:{height:"auto",width:"100%"}},o.createElement("video",{controls:!0,poster:Z_,muted:!0,className:"responsive-video"},o.createElement("source",{src:J_,type:"video/mp4"}))),o.createElement("br",null),o.createElement("i",{style:{display:"flex",justifyContent:"center"}},'"FX Pill" demo'),o.createElement("p",null,'I scripted virtual pinatas, animated emojis, graphics effect "pills," music visualizers, and other playful content that you may not be able to find in the real world. This content was available on High Fidelity\'s "Marketplace," allowing users to download models freely and incorporate them in their virtual spaces. The scripts for this content were also open-source, allowing other developers to experiment with and build upon them.'),o.createElement("p",null,"All content scripts are available on my ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/search?q=repo%3Aelisa-lj11%2Fhifi-content+Elisa+Lupin&type=code&p=1"},"GitHub"),".")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"reflections"},o.createElement("h2",null,"Reflections"),o.createElement("ul",null,o.createElement("li",null,o.createElement("b",null,"In the startup world, agility is essential."),o.createElement("ul",null,o.createElement("li",null,"High Fidelity was my first full-time developer role, providing valuable insight into how quickly a small startup can pivot between projects, features, and requirements. I learned to be a versatile developer, ready to wear multiple hats to meet the company's evolving needs."))),o.createElement("li",null,o.createElement("b",null,"Push for your ideas."),o.createElement("ul",null,o.createElement("li",null,"In the same breath, working at a small startup allowed me to passionately advocate for ideas that I really believed in, giving me the freedom to implement them effectively."))),o.createElement("li",null,o.createElement("b",null,"The more you engage with users, the better you can serve them."),o.createElement("ul",null,o.createElement("li",null,"I was fortunate to work on a product that allowed us to share space virtually with our users. Thanks to High Fidelity's social networking model, I was grateful to converse with dozens of users while developing, testing, and iterating on content. Though formal user testing is crucial for product growth, my direct exposure to user feedback made me more effective as a content/prototype developer, as it deepened my empathy for our users."))))))},tE=i.p+"src/assets/images/orgasmr/first-sketch.jpg",nE=i.p+"src/assets/images/orgasmr/protoboard-1.jpg",rE=i.p+"src/assets/images/orgasmr/protoboard-1-thumbnail.png",iE=i.p+"src/assets/images/orgasmr/protoboard-1.mp4",aE=i.p+"src/assets/images/orgasmr/protoboard-2.jpg",oE=i.p+"src/assets/images/orgasmr/orgasmr-cad-model.png",sE=i.p+"src/assets/images/orgasmr/print.jpg",lE=i.p+"src/assets/images/orgasmr/top-bottom.jpg",cE=i.p+"src/assets/images/orgasmr/solidworks-wireframe.png",uE=i.p+"src/assets/images/orgasmr/solidworks-rings.png",dE=i.p+"src/assets/images/orgasmr/illustrator-ring.png",hE=i.p+"src/assets/images/orgasmr/laser-cutter.jpg",pE=i.p+"src/assets/images/orgasmr/rings.jpg",fE=i.p+"src/assets/images/orgasmr/rings-in-handle.jpg",mE=i.p+"src/assets/images/orgasmr/soldering.jpg",gE=i.p+"src/assets/images/orgasmr/final-protoboard.jpg",vE=i.p+"src/assets/images/orgasmr/almost-assembled.jpg",yE=i.p+"src/assets/images/orgasmr/fully-assembled.jpg",bE=i.p+"src/assets/images/orgasmr/final-form.jpg",xE=i.p+"src/assets/models/orgasmr-handle.stl";function wE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const _E=function(){var e,t,n=(e=(0,o.useState)([]),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return wE(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wE(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],i=n[1],a=(0,o.useRef)(),s=Lw(),l=s.ErrorBoundary,c=s.didCatch;s.error,(0,o.useEffect)(function(){var e=function(t){t.preventDefault(),console.warn("WebGL context lost");var n=a.current;n&&n.removeEventListener("webglcontextlost",e),window.location.reload()},t=a.current;return t&&t.addEventListener("webglcontextlost",e),function(){t&&t.removeEventListener("webglcontextlost",e)}},[]);var u=o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:oE,alt:"orgASMR handle CAD model",style:{width:"70%",display:"inline-block"}}),o.createElement("figcaption",null,"orgASMR handle CAD model")));return o.createElement(pb,{refs:r,setRefs:i,generateRefsFromDOM:function(e){e()}},o.createElement("div",{className:"section",id:"overview"},o.createElement("h2",{style:{display:"none"}},"Overview"),o.createElement("h1",null,'"orgASMR": A Head-Scratching Musical Interface'),o.createElement("div",{className:"video-youtube"},o.createElement("iframe",{className:"responsive-iframe",src:"https://www.youtube.com/embed/VDdWokkGXBs?si=6a7AwoilWm2XTZu0&amp;start=76",title:"orgASMR Demo",frameBorder:"0",allow:"autoplay; encrypted-media;",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})),o.createElement("br",null),o.createElement("p",null,'An adaptation of the popular "Head-Scratcher," the "orgASMR" takes ASMR (',o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://en.wikipedia.org/wiki/ASMR"},"autonomous sensory meridian response"),") to the next level. It produces trance-like audio effects by detecting the amount of flex from the head-scratcher's legs and the orientation of the handle. It also includes volume control and an on/off button. Combining the simplicity of chord progression with the intricacy of movement, the orgASMR is sure to blow your mind."),o.createElement("p",null,"I owned the end-to-end development (design, scripting, wiring, modeling, and assembly) of the orgASMR.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"background"},o.createElement("h2",null,"Background"),o.createElement("p",null,'During my Stanford undergrad, I took "',o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://ccrma.stanford.edu/courses/250a-winter-2019/"},"MUSIC 250A"),': Physical Interaction Design for Music." In this class, we explored how to physically interact with real-time electronic sound by using and designing sensors, circuits, embedded computers, communication protocols, and sound synthesis. For my final project, I designed and built a hybrid musical instrument that integrated acoustic and electronic components, which I showcased during a final performance alongside other student inventions. I implemented the "orgASMR," which I will describe in more detail in the sections below.')),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"ideation"},o.createElement("h2",null,"Ideation"),o.createElement("img",{src:tE,alt:"Sketch of orgASMR",width:"80%"}),o.createElement("p",null,'I wanted to create an instrument that experimented with multiple sensory modalities: sound, kinesthesia, and tactile feedback. I was intrigued by the versatility of the classic "head-scratcher" contraption, which not only required users to move their arm in three dimensions to simulate a head-scratching motion but also featured flexible arms that adjusted to the shape of the user\'s head. This added a layer of control to modulate the sound produced by the device.'),o.createElement("p",null,"To achieve this 4D sound system, I planned to design a custom handle that would attach to the head-scratcher. It would incorporate an accelerometer to capture rotational movement, and a flex sensor (previously sketched as a piezoelectric sensor) to convert physical force into input. A USB-based ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.adafruit.com/product/2756"},"Teensy")," microcontroller would be embedded in the handle, with the entire setup connected to a computer running a script to process the input and generate sound."),o.createElement("p",null,"In essence, I wanted to produce a device that both gives and receives.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"scripting"},o.createElement("h2",null,"Scripting"),o.createElement("p",null,"I programmed in C++ with ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.arduino.cc/en/about"},"Arduino"),", a programmable, open-source electronics platform that allows users to interact with external hardware devices, to handle sensor feedback from the Teensy microcontroller. I expanded input from the flex sensor and gyroscope/accelerometer to an on/off button and a volume dial to allow the user to adjust the volume (or turn off the darn thing) as desired."),o.createElement("p",null,'Though the Arduino script handled the low-level input processing, I needed another script to add a musical "touch" to the raw input from the Teensy. I used ',o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://faust.grame.fr/"},"FAUST"),", a functional programming language for sound synthesis and audio processing, to script a processing layer that converted the Arduino output into sounds. My FAUST script processed the following four inputs:"),o.createElement("ol",null,o.createElement("li",null,o.createElement("b",null,"Accelerometer:")," The accelerometer detected eight different custom-defined orientations. Using music theory to structure chords with three or four notes, my script mapped each orientation to a specific chord type:",o.createElement("ul",null,o.createElement("li",null,"Major"),o.createElement("li",null,"Minor"),o.createElement("li",null,"Diminished"),o.createElement("li",null,"Major 7"),o.createElement("li",null,"Minor 7"),o.createElement("li",null,"Dominant 7"),o.createElement("li",null,"Suspended"),o.createElement("li",null,"Augmented"))),o.createElement("li",null,o.createElement("b",null,"Flex sensor:")," The sensor's degree of flex was translated into a frequency, with greater flex producing a higher frequency. This allowed the orgASMR to shift up and down musical scales."),o.createElement("li",null,o.createElement("b",null,"Potentiometer:"),' Also known as a "dial button," the potentiometer output was converted to "gain," which we perceived as the sound volume.'),o.createElement("li",null,o.createElement("b",null,"Button:"),' The button\'s output functioned as the sound "gate," controlling the on and off state of the sound.')),o.createElement("span",null,"Full orgASMR scripts below:"),o.createElement("ul",null,o.createElement("li",null,o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/elisa-lj11/orgASMR/blob/main/orgASMR.ino"},"Arduino script")),o.createElement("li",null,o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/elisa-lj11/orgASMR/blob/main/orgASMR.dsp"},"Faust script"))),o.createElement("p",null,"I developed the scripts at the same time that I wired the device since they needed to operate concurrently to test progress incrementally on the orgASMR.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"wiring"},o.createElement("h2",null,"Wiring"),o.createElement("img",{src:nE,alt:"First protoboard iteration",width:"40%"}),o.createElement("p",null,"I used a protoboard to wire all of the sensors to the Teensy. The video below demonstrates the chord progressions varying with the Teensy's orientation and the frequency changing with the flex sensor movement."),o.createElement("div",{className:"video-vertical",style:{height:"auto",width:"100%"}},o.createElement("video",{controls:!0,poster:rE,className:"responsive-video"},o.createElement("source",{src:iE,type:"video/mp4"}))),o.createElement("p",null,"Once the orgASMR interactions were tested thoroughly with my first prototype, I moved the components to a smaller protoboard that would fit inside the custom handle that I would need to make."),o.createElement("img",{src:aE,alt:"Second protoboard iteration",width:"40%"})),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"modeling"},o.createElement("h2",null,"Modeling"),o.createElement("p",null,"I aimed to design a sleek handle that would conceal the functional but less aesthetically pleasing components of the orgASMR and complement the instrument's unique concept. To achieve this, I used ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.solidworks.com/"},"SolidWorks"),", a 3D CAD design software, to design the handle. The handle is divided into top and bottom sections, allowing for easy installation of the protoboard, sensors, and Teensy inside."),c?u:o.createElement(o.Fragment,null,o.createElement("div",{className:"interaction-instructions"},"Drag and zoom to interact with the model below"),o.createElement("div",{style:{border:"2px solid #706EF5",padding:"10px",borderRadius:"5px",margin:"20px 0"}},o.createElement(l,null,o.createElement(Cw,{ref:a,camera:{position:[5,5,5],fov:50},style:{height:"50vh",width:"100%"},gl:{antialias:!0,powerPreference:"high-performance"},fallback:u,onCreated:function(e){var t=e.gl;return t.setPixelRatio(window.devicePixelRatio),function(){scene.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&(Array.isArray(e.material)?e.material.forEach(function(e){return e.dispose()}):e.material.dispose())}),t.dispose()}}},o.createElement("ambientLight",{intensity:1}),o.createElement("directionalLight",{position:[-5,5,5],intensity:1}),o.createElement(o.Suspense,{fallback:null},o.createElement(Dw,{modelPath:xE,scale:[.0275,.0275,.0275],rotation:[2,3,.5]})),o.createElement(Pw,null))))),o.createElement("p",null,"The SolidWorks design was realized using a 3D printer."),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:sE,alt:"3D print in progress",style:{width:"90%",display:"inline-block",marginRight:"2%"}}),o.createElement("figcaption",null,"3D print in progress")),o.createElement("figure",null,o.createElement("img",{src:lE,alt:"Top and bottom handle parts",style:{width:"90%",display:"inline-block"}}),o.createElement("figcaption",null,"Top and bottom handle parts"))),o.createElement("p",null,"In addition to the custom 3D-printed handle, I added ring inserts to the top section to securely fasten the head-scratcher. Using the SolidWorks model dimensions, I designed two rings in Adobe Illustrator and then used a laser cutter to cut them from a resin board precisely."),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:cE,alt:"SolidWorks wireframe",style:{width:"90%",display:"inline-block",marginRight:"2%"}}),o.createElement("figcaption",null,"SolidWorks wireframe")),o.createElement("figure",null,o.createElement("img",{src:uE,alt:"Rings in wireframe",style:{width:"90%",display:"inline-block"}}),o.createElement("figcaption",null,"Rings in wireframe"))),o.createElement("br",null),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:dE,alt:"Illustrator ring design",style:{width:"70%",display:"inline-block"}}),o.createElement("figcaption",null,"Illustrator ring design"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:hE,alt:"Laser cutter in progress",style:{width:"90%",display:"inline-block",marginRight:"2%"}}),o.createElement("figcaption",null,"Laser cutter in progress")),o.createElement("figure",null,o.createElement("img",{src:pE,alt:"Rings result",style:{width:"90%",display:"inline-block"}}),o.createElement("figcaption",null,"Rings result"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:fE,alt:"Rings placed in handle",style:{width:"50%",display:"inline-block"}}),o.createElement("figcaption",null,"Head-scratcher secured to handle with rings"))),o.createElement("p",null,"Up to this point, I had prepared all the individual physical parts and software. All that remained was to assemble all the pieces.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"assembly"},o.createElement("h2",null,"Assembly"),o.createElement("img",{src:mE,alt:"Soldering",width:"60%"}),o.createElement("p",null,"I only had a bit of soldering left to finish the orgASMR, as the flex sensor was designed to extend from the base and attach to one of the head-scratcher's arms."),o.createElement("p",null,"With everything properly connected, I could finally piece the whole instrument together."),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:gE,alt:"Finalized protoboard",style:{width:"80%",display:"inline-block"}}),o.createElement("figcaption",null,"Finalized protoboard with Teensy and sensors"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:vE,alt:"Almost assembled orgASMR",style:{width:"80%",display:"inline-block",marginRight:"2%"}}),o.createElement("figcaption",null,"Functional components ready to be loaded into the handle")),o.createElement("figure",null,o.createElement("img",{src:yE,alt:"Fully assembled orgASMR",style:{width:"80%",display:"inline-block"}}),o.createElement("figcaption",null,"Fully assembled orgASMR with a final touch of galaxy duct tape")))),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"showcase"},o.createElement("h2",null,"Instrument Showcase"),o.createElement("img",{src:bE,alt:"Final form of orgASMR",width:"80%"}),o.createElement("p",null,'The final performance took place at Stanford\'s CCRMA building, where dozens of curious attendees explored the orgASMR alongside 16 other student-designed hybrid instruments. The orgASMR withstood the hands and heads of many users throughout the event. The culmination of my work was performing a musical "piece" in front of the audience to showcase the novelty of my instrument. Even my dad attended, and I think he may have cried with what I only hope were tears of joy.')),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"reflections"},o.createElement("h2",null,"Reflections"),o.createElement("ul",null,o.createElement("li",null,o.createElement("b",null,"It's okay to get crafty on creative projects."),o.createElement("ul",null,o.createElement("li",null,"I hadn't originally planned to design rings to secure the head-scratcher within the custom handle, but when I noticed that it wobbled too much, I had to improvise. Fortunately, I had access to plenty of resources, such as a laser cutter, so the wobbles were more of a speed bump than a show stopper."))),o.createElement("li",null,o.createElement("b",null,"It's also okay to lean into the craziness."),o.createElement("ul",null,o.createElement("li",null,"I spent many late nights in the product realization lab at CCRMA, which admittedly was not good for my sleep schedule, but perhaps this disinhibited me enough to entertain otherwise silly ideas such as using a head-scratcher as a musical instrument. With such an open-ended final project, I felt free to explore how far I could push this quirky idea into reality."))),o.createElement("li",null,o.createElement("b",null,"Feedback is essential along every design iteration step."),o.createElement("ul",null,o.createElement("li",null,"I was grateful to work alongside such creative, talented, and dedicated students and professors who were forthcoming with their suggestions for improvement. Not only did they lean into the craziness with me, but they helped me see the ways I could take the orgASMR to the next level. A great product emerges from a great team."))))))},EE=i.p+"src/assets/images/immersive-media/stanford-cardboard-vr.jpg",SE=i.p+"src/assets/images/immersive-media/ricoh-theta-s.jpg",ME=i.p+"src/assets/images/immersive-media/go-pro-rig.png",TE=i.p+"src/assets/images/immersive-media/kolor-software.jpg";function AE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const CE=function(){var e,t,n=(e=(0,o.useState)([]),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return AE(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?AE(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],i=n[1],a=window.matchMedia("(pointer:none), (pointer:coarse)").matches;return o.createElement(pb,{refs:r,setRefs:i,generateRefsFromDOM:function(e){e()}},o.createElement("div",{className:"section",id:"overview"},o.createElement("h2",{style:{display:"none"}},"Overview"),o.createElement("h1",null,"Immersive Media: An Exploration of 360Â° Video Experiences"),o.createElement("img",{src:EE,alt:"Stanford Cardboard VR",width:"40%"}),o.createElement("br",null),o.createElement("p",null,"While I was a student at Stanford University, I produced an assortment of 360Â° video experiences detailed below.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"rv-vr"},o.createElement("h2",null,'"RV VR": A Look into the Housing Crisis'),o.createElement("div",{className:"interaction-instructions"},"Drag the video to rotate the viewpoint"),o.createElement("br",null),o.createElement("div",{className:"video-youtube"},a&&o.createElement("a",{href:"https://youtu.be/oDeCHxmh2_8?si=joE0MeWDsj4K6VbB",target:"_blank",rel:"noopener noreferrer",style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:1,textDecoration:"none",color:"transparent"}}),o.createElement("iframe",{className:"responsive-iframe",src:"https://www.youtube.com/embed/oDeCHxmh2_8?si=UX632hSjpJd3nykh",title:"RV VR",frameBorder:"0",allow:"autoplay; encrypted-media;",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})),o.createElement("p",null,'"RV VR" is an immersive experience that allows viewers to see first-hand what transient life in a recreational vehicle is like in Silicon Valley. Published alongside this ',o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://peninsulapress.com/2019/03/19/the-bay-areas-housing-crisis-in-360-video/"},"Peninsula Press article"),", the six-and-a-half-minute video harnesses immersive technology to create an experience that captures the realities of the Bay Area housing crisis in its rawest form."),o.createElement("h3",null,"Background"),o.createElement("p",null,'I took the course "',o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://explorecourses.stanford.edu/search?q=COMM+280%3a+Virtual+Reality+Journalism+in+the+Public+Sphere&view=catalog&page=0&filter-coursestatus-Active=on&collapse=&academicYear=20182019"},"COMM 280"),": Virtual Reality Journalism in the Public Sphere,\" where we formed groups of three to report on local issues, using 360Â° video technology to engage audiences in a fresh and innovative way. Our goal was to shed light on these issues in a way that traditional journalism doesn't fully do justice. My group chose to report the Bay Area housing crisis, believing immersive media could help viewers better empathize with the cramped conditions in which many Bay Area RV community residents live."),o.createElement("p",null,"In our research to prepare this piece, we discovered that local governments had struggled to balance public safety with providing support for these RV communities, implementing regulations like reduced parking times, and pursuing limited affordable housing projects. Yet, there is no clear solution, and residents of RV communities, like our two interviewees featured in the video, face daily challenges of survival and stability. We hoped to bring their stories to light in a highly impactful yet ethical way."),o.createElement("h3",null,"Tools"),o.createElement("img",{src:SE,alt:"Ricoh Theta S",width:"30%"}),o.createElement("p",null,"We used the ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://us.ricoh-imaging.com/product/theta-s/"},"Ricoh Theta S")," (discontinued) to film our mini-documentary. This camera featured two fish-eye lenses, one for each side of the device, to create full 360Â° videos with minimal intervention. It also included remote recording and live previews through their app, enabling us to effortlessly capture moments and assess the quality of our takes in real time."),o.createElement("p",null,"Since the Ricoh Theta S automatically synced and stitched the video clips upon export, we relied solely on Adobe's ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://helpx.adobe.com/premiere-pro/using/VRSupport.html"},"Premiere Pro")," video editing software for post-production."),o.createElement("h3",null,"Filming"),o.createElement("p",null,"Even though the Ricoh Theta S was easy to mount to a tripod and activate remotely, we had to carefully stage our scenes and plan our interview questions to minimize cuts that could be jarring to immersed viewers. In scenes where we conducted interviews, we stood around the camera to take advantage of the 360Â° capture. To respect the privacy of our interviewees, we instructed them on how to set up the camera within their RVs, and we gave them talking points beforehand since we would be unable to interact with them from outside while a recording was in progress. Throughout our production, we checked in with our interviewees to get their feedback on content, and we received their consent to publish their stories.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"lucid-dreaming"},o.createElement("h2",null,'"Lucid Dreaming 360": A How-To Video'),o.createElement("div",{className:"interaction-instructions"},"Drag the video to rotate the viewpoint"),o.createElement("br",null),o.createElement("div",{className:"video-youtube"},a&&o.createElement("a",{href:"https://youtu.be/NUnB0TFU_wo?si=oAsu5USh9FnWXSPo",target:"_blank",rel:"noopener noreferrer",style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:1,textDecoration:"none",color:"transparent"}}),o.createElement("iframe",{className:"responsive-iframe",src:"https://www.youtube.com/embed/NUnB0TFU_wo?si=oAsu5USh9FnWXSPo",title:"Lucid Dreaming 360",frameBorder:"0",allow:"autoplay; encrypted-media;",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})),o.createElement("p",null,'"Lucid Dreaming 360" is a quick and interactive guide to lucid dreaming based on sleep study research. The seven-minute video, produced in 2016, used (for its time) cutting-edge 360-video capture technology to create an immersive experience that applies the principles of immersive learning to the practice of lucid dreaming.'),o.createElement("h3",null,"Background"),o.createElement("p",null,"I took the ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://explorecourses.stanford.edu/search?view=catalog&filter-coursestatus-Active=on&page=0&catalog=&q=PSYC+135:+Sleep+and+Dreams&collapse="},'"Sleep and Dreams"')," course led by Dr. William Dement and Dr. Rafael Pelayo, both renowned pioneers in sleep medicine research. For our final project, we were tasked with creating an outreach video that creatively communicated some of the key concepts from the class. At the time, I had just begun working at ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://vhil.stanford.edu/"},"VHIL"),", Stanford's virtual reality lab where I was learning about the effectiveness of ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://vhil.stanford.edu/publications/learning"},"immersive learning")," and how to operate 360Â° video capture technology. I saw this Sleep Outreach project as an opportunity to experiment with immersive technology and produce an engaging yet informative lesson on lucid dreaming, a concept that has fascinated me since I was a kid. I also felt that the immersive nature of a 360Â° video would beautifully complement the theme of dreaming, allowing viewers to fully experience the sensation of being inside a dream."),o.createElement("h3",null,"Tools"),o.createElement("img",{src:ME,alt:"GoPro custom 3D-printed rig",width:"40%"}),o.createElement("p",null,"For the recording equipment, I mounted six ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://gopro.com/en/us/news/gopro-introduces-hero4-the-most-powerful-gopro-lineup-ever"},"GoPro HERO4 cameras")," together using a ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.thingiverse.com/thing:1257407"},"custom 3D-printed rig"),". This technology is obsolete in the wake of today's handheld single-device 360Â° cameras. In 2016, however, we had to be crafty to take advantage of emerging immersive technology while maintaining high-resolution videos."),o.createElement("img",{src:TE,alt:"Kolor Autopano Video Pro software",width:"80%"}),o.createElement("p",null,"For the stitching software, I used ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://panosociety.com/products/kolor-autopano-video-pro"},"Kolor Autopano Video Pro")," (now deprecated). To prepare a ready-to-use 360Â° video for YouTube, I manually synced the six individual video clips, cleaned up the seams between the overlapping GoPro fields of view, and exported and rendered the video in a supported 360Â° format."),o.createElement("h3",null,"Filming"),o.createElement("p",null,"I was a member of ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://web.stanford.edu/group/calypso/cgi-bin/"},"Cardinal Calypso"),", Stanford's steel pan band, and they graciously volunteered to perform in my video. To avoid potential pitfalls with stitching together multiple scenes for the video, I wrote the script to be filmed in a single shot. While writing the script and staging the performers, I considered how we could use the 360Â° field of view by arranging the performers in a circle around the camera. I also made sure to limit distractions around the main speaker by staging performers further back.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"reflections"},o.createElement("h2",null,"Reflections"),o.createElement("ul",null,o.createElement("li",null,o.createElement("b",null,"360Â° video capture technology has come a long way!"),o.createElement("ul",null,o.createElement("li",null,'When I produced my "Lucid Dreaming 360" video, I had to rely on numerous technical hacks to make the video look good. My patience was often tested by fickle technology and lengthy export times. In just three years between producing "Lucid Dreaming 360" and "RV VR", 360Â° filming technology had advanced significantly and facilitated wider public access.'))),o.createElement("li",null,o.createElement("b",null,"Great immersive storytelling comes with great responsibility."),o.createElement("ul",null,o.createElement("li",null,'While we were enthusiastic about using an immersive medium to tell the "RV VR" story, we had to exercise careful judgment in selecting which parts of the interviews to include and how much of our interviewees\' lives to reveal. A home is a personal space, and given the privilege of sharing their stories, we wanted to respect their agency and privacy.'))),o.createElement("li",null,o.createElement("b",null,"Content is key."),o.createElement("ul",null,o.createElement("li",null,"Even with the latest technology, the content has to complement the medium for the immersive experience to be truly effective. I spent a lot of time revising the scripts for each video as I encountered new technical challenges in 360Â° video production (such as lower-than-expected video resolution) that could prevent important material from standing out."))))))},RE=i.p+"src/assets/images/window/hi-fi-prototype-screenshot.png",PE=i.p+"src/assets/images/window/needfinding-map.png",kE=i.p+"src/assets/images/window/ep1.png",IE=i.p+"src/assets/images/window/ep2.png",LE=i.p+"src/assets/images/window/ep3.png",NE=i.p+"src/assets/images/window/concept-sketch-headset.png",DE=i.p+"src/assets/images/window/concept-sketch-store-projection.png",UE=i.p+"src/assets/images/window/concept-sketch-wearable.png",OE=i.p+"src/assets/images/window/concept-sketch-mobile.png",FE=i.p+"src/assets/images/window/low-fi-simple-task-flow.png",zE=i.p+"src/assets/images/window/low-fi-moderate-task-flow.png",BE=i.p+"src/assets/images/window/low-fi-complex-task-flow.png",HE=i.p+"src/assets/images/window/storyboard.jpg",VE=i.p+"src/assets/images/window/low-fi-prototype.png",jE=i.p+"src/assets/images/window/low-fi-flow.png",WE=i.p+"src/assets/images/window/med-fi-simple-task-flow.png",GE=i.p+"src/assets/images/window/med-fi-moderate-task-flow.png",XE=i.p+"src/assets/images/window/med-fi-complex-task-flow.png",qE=i.p+"src/assets/images/window/window-website.png",YE=i.p+"src/assets/images/window/heuristic-violations.png",$E=i.p+"src/assets/images/window/hi-fi-prototype-marker.png",KE=i.p+"src/assets/images/window/hi-fi-simple-task-flow.png",ZE=i.p+"src/assets/images/window/hi-fi-moderate-task-flow-1.png",JE=i.p+"src/assets/images/window/hi-fi-moderate-task-flow-2.png",QE=i.p+"src/assets/images/window/hi-fi-complex-task-flow-1.png",eS=i.p+"src/assets/images/window/hi-fi-complex-task-flow-2.png",tS=i.p+"src/assets/images/window/window-poster.png";function nS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const rS=function(){var e,t,n=(e=(0,o.useState)([]),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nS(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nS(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],i=n[1];return o.createElement(pb,{refs:r,setRefs:i,generateRefsFromDOM:function(e){e()}},o.createElement("div",{className:"section",id:"overview"},o.createElement("h2",{style:{display:"none"}},"Overview"),o.createElement("h1",null,'"Window": An AR Clothes Shopping App'),o.createElement("img",{src:RE,alt:"Window Hi-Fi prototype",width:"40%"}),o.createElement("br",null),o.createElement("p",null,'"Window" uses augmented reality on a mobile platform to place a personalized mannequin in a storefront window so users can easily view a store\'s offering.'),o.createElement("p",null,'In my Stanford undergraduate studies, I took "',o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://hci.stanford.edu/courses/cs147/2016/au/"},"CS 147"),': Design Thinking for User Experience Design, Prototyping & Evaluation." In this course, my team of three applied design thinking to a quarter-long project focused on mixed reality and human-computer interaction. Over ten weeks, we moved from ideation to prototyping and ultimately showcased our high-fidelity mobile app at a public fair.')),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"first-section"},o.createElement("h2",null,"Needfinding"),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:PE,alt:"Initial needfinding map",style:{width:"80%",display:"inline-block"}}),o.createElement("figcaption",null,"Initial needfinding map"))),o.createElement("p",null,"When our group first came together, we began with some initial needfinding to define the direction of our project. We created an empathy map (seen above), which revealed that informative visualization could serve as a solid foundation for our application. Focusing on the shopping experience, we conducted additional needfinding interviews at the Stanford Shopping Center. We spoke with a diverse group of people, including a mother from Hawaii, a man from Sweden, and a group of eighth-grade girls, all of whom expressed similar frustrations with shopping.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"pov-hmw"},o.createElement("h2",null,'"POV"s and "HMW"s'),o.createElement("p",null,'We refined our focus from technology (Informative Visualization) to a practical problemâ€”enhancing the online shopping experience by allowing users to visualize items before purchasing. We then held interviews with both consumers and retail employees to collect the following "Point of View" statements:'),o.createElement("ol",null,o.createElement("li",null,"A Macy's employee shared that many customers find the shopping experience frustrating, especially when they can't locate specific items quickly. Making it easier for customers to find items would be a game changer."),o.createElement("li",null,"A shopper waiting outside a store dislikes shopping but prefers in-person experiences over online due to mistrust of reviews. Developing a system to minimize time spent in stores would significantly improve the experience for shoppers like him."),o.createElement("li",null,"An avid online shopper struggles with clothing purchases due to unpredictable sizing. A solution that helps determine how clothing will fit before buying online would be transformative.")),o.createElement("p",null,"These conversations highlighted key issues, including the time wasted on unproductive shopping. Based on these insights, we drafted several â€œHow Might Weâ€ (HMW) statements to address our interviewees' gripes with shopping:"),o.createElement("ol",{type:"1"},o.createElement("li",null,o.createElement("b",null,"How might we make it easier for people to find clothes online that fit them?")),o.createElement("li",null,o.createElement("b",null,"How might we make shopping more enjoyable by gamifying the experience?")),o.createElement("li",null,o.createElement("b",null,"How might we help customers find items in stores more easily?"))),o.createElement("p",null,"From here, we developed three experience prototypes, which are explained in the next section.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"experience-prototypes"},o.createElement("h2",null,"Experience Prototypes"),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:kE,alt:"Experience prototype 1",style:{width:"90%",display:"inline-block",marginRight:"2%"}}),o.createElement("figcaption",null,"EP #1: Sharing virtual clothes from a closet with friends")),o.createElement("figure",null,o.createElement("img",{src:IE,alt:"Experience prototype 2",style:{width:"90%",display:"inline-block"}}),o.createElement("figcaption",null,"EP #2: Trying on virtual clothes from a store"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:LE,alt:"Experience prototype 3",style:{width:"80%",display:"inline-block"}}),o.createElement("figcaption",null,"EP #3: Using an AR mannequin to display outfits"))),o.createElement("p",null,"We created three different experience prototypes to explore various aspects of the shopping experience (seen above). These included a virtual closet where users could add their clothes for friends to view, trying on virtual clothes from a store, and using an AR mannequin to display outfits. We conducted field testing with users, and after several rounds of iteration, we chose to move forward with EP #3: the AR mannequin prototype. It was the most intuitive option, and one of our users, without prompting, mentioned she would love to use something like it, reinforcing our decision."),o.createElement("p",null,"Once we agreed to implement EP #3, we developed our low-fidelity prototype.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"low-fi-prototype"},o.createElement("h2",null,"Low-Fidelity Prototype"),o.createElement("p",null,"We branded ourselves as ",o.createElement("b",null,"Window"),", and we defined our mission/problem/solution/value proposition:"),o.createElement("ul",null,o.createElement("li",null,o.createElement("b",null,"Mission:")," See where your style takes you."),o.createElement("li",null,o.createElement("b",null,"Problem:")," Shopping is frustrating when hours of searching yield nothing appealing."),o.createElement("li",null,o.createElement("b",null,"Solution:")," Using augmented reality, we place a custom mannequin in the storefront window to easily showcase a store's offerings."),o.createElement("li",null,o.createElement("b",null,"Value Proposition:")," Window shopping made easier.")),o.createElement("h3",null,"Concept Sketches"),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:NE,alt:"Concept sketch: headset",style:{width:"90%",display:"inline-block",marginRight:"2%"}}),o.createElement("figcaption",null,"Concept sketch: headset")),o.createElement("figure",null,o.createElement("img",{src:DE,alt:"Concept sketch: store projector",style:{width:"90%",display:"inline-block"}}),o.createElement("figcaption",null,"Concept sketch: store projector"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:UE,alt:"Concept sketch: wearable",style:{width:"90%",display:"inline-block",marginRight:"2%"}}),o.createElement("figcaption",null,"Concept sketch: wearable")),o.createElement("figure",null,o.createElement("img",{src:OE,alt:"Concept sketch: mobile",style:{width:"90%",display:"inline-block"}}),o.createElement("figcaption",null,"Concept sketch: mobile"))),o.createElement("p",null,"Once we had narrowed in on a problem and solution for shopping, we brainstormed different design mediums for our idea. We made sketches for our application on a headset, a store projector, a wearable, and a mobile device (seen above)."),o.createElement("p",null,"After reviewing these initial sketches, we decided to proceed with a mobile application for three reasons:"),o.createElement("ol",null,o.createElement("li",null,"Smartphones are exponentially more accessible than our other options."),o.createElement("li",null,"Smartphones have more AR support than other devices."),o.createElement("li",null,"Smartphones lend themselves to social features that the other mediums do not.")),o.createElement("h3",null,"Task Flows"),o.createElement("p",null,"We then designed three tasks of varying complexities:"),o.createElement("ol",null,o.createElement("li",null,o.createElement("b",null,"Simple Task: Browsing for clothes"),"â€”scanning a storefront and viewing their selection."),o.createElement("li",null,o.createElement("b",null,"Moderate Task: Looking for a new outfit"),"â€”specifying style and price range."),o.createElement("li",null,o.createElement("b",null,"Complex Task: Shopping for someone else and asking for opinions"),"â€”customizing an outfit and sharing with friends.")),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:FE,alt:"Low-fi Simple Task Flow",style:{width:"70%",display:"inline-block"}}),o.createElement("figcaption",null,"Low-fi simple task flow"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:zE,alt:"Low-fi Moderate Task Flow",style:{width:"70%",display:"inline-block"}}),o.createElement("figcaption",null,"Low-fi moderate task flow"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:BE,alt:"Low-fi Complex Task Flow",style:{width:"70%",display:"inline-block"}}),o.createElement("figcaption",null,"Low-fi complex task flow"))),o.createElement("h3",null,"Concept Video"),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:HE,alt:"Concept video storyboard",style:{width:"80%",display:"inline-block"}}),o.createElement("figcaption",null,"Concept video storyboard"))),o.createElement("p",null,"We also produced a concept video for Window."),o.createElement("div",{className:"video-youtube"},o.createElement("iframe",{className:"responsive-iframe",src:"https://www.youtube.com/embed/w4h3qxlXQhY?si=nNUvJKlMIMrlfmz-",title:"Window Concept Video",frameBorder:"0",allow:"autoplay; encrypted-media;",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})),o.createElement("br",null),o.createElement("h3",null,"Low-Fidelity Prototype Screens"),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:VE,alt:"Low-fi prototype",style:{width:"80%",display:"inline-block"}}),o.createElement("figcaption",null,"Low-fi prototype"))),o.createElement("p",null,"We developed our low-fidelity prototype using paper screens and cut-out printed clothing options. Users began by scanning a store name, which led them to a home screen where they could start shopping or filter options. After selecting how to browse, the app displayed a mannequin in augmented reality through the camera. Users swiped through clothing, viewed item details, added articles to their virtual closet, or shared outfits with friends. Clicking on an item revealed sizing, prices, availability, and brand information, along with a barcode for quick identification at checkout. Additionally, swiping from the left opened a navigation drawer to access their virtual closet, friends, settings, and logout options."),o.createElement("p",null,"We designed each screen to flow through our three user tasks to conduct our first round of user testing."),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:jE,alt:"Low-fi example flow",style:{width:"80%",display:"inline-block"}}),o.createElement("figcaption",null,"Low-fi example flow"))),o.createElement("h3",null,"User Testing"),o.createElement("p",null,"After completing our low-fidelity prototype, we returned to the Stanford Shopping Center to let random shoppers test our application. We assigned them our three tasks and allowed them to navigate the app independently, assisting only when they initiated a click since the paper prototype required manual screen changes."),o.createElement("p",null,"From the testing results, we identified several issues:"),o.createElement("ul",null,o.createElement("li",null,"The original process of scanning a store name and clicking it to start shopping confused them, as they preferred immediate access to AR.",o.createElement("ul",null,o.createElement("li",null,"Users needed quicker access to the AR viewport."))),o.createElement("li",null,"Users often clicked arrows instead of swiping to see more clothing options.",o.createElement("ul",null,o.createElement("li",null,"Swiping on clothing options should be more intuitive."))),o.createElement("li",null,'The closet feature was misunderstood as a purchasing mechanism instead of a "favoriting" tool.',o.createElement("ul",null,o.createElement("li",null,"The closet feature should be distinguished from making a purchase.")))),o.createElement("p",null,"With this valuable feedback, we progressed to our medium-fidelity prototype.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"med-fi-prototype"},o.createElement("h2",null,"Medium-Fidelity Prototype"),o.createElement("p",null,"We developed our medium-fidelity prototype using ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.sketch.com/"},"Sketch")," for graphic design and ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.invisionapp.com/"},"InVision")," for mobile prototyping, enabling seamless navigation between screens based on user input. We incorporated feedback from user testing to implement design changes, including direct access to AR shopping when clicking â€œStart Shopping,â€ a slide-up menu for filters and custom measurements, and a simplified closet feature represented by a plus button. Additionally, we added the option for users to customize their mannequin measurements as requested. Below are the updated task flows for our medium-fidelity prototype."),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:WE,alt:"Med-fi Simple Task Flow",style:{width:"70%",display:"inline-block"}}),o.createElement("figcaption",null,"Med-fi simple task flow"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:GE,alt:"Med-fi Moderate Task Flow",style:{width:"70%",display:"inline-block"}}),o.createElement("figcaption",null,"Med-fi moderate task flow"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:XE,alt:"Med-fi Complex Task Flow",style:{width:"70%",display:"inline-block"}}),o.createElement("figcaption",null,"Med-fi complex task flow"))),o.createElement("h3",null,"Website"),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:qE,alt:"Window website",style:{width:"80%",display:"inline-block"}}),o.createElement("figcaption",null,"Window website"))),o.createElement("p",null,"We also deployed a ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://hci.stanford.edu/courses/cs147/2016/au/projects/MixedReality/Window/"},"website")," for Window to demonstrate our progress through the iterative design process. We uploaded our med-fi prototype to our website to collect heuristic evaluations from our classmates.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"heurisitc-evaluation"},o.createElement("h2",null,"Heuristic Evaluation"),o.createElement("p",null,"In this phase, four evaluators tested our InVision prototype, identifying 37 heuristic violations across ten categories:"),o.createElement("ol",null,o.createElement("li",null,"Visibility of Status"),o.createElement("li",null,"Match System & World"),o.createElement("li",null,"User Control"),o.createElement("li",null,"Consistency"),o.createElement("li",null,"Error Prevention"),o.createElement("li",null,"Recognition not Recall"),o.createElement("li",null,"Efficiency of Use"),o.createElement("li",null,"Minimalist Design"),o.createElement("li",null,"Help Users with Errors"),o.createElement("li",null,"Documentation")),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:YE,alt:"Heuristic Violations Summary",style:{width:"60%",display:"inline-block"}}),o.createElement("figcaption",null,"Heuristic violations summary"))),o.createElement("p",null,"An example of feedback received:"),o.createElement("div",{style:{display:"flex",justifyContent:"center"}},o.createElement("p",{style:{marginLeft:"10%",marginRight:"10%",textAlign:"justify"}},o.createElement("b",null,"[H3: User Control][Severity: 3]"),o.createElement("br",null),o.createElement("i",null,"Evaluators: 1, 2, 3, 4"),o.createElement("br",null),o.createElement("br",null),"I'm confused about what the \"plus\" button does. Is there a quick way to star or favorite an item and come back to it? If it adds to the closet, make it clear that that is what it's doing.",o.createElement("br",null),o.createElement("br",null),"Fix: Pop-up text that the item has been added to your closet, or just an overlayed icon. Be more intentional about the iconography.")),o.createElement("p",null,"A summary of suggestions for our prototype:"),o.createElement("ul",null,o.createElement("li",null,"The app's minimal and aesthetically pleasing design makes it intuitive and easy to use, with minor violations stemming from the focus on minimalism for AR functionality."),o.createElement("li",null,"Consistent color scheme and typography align with iOS standards, but slight adjustments could enhance UI consistency."),o.createElement("li",null,"The purpose of the virtual closet is unclearâ€”whether it represents a shopping cart, fitting room, or closet depends on user intention."),o.createElement("li",null,"Clarifying the difference between sharing or adding a complete outfit versus a single clothing item would improve the user experience."),o.createElement("li",null,"A tutorial and AR integration with custom-fit clothes on user photos would make the app more engaging and personal.")),o.createElement("p",null,"We carefully considered each of the 37 violations and designated action items to incorporate into our high-fidelity prototype. Our main changes were the following:"),o.createElement("ul",null,o.createElement("li",null,"Users no longer need to log in to access AR functionality."),o.createElement("li",null,"The closet feature was temporarily removed due to user confusion about its purpose."),o.createElement("li",null,"Filtering options were added to the main shopping screen for quick adjustments."),o.createElement("li",null,"Users could share outfit images by text directly from the app."),o.createElement("li",null,"One-time profile creation was introduced to streamline user measurements.")),o.createElement("p",null)),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"hi-fi-prototype"},o.createElement("h2",null,"High-Fidelity Prototype"),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:$E,alt:"Hi-fi prototype labeled",style:{width:"70%",display:"inline-block"}}),o.createElement("figcaption",null,"Hi-fi prototype with marker"))),o.createElement("p",null,"Our hi-fi prototype was developed in ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://developer.apple.com/xcode/"},"XCode")," using Objective-C due to constraints from the ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/elisa-lj11/Window/blob/3f7ac125b405bcfd6a46eb2f2a47f5d5726a06b5/README%20(ARToolKit%20for%20iOS).txt"},"ARToolkit SDK")," (no longer supported). 3D models for clothing items were generated with ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.autodesk.com/products/maya/overview"},"Maya"),". ARToolKit SDK was used for marker detection and rendering 3D objects based on marker location, though it had limitations in detecting touch on 3D models and loading complex ones. A Wizard of Oz technique was used for interactions, faking Optical Character Recognition (OCR) and simulating touch interactions on the screen. Hard-coded data was used for user profiles, store maps, filtering options, and 3D object loading, instead of dynamic generation. The project faced issues with ARToolKit's OpenGL wrappers and limitations in accurately detecting user taps on 3D objects."),o.createElement("p",null,"The hi-fi prototype code repository is available on ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/elisa-lj11/Window"},"GitHub"),"."),o.createElement("p",null,"Our updated task flows using our hi-fi prototype are below."),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:KE,alt:"Hi-fi simple task flow",style:{width:"80%",display:"inline-block"}}),o.createElement("figcaption",null,"Hi-fi simple task flow"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:ZE,alt:"Hi-fi moderate task flow 1",style:{width:"80%",display:"inline-block"}}),o.createElement("figcaption",null,"Hi-fi moderate task flow"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:JE,alt:"Hi-fi moderate task flow 2",style:{width:"80%",display:"inline-block"}}),o.createElement("figcaption",null,"Hi-fi moderate task flow (cont.)"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:QE,alt:"Hi-fi complex task flow 1",style:{width:"80%",display:"inline-block"}}),o.createElement("figcaption",null,"Hi-fi complex task flow"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:eS,alt:"Hi-fi complex task flow 2",style:{width:"80%",display:"inline-block"}}),o.createElement("figcaption",null,"Hi-fi complex task flow (cont.)"))),o.createElement("p",null,'Due to time constraints leading up to our end-of-quarter project fair, we could not implement everything we had planned. Custom clothing measurements, which would allow users to see how items fit different body types, had to be left out of the high-fidelity prototype. We also set aside store scanning features, which would require collaboration with stores and recognition technology, to focus on core functionality. Finally, our "virtual closet" concept, intended for favoriting and revisiting items across store locations, was postponed.'),o.createElement("p",null,"Altogether, we finally had a working AR-enabled prototype ready to present to the world.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"fair"},o.createElement("h2",null,"Project Fair"),o.createElement("p",null,"We delivered a 30-second pitch at the CS 147 project fair alongside 44 other project teams. We also ran a demo table for attendees to try our prototype and learn about our process."),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:tS,alt:"Window poster",style:{width:"60%",display:"inline-block"}}),o.createElement("figcaption",null,"Window poster"))),o.createElement("p",null,"After ten weeks of late nights and constant iteration, we were proud to take our AR window shopping concept from a paper prototype to a functional app. It was an intense but rewarding process, where we gained experience in design strategies, teamwork, marketing, and collaborative coding.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"reflections"},o.createElement("h2",null,"Reflections"),o.createElement("ul",null,o.createElement("li",null,o.createElement("b",null,"Step outside of your comfort zone when seeking user insights."),o.createElement("ul",null,o.createElement("li",null,"Initially, I hesitated to approach strangers for feedback on our app, but I was pleasantly surprised by how willing many were to help. Engaging with people outside of my bubble provided valuable insights into diverse use cases for our app."))),o.createElement("li",null,o.createElement("b",null,"Let go of unproductive ideas."),o.createElement("ul",null,o.createElement("li",null,'We invested too much time trying to refine our "Closet" feature for better user understanding, rather than asking users whether it would be useful to them. If we had prioritized gathering feedback on this feature earlier, we might have recognized its lack of appeal sooner and avoided the frustration of attempting to improve something that users didn\'t want.'))),o.createElement("li",null,o.createElement("b",null,"Hype can work wonders!"),o.createElement("ul",null,o.createElement("li",null,"While we may not have achieved all our personal goals for the app, we generated enough excitement that users were more enthusiastic about its potential than any shortcomings. In such a short development cycle, it was incredibly motivating to see our users eagerly anticipating the next version of our prototype!"))))))},iS=i.p+"src/assets/images/who-am-i/linkedin-logo.png",aS=i.p+"src/assets/images/who-am-i/github-logo.png",oS=i.p+"src/assets/images/who-am-i/resume-icon.png",sS=i.p+"src/assets/images/who-am-i/email-icon.png",lS=i.p+"src/assets/images/who-am-i/soundcloud-logo.png",cS=i.p+"src/assets/images/who-am-i/spotify-logo.png",uS=i.p+"src/assets/images/who-am-i/spaced-out.jpg",dS=i.p+"src/assets/images/who-am-i/space-pets.jpg",hS=i.p+"src/assets/images/who-am-i/panama-farm.jpeg",pS=i.p+"src/assets/images/who-am-i/space-grad.png";function fS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const mS=function(){var e,t,n=(e=(0,o.useState)([]),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return fS(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fS(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],i=n[1];return o.createElement(pb,{refs:r,setRefs:i,generateRefsFromDOM:function(e){e()}},o.createElement("div",{className:"section",id:"overview"},o.createElement("h2",{style:{display:"none"}},"Overview"),o.createElement("h1",null,'Who is "Elisa Lupin-Jimenez"?'),o.createElement("img",{src:uS,alt:"Spaced Out",width:"50%"}),o.createElement("br",null),o.createElement("p",null,"I'm a bit of a night owl. When I'm not outside gazing at the stars, wondering how we ended up as these little sentient specks on this vast cosmic canvas floating aimlessly in the ether, I'm up late daydreaming of unconventional ways to make sense of our existence."),o.createElement("p",null,'I\'ve dabbled in a lot of things: I\'m an engineer, a singer, a designer, a festival-goer, a teacher, a pianist, a petsitter, a student, a gaymer, a writer, a long furby enthusiast (not in any particular order). I ask myself "Who am I?" every day, and I wish I could give you a better answer. I guess, in the most abstract sense, I am whoever I am at this exact moment, and any artifacts that remain from my past are just echoes of who I used to be. Maybe a better question is "Who do I want to become?" Now for this, I can give a relatively short answer:'),o.createElement("h3",null,o.createElement("b",null,"I want to become a person who makes a positive impact in this slice of spacetime that we concurrently experience.")),o.createElement("p",null,"Anyway, enough armchair philosophizing. Look below to see who I used to be.")),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"Links"},o.createElement("h2",null,"Links"),o.createElement("div",{className:"social-media-container"},o.createElement("a",{className:"social-media",target:"_blank",rel:"noopener noreferrer",href:"https://www.linkedin.com/in/elisa-lupin/"},o.createElement("img",{className:"social-media",src:iS}),"LinkedIn"),o.createElement("a",{className:"social-media",target:"_blank",rel:"noopener noreferrer",href:"https://github.com/elisa-lj11"},o.createElement("img",{className:"social-media",src:aS}),"GitHub"),o.createElement("a",{className:"social-media",target:"_blank",rel:"noopener noreferrer",href:"https://drive.google.com/file/d/1yRedX4BKhU3c8ZpC5FHdRXyVhrszH0rw/view?usp=sharing"},o.createElement("img",{className:"social-media",src:oS}),"Resume"),o.createElement("a",{className:"social-media",href:"mailto:elisa.lupinj@gmail.com"},o.createElement("img",{className:"social-media",src:sS}),"Email"),o.createElement("a",{className:"social-media",target:"_blank",rel:"noopener noreferrer",href:"https://soundcloud.com/djbudgiebeats"},o.createElement("img",{className:"social-media",src:lS}),"SoundCloud"),o.createElement("a",{className:"social-media",target:"_blank",rel:"noopener noreferrer",href:"https://open.spotify.com/user/5eakug67hyf80pi6igg30qmcg?si=0c3213f09cad4704"},o.createElement("img",{className:"social-media",src:cS}),"Spotify Playlists"))),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"values"},o.createElement("h2",null,"Values"),o.createElement("ol",null,o.createElement("li",null,o.createElement("b",{style:{fontWeight:"bold"}},"Curiosity"),o.createElement("ul",null,o.createElement("li",null,"I approach new problems with an open mind and a beginner's mentality. When stepping into unfamiliar domains, I've found that I learn best by asking many questions early and often (not sparing the dumb ones). Pairing the humility to admit what I don't know with the curiosity to seek out answers has led me to discover fascinating insights I didn't even realize I was missing."))),o.createElement("li",null,o.createElement("b",{style:{fontWeight:"bold"}},"Creativity"),o.createElement("ul",null,o.createElement("li",null,"Why remake something for the thousandth time when we can create work that is novel and engaging? Foundational knowledge is essential for building functionality, but I challenge myself to find new ways to fulfill the original purpose of a design while infusing it with nontraditional methods that make the result not only useful, but delightful."))),o.createElement("li",null,o.createElement("b",{style:{fontWeight:"bold"}},"Community"),o.createElement("ul",null,o.createElement("li",null,"In a world increasingly shaped by technology and individualism, it's easy to lose sight of our collective roots. We're inherently wired to thrive in community settings, which is why I believe it's crucial to prioritize people in technology design. Technology should foster our connections, not hinder them.")))),o.createElement("p",null,"A little bit of inspiration for my website (and perhaps my life):"),o.createElement("div",{className:"video-youtube"},o.createElement("iframe",{className:"responsive-iframe",src:"https://www.youtube.com/embed/VofkquwmT40?si=pWm2IUDGlIcW0Ilw&amp;start=34",title:"Futurama Quote",frameBorder:"0",allow:"autoplay; encrypted-media;",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0}))),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"personal"},o.createElement("h2",null,"Personal"),o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center"}},o.createElement("figure",null,o.createElement("img",{src:dS,alt:"Space Pets",width:"80%",style:{display:"inline-block"}}),o.createElement("figcaption",null,"Obligatory pet pics"))),o.createElement("p",null,"I am devoted to my tuxedo cat, Azalea (and dearly miss my labradoodle, Zody). We love going for walksâ€”Azalea rides in her \"astronaut\" cat backpackâ€”and we often enjoy warm afternoon naps in the sun. When I'm not catering to Azalea's whims, I am:"),o.createElement("ul",null,o.createElement("li",null,"Learning anime and other TV theme songs on the piano"),o.createElement("li",null,"Playing cozy video games"),o.createElement("li",null,"Planning remote camping/backpacking trips"),o.createElement("li",null,"Scuba diving and hiking in new countries"),o.createElement("li",null,"Finding cheap hole-in-the-wall restaurants"))),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"education"},o.createElement("h2",null,"Education"),o.createElement("h3",null,"University of California, Berkeley"),o.createElement("i",null,"August 2025 - December 2026 (expected)"),o.createElement("p",null,"I am a master's student at the ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.berkeley.edu/"},"University of California, Berkeley")," in the ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://design.berkeley.edu/about-mdes"},"Master of Design")," program, which emphasizes a critical approach to design and social practice to address the new realities of emerging technologies. Through this program, I aim to explore human-centered design, human-computer interaction, and user interface design, with a focus on creating innovative physical-digital interfaces that facilitate interpersonal connections."),o.createElement("br",null),o.createElement("br",null),o.createElement("h3",null,"Stanford University"),o.createElement("i",null,"September 2014 - June 2019"),o.createElement("img",{src:pS,alt:"Space Grad",width:"50%"}),o.createElement("p",null,"I graduated from ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.stanford.edu/"},"Stanford University")," with a Bachelor of Science in ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://symsys.stanford.edu/"},"Symbolic Systems"),', an interdisciplinary program that branches across computer science, linguistics, philosophy, and psychology. My concentration was "Human-Computer Interaction," where I focused on the design, usability, and evaluation of interactive systems, exploring how technology can be better integrated with human needs and behaviors.')),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"section",id:"experience"},o.createElement("h2",null,"Experience"),o.createElement("h3",null,"Funemployment"),o.createElement("i",null,"February 2024 - July 2025"),o.createElement("br",null),o.createElement("br",null),o.createElement("img",{src:hS,alt:"Farming in PanamÃ¡",width:"80%"}),o.createElement("p",null,"I left Strivr in January 2024 to explore my dream of living remotely on a farm in PanamÃ¡ through the volunteer program ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://wwoof.net/"},"WWOOF"),". Motivated to connect to my Panamanian roots by learning Spanish, and inspired by my video game experience with virtual farming in ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.stardewvalley.net/"},"Stardew Valley"),", I moved to Boquete, a mountainous region famous for its coffee. Four months of real-life farming later, I realized it was, unsurprisingly, more fun in a video game, so I returned to California to figure out my next steps."),o.createElement("p",null,"After a period of soul-searching, I decided to apply to graduate school and was accepted into UC Berkeley's Master of Design program for emerging technology. In the meantime, I worked as a barista to learn both the craft of coffee-making and the art of small talk, volunteered at the ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.exploratorium.edu/"},"Exploratorium")," (a public learning laboratory blending science and art), and traveled through Europe with family."),o.createElement("br",null),o.createElement("br",null),o.createElement("h3",null,"Strivr"),o.createElement("i",null,"April 2020 - January 2024"),o.createElement("p",null,"After returning from Asia, I joined ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.strivr.com/"},"Strivr"),", an end-to-end immersive learning platform for enterprise training, as a software engineer on the Immersive Experiences team, where we developed user-facing interactions in virtual reality to facilitate immersive learning and enable a world-class, intuitive experience for users of varying VR familiarity. I discuss my work in more detail on my ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"".concat("/").concat("#/strivr")},"Strivr project page"),"."),o.createElement("br",null),o.createElement("br",null),o.createElement("h3",null,"Taiwan Institute of Economic Research"),o.createElement("i",null,"June 2019 - August 2019"),o.createElement("p",null,"I moved abroad to Taiwan to work as a Natural Language Processing Software Engineering intern at the ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://english.tier.org.tw/"},"Taiwan Institute of Economic Research")," (TIER), where I created and refined NLP analysis programs to parse information about XR technology updates from relevant databases for TIER's industry analysis."),o.createElement("br",null),o.createElement("br",null),o.createElement("h3",null,"Stanford Immersive Journalism"),o.createElement("i",null,"January 2019 - March 2019",o.createElement("br",null),"January 2016 - March 2016"),o.createElement("p",null,"In my sophomore and senior years, I was a lab assistant for Stanford's course ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://navigator.stanford.edu/classes/1246/29611"},'"Immersive (VR/AR) Journalism in the Public Sphere"'),", where I contributed to curriculum development and taught best practices and methods in 360Â° video production and postproduction. A journalistic piece I produced from this class is featured on my ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"".concat("/").concat("#/immersive-media")},"Immersive Media project page"),"."),o.createElement("br",null),o.createElement("br",null),o.createElement("h3",null,"High Fidelity"),o.createElement("i",null,"November 2017 - June 2018"),o.createElement("p",null,"In between my junior and senior years, I took an opportunity to work full-time as a software engineer at ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://en.wikipedia.org/wiki/High_Fidelity,_Inc."},"High Fidelity"),", formerly a social virtual reality startup based in San Francisco. I was part of the Content Prototyping team, where we developed innovative content to showcase our platform's potential, engage users, and inspire developers and content creators to push creative boundaries. I discuss my work in more detail on my ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"".concat("/").concat("#/hifi")},"High Fidelity project page"),"."),o.createElement("br",null),o.createElement("br",null),o.createElement("h3",null,"Stanford Virtual Human Interaction Lab"),o.createElement("i",null,"March 2019 - June 2019",o.createElement("br",null),"September 2015 - December 2016"),o.createElement("p",null,"During my undergraduate studies at Stanford, I worked in the ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://vhil.stanford.edu/"},"Virtual Human Interaction Lab"),", where research focuses on studying the psychological and behavioral effects of Virtual Reality (VR) and Augmented Reality (AR). I initially joined as a programmer to build immersive components for experimental designs such as the ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://vhil.stanford.edu/projects/2020/empathy-and-perspective-taking"},'"Empathy at Scale"')," project. I later returned as a lab assistant to help facilitate experimental studies."),o.createElement("br",null),o.createElement("br",null),o.createElement("h3",null,"Miscellaneous"),o.createElement("p",null,"I began teaching piano and tutoring in math and writing as a kid and continued through college. I also took on side jobs like dog washing and dog walking.")))},gS=i.p+"src/assets/images/accessible/strivr.png",vS=i.p+"src/assets/images/accessible/spaceship.jpg",yS=i.p+"src/assets/images/accessible/local-hive.png",bS=i.p+"src/assets/images/accessible/hifi.png",xS=i.p+"src/assets/images/accessible/orgasmr.jpg",wS=i.p+"src/assets/images/accessible/rv-vr.png",_S=i.p+"src/assets/images/accessible/window.png";function ES(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const SS=function(){var e,t,n=(e=(0,o.useState)([]),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ES(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ES(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],i=n[1],a=te(),s=[{id:"strivr",title:'Strivr: "Immersive Lobby" Upgrade',imageUrl:gS},{id:"spaceship",title:'"Scavenger\'s Gain": From Hotel Room to Spaceship Adventure',imageUrl:vS},{id:"local-hive",title:'"Local Hive": A Human-Centered AI Project',imageUrl:yS},{id:"hifi",title:"High Fidelity: Content Prototyping",imageUrl:bS},{id:"orgasmr",title:'"orgASMR": A Head-Scratching Musical Interface',imageUrl:xS},{id:"immersive-media",title:"Immersive Media: An Exploration of 360Â° Video Experiences",imageUrl:wS},{id:"window",title:'"Window": An AR Clothes Shopping App',imageUrl:_S}],l=function(e){a("/".concat(e))};return o.createElement(pb,{refs:r,setRefs:i,generateRefsFromDOM:function(e){e()}},o.createElement("div",{className:"section",id:"overview"},o.createElement("h2",{style:{display:"none"}},"Overview"),o.createElement("h1",null,"You have warped to Elisa's space"),o.createElement("h3",null,"(Accessible view)"),o.createElement("p",null,"A far-out portfolio of my projects from work, school, and leisure. Select a button to get a deeper look."),o.createElement("p",null,o.createElement("span",{className:"span-link",onClick:function(){return l("who-am-i")}},"Who am I?"))),o.createElement("hr",{className:"solid"}),o.createElement("div",{className:"grid-container"},s.map(function(e){return o.createElement("div",{key:e.id,className:"button-accessible",onClick:function(){return l(e.id)},style:{cursor:"pointer"}},o.createElement("div",{className:"button-title",style:{backgroundImage:"url(".concat(e.imageUrl,")")}},o.createElement("span",null,e.title)))})))};function MS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const TS=function(){var e,t,n=(e=(0,o.useState)(!1),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return MS(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?MS(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],i=n[1],a=te();return o.createElement("div",{style:{textAlign:"center",marginTop:"50px",height:"100vh",cursor:"url(".concat(Zy,"), auto")}},o.createElement("h1",null,"404 - Page Not Found"),o.createElement("p",null,"Oops! The page you are looking for has crossed the event horizon."),o.createElement("button",{onClick:function(){a("/")},onMouseEnter:function(){return i(!0)},onMouseLeave:function(){return i(!1)},style:{padding:"5px 10px",fontSize:"16px",cursor:"pointer",marginTop:"20px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",height:"50px",whiteSpace:"nowrap",overflow:"hidden",maxWidth:"90%",border:"none",backgroundColor:"#2d2d2d",color:"white",borderRadius:"5px",fontWeight:r?"bold":"normal",transition:"font-weight 0.2s"}},o.createElement("img",{src:ub,style:{width:"auto",height:"40px",marginRight:"5px"},alt:"Galaxy Icon"}),"Go back in time"))};var AS=i(157),CS={};CS.styleTagTransform=Gy(),CS.setAttributes=Hy(),CS.insert=zy().bind(null,"head"),CS.domAPI=Oy(),CS.insertStyleElement=jy(),Dy()(AS.A,CS),AS.A&&AS.A.locals&&AS.A.locals;const RS=function(){return(0,o.useEffect)(function(){var e=window.location.hash;try{var t=decodeURIComponent(e);t!==e&&(window.location.hash=t)}catch(t){window.location.hash=e}},[]),o.createElement("div",{className:"App"},o.createElement(Ue,null,o.createElement(fe,null,o.createElement(he,{path:"/",element:o.createElement(sb,null)}),o.createElement(he,{path:"/strivr",element:o.createElement(Nb,null)}),o.createElement(he,{path:"/spaceship",element:o.createElement(h_,null)}),o.createElement(he,{path:"/local-hive",element:o.createElement(Y_,null)}),o.createElement(he,{path:"/hifi",element:o.createElement(eE,null)}),o.createElement(he,{path:"/orgasmr",element:o.createElement(_E,null)}),o.createElement(he,{path:"/immersive-media",element:o.createElement(CE,null)}),o.createElement(he,{path:"/window",element:o.createElement(rS,null)}),o.createElement(he,{path:"/who-am-i",element:o.createElement(mS,null)}),o.createElement(he,{path:"/accessible",element:o.createElement(SS,null)}),o.createElement(he,{path:"*",element:o.createElement(TS,null)}))))};var PS=document.getElementById("root"),kS=(0,l.createRoot)(PS),IS=document.createElement("link");IS.rel="icon",IS.type="image/x-icon",IS.href="".concat("/").concat("src/assets/images/favicon.ico?"),document.head.appendChild(IS),kS.render(o.createElement(RS,null))})();